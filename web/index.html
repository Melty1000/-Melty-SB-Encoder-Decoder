<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Streamer.bot Export Tool</title>
    <link rel="stylesheet" href="style.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>

    <div class="app-container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="brand">
                <div class="logo-icon">SB</div>
                <div class="logo-text">
                    <h1>SB TOOL</h1>
                    <span>v3.0 Web</span>
                </div>
            </div>

            <ul class="nav-links">
                <li class="active" onclick="navigate('decoder')">
                    <span class="icon">üìÇ</span> Decoder
                </li>
                <li onclick="navigate('encoder')">
                    <span class="icon">üì¶</span> Encoder
                </li>
                <li onclick="navigate('help')">
                    <span class="icon">‚ùì</span> Help Guide
                </li>
            </ul>

            <div class="nav-footer">
                <li onclick="navigate('support')">
                    <span class="icon">‚ù§</span> Support Me
                </li>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="content">
            
            <!-- PAGE: DECODER -->
            <div id="page-decoder" class="page active">
                <header>
                    <h2>Decoder</h2>
                    <p>Extract C# scripts from Streamer.bot export strings.</p>
                </header>

                <div class="card input-card">
                    <div class="toolbar">
                        <button class="btn-secondary" onclick="openFile()">üìÇ Open File</button>
                        <span class="label">or paste string below</span>
                        <button class="btn-primary" onclick="decodeExport()">‚ñ∂ DECODE</button>
                    </div>
                    <textarea id="decoder-input" placeholder="Paste export string here..."></textarea>
                </div>

                <div class="card output-card">
                    <div class="tabs">
                        <button class="tab-btn active" onclick="switchTab('scripts')">C# Scripts</button>
                        <button class="tab-btn" onclick="switchTab('json')">JSON Data</button>
                    </div>

                    <div id="tab-scripts" class="tab-content active">
                        <div class="split-view">
                            <div class="list-pane">
                                <input type="text" id="script-search" placeholder="üîç Search..." oninput="filterScripts()">
                                <ul id="script-list">
                                    <!-- Scripts will be injected here -->
                                </ul>
                            </div>
                            <div class="code-pane">
                                <div class="pane-header">
                                    <span>Code Preview</span>
                                    <button class="btn-sm" onclick="copyCode()">üìã Copy</button>
                                </div>
                                <pre><code id="code-preview">// Select a script to view code...</code></pre>
                            </div>
                        </div>
                    </div>

                    <div id="tab-json" class="tab-content">
                        <div class="pane-header">
                            <span>JSON Preview</span>
                            <button class="btn-sm" onclick="copyJson()">üìã Copy JSON</button>
                        </div>
                        <pre><code id="json-preview">{}</code></pre>
                    </div>
                </div>
            </div>

            <!-- PAGE: ENCODER -->
            <div id="page-encoder" class="page">
                <header>
                    <h2>Encoder</h2>
                    <p>Create import strings by injecting C# files into a JSON template.</p>
                </header>

                <div class="card">
                    <div class="step">
                        <h3>1. Base JSON Template</h3>
                        <p>Select the JSON file defining your actions. Use <code>"byteCode": "filename.cs"</code> placeholders.</p>
                        <div class="input-group">
                            <input type="text" id="enc-json-path" placeholder="Path to template.json" readonly>
                            <button class="btn-secondary" onclick="browseJson()">üìÇ Browse</button>
                        </div>
                    </div>

                    <div class="step">
                        <h3>2. Scripts Folder</h3>
                        <p>Select the folder containing your .cs files referenced in the JSON.</p>
                        <div class="input-group">
                            <input type="text" id="enc-folder-path" placeholder="Path to scripts folder" readonly>
                            <button class="btn-secondary" onclick="browseFolder()">üìÇ Browse</button>
                        </div>
                    </div>

                    <button class="btn-primary btn-large" onclick="encodeExport()">‚ö° GENERATE IMPORT STRING</button>
                </div>

                <div class="card output-card">
                    <div class="pane-header">
                        <h3>Output</h3>
                        <button class="btn-secondary" onclick="copyEncoderOutput()">üìã Copy Output</button>
                    </div>
                    <textarea id="encoder-output" readonly placeholder="Generated import string will appear here..."></textarea>
                </div>
            </div>

            <!-- PAGE: HELP -->
            <div id="page-help" class="page">
                <header>
                    <h2>Help Guide</h2>
                </header>
                <div class="card scrollable">
                    <div class="help-section">
                        <h3>Decoding an Export</h3>
                        <ol>
                            <li>Go to the <b>Decoder</b> tab.</li>
                            <li>Click <b>Open File</b> to load a text file, or paste the string directly.</li>
                            <li>Click <b>DECODE</b>.</li>
                            <li>Browse the extracted C# scripts in the list.</li>
                            <li>Click <b>Save All Scripts</b> (bottom right) to export them.</li>
                        </ol>
                    </div>
                    <div class="help-section">
                        <h3>Creating an Export (Encoder)</h3>
                        <ol>
                            <li>Create a <b>Base JSON</b> file defining your actions.</li>
                            <li>For 'Execute C#' sub-actions, set <code>"byteCode": "MyScript.cs"</code>.</li>
                            <li>Go to the <b>Encoder</b> tab.</li>
                            <li>Select your Base JSON and the folder containing your .cs files.</li>
                            <li>Click <b>GENERATE</b> to create the import string.</li>
                        </ol>
                    </div>
                </div>
            </div>

            <!-- PAGE: SUPPORT -->
            <div id="page-support" class="page">
                <div class="center-box">
                    <h2>Support the Developer</h2>
                    <p>If you find this tool useful, consider supporting the project!</p>
                    
                    <button class="btn-kofi" onclick="openLink('https://ko-fi.com')">‚òï Buy me a Coffee</button>
                    <button class="btn-github" onclick="openLink('https://github.com')">‚≠ê Star on GitHub</button>
                    
                    <p class="footer-msg">Thank you for using Streamer.bot Export Tool!</p>
                </div>
            </div>

        </main>

        <!-- Status Bar -->
        <footer class="status-bar">
            <div class="status-left">
                <span id="status-text">Ready</span>
            </div>
            <div class="status-right">
                <div id="loader" class="loader hidden"></div>
                <button id="btn-save-all" class="btn-text" onclick="saveAllScripts()" disabled>üíæ Save All Scripts</button>
            </div>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
