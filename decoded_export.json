{
    "meta": {
        "name": "MOD TOOLS",
        "author": "tawmae",
        "version": "2.0.3",
        "description": "www.tawmae.xyz",
        "autoRunAction": null,
        "minimumVersion": null
    },
    "data": {
        "actions": [
            {
                "id": "6ecc813e-84a5-4be2-b7de-f5685eee8d18",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] [#] 1 - Settings",
                "group": "MOD TOOLS - # Settings",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "variables": {},
                        "id": "a0e04468-b557-4b96-aef5-f9e5dd3fe5ba",
                        "type": 702,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "v.2.0.3",
                        "color": "",
                        "id": "aefb989e-517a-4015-9a75-b69f4fbc8c72",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "value": "Rightclick the \"Test\" trigger and hit \"Test Trigger\" to open the Settings UI",
                        "color": "#FF80FF",
                        "id": "f1a30992-6f46-4f6d-a3ae-8a14471faddf",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    },
                    {
                        "name": "TawmaeUI DLL & Version Check",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "3e173940-535d-4b03-942c-bae15954f4c8",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "27f00b22-f7a1-4937-b93d-ffbc337952f1",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "name": "TawmaeUI DLL Check",
                                "description": null,
                                "references": [
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\mscorlib.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.dll",
                                    ".\\Microsoft.Toolkit.Uwp.Notifications.dll",
                                    ".\\Microsoft.Toolkit.Uwp.Notifications.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Windows.Forms.dll",
                                    ".\\Microsoft.Toolkit.Uwp.Notifications.dll"
                                ],
                                "byteCode": "dXNpbmcgU3lzdGVtOw0KdXNpbmcgU3lzdGVtLklPOw0KdXNpbmcgTWljcm9zb2Z0LlRvb2xraXQuVXdwLk5vdGlmaWNhdGlvbnM7DQp1c2luZyBTeXN0ZW0uRGlhZ25vc3RpY3M7DQp1c2luZyBTeXN0ZW0uTmV0Ow0KdXNpbmcgU3lzdGVtLldpbmRvd3MuRm9ybXM7DQoNCnB1YmxpYyBjbGFzcyBDUEhJbmxpbmUNCnsNCiAgICBwdWJsaWMgc3RyaW5nIGV4dGVuc2lvbk5hbWU7DQogICAgcHVibGljIHN0cmluZyBleHRlbnNpb25WZXJzaW9uOw0KICAgIHB1YmxpYyBzdHJpbmcgZmlsZVBhdGg7DQogICAgcHVibGljIHN0cmluZyBkbGxEaXI7DQogICAgcHVibGljIHN0cmluZyBkbGxGaWxlUGF0aDsNCiAgICBwdWJsaWMgc3RyaW5nIGRsbFVybDsNCiAgICBwdWJsaWMgYm9vbCBFeGVjdXRlKCkNCiAgICB7DQogICAgICAgIENQSC5FeGVjdXRlTWV0aG9kKCJNT0QgVE9PTFMgVmVyc2lvbiBDaGVjayIsICJFeGVjdXRlIik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImV4dGVuc2lvbk5hbWUiLCBvdXQgZXh0ZW5zaW9uTmFtZSk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImV4dGVuc2lvblZlcnNpb24iLCBvdXQgZXh0ZW5zaW9uVmVyc2lvbik7DQogICAgICAgIGZpbGVQYXRoID0gRGlyZWN0b3J5LkdldEN1cnJlbnREaXJlY3RvcnkoKTsNCiAgICAgICAgaWYgKGZpbGVQYXRoLkluZGV4T2YoInN5c3RlbTMyIiwgU3RyaW5nQ29tcGFyaXNvbi5PcmRpbmFsSWdub3JlQ2FzZSkgPj0gMCkNCiAgICAgICAgew0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiR2V0Q3VycmVudERpcmVjdG95IGZhaWxlZCBhbmQgcmV0dXJuZWQgdGhpcyB3ZWlyZCBwYXRoOiB7ZmlsZVBhdGh9IC8vIEF0dGVtcHRpbmcgdmlhIEN1cnJlbnREb21haW4uQmFzZURpcmVjdG9yeS4uLiIpOw0KICAgICAgICAgICAgZmlsZVBhdGggPSBBcHBEb21haW4uQ3VycmVudERvbWFpbi5CYXNlRGlyZWN0b3J5Ow0KICAgICAgICB9DQoNCiAgICAgICAgZGxsRGlyID0gUGF0aC5Db21iaW5lKGZpbGVQYXRoLCAiZGxscyIpOw0KICAgICAgICBkbGxGaWxlUGF0aCA9IFBhdGguQ29tYmluZShmaWxlUGF0aCwgImRsbHMiLCAiVGF3bWFlVUkuZGxsIik7DQogICAgICAgIGRsbFVybCA9ICJodHRwczovL2dpdGh1Yi5jb20vdGF3bWFlL3Rhd21hZS9yYXcvcmVmcy9oZWFkcy9tYWluL2RsbC9UYXdtYWVVSS5kbGwiOw0KICAgICAgICBpZiAoIUZpbGUuRXhpc3RzKGRsbEZpbGVQYXRoKSkNCiAgICAgICAgew0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiZGxsIG5vdCBmb3VuZC4gZmlsZVBhdGg6IHtmaWxlUGF0aH0gLy8gZGxsRmlsZXBhdGg6IHtkbGxGaWxlUGF0aH0gLy8gU2hvd2luZyBkb3dubG9hZCBwcm9tcHQuLi4iKTsNCiAgICAgICAgICAgIERvd25sb2FkUG9wdXAoKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICBQb3N0VG9Mb2coJCJETEwgZm91bmQ6IGZpbGVQYXRoIHtmaWxlUGF0aH0gLy8gZGxsRmlsZXBhdGg6IHtkbGxGaWxlUGF0aH0iKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgcHVibGljIHN0YXRpYyB2b2lkIFNob3dOb3RpZmljYXRpb24oc3RyaW5nIHRpdGxlLCBzdHJpbmcgdGV4dCwgc3RyaW5nIGJ1dHRvblRpdGxlLCBzdHJpbmcgYnV0dG9uVXJsKQ0KICAgIHsNCiAgICAgICAgc3RyaW5nIGxvY2FsSW1hZ2VQYXRoID0gRG93bmxvYWRJbWFnZSgiaHR0cHM6Ly9naXRodWIuY29tL3Rhd21hZS90YXdtYWUvYmxvYi9tYWluL2Fzc2V0cy9wYWdlLWRlc2lnbi90b2FzdC1sb2dvLWNpcmNsZS5wbmc/cmF3PXRydWUiKTsNCiAgICAgICAgbmV3IFRvYXN0Q29udGVudEJ1aWxkZXIoKS5BZGRBcHBMb2dvT3ZlcnJpZGUobmV3IFVyaShsb2NhbEltYWdlUGF0aCkpLkFkZFRleHQodGl0bGUpLkFkZFRleHQodGV4dCkuQWRkQnV0dG9uKG5ldyBUb2FzdEJ1dHRvbigpLlNldENvbnRlbnQoYnV0dG9uVGl0bGUpLkFkZEFyZ3VtZW50KCJhY3Rpb24iLCAib3BlblVybCIpLkFkZEFyZ3VtZW50KCJ1cmwiLCBidXR0b25VcmwpKS5BZGRCdXR0b24obmV3IFRvYXN0QnV0dG9uRGlzbWlzcygpKS5TaG93KCk7DQogICAgICAgIFRvYXN0Tm90aWZpY2F0aW9uTWFuYWdlckNvbXBhdC5PbkFjdGl2YXRlZCArPSBlID0+DQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBhcmdzID0gVG9hc3RBcmd1bWVudHMuUGFyc2UoZS5Bcmd1bWVudCk7DQogICAgICAgICAgICBpZiAoYXJncy5Db250YWlucygiYWN0aW9uIikgJiYgYXJnc1siYWN0aW9uIl0gPT0gIm9wZW5VcmwiKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciB1cmwgPSBhcmdzWyJ1cmwiXTsNCiAgICAgICAgICAgICAgICBQcm9jZXNzLlN0YXJ0KG5ldyBQcm9jZXNzU3RhcnRJbmZvKHVybCkgeyBVc2VTaGVsbEV4ZWN1dGUgPSB0cnVlIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgIH0NCg0KICAgIHByaXZhdGUgc3RhdGljIHN0cmluZyBEb3dubG9hZEltYWdlKHN0cmluZyB1cmwpDQogICAgew0KICAgICAgICBzdHJpbmcgZmlsZVBhdGggPSBQYXRoLkNvbWJpbmUoUGF0aC5HZXRUZW1wUGF0aCgpLCAibm90aWZpY2F0aW9uX2xvZ28ucG5nIik7DQogICAgICAgIHdlYkNsaWVudC5Eb3dubG9hZEZpbGUodXJsLCBmaWxlUGF0aCk7DQogICAgICAgIHJldHVybiBmaWxlUGF0aDsNCiAgICB9DQoNCiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBXZWJDbGllbnQgd2ViQ2xpZW50ID0gbmV3IFdlYkNsaWVudA0KICAgIHsNCiAgICAgICAgRW5jb2RpbmcgPSBTeXN0ZW0uVGV4dC5FbmNvZGluZy5VVEY4DQogICAgfTsNCiAgICBwdWJsaWMgdm9pZCBEaXNwb3NlKCkNCiAgICB7DQogICAgICAgIHdlYkNsaWVudD8uRGlzcG9zZSgpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIFBvc3RUb0xvZyhzdHJpbmcgbG9nKQ0KICAgIHsNCiAgICAgICAgQ1BILkxvZ0luZm8oJCJbVGF3bWFlVUldIERMTCBGSUxFIENIRUNLOiB7bG9nfSIpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIERvd25sb2FkUG9wdXAoKQ0KICAgIHsNCiAgICAgICAgdmFyIHJlc3VsdCA9IE1lc3NhZ2VCb3guU2hvdygiVGhlIFRhd21hZVVJLmRsbCBpcyByZXF1aXJlZCB0byBydW4gdGhpcyBleHRlbnNpb24uIERvIHlvdSB3aXNoIHRvIGF1dG9tYXRpY2FsbHkgaGF2ZSBpdCBkb3dubG9hZGVkIHRvIHlvdXIgU3RyZWFtZXIuYm90IGRpcmVjdG9yeT8gSWYgeW91IHdpc2ggdG8gbWFudWFsbHkgZG93bmxvYWQsIHlvdSBjYW4gZmluZCBpdCBhdCB0YXdtYWUueHl6L2RsbCIsIGV4dGVuc2lvbk5hbWUsIE1lc3NhZ2VCb3hCdXR0b25zLlllc05vLCBNZXNzYWdlQm94SWNvbi5RdWVzdGlvbik7DQogICAgICAgIGlmIChyZXN1bHQgPT0gRGlhbG9nUmVzdWx0LlllcykNCiAgICAgICAgew0KICAgICAgICAgICAgQWNjZXB0KCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBSZWplY3QoKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHByaXZhdGUgdm9pZCBBY2NlcHQoKQ0KICAgIHsNCiAgICAgICAgUG9zdFRvTG9nKCJBdHRlbXB0aW5nIHRvIGRvd25sb2FkIGRsbC4uLiIpOw0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgRGlyZWN0b3J5LkNyZWF0ZURpcmVjdG9yeShkbGxEaXIpOw0KICAgICAgICAgICAgdXNpbmcgdmFyIHdjID0gbmV3IFdlYkNsaWVudCgpOw0KICAgICAgICAgICAgd2MuRW5jb2RpbmcgPSBTeXN0ZW0uVGV4dC5FbmNvZGluZy5VVEY4Ow0KICAgICAgICAgICAgd2MuRG93bmxvYWRGaWxlKGRsbFVybCwgZGxsRmlsZVBhdGgpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJTdWNjZXNzZnVsbHkgZG93bmxvYWRlZCB0aGUgZGxsLiIpOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpDQogICAgICAgIHsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkZhaWxlZCB0byBkb3dubG9hZCBkbGw6IHtleC5NZXNzYWdlfSIpOw0KICAgICAgICAgICAgU2hvd05vdGlmaWNhdGlvbigkIlRhd21hZVVJLmRsbCBub3QgZm91bmQiLCAkIlBsZWFzZSBkb3dubG9hZCB0aGUgLmRsbCBmaWxlIGFuZCBwdXQgaXQgaW50byB5b3VyIFN0cmVhbWVyLmJvdCBkaXJlY3Rvcnk6XG5cbntkbGxGaWxlUGF0aH0iLCAiRG93bmxvYWQiLCAiaHR0cHM6Ly90YXdtYWUueHl6L2RsbCIpOw0KICAgICAgICAgICAgTWVzc2FnZUJveC5TaG93KCQiRmFpbGVkIHRvIGRvd25sb2FkLiBQbGVhc2UgZG93bmxvYWQgdGhlIGRsbCBtYW51YWxseSAodGF3bWFlLnh5ei9kbGwpIGFuZCBwbGFjZSBpdCBpbiB5b3VyIFN0cmVhbWVyLmJvdCBkaXJlY3Rvcnk6IHtkbGxGaWxlUGF0aH0iLCBleHRlbnNpb25OYW1lLCBNZXNzYWdlQm94QnV0dG9ucy5PSywgTWVzc2FnZUJveEljb24uV2FybmluZyk7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwcml2YXRlIHZvaWQgUmVqZWN0KCkNCiAgICB7DQogICAgICAgIE1lc3NhZ2VCb3guU2hvdygiRG93bmxvYWQgYWJvcnRlZC4gSWYgeW91IHdpc2ggdG8gZG93bmxvYWQgdGhlIGRsbCBtYW51YWxseSwgeW91IGNhbiBkbyBzbyBhdCB0YXdtYWUueHl6L2RsbCIsIGV4dGVuc2lvbk5hbWUsIE1lc3NhZ2VCb3hCdXR0b25zLk9LLCBNZXNzYWdlQm94SWNvbi5JbmZvcm1hdGlvbik7DQogICAgfQ0KfQ==",
                                "precompile": false,
                                "delayStart": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "a6725d7f-1e6b-4b6b-b645-18b0d2d6f9e4",
                                "weight": 0.0,
                                "type": 99999,
                                "parentId": "27f00b22-f7a1-4937-b93d-ffbc337952f1",
                                "enabled": true,
                                "index": 1
                            },
                            {
                                "name": "TawmaeUI DLL Version Check",
                                "description": null,
                                "references": [
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\mscorlib.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.dll",
                                    ".\\dlls\\TawmaeUI.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Net.Http.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Net.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Core.dll",
                                    ".\\Newtonsoft.Json.dll",
                                    ".\\Microsoft.Bcl.AsyncInterfaces.dll",
                                    ".\\System.Threading.Tasks.Extensions.dll",
                                    ".\\Microsoft.CodeAnalysis.dll",
                                    ".\\System.Collections.Immutable.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Runtime.WindowsRuntime.dll",
                                    ".\\Microsoft.Toolkit.Uwp.Notifications.dll",
                                    ".\\dlls\\TawmaeUI.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Windows.Forms.dll",
                                    ".\\Microsoft.Toolkit.Uwp.Notifications.dll",
                                    ".\\dlls\\TawmaeUI.dll"
                                ],
                                "byteCode": "dXNpbmcgU3lzdGVtOw0KdXNpbmcgVGF3bWFlVUk7DQp1c2luZyBTeXN0ZW0uTGlucTsNCnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOw0KdXNpbmcgU3lzdGVtLk5ldC5IdHRwOw0KdXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrczsNCnVzaW5nIE5ld3RvbnNvZnQuSnNvbjsNCnVzaW5nIE5ld3RvbnNvZnQuSnNvbi5MaW5xOw0KdXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzOw0KdXNpbmcgU3lzdGVtLklPOw0KdXNpbmcgU3lzdGVtLk5ldDsNCnVzaW5nIE1pY3Jvc29mdC5Ub29sa2l0LlV3cC5Ob3RpZmljYXRpb25zOw0KdXNpbmcgU3lzdGVtLldpbmRvd3MuRm9ybXM7DQoNCnB1YmxpYyBjbGFzcyBDUEhJbmxpbmUNCnsNCiAgICBwdWJsaWMgc3RyaW5nIGV4dGVuc2lvbk5hbWU7DQogICAgcHVibGljIHN0cmluZyBleHRlbnNpb25WZXJzaW9uOw0KICAgIHByaXZhdGUgVGF3bWFlVUkuVGF3bWFlIGRhdGE7DQogICAgcHVibGljIGJvb2wgRXhlY3V0ZSgpDQogICAgew0KICAgICAgICBkYXRhID0gbmV3IFRhd21hZShDUEgsICJETEwgVmVyc2lvbiBDaGVjayIsIGV4dGVuc2lvblZlcnNpb24sIGZhbHNlKTsNCiAgICAgICAgQ1BILkV4ZWN1dGVNZXRob2QoIk1PRCBUT09MUyBWZXJzaW9uIENoZWNrIiwgIkV4ZWN1dGUiKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygiZXh0ZW5zaW9uTmFtZSIsIG91dCBleHRlbnNpb25OYW1lKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygiZXh0ZW5zaW9uVmVyc2lvbiIsIG91dCBleHRlbnNpb25WZXJzaW9uKTsNCiAgICAgICAgLy8gUkVNRU1CRVIgVE8gQ0hBTkdFIFRIRSBURU1QIEFMUEhBIENIRUNLIExBVEVSIEB0YXdtYWUgLy8gZWRpdDI6IE5PISA+OigNCiAgICAgICAgc3RyaW5nIHNiVmVyc2lvbiA9IENQSC5HZXRWZXJzaW9uKCk7DQogICAgICAgIFZlcnNpb24gY3VycmVudFZlcnNpb24gPSBQYXJzZVZlcnNpb24oc2JWZXJzaW9uKTsNCiAgICAgICAgYm9vbCBpc0FscGhhID0gc2JWZXJzaW9uLkluZGV4T2YoImFscGhhIiwgU3RyaW5nQ29tcGFyaXNvbi5PcmRpbmFsSWdub3JlQ2FzZSkgPj0gMDsNCiAgICAgICAgVmVyc2lvbiBuZWVkZWRWZXJzaW9uID0gaXNBbHBoYSA/IG5ldyBWZXJzaW9uKDEsIDAsIDAsIDUzKSA6IG5ldyBWZXJzaW9uKDEsIDAsIDApOw0KICAgICAgICBpZiAoY3VycmVudFZlcnNpb24gPCBuZWVkZWRWZXJzaW9uKQ0KICAgICAgICB7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJTdHJlYW1lci5ib3QgdmVyc2lvbiBjaGVjayBmYWlsZWQuIEN1cnJlbnQgdmVyc2lvbjoge3NiVmVyc2lvbn0sIHJlcXVpcmVkIHZlcnNpb246IHtuZWVkZWRWZXJzaW9ufSIpOw0KICAgICAgICAgICAgc3RyaW5nIHJlcXVpcmVkVGV4dCA9IGlzQWxwaGEgPyAiYW4gYWxwaGEgYnVpbGQg4omlIDEuMC4wLWFscGhhLjUzIiA6ICIxLjAuMCI7DQogICAgICAgICAgICBzdHJpbmcgdGV4dCA9ICRAIlRoaXMgZXh0ZW5zaW9uIHJlcXVpcmVzIFN0cmVhbWVyLmJvdCB2ZXJzaW9uIHtyZXF1aXJlZFRleHR9LiBZb3UgY3VycmVudGx5IGFyZSBvbiB2ZXJzaW9uIHtzYlZlcnNpb259LiBQbGVhc2UgdXBkYXRlIFN0cmVhbWVyLmJvdC4iOw0KICAgICAgICAgICAgQ1BILlNob3dUb2FzdE5vdGlmaWNhdGlvbihleHRlbnNpb25OYW1lLCB0ZXh0LCAiSGVscCBhdDogdGF3bWFlLnh5ei9kaXNjb3JkIiwgImh0dHBzOi8vZ2l0aHViLmNvbS90YXdtYWUvdGF3bWFlL2Jsb2IvbWFpbi9hc3NldHMvcGFnZS1kZXNpZ24vdG9hc3QtbG9nby5wbmc/cmF3PXRydWUiKTsNCiAgICAgICAgICAgIE1lc3NhZ2VCb3guU2hvdyh0ZXh0LCBleHRlbnNpb25OYW1lLCBNZXNzYWdlQm94QnV0dG9ucy5PSywgTWVzc2FnZUJveEljb24uSW5mb3JtYXRpb24pOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgUG9zdFRvTG9nKCQiU3RyZWFtZXIuYm90IHZlcnNpb24gY2hlY2sgcGFzc2VkLiBDdXJyZW50IHZlcnNpb246IHtzYlZlcnNpb259LCByZXF1aXJlZCB2ZXJzaW9uOiB7bmVlZGVkVmVyc2lvbn0iKTsNCiAgICAgICAgLy8NCiAgICAgICAgc3RyaW5nIGRsbFZlcnNpb24gPSBkYXRhLkdldFZlcnNpb24oKTsNCiAgICAgICAgc3RyaW5nIG5fZGxsVmVyc2lvbiA9ICIxLjQuMSI7DQogICAgICAgIFZlcnNpb24gY3VycmVudF9kbGxWZXJzaW9uID0gUGFyc2VWZXJzaW9uKGRsbFZlcnNpb24pOw0KICAgICAgICBWZXJzaW9uIG5lZWRlZF9kbGxWZXJzaW9uID0gUGFyc2VWZXJzaW9uKG5fZGxsVmVyc2lvbik7DQogICAgICAgIGlmIChjdXJyZW50X2RsbFZlcnNpb24gPCBuZWVkZWRfZGxsVmVyc2lvbikNCiAgICAgICAgew0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiZGxsIHZlcnNpb24gY2hlY2sgZmFpbGVkLiBDdXJyZW50IHZlcnNpb246IHtkbGxWZXJzaW9ufSwgcmVxdWlyZWQgdmVyc2lvbjoge25fZGxsVmVyc2lvbn0iKTsNCiAgICAgICAgICAgIHN0cmluZyB0ZXh0ID0gJCJUaGlzIGV4dGVuc2lvbiByZXF1aXJlcyB0aGUgVGF3bWFlVUkuZGxsIHZlcnNpb24ge25fZGxsVmVyc2lvbn0gb3IgaGlnaGVyLiBZb3UgY3VycmVudGx5IGFyZSBvbiB2ZXJzaW9uIHtkbGxWZXJzaW9ufS4gUGxlYXNlIHVwZGF0ZS4iOw0KICAgICAgICAgICAgU2hvd05vdGlmaWNhdGlvbigkIlRhd21hZVVJLmRsbCBvdXQgb2YgZGF0ZSIsIHRleHQsICJVcGRhdGUiLCAiaHR0cHM6Ly90YXdtYWUueHl6L2RsbCIpOw0KICAgICAgICAgICAgTWVzc2FnZUJveC5TaG93KHRleHQgKyAiIFlvdSBjYW4gZG8gdGhhdCBieSBjbG9zaW5nIFN0cmVhbWVyLmJvdCwgZGVsZXRpbmcgdGhlIFRhd21hZVVJLmRsbCBmcm9tIHlvdXIgJ2RsbHMnIGZvbGRlciBpbiB5b3VyIFN0cmVhbWVyLmJvdCBkaXJlY3RvcnkgYW5kIHRoZW4gcnVubmluZyB0aGUgU2V0dGluZ3MgVUkgYWdhaW4uIiwgZXh0ZW5zaW9uTmFtZSwgTWVzc2FnZUJveEJ1dHRvbnMuT0ssIE1lc3NhZ2VCb3hJY29uLkluZm9ybWF0aW9uKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIFBvc3RUb0xvZygkIkRMTCB2ZXJzaW9uIGNoZWNrIHBhc3NlZC4gQ3VycmVudCB2ZXJzaW9uOiB7ZGxsVmVyc2lvbn0sIHJlcXVpcmVkIHZlcnNpb246IHtuX2RsbFZlcnNpb259Iik7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTaG93Tm90aWZpY2F0aW9uKHN0cmluZyB0aXRsZSwgc3RyaW5nIHRleHQsIHN0cmluZyBidXR0b25UaXRsZSwgc3RyaW5nIGJ1dHRvblVybCkNCiAgICB7DQogICAgICAgIHN0cmluZyBsb2NhbEltYWdlUGF0aCA9IERvd25sb2FkSW1hZ2UoImh0dHBzOi8vZ2l0aHViLmNvbS90YXdtYWUvdGF3bWFlL2Jsb2IvbWFpbi9hc3NldHMvcGFnZS1kZXNpZ24vdG9hc3QtbG9nby1jaXJjbGUucG5nP3Jhdz10cnVlIik7DQogICAgICAgIG5ldyBUb2FzdENvbnRlbnRCdWlsZGVyKCkuQWRkQXBwTG9nb092ZXJyaWRlKG5ldyBVcmkobG9jYWxJbWFnZVBhdGgpKS5BZGRUZXh0KHRpdGxlKS5BZGRUZXh0KHRleHQpLkFkZEJ1dHRvbihuZXcgVG9hc3RCdXR0b24oKS5TZXRDb250ZW50KGJ1dHRvblRpdGxlKS5BZGRBcmd1bWVudCgiYWN0aW9uIiwgIm9wZW5VcmwiKS5BZGRBcmd1bWVudCgidXJsIiwgYnV0dG9uVXJsKSkuQWRkQnV0dG9uKG5ldyBUb2FzdEJ1dHRvbkRpc21pc3MoKSkuU2hvdygpOw0KICAgICAgICBUb2FzdE5vdGlmaWNhdGlvbk1hbmFnZXJDb21wYXQuT25BY3RpdmF0ZWQgKz0gZSA9Pg0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgYXJncyA9IFRvYXN0QXJndW1lbnRzLlBhcnNlKGUuQXJndW1lbnQpOw0KICAgICAgICAgICAgaWYgKGFyZ3MuQ29udGFpbnMoImFjdGlvbiIpICYmIGFyZ3NbImFjdGlvbiJdID09ICJvcGVuVXJsIikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgdXJsID0gYXJnc1sidXJsIl07DQogICAgICAgICAgICAgICAgUHJvY2Vzcy5TdGFydChuZXcgUHJvY2Vzc1N0YXJ0SW5mbyh1cmwpIHsgVXNlU2hlbGxFeGVjdXRlID0gdHJ1ZSB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCiAgICB9DQoNCiAgICBwcml2YXRlIHN0YXRpYyBzdHJpbmcgRG93bmxvYWRJbWFnZShzdHJpbmcgdXJsKQ0KICAgIHsNCiAgICAgICAgc3RyaW5nIGZpbGVQYXRoID0gUGF0aC5Db21iaW5lKFBhdGguR2V0VGVtcFBhdGgoKSwgIm5vdGlmaWNhdGlvbl9sb2dvLnBuZyIpOw0KICAgICAgICB3ZWJDbGllbnQuRG93bmxvYWRGaWxlKHVybCwgZmlsZVBhdGgpOw0KICAgICAgICByZXR1cm4gZmlsZVBhdGg7DQogICAgfQ0KDQogICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgV2ViQ2xpZW50IHdlYkNsaWVudCA9IG5ldyBXZWJDbGllbnQNCiAgICB7DQogICAgICAgIEVuY29kaW5nID0gU3lzdGVtLlRleHQuRW5jb2RpbmcuVVRGOA0KICAgIH07DQogICAgcHVibGljIHZvaWQgRGlzcG9zZSgpDQogICAgew0KICAgICAgICB3ZWJDbGllbnQ/LkRpc3Bvc2UoKTsNCiAgICB9DQoNCiAgICBzdGF0aWMgVmVyc2lvbiBQYXJzZVZlcnNpb24oc3RyaW5nIHZlcnNpb25TdHJpbmcpDQogICAgew0KICAgICAgICB2YXIgZGFzaEluZGV4ID0gdmVyc2lvblN0cmluZy5JbmRleE9mKCctJyk7DQogICAgICAgIGlmIChkYXNoSW5kZXggPCAwKQ0KICAgICAgICAgICAgcmV0dXJuIG5ldyBWZXJzaW9uKHZlcnNpb25TdHJpbmcpOw0KICAgICAgICB2YXIgbWFpblBhcnQgPSB2ZXJzaW9uU3RyaW5nLlN1YnN0cmluZygwLCBkYXNoSW5kZXgpOw0KICAgICAgICB2YXIgcHJlUmVsZWFzZSA9IHZlcnNpb25TdHJpbmcuU3Vic3RyaW5nKGRhc2hJbmRleCArIDEpOw0KICAgICAgICBpbnQgcHJlUmVsZWFzZU51bWJlciA9IDA7DQogICAgICAgIGNvbnN0IHN0cmluZyBhbHBoYVByZWZpeCA9ICJhbHBoYS4iOw0KICAgICAgICBpZiAocHJlUmVsZWFzZS5TdGFydHNXaXRoKGFscGhhUHJlZml4LCBTdHJpbmdDb21wYXJpc29uLk9yZGluYWxJZ25vcmVDYXNlKSkNCiAgICAgICAgICAgIGludC5UcnlQYXJzZShwcmVSZWxlYXNlLlN1YnN0cmluZyhhbHBoYVByZWZpeC5MZW5ndGgpLCBvdXQgcHJlUmVsZWFzZU51bWJlcik7DQogICAgICAgIHZhciBzZW1WZXIgPSBuZXcgVmVyc2lvbihtYWluUGFydCk7DQogICAgICAgIHJldHVybiBuZXcgVmVyc2lvbihzZW1WZXIuTWFqb3IsIHNlbVZlci5NaW5vciwgc2VtVmVyLkJ1aWxkLCBwcmVSZWxlYXNlTnVtYmVyKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBQb3N0VG9Mb2coc3RyaW5nIGxvZykNCiAgICB7DQogICAgICAgIENQSC5Mb2dJbmZvKCQiW3tleHRlbnNpb25OYW1lfSB2LntleHRlbnNpb25WZXJzaW9ufV0ge2xvZ30iKTsNCiAgICB9DQp9",
                                "precompile": false,
                                "delayStart": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "eb176e70-bd17-4c94-88ca-1e3731de702a",
                                "weight": 0.0,
                                "type": 99999,
                                "parentId": "27f00b22-f7a1-4937-b93d-ffbc337952f1",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "27f00b22-f7a1-4937-b93d-ffbc337952f1",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 2
                    },
                    {
                        "name": "TawmaeUI",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "5ac1c148-0526-46ce-be38-490e0c76abba",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "ad7e150a-b9c2-4352-a21e-4083772f8c24",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "name": "MOD TOOLS Version Check",
                                "description": "",
                                "references": [
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\mscorlib.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Core.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Net.Http.dll",
                                    ".\\Newtonsoft.Json.dll",
                                    ".\\Microsoft.Toolkit.Uwp.Notifications.dll",
                                    ".\\Microsoft.Toolkit.Uwp.Notifications.dll",
                                    ".\\dlls\\TawmaeUI.dll"
                                ],
                                "byteCode": "dXNpbmcgU3lzdGVtOw0KdXNpbmcgU3lzdGVtLkxpbnE7DQp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsNCnVzaW5nIFN5c3RlbS5OZXQuSHR0cDsNCnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7DQp1c2luZyBOZXd0b25zb2Z0Lkpzb247DQp1c2luZyBOZXd0b25zb2Z0Lkpzb24uTGlucTsNCnVzaW5nIFN5c3RlbS5EaWFnbm9zdGljczsNCnVzaW5nIFN5c3RlbS5JTzsNCnVzaW5nIFN5c3RlbS5OZXQ7DQp1c2luZyBNaWNyb3NvZnQuVG9vbGtpdC5Vd3AuTm90aWZpY2F0aW9uczsNCnVzaW5nIFRhd21hZVVJOw0KDQpwdWJsaWMgY2xhc3MgQ1BISW5saW5lDQp7DQogICAgcHVibGljIHN0YXRpYyBzdHJpbmcgZXh0ZW5zaW9uTmFtZSA9ICJNT0QgVE9PTFMiOw0KICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIGV4dGVuc2lvblZlcnNpb24gPSAiMi4wLjMiOw0KICAgIHB1YmxpYyBzdHJpbmcgZXh0ZW5zaW9uSHRtbCA9ICJtb2QtdG9vbHMiOw0KICAgIHB1YmxpYyBib29sIEV4ZWN1dGUoKQ0KICAgIHsNCiAgICAgICAgR2V0VmVyc2lvbigpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBwdWJsaWMgYm9vbCBHZXRWZXJzaW9uKCkNCiAgICB7DQogICAgICAgIENQSC5TZXRBcmd1bWVudCgiZXh0ZW5zaW9uTmFtZSIsIGV4dGVuc2lvbk5hbWUpOw0KICAgICAgICBDUEguU2V0QXJndW1lbnQoImV4dGVuc2lvblZlcnNpb24iLCBleHRlbnNpb25WZXJzaW9uKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgSW5pdCgpDQogICAgew0KICAgICAgICBQb3N0VG9Mb2coIlN0YXJ0aW5nIHZlcnNpb24gY2hlY2suLi4iKTsNCiAgICAgICAgdWkgPSBuZXcgVGF3bWFlKENQSCwgZXh0ZW5zaW9uTmFtZSwgZXh0ZW5zaW9uVmVyc2lvbiwgZmFsc2UpOw0KICAgICAgICBUYXNrLlJ1bihhc3luYyAoKSA9Pg0KICAgICAgICB7DQogICAgICAgICAgICBhd2FpdCBWZXJzaW9uQ2hlY2soKTsNCiAgICAgICAgfSkuV2FpdCgpOw0KICAgIH0NCg0KICAgIHByaXZhdGUgYXN5bmMgVGFzayBWZXJzaW9uQ2hlY2soKQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIHN0cmluZyB1cmxWZXJzaW9uID0gJCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vdGF3bWFlL3Rhd21hZS9yZWZzL2hlYWRzL21haW4vdmVyc2lvbnMtYW5kLWNoYW5nZXMvVkVSU0lPTl97ZXh0ZW5zaW9uSHRtbH0udHh0IjsNCiAgICAgICAgICAgIEh0dHBSZXNwb25zZU1lc3NhZ2UgcmVzcG9uc2VWZXJzaW9uID0gYXdhaXQgY2xpZW50LkdldEFzeW5jKHVybFZlcnNpb24pOw0KICAgICAgICAgICAgcmVzcG9uc2VWZXJzaW9uLkVuc3VyZVN1Y2Nlc3NTdGF0dXNDb2RlKCk7DQogICAgICAgICAgICBzdHJpbmcgY29udGVudFZlcnNpb24gPSBhd2FpdCByZXNwb25zZVZlcnNpb24uQ29udGVudC5SZWFkQXNTdHJpbmdBc3luYygpOw0KICAgICAgICAgICAgaWYgKGludC5UcnlQYXJzZShjb250ZW50VmVyc2lvbi5UcmltKCksIG91dCBpbnQgbmV3ZXN0dmVyc2lvbikpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiVmVyc2lvbiBDaGVjazogTmV3ZXN0IHZlcnNpb24gZmV0Y2hlZDoge25ld2VzdHZlcnNpb259Iik7DQogICAgICAgICAgICAgICAgc3RyaW5nIGV4dFYgPSBleHRlbnNpb25WZXJzaW9uOw0KICAgICAgICAgICAgICAgIGV4dFYgPSBleHRWLlJlcGxhY2UoIi4iLCAiIik7DQogICAgICAgICAgICAgICAgaWYgKGludC5UcnlQYXJzZShleHRWLlRyaW0oKSwgb3V0IGludCBjcm50dmVyc2lvbikpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJWZXJzaW9uIENoZWNrOiBDdXJyZW50IHZlcnNpb24gZmV0Y2hlZDoge2NybnR2ZXJzaW9ufSIpOw0KICAgICAgICAgICAgICAgICAgICBpZiAobmV3ZXN0dmVyc2lvbiA+IGNybnR2ZXJzaW9uKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmcgdXJsQ2hhbmdlcyA9ICQiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3Rhd21hZS90YXdtYWUvcmVmcy9oZWFkcy9tYWluL3ZlcnNpb25zLWFuZC1jaGFuZ2VzL0NIQU5HRVNfe2V4dGVuc2lvbkh0bWx9LnR4dCI7DQogICAgICAgICAgICAgICAgICAgICAgICBIdHRwUmVzcG9uc2VNZXNzYWdlIHJlc3BvbnNlQ2hhbmdlcyA9IGF3YWl0IGNsaWVudC5HZXRBc3luYyh1cmxDaGFuZ2VzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlQ2hhbmdlcy5FbnN1cmVTdWNjZXNzU3RhdHVzQ29kZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nIGNvbnRlbnRDaGFuZ2VzID0gYXdhaXQgcmVzcG9uc2VDaGFuZ2VzLkNvbnRlbnQuUmVhZEFzU3RyaW5nQXN5bmMoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyBfbmV3ZXN0dmVyc2lvbiA9IHN0cmluZy5Kb2luKCIuIiwgbmV3ZXN0dmVyc2lvbi5Ub1N0cmluZygpLlRvQ2hhckFycmF5KCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZVRpbWUgc25vb3plVGltZSA9IHVpLkdldFZhbHVlPERhdGVUaW1lPz4oZXh0ZW5zaW9uTmFtZSwgInNub296ZVRpbWUiKSA/PyBEYXRlVGltZS5NaW5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbm9vemVUaW1lICE9IGRlZmF1bHQoRGF0ZVRpbWUpICYmIERhdGVUaW1lLk5vdyAtIHNub296ZVRpbWUgPCBUaW1lU3Bhbi5Gcm9tRGF5cyg3KSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coIlNraXBwaW5nIHVwZGF0ZSBub3RpZmljYXRpb24sIGJlY2F1c2UgNyBkYXlzIGhhdmVuJ3QgcGFzc2VkLiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgU2hvd05vdGlmaWNhdGlvbigkIlt7ZXh0ZW5zaW9uTmFtZX1dIFVwZGF0ZSBhdmFpbGFibGUhICh7X25ld2VzdHZlcnNpb259KSIsICQie2NvbnRlbnRDaGFuZ2VzfSIsICJVcGRhdGUiLCAkImh0dHBzOi8vdGF3bWFlLnh5ei91dGlsaXR5L3tleHRlbnNpb25IdG1sfS5odG1sIik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJWZXJzaW9uIENoZWNrOiBVbmFibGUgdG8gcGFyc2UgY3VycmVudCB2ZXJzaW9uOiB7ZXh0Vn0iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJWZXJzaW9uIENoZWNrOiBVbmFibGUgdG8gcGFyc2UgbmV3ZXN0IHZlcnNpb246IHtjb250ZW50VmVyc2lvbn0iKTsNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGV4KQ0KICAgICAgICB7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJWZXJzaW9uIENoZWNrOiBFeGNlcHRpb246IHtleC5NZXNzYWdlfSIpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgSHR0cENsaWVudCBjbGllbnQgPSBuZXcgSHR0cENsaWVudA0KICAgIHsNCiAgICAgICAgVGltZW91dCA9IFRpbWVTcGFuLkZyb21TZWNvbmRzKDMwKQ0KICAgIH07DQogICAgcHVibGljIHZvaWQgU2hvd05vdGlmaWNhdGlvbihzdHJpbmcgdGl0bGUsIHN0cmluZyB0ZXh0LCBzdHJpbmcgYnV0dG9uVGl0bGUsIHN0cmluZyBidXR0b25VcmwpDQogICAgew0KICAgICAgICBzdHJpbmcgbG9jYWxJbWFnZVBhdGggPSBEb3dubG9hZEltYWdlKCJodHRwczovL2dpdGh1Yi5jb20vdGF3bWFlL3Rhd21hZS9ibG9iL21haW4vYXNzZXRzL3BhZ2UtZGVzaWduL3RvYXN0LWxvZ28tY2lyY2xlLnBuZz9yYXc9dHJ1ZSIpOw0KICAgICAgICBuZXcgVG9hc3RDb250ZW50QnVpbGRlcigpLkFkZEFwcExvZ29PdmVycmlkZShuZXcgVXJpKGxvY2FsSW1hZ2VQYXRoKSkuQWRkVGV4dCh0aXRsZSkuQWRkVGV4dCh0ZXh0KS5BZGRCdXR0b24obmV3IFRvYXN0QnV0dG9uKCkuU2V0Q29udGVudChidXR0b25UaXRsZSkuQWRkQXJndW1lbnQoImFjdGlvbiIsICJvcGVuVXJsIikuQWRkQXJndW1lbnQoInVybCIsIGJ1dHRvblVybCkpLkFkZEJ1dHRvbihuZXcgVG9hc3RCdXR0b24oKS5TZXRDb250ZW50KCJTbm9vemUiKS5BZGRBcmd1bWVudCgiYWN0aW9uIiwgInNub296ZSIpKS5BZGRCdXR0b24obmV3IFRvYXN0QnV0dG9uRGlzbWlzcygpKS5TaG93KCk7DQogICAgICAgIFRvYXN0Tm90aWZpY2F0aW9uTWFuYWdlckNvbXBhdC5PbkFjdGl2YXRlZCArPSBlID0+DQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBhcmdzID0gVG9hc3RBcmd1bWVudHMuUGFyc2UoZS5Bcmd1bWVudCk7DQogICAgICAgICAgICBpZiAoYXJncy5Db250YWlucygiYWN0aW9uIikpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgc3dpdGNoIChhcmdzWyJhY3Rpb24iXSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgIm9wZW5VcmwiOg0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IGFyZ3NbInVybCJdOw0KICAgICAgICAgICAgICAgICAgICAgICAgUHJvY2Vzcy5TdGFydChuZXcgUHJvY2Vzc1N0YXJ0SW5mbyh1cmwpIHsgVXNlU2hlbGxFeGVjdXRlID0gdHJ1ZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICBjYXNlICJzbm9vemUiOg0KICAgICAgICAgICAgICAgICAgICAgICAgdWkuU2V0VmFsdWUoZXh0ZW5zaW9uTmFtZSwgInNub296ZVRpbWUiLCBEYXRlVGltZS5Ob3cpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgIH0NCg0KICAgIHByaXZhdGUgVGF3bWFlVUkuVGF3bWFlIHVpOw0KICAgIHByaXZhdGUgc3RhdGljIHN0cmluZyBEb3dubG9hZEltYWdlKHN0cmluZyB1cmwpDQogICAgew0KICAgICAgICBzdHJpbmcgZmlsZVBhdGggPSBQYXRoLkNvbWJpbmUoUGF0aC5HZXRUZW1wUGF0aCgpLCAibm90aWZpY2F0aW9uX2xvZ28ucG5nIik7DQogICAgICAgIHdlYkNsaWVudC5Eb3dubG9hZEZpbGUodXJsLCBmaWxlUGF0aCk7DQogICAgICAgIHJldHVybiBmaWxlUGF0aDsNCiAgICB9DQoNCiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBXZWJDbGllbnQgd2ViQ2xpZW50ID0gbmV3IFdlYkNsaWVudA0KICAgIHsNCiAgICAgICAgRW5jb2RpbmcgPSBTeXN0ZW0uVGV4dC5FbmNvZGluZy5VVEY4DQogICAgfTsNCiAgICBwdWJsaWMgdm9pZCBEaXNwb3NlKCkNCiAgICB7DQogICAgICAgIGNsaWVudD8uRGlzcG9zZSgpOw0KICAgICAgICB3ZWJDbGllbnQ/LkRpc3Bvc2UoKTsNCiAgICB9DQoNCiAgICBzdGF0aWMgVmVyc2lvbiBQYXJzZVZlcnNpb24oc3RyaW5nIHZlcnNpb25TdHJpbmcpDQogICAgew0KICAgICAgICBpbnQgZGFzaEluZGV4ID0gdmVyc2lvblN0cmluZy5JbmRleE9mKCctJyk7DQogICAgICAgIGlmIChkYXNoSW5kZXggIT0gLTEpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZlcnNpb25TdHJpbmcgPSB2ZXJzaW9uU3RyaW5nLlN1YnN0cmluZygwLCBkYXNoSW5kZXgpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIG5ldyBWZXJzaW9uKHZlcnNpb25TdHJpbmcpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIFBvc3RUb0xvZyhzdHJpbmcgbG9nKQ0KICAgIHsNCiAgICAgICAgQ1BILkxvZ0luZm8oJCJbe2V4dGVuc2lvbk5hbWV9IHYue2V4dGVuc2lvblZlcnNpb259XSB7bG9nfSIpOw0KICAgIH0NCn0=",
                                "precompile": true,
                                "delayStart": false,
                                "saveResultToVariable": false,
                                "saveToVariable": "",
                                "id": "a36583c2-65f6-423c-8f0e-0cf04ab1eb6a",
                                "weight": 0.0,
                                "type": 99999,
                                "parentId": "ad7e150a-b9c2-4352-a21e-4083772f8c24",
                                "enabled": true,
                                "index": 1
                            },
                            {
                                "executeCodeId": "729e55f1-541e-4525-98dd-7a1429be4036",
                                "method": "Execute",
                                "runOnUiThread": true,
                                "saveResultToVariable": false,
                                "saveToVariable": "",
                                "id": "f77848f3-5124-4479-bc88-b59a5e734290",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "ad7e150a-b9c2-4352-a21e-4083772f8c24",
                                "enabled": true,
                                "index": 2
                            },
                            {
                                "name": "MOD TOOLS UI",
                                "description": "",
                                "references": [
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\mscorlib.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Core.dll",
                                    "C:\\WINDOWS\\Microsoft.Net\\assembly\\GAC_MSIL\\WindowsBase\\v4.0_4.0.0.0__31bf3856ad364e35\\WindowsBase.dll",
                                    ".\\Newtonsoft.Json.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Net.Http.dll",
                                    ".\\dlls\\TawmaeUI.dll"
                                ],
                                "byteCode": "dXNpbmcgU3lzdGVtOw0KdXNpbmcgVGF3bWFlVUk7DQp1c2luZyBTeXN0ZW0uTGlucTsNCnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOw0KdXNpbmcgU3lzdGVtLldpbmRvd3MuVGhyZWFkaW5nOw0KdXNpbmcgTmV3dG9uc29mdC5Kc29uLkxpbnE7DQp1c2luZyBTeXN0ZW0uTmV0Ow0KdXNpbmcgU3lzdGVtLk5ldC5IdHRwOw0KdXNpbmcgU3lzdGVtLk5ldC5IdHRwLkhlYWRlcnM7DQp1c2luZyBTeXN0ZW0uVGhyZWFkaW5nOw0KdXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrczsNCnVzaW5nIFN5c3RlbS5UZXh0Ow0KdXNpbmcgU3lzdGVtLklPOw0KDQpwdWJsaWMgY2xhc3MgQ1BISW5saW5lDQp7DQogICAgcHJpdmF0ZSBUYXdtYWVVSS5UYXdtYWUgdWk7DQogICAgcHVibGljIHN0cmluZyBleHRlbnNpb25OYW1lOw0KICAgIHB1YmxpYyBzdHJpbmcgZXh0ZW5zaW9uVmVyc2lvbjsNCiAgICBwdWJsaWMgYm9vbCBFeGVjdXRlKCkNCiAgICB7DQogICAgICAgIENQSC5FeGVjdXRlTWV0aG9kKCJNT0QgVE9PTFMgVmVyc2lvbiBDaGVjayIsICJFeGVjdXRlIik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImV4dGVuc2lvbk5hbWUiLCBvdXQgZXh0ZW5zaW9uTmFtZSk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImV4dGVuc2lvblZlcnNpb24iLCBvdXQgZXh0ZW5zaW9uVmVyc2lvbik7DQogICAgICAgIHVpID0gbmV3IFRhd21hZVVJLlRhd21hZShDUEgsIGV4dGVuc2lvbk5hbWUsIGV4dGVuc2lvblZlcnNpb24sIHRydWUpOw0KICAgICAgICB1aS5BZGRIZWFkZXIoImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS90YXdtYWUvdGF3bWFlL21haW4vYXNzZXRzL3NldHRpbmdzLXVpLWNvdmVycy9tb2QtdG9vbHMucG5nIik7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHVpLkFkZFRpdGxlKCJHZW5lcmFsIFNldHRpbmdzIiwgIkdlbmVyYWwiKTsNCiAgICAgICAgdWkuQWRkVG9nZ2xlU3dpdGNoKCJQb3N0IE1lc3NhZ2VzIEFzIFJlcGxpZXMiLCAiVG9nZ2xlIHdoZXRoZXIgY2hhdCByZXNwb25zZXMgYXJlIHJlcGxpZXMgb3IgcmVndWxhciBjaGF0IG1lc3NhZ2VzLiBOb3RlOiBZb3UgY2FuIHdoaXNwZXIgZXZlcnkgY29tbWFuZCB0byB5b3VyIGJyb2FkY2FzdGVyIG9yIGJvdCBhY2NvdW50IGFuZCB3aWxsIHJlY2VpdmUgYSB3aGlzcGVyIHJlc3BvbnNlLiIsICJHZW5lcmFsIiwgIm1vZF90b29sc19wb3N0TWVzc2FnZXNBc1JlcGxpZXMiLCBmYWxzZSk7DQogICAgICAgIHVpLkFkZFRvZ2dsZVN3aXRjaCgiSWdub3JlIFNoYXJlZCBDaGF0cyIsICJJZ25vcmUgYWxsIGNvbW1hbmRzIGFuZCBtZXNzYWdlcyBmcm9tIHNoYXJlZCBjaGF0cyB0aGF0IGFyZSBub3QgY29taW5nIGZyb20geW91ciBjaGFubmVsLiIsICJHZW5lcmFsIiwgIm1vZF90b29sc19pZ25vcmVTaGFyZWRDaGF0IiwgdHJ1ZSk7DQogICAgICAgIHVpLkFkZFRvZ2dsZVN3aXRjaCgiRW1vdGUtT25seSBPbiBTdHJlYW0gRW5kIiwgIkF1dG9tYXRpY2FsbHkgcHV0IHlvdXIgY2hhdCBpbnRvIEVtb3RlLU9ubHkgb25jZSB0aGUgc3RyZWFtIGVuZHMgYW5kIGF1dG9tYXRpY2FsbHkgbGlmdCBpdCwgb25jZSBpdCBnb2VzIGxpdmUuIiwgIkdlbmVyYWwiLCAibW9kX3Rvb2xzX3RvZ2dsZUVtb3RlT25seU9uU3RyZWFtU3RhcnRBbmRFbmQiLCBmYWxzZSk7DQogICAgICAgIHVpLkFkZERyb3Bkb3duKCJUcmFuc2xhdGlvbiBMYW5ndWFnZSIsICJDaG9vc2UgdGhlIGxhbmd1YWdlIG1lc3NhZ2VzIGFyZSB0cmFuc2xhdGVkIHRvIGZvciB0aGUgJyF0cmFuc2xhdGUnIGNvbW1hbmQuIiwgIkdlbmVyYWwiLCAibW9kX3Rvb2xzX3RhcmdldExhbmd1YWdlIiwgbmV3W10geyAiRW5nbGlzaCIsICJHZXJtYW4gKERldXRzY2gpIiwgIkZyZW5jaCAoRnJhbsOnYWlzKSIsICJTcGFuaXNoIChFc3Bhw7FvbCkiLCAiUG9saXNoIChQb2xza2kpIiwgIlBvcnR1Z3Vlc2UgKFBvcnR1Z3XDqnMpIiwgIkFmcmlrYWFucyAoQWZyaWthYW5zKSIsICJBcmFiaWMgKNin2YTYudix2KjZitipKSIsICJCZW5nYWxpICjgpqzgpr7gpoLgprLgpr4pIiwgIkJvc25pYW4gKEJvc2Fuc2tpKSIsICJCdWxnYXJpYW4gKNCR0YrQu9Cz0LDRgNGB0LrQuCkiLCAiQ2F0YWxhbiAoQ2F0YWzDoCkiLCAiQ2hpbmVzZSAo5Lit5paHKSIsICJDcm9hdGlhbiAoSHJ2YXRza2kpIiwgIkN6ZWNoICjEjGXFoXRpbmEpIiwgIkRhbmlzaCAoRGFuc2spIiwgIkR1dGNoIChOZWRlcmxhbmRzKSIsICJFc3RvbmlhbiAoRWVzdGkpIiwgIkZpbm5pc2ggKFN1b21pKSIsICJIZWJyZXcgKNei15HXqNeZ16opIiwgIkhpbmRpICjgpLngpL/gpKjgpY3gpKbgpYApIiwgIkh1bmdhcmlhbiAoTWFneWFyKSIsICJJY2VsYW5kaWMgKMONc2xlbnNrYSkiLCAiSW5kb25lc2lhbiAoQmFoYXNhIEluZG9uZXNpYSkiLCAiSXRhbGlhbiAoSXRhbGlhbm8pIiwgIkphcGFuZXNlICjml6XmnKzoqp4pIiwgIktvcmVhbiAo7ZWc6rWt7Ja0KSIsICJMYXR2aWFuIChMYXR2aWXFoXUpIiwgIkxpdGh1YW5pYW4gKExpZXR1dmnFsykiLCAiTWFsYXkgKEJhaGFzYSBNZWxheXUpIiwgIk5vcndlZ2lhbiAoTm9yc2spIiwgIlJvbWFuaWFuIChSb23Dom7EgykiLCAiUnVzc2lhbiAo0KDRg9GB0YHQutC40LkpIiwgIlNlcmJpYW4gKNCh0YDQv9GB0LrQuCkiLCAiU2xvdmFrIChTbG92ZW7EjWluYSkiLCAiU2xvdmVuaWFuIChTbG92ZW7FocSNaW5hKSIsICJTd2VkaXNoIChTdmVuc2thKSIsICJUaGFpICjguYTguJfguKIpIiwgIlR1cmtpc2ggKFTDvHJrw6dlKSIsICJVa3JhaW5pYW4gKNCj0LrRgNCw0ZfQvdGB0YzQutCwKSIsICJVcmR1ICjYp9ix2K/ZiCkiLCAiVmlldG5hbWVzZSAoVGnhur9uZyBWaeG7h3QpIiB9LCAwKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdWkuQWRkVGl0bGUoIlVSTCBGaWx0ZXIgU2V0dGluZ3MiLCAiVVJMIEZpbHRlciIpOw0KICAgICAgICB1aS5BZGREZXNjcmlwdGlvbigiVG9nZ2xlIGFuZCBjdXN0b21pemUgeW91ciBVUkwgZmlsdGVyIHNldHRpbmdzLiIsICJVUkwgRmlsdGVyIik7DQogICAgICAgIHVpLkFkZFRvZ2dsZVN3aXRjaCgiQmxvY2sgTGlua3MiLCAiUHJldmVudCBsaW5rcyBmcm9tIGJlaW5nIHBvc3RlZCB0byBjaGF0LiIsICJVUkwgRmlsdGVyIiwgIm1vZF90b29sc191cmxCbG9ja0xpbmtzIiwgdHJ1ZSk7DQogICAgICAgIHVpLkFkZFRpdGxlKCJXaGl0ZWxpc3RlZCBVUkxzIiwgIlVSTCBGaWx0ZXIiKTsNCiAgICAgICAgdWkuQWRkRGVzY3JpcHRpb24oIkFkZCB3aGl0ZWxpc3RlZCBVUkxzIHRoYXQgY2FuIGJlIHBvc3RlZCBieSBhbnlvbmUuIFlvdSBjYW4gYWxzbyBhZGQgdGhlbSB2w61hIGNvbW1hbmQuIiwgIlVSTCBGaWx0ZXIiKTsNCiAgICAgICAgdWkuQWRkRHluYW1pY1RleHRib3hlc1dpdGhQcmVzZXQoIldoaXRlbGlzdGVkIFVSTHMiLCAiIiwgIlVSTCBGaWx0ZXIiLCAibW9kX3Rvb2xzX3VybFdoaXRlbGlzdGVkVVJMcyIsIHVybHMpOw0KICAgICAgICB1aS5BZGRUaXRsZSgiQWxsb3dhbmNlcyIsICJVUkwgRmlsdGVyIik7DQogICAgICAgIHVpLkFkZERlc2NyaXB0aW9uKCJUb2dnbGUgd2hpY2ggdXNlciBncm91cHMgYXJlIGFsbG93ZWQgdG8gcG9zdCBsaW5rcyB0byBjaGF0LiIsICJVUkwgRmlsdGVyIik7DQogICAgICAgIHVpLkFkZFNsaWRlcigiUGVybWl0IER1cmF0aW9uIiwgIlRoZSBkdXJhdGlvbiBpbiBzZWNvbmRzIG9mIGhvdyBsb25nIHRoZSBwZXJtaXQgbGFzdHMgdG8gcG9zdCBsaW5rcyB0byBjaGF0IHdpdGggdGhlICchcGVybWl0IFtVc2VyXScgY29tbWFuZC4iLCAiVVJMIEZpbHRlciIsICJtb2RfdG9vbHNfdXJsUGVybWl0RHVyYXRpb24iLCAxMCwgMzYwMCwgMTIwKTsNCiAgICAgICAgdWkuQWRkVG9nZ2xlU3dpdGNoKCJWSVBzIiwgIkFsbG93IFZJUHMgdG8gcG9zdCBsaW5rcyB0byBjaGF0LiIsICJVUkwgRmlsdGVyIiwgIm1vZF90b29sc191cmxBbGxvd1ZpcHMiLCB0cnVlKTsNCiAgICAgICAgdWkuQWRkVG9nZ2xlU3dpdGNoKCJTdWJzY3JpYmVycyIsICJBbGxvdyBTdWJzY3JpYmVycyB0byBwb3N0IGxpbmtzIHRvIGNoYXQuIiwgIlVSTCBGaWx0ZXIiLCAibW9kX3Rvb2xzX3VybEFsbG93U3VicyIsIHRydWUpOw0KICAgICAgICB1aS5BZGRTbGlkZXJXaXRoVG9nZ2xlU3dpdGNoKCJGb2xsb3dlcnMiLCAiQWxsb3cgZm9sbG93ZXJzIHdpdGggYSBtaW5pbXVtIGZvbGxvd2VkIGRheXMgdG8gcG9zdCBsaW5rcyB0byBjaGF0ICgwIHRvIGRpc2FibGUgdGhlIG1pbi4gZm9sbG93YWdlKSIsICJVUkwgRmlsdGVyIiwgIm1vZF90b29sc191cmxBbGxvd0ZvbGxvd2VycyIsIDEsIDM2NSwgMzAsIHRydWUpOw0KICAgICAgICB1aS5BZGRUaXRsZSgiQ29uc2VxdWVuY2VzIiwgIlVSTCBGaWx0ZXIiKTsNCiAgICAgICAgdWkuQWRkRGVzY3JpcHRpb24oIkNob29zZSB3aGF0J3Mgc3VwcG9zZWQgdG8gaGFwcGVuIGlmIHNvbWVvbmUgdW5wZXJtaXR0ZWQgcG9zdHMgbGlua3MgdG8gY2hhdC4gVGhlIG1lc3NhZ2UgaXMgZ2V0dGluZyBkZWxldGVkIGluIGFueSBjYXNlLiIsICJVUkwgRmlsdGVyIik7DQogICAgICAgIHVpLkFkZFRvZ2dsZVN3aXRjaCgiV2FybiBVc2VyIiwgIldhcm4gdGhlIHVzZXIuIERvZXMgbm90IGFwcGx5IGlmIHRpbWVvdXQgaXMgZW5hYmxlZCBhcyB3ZWxsLiIsICJVUkwgRmlsdGVyIiwgIm1vZF90b29sc191cmxXYXJuVXNlciIsIHRydWUpOw0KICAgICAgICB1aS5BZGRTbGlkZXJXaXRoVG9nZ2xlU3dpdGNoKCJUaW1lb3V0IFVzZXIiLCAiVGltZSBhIHVzZXIgb3V0IGZvciBYIHNlY29uZHMgZm9yIHBvc3RpbmcgYSBsaW5rLiIsICJVUkwgRmlsdGVyIiwgIm1vZF90b29sc191cmxUaW1lb3V0VXNlciIsIDEsIDYwICogNjAgKiAyNCwgMzAsIGZhbHNlKTsNCiAgICAgICAgdWkuQWRkVGl0bGUoIldoaXRlbGlzdGVkIFVzZXJzIiwgIlVSTCBGaWx0ZXIiKTsNCiAgICAgICAgdWkuQWRkRHluYW1pY1RleHRib3hlcygiV2hpdGVsaXN0ZWQgVXNlcnMiLCAiQWRkIGluZGl2aWR1YWwgdXNlcm5hbWVzIHRvIHRoZSB3aGl0ZWxpc3QuIiwgIlVSTCBGaWx0ZXIiLCAibW9kX3Rvb2xzX3VybFVzZXJXaGl0ZWxpc3QiKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdWkuQWRkVGl0bGUoIkJvdCBQcm90ZWN0aW9uIFNldHRpbmdzIiwgIkJvdCBQcm90ZWN0aW9uIik7DQogICAgICAgIHVpLkFkZERlc2NyaXB0aW9uKCJUb2dnbGUgYW5kIGN1c3RvbWl6ZSBib3QgcHJvdGVjdGlvbiAtIHdoZXRoZXIgaXQncyBzcGFtIGJvdHMgdHJ5aW5nIHRvIHNlbGwgdmlld2VycyBvciBlbnRpcmUgZm9sbG93IGJvdCBhdHRhY2tzLiIsICJCb3QgUHJvdGVjdGlvbiIpOw0KICAgICAgICB1aS5BZGRUaXRsZSgiU3BhbSBCb3RzIiwgIkJvdCBQcm90ZWN0aW9uIik7DQogICAgICAgIHVpLkFkZERlc2NyaXB0aW9uKCJTcGFtIGJvdHMgYXJlIGJvdHMgdGhhdCBqdXN0IHBvc3QgYSBzaW5nbGUgbWVzc2FnZSB0byB5b3VyIHN0cmVhbSwgcG9zdGluZyBsaW5rcywgdHJ5aW5nIHRvIHNlbGwgc3R1ZmYgYW5kIHN0cmFpZ2h0IHVwIHRyeWluZyB0byBzY2FtIHlvdS4iLCAiQm90IFByb3RlY3Rpb24iKTsNCiAgICAgICAgdWkuQWRkVG9nZ2xlU3dpdGNoKCJCYW4gU2FsZSBCb3RzIiwgIkF1dG9tYXRpY2FsbHkgYmFuIGJvdHMgdGhhdCBhcmUgdHJ5aW5nIHRvIHNlbGwgdmlld2VycywgbGlrZSAnQ2hlYXAgdmlld2VycyBhdCByYW5kb21saW5rIC4gY29tIChyZW1vdmUgdGhlIHNwYWNlKScuIiwgIkJvdCBQcm90ZWN0aW9uIiwgIm1vZF90b29sc19iYW5TYWxlQm90cyIsIHRydWUpOw0KICAgICAgICB1aS5BZGRUb2dnbGVTd2l0Y2goIkJhbiBEaXNjb3JkIEJvdHMiLCAiQXV0b21hdGljYWxseSBiYW4gYm90cyB0aGF0IGFzayBiZWluZyBhZGRlZCBvbiBkaXNjb3JkIG9uIHRoZWlyIGZpcnN0IG1lc3NhZ2UuIiwgIkJvdCBQcm90ZWN0aW9uIiwgIm1vZF90b29sc19iYW5EaXNjb3JkQm90cyIsIHRydWUpOw0KICAgICAgICB1aS5BZGRUaXRsZSgiRm9sbG93IEJvdCBBdHRhY2siLCAiQm90IFByb3RlY3Rpb24iKTsNCiAgICAgICAgdWkuQWRkRGVzY3JpcHRpb24oIkZvbGxvdyBCb3QgQXR0YWNrcyBhcmUgYSBtYXNzaXZlIGFtb3VudCBvZiBUd2l0Y2ggYWNjb3VudHMgdGhhdCBjb25jdXJyZW50bHkgZm9sbG93IHlvdXIgY2hhbm5lbCBhdCBvbmNlLCB0aHVzIGZvciBvbmNlIHJ1aW5pbmcgeW91ciBzdHJlYW1pbmcgZXhwZXJpZW5jZSBieSB0cmlnZ2VyaW5nIGFsZXJ0cyB1cCB0byBhIHRob3VzYW5kIHRpbWVzIGFuZCBhbHNvIG1hbmlwdWxhdGUgeW91ciByZWFsIGZvbGxvd2VyIGNvdW50LiBUaGlzIGV4dGVuc2lvbiByZWdpc3RlcnMgc3VjaCBhdHRhY2tzIGFuZCBpcyBhYmxlIHRvIHJlbW92ZSB0aG9zZSBib3R0ZWQgZm9sbG93ZXJzIGFzIHdlbGwgYXMgdGVtcG9yYXJseSBkaXNhYmxlIHlvdXIgYWxlcnRzLlxuXG5Zb3UgYWxzbyBjYW4gZW5hYmxlIFN0cmVhbWVyQm90J3Mgd2Vic29ja2V0IHNlcnZlciBhbmQgdmlzaXQgdGhpcyBzaXRlIHRvIG1hbnVhbGx5IHJlbW92ZSBmb2xsb3dlcnMgaW4gY2FzZSBvZiBhbiBhdHRhY2s6XG5bbGluazpNT0QgVE9PTFMgLSBGb2xsb3cgQm90IFJlbW92ZXJ8aHR0cHM6Ly90YXdtYWUueHl6L292ZXJsYXlzL21vZC10b29scy1mb2xsb3dlci1yZW1vdmVyLmh0bWxdIiwgIkJvdCBQcm90ZWN0aW9uIik7DQogICAgICAgIHVpLkFkZFRvZ2dsZVN3aXRjaCgiQXV0by1FbmFibGUiLCAiQXV0b21hdGljYWxseSBzdGFydCB0aGUgcHJvdGVjdGl2ZSBtb2RlIG9uY2UgYSBmb2xsb3cgYm90IGF0dGFjayBpcyBiZWluZyBkZXRlY3RlZC4gWW91IGNhbiBhbHdheXMgbWFudWFsbHkgZW5hYmxlIHRoZSBwcm90ZWN0aXZlIG1vZGUuIiwgIkJvdCBQcm90ZWN0aW9uIiwgIm1vZF90b29sc19mb2xsb3dBdHRhY2tBdXRvVHVybk9uIiwgdHJ1ZSk7DQogICAgICAgIHVpLkFkZFRvZ2dsZVN3aXRjaCgiUmVtb3ZlIEJvdHRlZCBGb2xsb3dlcnMiLCAiQXV0b21hdGljYWxseSByZW1vdmUgYm90dGVkIGZvbGxvd2VycyBkdXJpbmcgdGhlIHByb3RlY3RpdmUgbW9kZS4iLCAiQm90IFByb3RlY3Rpb24iLCAibW9kX3Rvb2xzX2ZvbGxvd0F0dGFja1JlbW92ZU5ld0ZvbGxvd2VycyIsIHRydWUpOw0KICAgICAgICB1aS5BZGRTbGlkZXIoIlByb3RlY3RpdmUgTW9kZSBEdXJhdGlvbiIsICJUaGUgZHVyYXRpb24gb2YgdGhlIHByb3RlY3RpdmUgbW9kZSBpbiBzZWNvbmRzIG9uY2UgZW5hYmxlZC4iLCAiQm90IFByb3RlY3Rpb24iLCAibW9kX3Rvb2xzX2ZvbGxvd0F0dGFja0R1cmF0aW9uIiwgMzAsIDcyMDAsIDYwMCk7DQogICAgICAgIC8vDQogICAgICAgIExpc3Q8QWN0aW9uRGF0YT4gX2FjdGlvbnMgPSBDUEguR2V0QWN0aW9ucygpOw0KICAgICAgICBzdHJpbmdbXSBhY3Rpb25zID0gX2FjdGlvbnMuU2VsZWN0KGEgPT4gYS5OYW1lKS5XaGVyZShuYW1lID0+ICFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKG5hbWUpKS5PcmRlckJ5KG5hbWUgPT4gbmFtZSkuUHJlcGVuZCgiPCBDaG9vc2UgQW4gQWN0aW9uID4iKS5Ub0FycmF5KCk7DQogICAgICAgIHN0cmluZ1tdIHF1ZXVlcyA9IF9hY3Rpb25zLlNlbGVjdChhID0+IGEuUXVldWUpLldoZXJlKHF1ZXVlID0+ICFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKHF1ZXVlKSkuRGlzdGluY3QoKS5PcmRlckJ5KHF1ZXVlID0+IHF1ZXVlKS5QcmVwZW5kKCI8IENob29zZSBBIFF1ZXVlID4iKS5Ub0FycmF5KCk7DQogICAgICAgIC8vDQogICAgICAgIHVpLkFkZFJlZnJlc2hhYmxlRHluYW1pY0Ryb3Bkb3duKCJBY3Rpb25zIFRvIERpc2FibGUiLCAiQ2hvb3NlIGFjdGlvbnMgbGlrZSB5b3VyIEZvbGxvdyBBbGVydHMgdGhhdCBuZWVkIHRvIGJlIGRpc2FibGVkIGR1cmluZyBhbiBhdHRhY2suIiwgIkJvdCBQcm90ZWN0aW9uIiwgIm1vZF90b29sc19mb2xsb3dBdHRhY2tBbGVydEFjdGlvbnMiLCBhY3Rpb25zLCAoKSA9PiBSZWZyZXNoQWN0aW9uc0FuZFF1ZXVlcygpKTsNCiAgICAgICAgdWkuQWRkUmVmcmVzaGFibGVEeW5hbWljRHJvcGRvd24oIkFjdGlvbiBRdWV1ZXMgVG8gUGF1c2UiLCAiQ2hvb3NlIGFjdGlvbiBxdWV1ZXMgdG8gYmUgY2xlYXJlZCBhbmQgcGF1c2VkIGR1cmluZyBhbiBhdHRhY2suIE5vdGU6IE1ha2Ugc3VyZSB5b3VyIGFsZXJ0IHF1ZXVlcyBhcmUgc2V0IHRvICdCbG9ja2luZychIiwgIkJvdCBQcm90ZWN0aW9uIiwgIm1vZF90b29sc19mb2xsb3dBdHRhY2tBbGVydEFjdGlvblF1ZXVlcyIsIHF1ZXVlcywgKCkgPT4gUmVmcmVzaEFjdGlvbnNBbmRRdWV1ZXMoKSk7DQogICAgICAgIHVpLkFkZFRvZ2dsZVN3aXRjaCgiUGF1c2UgQWxsIENoYW5uZWwgUmV3YXJkcyIsICJQYXVzZSBhbGwgY2hhbm5lbCBwb2ludCByZXdhcmRzIGZvciB0aGUgZHVyYXRpb24gb2YgdGhlIGF0dGFjay4gTm90ZTogT25seSByZXdhcmRzIHRoYXQgYXJlIG93bmVkIGJ5IFN0cmVhbWVyLmJvdCBjYW4gYmUgcGF1c2VkLiIsICJCb3QgUHJvdGVjdGlvbiIsICJtb2RfdG9vbHNfZm9sbG93QXR0YWNrUGF1c2VDaGFubmVsUmV3YXJkcyIsIHRydWUpOw0KICAgICAgICB1aS5BZGRUb2dnbGVTd2l0Y2goIkNsZWFyIFRUUyIsICJDbGVhciB0aGUgVFRTIHF1ZXVlIGluIFNwZWFrZXIuYm90IG9uY2UgdGhlIGF0dGFjayBzdGFydHMuIiwgIkJvdCBQcm90ZWN0aW9uIiwgIm1vZF90b29sc19mb2xsb3dBdHRhY2tDbGVhclRUUyIsIHRydWUpOw0KICAgICAgICB1aS5BZGRUb2dnbGVTd2l0Y2goIkRpc2FibGUgQWxsIEJyb3dzZXIgU291cmNlcyIsICJEaXNhYmxlIGFsbCBicm93c2VyIHNvdXJjZSBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoZSBhdHRhY2suIiwgIkJvdCBQcm90ZWN0aW9uIiwgIm1vZF90b29sc19mb2xsb3dEaXNhYmxlQnJvd3NlclNvdXJjZXMiLCB0cnVlKTsNCiAgICAgICAgdWkuQWRkU2xpZGVyKCJGb2xsb3cgQW1vdW50IFRyZXNob2xkIiwgIlRoZSBhbW91bnQgb2YgZm9sbG93cyB0aGF0IG5lZWQgdG8gaGFwcGVuIGluIHRoYXQgc2hvcnQgdGltZSBzcGFuIHlvdSBkZWZpbmUgYmVsb3cgdG8gc3RhcnQgdGhlIHByb3RlY3RpdmUgbW9kZS4gRGVmYXVsdDogMTAwIGZvbGxvd3Mgd2l0aGluIDEwIHNlY29uZHMuIiwgIkJvdCBQcm90ZWN0aW9uIiwgIm1vZF90b29sc19mb2xsb3dBdHRhY2tGb2xsb3dlclRocmVzaG9sZCIsIDIwLCAxMDAwLCAxMDApOw0KICAgICAgICB1aS5BZGRTbGlkZXIoIkR1cmF0aW9uIFRyZXNob2xkIiwgIlRoZSBhbW91bnQgb2YgZm9sbG93cyB0aGF0IG5lZWQgdG8gaGFwcGVuIGluIHRoaXMgc3BlY2lmaWMgdGltZSBpbiBzZWNvbmRzIHRvIHN0YXJ0IHRoZSBwcm90ZWN0aXZlIG1vZGUuIERlZmF1bHQ6IDEwMCBmb2xsb3dzIHdpdGhpbiAxMCBzZWNvbmRzLiIsICJCb3QgUHJvdGVjdGlvbiIsICJtb2RfdG9vbHNfZm9sbG93QXR0YWNrRHVyYXRpb25UaHJlc2hvbGQiLCAzLCAxMjAsIDEwKTsNCiAgICAgICAgdWkuQWRkVGl0bGUoIkRhdGEiLCAiQm90IFByb3RlY3Rpb24iKTsNCiAgICAgICAgdWkuQWRkVG9nZ2xlU3dpdGNoKCJTZW5kIERhdGEgQWZ0ZXIgQXR0YWNrIiwgIlNlbmQgYSBsaXN0IG9mIGFsbCBrbm93biBib3QgYWNjb3VudHMgdGhhdCBoYXZlIHBhcnRpY2lwYXRlZCB0byBteSBHaXRodWIgcmVwb3NpdG9yeS4gVGhlIGRhdGEgd2lsbCBvbmx5IGNvbnRhaW4gaW5mbyBhYm91dCB0aGUgYm90IGFjY291bnRzIGFuZCB3aWxsIGJlIHVzZWQgdG8gc3RvcmUgaW4gYSBkYXRhYmFzZSwgc28gdGhlcmUnbGwgYmUgYSBiZXR0ZXIgb3ZlcmFsbCBwcm90ZWN0aW9uIGZvciBldmVyeW9uZS4gTm8gcGVyc29uYWwgZGF0YSBpcyBpbnZvbHZlZC4iLCAiQm90IFByb3RlY3Rpb24iLCAibW9kX3Rvb2xzX2ZvbGxvd0F0dGFja1NlbmREYXRhIiwgdHJ1ZSk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHVpLkFkZFRpdGxlKCJHZW5lcmFsIiwgIlNwYW0gUHJvdGVjdGlvbiIpOw0KICAgICAgICB1aS5BZGREZXNjcmlwdGlvbigiWW91IGNhbiBhZGQgdGhpcyBkb2NrIHRvIE9CUyBvciBqdXN0IG9wZW4gaXQgaW4geW91ciBicm93c2VyIHRvIHBlcmZvcm0gcXVpY2sgbW9kZXJhdGlvbiBhY3Rpb25zIG9uIG5ldyBjaGF0dGVycyBhbmQgYWNjb3VudHMgdGhhdCBhcmUgbGVzcyB0aGFuIDkwIGRheXMgb2xkIChtYWtlIHN1cmUgdGhlIHdlYnNvY2tldCBzZXJ2ZXIgaW4gU3RyZWFtZXJCb3QgaXMgZW5hYmxlZCk6XG5bbGluazpNT0QgVE9PTFMgLSBTdXNwaWNpb3VzIFVzZXJzfGh0dHBzOi8vdGF3bWFlLnh5ei9vdmVybGF5cy9tb2QtdG9vbHMtdXNlci1tb25pdG9yaW5nLmh0bWxdIiwgIlNwYW0gUHJvdGVjdGlvbiIpOw0KICAgICAgICB1aS5BZGRDb21wZXRpbmdUb2dnbGVTd2l0Y2hlcygiQ29uc2VxdWVuY2UiLCAiQ2hvb3NlIHdoZXRoZXIgdG8gd2FybiwgdGltZW91dCBvciBiYW4gYSB1c2VyIHVwb24gaW5mcmluZ2VtZW50LiIsICJTcGFtIFByb3RlY3Rpb24iLCAibW9kX3Rvb2xzX2JsYWNrbGlzdGVkV29yZHNDb25zZXF1ZW5jZSIsIG5ldyBzdHJpbmdbXSB7ICJEZWxldGUgT25seSIsICJXYXJuIiwgIlRpbWVvdXQiLCAiQmFuIiB9LCAxKTsNCiAgICAgICAgdWkuQWRkU2xpZGVyKCJUaW1lb3V0IER1cmF0aW9uIiwgIlRoZSB0aW1lb3V0IGR1cmF0aW9uIGlmICdUaW1lb3V0JyBoYXMgYmVlbiBzZWxlY3RlZC4iLCAiU3BhbSBQcm90ZWN0aW9uIiwgIm1vZF90b29sc19ibGFja2xpc3RlZFdvcmRzVGltZW91dER1cmF0aW9uIiwgMSwgNjAgKiA2MCAqIDI0LCAzMCk7DQogICAgICAgIHVpLkFkZFRvZ2dsZVN3aXRjaCgiQnlwYXNzIE1vZGVyYXRvcnMiLCAiRG9uJ3QgY2hlY2sgbWVzc2FnZXMgZnJvbSBtb2RlcmF0b3JzIGZvciBldmVudHVhbCBzcGFtLiIsICJTcGFtIFByb3RlY3Rpb24iLCAibW9kX3Rvb2xzX2JsYWNrbGlzdGVkV29yZHNBbGxvd01vZHMiLCB0cnVlKTsNCiAgICAgICAgdWkuQWRkVG9nZ2xlU3dpdGNoKCJCeXBhc3MgVklQcyIsICJEb24ndCBjaGVjayBtZXNzYWdlcyBmcm9tIFZJUHMgZm9yIGV2ZW50dWFsIHNwYW0uIiwgIlNwYW0gUHJvdGVjdGlvbiIsICJtb2RfdG9vbHNfYmxhY2tsaXN0ZWRXb3Jkc0FsbG93VmlwcyIsIGZhbHNlKTsNCiAgICAgICAgdWkuQWRkVG9nZ2xlU3dpdGNoKCJCeXBhc3MgU3VicyIsICJEb24ndCBjaGVjayBtZXNzYWdlcyBmcm9tIHN1YnMgZm9yIGV2ZW50dWFsIHNwYW0uIiwgIlNwYW0gUHJvdGVjdGlvbiIsICJtb2RfdG9vbHNfYmxhY2tsaXN0ZWRXb3Jkc0FsbG93U3VicyIsIGZhbHNlKTsNCiAgICAgICAgdWkuQWRkVGl0bGUoIkJsYWNrbGlzdGVkIFdvcmRzIiwgIlNwYW0gUHJvdGVjdGlvbiIpOw0KICAgICAgICB1aS5BZGRUb2dnbGVTd2l0Y2goIkZpbHRlciBCbGFja2xpc3RlZCBXb3JkcyIsICJBdXRvbWF0aWNhbGx5IGZpbHRlciBmb3IgYmxhY2tsaXN0ZWQgd29yZHMuIiwgIlNwYW0gUHJvdGVjdGlvbiIsICJtb2RfdG9vbHNfZmlsdGVyQmxhY2tsaXN0ZWRXb3JkcyIsIGZhbHNlKTsNCiAgICAgICAgdWkuQWRkRHluYW1pY1RleHRib3hlcygiV29yZHMiLCAiRW50ZXIgd29yZHMgdG8gYWRkIHRvIHRoZSBibGFja2xpc3QuIiwgIlNwYW0gUHJvdGVjdGlvbiIsICJtb2RfdG9vbHNfYmxhY2tsaXN0ZWRXb3Jkc0xpc3QiKTsNCiAgICAgICAgdWkuQWRkVGV4dGJveFdpdGhUb2dnbGVTd2l0Y2goIlJlcGxhY2UgQmFkIFdvcmQiLCAiUG9zdCBhIGNvcHkgb2YgdGhlIGZpbHRlcmVkIG1lc3NhZ2UgdG8gdGhlIGNoYW5uZWwgYW5kIHJlcGxhY2UgdGhlIGJhZCB3b3JkLiIsICJTcGFtIFByb3RlY3Rpb24iLCAibW9kX3Rvb2xzX2JsYWNrbGlzdGVkV29yZHNSZXBsYWNlQmFkV29yZCIsICJbUkVEQUNURURdIiwgZmFsc2UpOw0KICAgICAgICB1aS5BZGRUb2dnbGVTd2l0Y2goIkFsbG93IE1vZGVyYXRvcnMiLCAiQWxsb3cgbW9kZXJhdG9ycyB0byBwb3N0IGJsYWNrbGlzdGVkIHdvcmRzIHRvIGNoYXQuIiwgIlNwYW0gUHJvdGVjdGlvbiIsICJtb2RfdG9vbHNfYmxhY2tsaXN0ZWRXb3Jkc0FsbG93TW9kcyIsIHRydWUpOw0KICAgICAgICB1aS5BZGRUb2dnbGVTd2l0Y2goIlZJUHMiLCAiQWxsb3cgVklQcyB0byBwb3N0IGJsYWNrbGlzdGVkIHdvcmRzIHRvIGNoYXQuIiwgIlNwYW0gUHJvdGVjdGlvbiIsICJtb2RfdG9vbHNfYmxhY2tsaXN0ZWRXb3Jkc0FsbG93VmlwcyIsIGZhbHNlKTsNCiAgICAgICAgdWkuQWRkVGl0bGUoIk90aGVyIiwgIlNwYW0gUHJvdGVjdGlvbiIpOw0KICAgICAgICB1aS5BZGRTbGlkZXJXaXRoVG9nZ2xlU3dpdGNoKCJDYXBzIFByb3RlY3Rpb24iLCAiVG9nZ2xlIGNhcHMgcHJvdGVjdGlvbiBhbmQgc2V0IHRoZSBtYXhpbXVtIGNvbnNlY3V0aXZlIGNhcGl0YWwgbGV0dGVycyBpbiBhIHNpbmdsZSBtZXNzYWdlLiIsICJTcGFtIFByb3RlY3Rpb24iLCAibW9kX3Rvb2xzX2JsYWNrbGlzdGVkV29yZHNDYXBzUHJvdGVjdGlvbiIsIDQsIDEwMCwgMTAsIGZhbHNlKTsNCiAgICAgICAgdWkuQWRkU2xpZGVyV2l0aFRvZ2dsZVN3aXRjaCgiRW1vdGUgUHJvdGVjdGlvbiIsICJUb2dnbGUgZW1vdGUgcHJvdGVjdGlvbiBhbmQgc2V0IHRoZSBtYXhpbXVtIGVtb3RlcyBpbiBhIHNpbmdsZSBtZXNzYWdlLiIsICJTcGFtIFByb3RlY3Rpb24iLCAibW9kX3Rvb2xzX2JsYWNrbGlzdGVkV29yZHNFbW90ZVByb3RlY3Rpb24iLCAzLCA1MCwgMTAsIGZhbHNlKTsNCiAgICAgICAgdWkuQWRkVG9nZ2xlU3dpdGNoKCJBU0NJSSBQcm90ZWN0aW9uIiwgIkJsb2NrIGNoYXQgbWVzc2FnZXMgY29udGFpbmluZyBBU0NJSSBzcGFtLiIsICJTcGFtIFByb3RlY3Rpb24iLCAibW9kX3Rvb2xzX2JsYWNrbGlzdGVkV29yZHNBc2NpaVByb3RlY3Rpb24iLCBmYWxzZSk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHVpLkFkZFRpdGxlKCJIYXRlIFJhaWQgUHJvdGVjdGlvbiIsICJIYXRlIFJhaWQgUHJvdGVjdGlvbiIpOw0KICAgICAgICB1aS5BZGREZXNjcmlwdGlvbigiVG9nZ2xlIGFuZCBjdXN0b21pemUgeW91ciBIYXRlIFJhaWQgcHJvdGVjdGlvbi4gSGF0ZSBSYWlkcyBhcmUgcmFpZHMgYnkgcGVvcGxlIHdobyB0cnkgdG8gcnVpbiB5b3VyIHN0cmVhbSBleHBlcmllbmNlLCBzcGFtLCBpbnN1bHQgYW5kIGFyZSBiZWluZyB0b3hpYyBpbiBnZW5lcmFsLiBZb3UgY2FuIHNldCB2YXJpb3VzIHByb3RlY3RpdmUgbW9kZXMgdG8ga2VlcCB5b3VyIGNoYXQgcGVhY2VmdWxseSBhbmQgc2FmZS4iLCAiSGF0ZSBSYWlkIFByb3RlY3Rpb24iKTsNCiAgICAgICAgdWkuQWRkVG9nZ2xlU3dpdGNoKCJDbGVhciBDaGF0IiwgIkF1dG9tYXRpY2FsbHkgY2xlYXIgdGhlIGNoYXQgb25jZSB5b3UgZW5hYmxlIHRoZSBwcm90ZWN0aXZlIG1vZGUuIiwgIkhhdGUgUmFpZCBQcm90ZWN0aW9uIiwgIm1vZF90b29sc19oYXRlUmFpZENsZWFyQ2hhdCIsIHRydWUpOw0KICAgICAgICB1aS5BZGRTbGlkZXJXaXRoVG9nZ2xlU3dpdGNoKCJGb2xsb3dlci1Pbmx5IE1vZGUiLCAiQXV0b21hdGljYWxseSBwdXQgeW91ciBjaGF0IGludG8gZm9sbG93ZXItb25seSBtb2RlIG9uY2UgeW91IGVuYWJsZSB0aGUgcHJvdGVjdGl2ZSBtb2RlLiBUaGUgdGltZSBpcyBpbiBtaW51dGVzIHRoYXQgdGhlIHVzZXIgbmVlZHMgdG8gaGF2ZSBmb2xsb3dlZCB0aGUgY2hhbm5lbCBmb3IuIiwgIkhhdGUgUmFpZCBQcm90ZWN0aW9uIiwgIm1vZF90b29sc19oYXRlUmFpZEZvbGxvd2VyTW9kZU9ubHkiLCA1LCA0MzIwMCwgMTIwLCB0cnVlKTsNCiAgICAgICAgdWkuQWRkVG9nZ2xlU3dpdGNoKCJTdWItT25seSBNb2RlIiwgIkF1dG9tYXRpY2FsbHkgcHV0IHlvdXIgY2hhdCBpbnRvIHN1Yi1vbmx5IG1vZGUgb25jZSB5b3UgZW5hYmxlIHRoZSBwcm90ZWN0aXZlIG1vZGUuIiwgIkhhdGUgUmFpZCBQcm90ZWN0aW9uIiwgIm1vZF90b29sc19oYXRlUmFpZFN1Yk9ubHlNb2RlIiwgZmFsc2UpOw0KICAgICAgICB1aS5BZGRUb2dnbGVTd2l0Y2goIkVtb3RlLU9ubHkgTW9kZSIsICJBdXRvbWF0aWNhbGx5IHB1dCB5b3VyIGNoYXQgaW50byBlbW90ZS1vbmx5IG1vZGUgb25jZSB5b3UgZW5hYmxlIHRoZSBwcm90ZWN0aXZlIG1vZGUuIiwgIkhhdGUgUmFpZCBQcm90ZWN0aW9uIiwgIm1vZF90b29sc19oYXRlUmFpZEVtb3RlT25seU1vZGUiLCBmYWxzZSk7DQogICAgICAgIHVpLkFkZFNsaWRlcldpdGhUb2dnbGVTd2l0Y2goIlNsb3cgTW9kZSIsICJBdXRvbWF0aWNhbGx5IHB1dCB5b3VyIGNoYXQgaW50byBzbG93IG1vZGUgb25jZSB5b3UgZW5hYmxlIHRoZSBwcm90ZWN0aXZlIG1vZGUuIFRoZSB0aW1lIGZvciB0aGUgc2xvdyBtb2RlIGludGVydmFsIGlzIGluIHNlY29uZHMuIiwgIkhhdGUgUmFpZCBQcm90ZWN0aW9uIiwgIm1vZF90b29sc19oYXRlUmFpZFNsb3dNb2RlT25seSIsIDMsIDYwMCwgMTAsIHRydWUpOw0KICAgICAgICB1aS5BZGRUb2dnbGVTd2l0Y2goIlBhdXNlIEFsbCBDaGFubmVsIFJld2FyZHMiLCAiQXV0b21hdGljYWxseSBwYXVzZSBhbGwgeW91ciBjaGFubmVsIHJld2FyZHMuIE5vdGU6IFRoaXMgb25seSBhcHBsaWVzIHRvIHJld2FyZHMgdGhhdCBTdHJlYW1lci5ib3Qgb3ducy4iLCAiSGF0ZSBSYWlkIFByb3RlY3Rpb24iLCAibW9kX3Rvb2xzX2hhdGVSYWlkUGF1c2VBbGxSZXdhcmRzIiwgdHJ1ZSk7DQogICAgICAgIHVpLkFkZFRvZ2dsZVN3aXRjaCgiQ2xlYXIgVFRTIiwgIkF1dG9tYXRpY2FsbHkgY2xlYXIgYWxsIHBlbmRpbmcgVFRTIHJlcXVlc3RzIGluIFNwZWFrZXIuYm90LiIsICJIYXRlIFJhaWQgUHJvdGVjdGlvbiIsICJtb2RfdG9vbHNfaGF0ZVJhaWRDbGVhclRUUyIsIHRydWUpOw0KICAgICAgICB1aS5BZGRUb2dnbGVTd2l0Y2goIkRpc2FibGUgQWxsIEJyb3dzZXIgU291cmNlcyIsICJEaXNhYmxlIGFsbCBicm93c2VyIHNvdXJjZSBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoZSBhdHRhY2suIiwgIkhhdGUgUmFpZCBQcm90ZWN0aW9uIiwgIm1vZF90b29sc19oYXRlUmFpZERpc2FibGVBbGxCcm93c2VyU291cmNlcyIsIHRydWUpOw0KICAgICAgICB1aS5BZGRUaXRsZSgiQWN0aW9ucyAmIFF1ZXVlcyIsICJIYXRlIFJhaWQgUHJvdGVjdGlvbiIpOw0KICAgICAgICB1aS5BZGREZXNjcmlwdGlvbigiVG8gcHJldmVudCBmdXJ0aGVyIGFjdGlvbiBhYnVzZSwgeW91IGNob29zZSBhY3Rpb24gZ3JvdXBzIGFuZCBhY3Rpb24gcXVldWVzIHRoYXQgYXJlIGdvaW5nIHRvIGJlIHRlbXBvcmFyaWx5IGNsZWFyZWQgYW5kIGRpc2FibGVkIGR1cmluZyB0aGUgcHJvdGVjdGl2ZSBtb2RlLiIsICJIYXRlIFJhaWQgUHJvdGVjdGlvbiIpOw0KICAgICAgICB1aS5BZGREeW5hbWljRHJvcGRvd24oIkFjdGlvbnMgVG8gRGlzYWJsZSIsICJDaG9vc2UgYWN0aW9ucyB0aGF0IG5lZWQgdG8gYmUgZGlzYWJsZWQgZHVyaW5nIHRoZSBwcm90ZWN0aXZlIG1vZGUuIiwgIkhhdGUgUmFpZCBQcm90ZWN0aW9uIiwgIm1vZF90b29sc19oYXRlUmFpZEFjdGlvbnMiLCBhY3Rpb25zKTsNCiAgICAgICAgdWkuQWRkRHluYW1pY0Ryb3Bkb3duKCJBY3Rpb24gUXVldWVzIFRvIFBhdXNlIiwgIkNob29zZSBhY3Rpb24gcXVldWVzIHRvIGJlIGNsZWFyZWQgYW5kIHBhdXNlZCBkdXJpbmcgdGhlIHByb3RlY3RpdmUgbW9kZS4iLCAiSGF0ZSBSYWlkIFByb3RlY3Rpb24iLCAibW9kX3Rvb2xzX2hhdGVSYWlkUXVldWVzIiwgcXVldWVzKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdWkuQWRkVGl0bGUoIlJhaWRzICYgU2hvdXRvdXRzIiwgIlJhaWRzICYgU2hvdXRvdXRzIik7DQogICAgICAgIHVpLkFkZERlc2NyaXB0aW9uKCJNYW5hZ2UgaW5jb21pbmcgYW5kIG91dGdvaW5nIHJhaWRzIGFzIHdlbGwgYXMgY3VzdG9tIHNob3V0b3V0cy4iLCAiUmFpZHMgJiBTaG91dG91dHMiKTsNCiAgICAgICAgdWkuQWRkVGl0bGUoIlNob3V0b3V0IiwgIlJhaWRzICYgU2hvdXRvdXRzIik7DQogICAgICAgIHVpLkFkZFRvZ2dsZVN3aXRjaCgiU2VuZCBUd2l0Y2ggU2hvdXRvdXQiLCAiQWRkaXRpb25hbGx5IHRvIHRoZSBtZXNzYWdlLCBhbHNvIHNlbmQgdGhlIFR3aXRjaCBpbnRlcm5hbCAvc2hvdXRvdXQuIE5vdGU6IFlvdSBuZWVkIHRvIGJlIGxpdmUgZm9yIGl0IHRvIHdvcmsgYW5kIGl0IGhhcyBhIDMgbWludXRlIGNvb2xkb3duLiIsICJSYWlkcyAmIFNob3V0b3V0cyIsICJtb2RfdG9vbHNfc2hvdXRvdXRTZW5kVHdpdGNoU2hvdXRvdXQiLCB0cnVlKTsNCiAgICAgICAgdWkuQWRkVGl0bGUoIkluY29taW5nIFJhaWRzIiwgIlJhaWRzICYgU2hvdXRvdXRzIik7DQogICAgICAgIHVpLkFkZERlc2NyaXB0aW9uKCJQZW9wbGUgdGhhdCByYWlkIHlvdXIgY2hhbm5lbC4iLCAiUmFpZHMgJiBTaG91dG91dHMiKTsNCiAgICAgICAgdWkuQWRkVG9nZ2xlU3dpdGNoKCJTbm9vemUgQWRzIiwgIkF1dG9tYXRpY2FsbHkgc25vb3plIHVwY29taW5nIGFkcyB3aGVuIGEgcmFpZCBjb21lcyBpbiwgaWYgc25vb3plcyBhcmUgYXZhaWxhYmxlLiIsICJSYWlkcyAmIFNob3V0b3V0cyIsICJtb2RfdG9vbHNfc29BdXRvU25vb3plQWRzIiwgdHJ1ZSk7DQogICAgICAgIHVpLkFkZFRvZ2dsZVN3aXRjaCgiQXV0by1TaG91dG91dCIsICJBdXRvbWF0aWNhbGx5IHNob3V0b3V0IGFuIGluY29taW5nIHJhaWRlci4iLCAiUmFpZHMgJiBTaG91dG91dHMiLCAibW9kX3Rvb2xzX3NvQXV0b1Nob3V0b3V0T25SYWlkIiwgdHJ1ZSk7DQogICAgICAgIHVpLkFkZFRvZ2dsZVN3aXRjaCgiRm9sbG93ZWQgb25seSIsICJPbmx5IGF1dG9tYXRpY2FsbHkgc2hvdXRvdXQgaW5jb21pbmcgcmFpZGVycyB5b3UgZm9sbG93LiIsICJSYWlkcyAmIFNob3V0b3V0cyIsICJtb2RfdG9vbHNfc29Pbmx5Rm9sbG93ZWQiLCB0cnVlKTsNCiAgICAgICAgdWkuQWRkU2xpZGVyKCJNaW4uIFZpZXdlcnMiLCAiT25seSBhdXRvbWF0aWNhbGx5IHNob3V0b3V0IGluY29taW5nIHJhaWRlcnMgdGhhdCByYWlkZWQgb3ZlciB3aXRoIGF0IGxlYXN0IHRoaXMgYW1vdW50IG9mIHZpZXdlcnMuIiwgIlJhaWRzICYgU2hvdXRvdXRzIiwgIm1vZF90b29sc19zb01pblZpZXdlcnMiLCAwLCAxMDAwLCAwKTsNCiAgICAgICAgdWkuQWRkVGl0bGUoIk91dGdvaW5nIFJhaWRzIiwgIlJhaWRzICYgU2hvdXRvdXRzIik7DQogICAgICAgIHVpLkFkZERlc2NyaXB0aW9uKCJUaGUgcGVvcGxlIHlvdSByYWlkIGFmdGVyIHlvdSBmaW5pc2hlZCBzdHJlYW1pbmcuIiwgIlJhaWRzICYgU2hvdXRvdXRzIik7DQogICAgICAgIHVpLkFkZFRvZ2dsZVN3aXRjaCgiUG9zdCBTdWIgUmFpZCBNZXNzYWdlIiwgIlRvZ2dsZSB3aGV0aGVyIHlvdSBhdXRvbWF0aWNhbGx5IHBvc3QgeW91ciByYWlkIG1lc3NhZ2UgZm9yIHN1YnMgd2hlbiB5b3UgcmFpZCBvdXQuIiwgIlJhaWRzICYgU2hvdXRvdXRzIiwgIm1vZF90b29sc19zb1Bvc3RTdWJSYWlkTWVzc2FnZSIsIHRydWUpOw0KICAgICAgICB1aS5BZGRUb2dnbGVTd2l0Y2goIlBvc3QgTm9uLVN1YiBSYWlkIE1lc3NhZ2UiLCAiVG9nZ2xlIHdoZXRoZXIgeW91IGF1dG9tYXRpY2FsbHkgcG9zdCB5b3VyIHJhaWQgbWVzc2FnZSBmb3Igbm9uLXN1YnMgd2hlbiB5b3UgcmFpZCBvdXQuIiwgIlJhaWRzICYgU2hvdXRvdXRzIiwgIm1vZF90b29sc19zb1Bvc3ROb25TdWJSYWlkTWVzc2FnZSIsIGZhbHNlKTsNCiAgICAgICAgdWkuQWRkVG9nZ2xlU3dpdGNoKCJQb3N0IFN1YiBSYWlkIE1lc3NhZ2UgQXMgQnJvYWRjYXN0ZXIiLCAiVG9nZ2xlIHdoZXRoZXIgeW91IGF1dG9tYXRpY2FsbHkgcG9zdCB5b3VyIHJhaWQgbWVzc2FnZSBmb3Igc3VicyB3aXRoIHlvdXIgYnJvYWRjYXN0ZXIgYWNjb3VudCBvciB5b3VyIGJvdCBhY2NvdW50LiIsICJSYWlkcyAmIFNob3V0b3V0cyIsICJtb2RfdG9vbHNfc29Qb3N0U3ViUmFpZE1lc3NhZ2VBc0Jyb2FkY2FzdGVyIiwgdHJ1ZSk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHVpLkFkZFRpdGxlKCJQb2xscyAmIFByZWRpY3Rpb25zIiwgIkNoYXQgTWFuYWdlbWVudCIpOw0KICAgICAgICB1aS5BZGRTbGlkZXIoIkRlZmF1bHQgUG9sbCBEdXJhdGlvbiIsICJUaGUgZmFsbGJhY2sgdmFsdWUgaWYgbm8gcG9sbCBkdXJhdGlvbiBoYXMgYmVlbiBwcm92aWRlZC4iLCAiQ2hhdCBNYW5hZ2VtZW50IiwgIm1vZF90b29sc19kZWZhdWx0UG9sbER1cmF0aW9uIiwgMTUsIDE4MDAsIDEyMCk7DQogICAgICAgIHVpLkFkZFNsaWRlcigiRGVmYXVsdCBQcmVkaWN0aW9uIER1cmF0aW9uIiwgIlRoZSBmYWxsYmFjayB2YWx1ZSBpZiBubyBwcmVkaWN0aW9uIGR1cmF0aW9uIGhhcyBiZWVuIHByb3ZpZGVkLiIsICJDaGF0IE1hbmFnZW1lbnQiLCAibW9kX3Rvb2xzX2RlZmF1bHRQcmVkaWN0aW9uRHVyYXRpb24iLCAzMCwgMTgwMCwgMTIwKTsNCiAgICAgICAgdWkuQWRkVGl0bGUoIkN1c3RvbSBDb21tYW5kcyIsICJDaGF0IE1hbmFnZW1lbnQiKTsNCiAgICAgICAgdWkuQWRkRGVzY3JpcHRpb24oIkN1c3RvbSBDb21tYW5kcyBhcmUgdGV4dC1iYXNlZCBjb21tYW5kcyB5b3UgY2FuIGFkZCB2aWEgY2hhdCBjb21tYW5kcy4gVGhleSBhbGxvdyBmb3IgcGVybWlzc2lvbnMsIGNvdW50ZXJzLCB0YXJnZXRlZCB1c2VycyBhbmQgY29vbGRvd25zLiBGb3IgbW9yZSBkZXRhaWxzIHNlZSBbbGluazpoZXJlfGh0dHBzOi8vdGF3bWFlLnh5ei91dGlsaXR5L21vZC10b29scyNmZWF0dXJlc10uIiwgIkNoYXQgTWFuYWdlbWVudCIpOw0KICAgICAgICB1aS5BZGRUb2dnbGVTd2l0Y2goIlNob3cgUGVybWl0dGVkIENvbW1hbmRzIE9ubHkiLCAiV2hlbiBzaG93aW5nIGFsbCBjb21tYW5kcyB3aXRoICchY3VzdG9tQ29tbWFuZHMnIGluIGNoYXQsIG9ubHkgZGlzcGxheSB0aGUgb25lcyB0aGUgcmVkZWVtaW5nIHVzZXIgaGFzIHBlcm1pc3Npb24gdG8gdXNlLiIsICJDaGF0IE1hbmFnZW1lbnQiLCAibW9kX3Rvb2xzX2N1c3RvbUNvbW1hbmRzR2V0UGVybWl0dGVkT25seSIsIHRydWUpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB1aS5BZGRUaXRsZSgiT0JTIE1hbmFnZW1lbnQiLCAiT0JTIE1hbmFnZW1lbnQiKTsNCiAgICAgICAgdWkuQWRkVGl0bGUoIlNjZW5lcyIsICJPQlMgTWFuYWdlbWVudCIpOw0KICAgICAgICB1aS5BZGRUb2dnbGVTd2l0Y2goIlNjZW5lcyBJbiBPbmUgTWVzc2FnZSIsICJJZiB0dXJuZWQgb24sIGFsbCBzY2VuZXMgd2lsbCBiZSBwb3N0ZWQgd2l0aGluIGEgc2luZ2xlIGNoYXQgbWVzc2FnZXMuIE90aGVyd2lzZSBvbmUgc2NlbmUgcGVyIGxpbmUgZm9yIGJldHRlciByZWFkYWJpbGl0eS4iLCAiT0JTIE1hbmFnZW1lbnQiLCAibW9kX3Rvb2xzX29ic1NjZW5lc1NpbmdsZU1lc3NhZ2UiLCBmYWxzZSk7DQogICAgICAgIHVpLkFkZFRvZ2dsZVN3aXRjaCgiV2hpc3BlciBTY2VuZXMiLCAiU2VuZHMgdGhlIHNjZW5lIG5hbWVzIGFzIGEgd2hpc3BlciBpbnN0ZWFkIG9mIGEgY2hhdCByZXNwb25zZS4gTm90ZTogSWYgd2hpc3BlcnMgZmFpbCwgaXQgd2lsbCBmYWxsYmFjayB0byBwb3N0aW5nIGNoYXQgbWVzc2FnZXMuIiwgIk9CUyBNYW5hZ2VtZW50IiwgIm1vZF90b29sc19vYnNTY2VuZXNXaGlzcGVyTWVzc2FnZSIsIGZhbHNlKTsNCiAgICAgICAgSW5pdE9CU1NjZW5lcygpOw0KICAgICAgICB1aS5BZGRSZWZyZXNoYWJsZUR5bmFtaWNEcm9wZG93bigiRXhjbHVkZWQgU2NlbmVzIiwgIkV4Y2x1ZGUgY2VydGFpbiBzY2VuZXMgZnJvbSBzaG93aW5nIHVwIHdoZW4gZmV0Y2hpbmcgYWxsIHNjZW5lcy4iLCAiT0JTIE1hbmFnZW1lbnQiLCAibW9kX3Rvb2xzX29ic0V4Y2x1ZGVkU2NlbmVMaXN0Iiwgc2NlbmVMaXN0LCAoKSA9PiBVcGRhdGVTY2VuZXMoKSk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHVpLkFkZFRpdGxlKCJTdXBlciBNb2RlcmF0b3JzIiwgIlN1cGVyIE1vZGVyYXRvcnMiKTsNCiAgICAgICAgdmFyIGluaXRpYWxNb2RzID0gTW9kTGlzdCgpLkdldEF3YWl0ZXIoKS5HZXRSZXN1bHQoKTsNCiAgICAgICAgdWkuQWRkUmVmcmVzaGFibGVEeW5hbWljRHJvcGRvd24oIlN1cGVyIE1vZGVyYXRvcnMiLCAiQ2hvb3NlIHN1cGVyIG1vZGVyYXRvcnMuIFN1cGVyIG1vZGVyYXRvcnMgYXJlIGFibGUgdG8gdGltZW91dCBhbmQgYmFuIG90aGVyIG1vZGVyYXRvcnMuIFNvbWUgYWN0aW9ucyBpbiB0aGlzIG1lbnUgYWxzbyBhbGxvdyB0byBvcHRpb25hbGx5IG9ubHkgYmUgcGVyZm9ybWVkIGJ5IHN1cGVyIG1vZGVyYXRvcnMuIiwgIlN1cGVyIE1vZGVyYXRvcnMiLCAibW9kX3Rvb2xzX3N1cGVyTW9kZXJhdG9ycyIsIGluaXRpYWxNb2RzLCAoKSA9PiBVcGRhdGVNb2RzKCkpOw0KICAgICAgICB1aS5BZGRUaXRsZSgiU3VwZXIgTW9kZXJhdG9yIE9ubHkgUHJpdmlsaWdlcyIsICJTdXBlciBNb2RlcmF0b3JzIik7DQogICAgICAgIHVpLkFkZFRvZ2dsZVN3aXRjaCgiQ2hhbm5lbCBSZXdhcmQgTWFuYWdlbWVudCIsICJPbmx5IGFsbG93IHN1cGVyIG1vZGVyYXRvcnMgdG8gbWFuYWdlIGNoYW5uZWwgcG9pbnQgcmV3YXJkcy4iLCAiU3VwZXIgTW9kZXJhdG9ycyIsICJtb2RfdG9vbHNfY2hhbm5lbFJld2FyZHNTdXBlck1vZHNPbmx5IiwgZmFsc2UpOw0KICAgICAgICB1aS5BZGRUb2dnbGVTd2l0Y2goIk9CUyBNYW5hZ2VtZW50IiwgIk9ubHkgYWxsb3cgc3VwZXIgbW9kZXJhdG9ycyB0byBwZXJmb3JtIE9CUyByZWxhdGVkIGNvbW1hbmRzLiIsICJTdXBlciBNb2RlcmF0b3JzIiwgIm1vZF90b29sc19vYnNTY2VuZXNTdXBlck1vZHNPbmx5IiwgZmFsc2UpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB1aS5BZGRUaXRsZSgiQ2hhdCBSZXNwb25zZXMiLCAiQ2hhdCBSZXNwb25zZXMiKTsNCiAgICAgICAgdWkuQWRkRGVzY3JpcHRpb24oIllvdSBjYW4gZWRpdCBhbnkgY2hhdCByZXNwb25zZXMgaGVyZS4gVGhlIHZhcmlhYmxlcyB0aGF0IGNhbiBiZSB1c2VkIGFyZSBsaXN0ZWQgdW5kZXIgZWFjaCB0ZXh0IGJveC5cblxueyNmYmNlMDB8KipJZiB5b3UgZG9uJ3Qgd2FudCB0byBzaG93IGFueSByZXNwb25zZSwganVzdCBlbnRlciBhIHNpbmdsZSBoeXBoZW4gLSBhcyB0aGUgdGV4dC4qKn0iLCAiQ2hhdCBSZXNwb25zZXMiKTsNCiAgICAgICAgdWkuQWRkVGl0bGUoIkdlbmVyYWwiLCAiQ2hhdCBSZXNwb25zZXMiKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkJyb2FkY2FzdGVyIE9ubHkiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlYnJvYWRjYXN0ZXJOYW1lJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZUJyb2FkY2FzdGVyT25seSIsICJAJXVzZXIlLCBvbmx5ICVicm9hZGNhc3Rlck5hbWUlIGlzIGFsbG93ZWQgdG8gcGVyZm9ybSB0aGF0IGFjdGlvbi4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlN1cGVyIE1vZGVyYXRvcnMgT25seSIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUsICVicm9hZGNhc3Rlck5hbWUlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlU3VwZXJNb2RlcmF0b3JzT25seSIsICJAJXVzZXIlLCBvbmx5IHN1cGVyIG1vZGVyYXRvcnMgYW5kICVicm9hZGNhc3Rlck5hbWUlIGFyZSBhbGxvd2VkIHRvIHBlcmZvcm0gdGhhdCBhY3Rpb24uIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJObyBVc2VyIFByb3ZpZGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJWNvbW1hbmQlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlQ29tbWFuZE5vVXNlclByb3ZpZGVkIiwgIkAldXNlciUsIHBsZWFzZSBwcm92aWRlIGEgdXNlcm5hbWUuIEV4YW1wbGU6ICclY29tbWFuZCUgdGF3bWFlJyIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiVXNlciBEb2VzIE5vdCBFeGlzdCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUsICV0YXJnZXRVc2VyJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVVzZXJEb2VzTm90RXhpc3QiLCAiQCV1c2VyJSwgdGhlIHVzZXIgJyV0YXJnZXRVc2VyJScgZG9lcyBub3QgZXhpc3QuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJBZmZpbGlhdGVkIFJlcXVpcmVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICVicm9hZGNhc3Rlck5hbWUlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlQWZmaWxpYXRlZFJlcXVpcmVkIiwgIlRoaXMgYWN0aW9uIHJlcXVpcmVzIEAlYnJvYWRjYXN0ZXJOYW1lJSB0byBiZSBlaXRoZXIgYWZmaWxpYXRlZCBvciBwYXJ0bmVyZWQgOigiKTsNCiAgICAgICAgLy8g4pSA4pSA4pSAIFVSTCBGaWx0ZXIg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSADQogICAgICAgIHVpLkFkZFRpdGxlKCJVUkwgRmlsdGVyIiwgIkNoYXQgUmVzcG9uc2VzIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJSZWFzb24gKFBvc3RlZCBVUkwgV2l0aG91dCBQZXJtaXNzaW9uKSIsICJUaGlzIGlzIGp1c3QgdGhlIHJlYXNvbiBnaXZlbiBmb3IgdGltZW91dHMgZXRjLCBub3QgYSBjaGF0IHJlc3BvbnNlLiIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfcmVhc29uVXJsIiwgIlBvc3RlZCBhIFVSTCB0byBjaGF0IHdpdGhvdXQgcGVybWlzc2lvbi4gQXV0b21hdGljYWxseSBoYW5kbGVkIGJ5IFN0cmVhbWVyLmJvdCIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiVVJMIFdpdGhvdXQgUGVybWlzc2lvbiIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VVcmxXYXJuaW5nIiwgIkAldXNlciUsIHBsZWFzZSBkb24ndCBwb3N0IGxpbmtzIHRvIGNoYXQuIEFzayBmb3IgYSBwZXJtaXNzaW9uIGJlZm9yZWhhbmQuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJVUkwgUGVybWl0IFN1Y2Nlc3MiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAldGFyZ2V0VXNlciUsICVwZXJtaXREdXJhdGlvbiUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VQZXJtaXRTdWNjZXNzIiwgIkAldGFyZ2V0VXNlciUsIHlvdSBjYW4gbm93IHBvc3QgbGlua3MgdG8gY2hhdCBmb3IgdGhlIG5leHQgJXBlcm1pdER1cmF0aW9uJSBzZWNvbmRzLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiVVJMIEFkZGVkIFRvIFdoaXRlbGlzdCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUsICV1cmwlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlVXJsQWRkZWRUb1doaXRlbGlzdCIsICInJXVybCUnIGhhcyBiZWVuIGFkZGVkIHRvIHRoZSB3aGl0ZWxpc3QuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJVUkwgUmVtb3ZlZCBGcm9tIFdoaXRlbGlzdCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUsICV1cmwlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlVXJsUmVtb3ZlZEZyb21XaGl0ZWxpc3QiLCAiJyV1cmwlJyBoYXMgYmVlbiByZW1vdmVkIGZyb20gdGhlIHdoaXRlbGlzdC4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlVSTCBBbHJlYWR5IE9uIFdoaXRlbGlzdCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUsICV1cmwlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlVXJsQWxyZWFkeU9uV2hpdGVsaXN0IiwgIkAldXNlciUsICcldXJsJScgaXMgYWxyZWFkeSB3aGl0ZWxpc3RlZC4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlVSTCBOb3QgT24gV2hpdGVsaXN0IiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJXVybCUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VVcmxOb3RPbldoaXRlbGlzdCIsICJAJXVzZXIlLCAnJXVybCUnIGlzIG5vdCBvbiB0aGUgd2hpdGVsaXN0LiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiR2V0IFVSTCBXaGl0ZWxpc3QiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAldXJsV2hpdGVsaXN0JSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVVybEdldFdoaXRlbGlzdCIsICJAJXVzZXIlLCBsaW5rcyBmcm9tIHRoZXNlIHdlYnNpdGVzIGNhbiBiZSBwb3N0ZWQgdG8gY2hhdDogJXVybFdoaXRlbGlzdCUiKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIk5vIFVSTHMgT24gV2hpdGVsaXN0IiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVVybE5vV2hpdGVsaXN0IiwgIkAldXNlciUsIHRoZXJlIGFyZSBjdXJyZW50bHkgbm8gbGlua3Mgb24gdGhlIHdoaXRlbGlzdC4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlVSTCBGaWx0ZXIgRW5hYmxlZCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VUb2dnbGVVcmxFbmFibGVkIiwgIlVSTCBmaWx0ZXIgaGFzIGJlZW4gZW5hYmxlZC4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlVSTCBGaWx0ZXIgRGlzYWJsZWQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlVG9nZ2xlVXJsRGlzYWJsZWQiLCAiVVJMIGZpbHRlciBoYXMgYmVlbiBkaXNhYmxlZC4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlVzZXIgQWRkZWQgVG8gV2hpdGVsaXN0IiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJXRhcmdldFVzZXIlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlVXJsVXNlckFkZGVkVG9XaGl0ZWxpc3QiLCAiQCV0YXJnZXRVc2VyJSBoYXMgYmVlbiBhZGRlZCB0byB0aGUgVVJMIHdoaXRlbGlzdCBhbmQgY2FuIG5vdyBwb3N0IGxpbmtzLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiVVJMIEZpbHRlciBVc2VyIEFscmVhZHkgV2hpdGVsaXN0ZWQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAldGFyZ2V0VXNlciUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VVcmxVc2VyQWxyZWFkeU9uV2hpdGVsaXN0IiwgIkAldGFyZ2V0VXNlciUgaXMgYWxyZWFkeSBvbiB0aGUgVVJMIHdoaXRlbGlzdC4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlVSTCBGaWx0ZXIgVXNlciBSZW1vdmVkIEZyb20gV2hpdGVsaXN0IiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJXRhcmdldFVzZXIlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlVXJsVXNlclJlbW92ZWRGcm9tV2hpdGVsaXN0IiwgIkAldGFyZ2V0VXNlciUgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSBVUkwgd2hpdGVsaXN0LiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiVVJMIEZpbHRlciBVc2VyIE5vdCBPbiBXaGl0ZWxpc3QiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAldGFyZ2V0VXNlciUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VVcmxVc2VyTm90T25XaGl0ZWxpc3QiLCAiQCV0YXJnZXRVc2VyJSBpcyBub3Qgb24gdGhlIFVSTCB3aGl0ZWxpc3QuIik7DQogICAgICAgIC8vIOKUgOKUgOKUgCBTcGFtIEZpbHRlciDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIANCiAgICAgICAgdWkuQWRkVGl0bGUoIlNwYW0gRmlsdGVyIiwgIkNoYXQgUmVzcG9uc2VzIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJSZWFzb24gKEJsYWNrbGlzdGVkIFdvcmQpIiwgIlRoaXMgaXMganVzdCB0aGUgcmVhc29uIGdpdmVuIGZvciB0aW1lb3V0cyBldGMsIG5vdCBhIGNoYXQgcmVzcG9uc2UuIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19yZWFzb25CbGFja2xpc3RlZFdvcmQiLCAiUG9zdGVkIGEgYmxhY2tsaXN0ZWQgd29yZCB0byBjaGF0LiBBdXRvbWF0aWNhbGx5IGhhbmRsZWQgYnkgU3RyZWFtZXIuYm90Iik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJQb3N0ZWQgQmxhY2tsaXN0ZWQgV29yZCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VQb3N0ZWRCbGFja2xpc3RlZFdvcmQiLCAiLSIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiQmxhY2tsaXN0ZWQgV29yZCBBZGRlZCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VCbGFja2xpc3RBZGRlZCIsICJXb3JkIGhhcyBiZWVuIGFkZGVkIHRvIHRoZSBibGFja2xpc3QuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJCbGFja2xpc3RlZCBXb3JkIFJlbW92ZWQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlQmxhY2tsaXN0UmVtb3ZlZCIsICJXb3JkIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgYmxhY2tsaXN0LiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiQmxhY2tsaXN0ZWQgV29yZCBBbHJlYWR5IEFkZGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZUJsYWNrbGlzdEFscmVhZHlBZGRlZCIsICJAJXVzZXIlLCB0aGF0IHdvcmQgaXMgYWxyZWFkeSBibGFja2xpc3RlZC4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkJsYWNrbGlzdGVkIFdvcmQgTm90IExpc3RlZCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VCbGFja2xpc3ROb3RMaXN0ZWQiLCAiQCV1c2VyJSwgdGhhdCB3b3JkIGlzIG5vdCBvbiB0aGUgYmxhY2tsaXN0LiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiRmlsdGVyIEJsYWNrbGlzdGVkIFdvcmRzIEVuYWJsZWQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlVG9nZ2xlQmxhY2tsaXN0ZWRXb3Jkc0VuYWJsZWQiLCAiQmxhY2tsaXN0ZWQgd29yZHMgZmlsdGVyIGhhcyBiZWVuIGVuYWJsZWQuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJGaWx0ZXIgQmxhY2tsaXN0ZWQgV29yZHMgRGlzYWJsZWQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlVG9nZ2xlQmxhY2tsaXN0ZWRXb3Jkc0Rpc2FibGVkIiwgIkJsYWNrbGlzdGVkIHdvcmRzIGZpbHRlciBoYXMgYmVlbiBkaXNhYmxlZC4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkNhcHMgUHJvdGVjdGlvbiBFbmFibGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVRvZ2dsZUNhcHNFbmFibGVkIiwgIkNhcHMgcHJvdGVjdGlvbiBoYXMgYmVlbiBlbmFibGVkLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiQ2FwcyBQcm90ZWN0aW9uIERpc2FibGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVRvZ2dsZUNhcHNEaXNhYmxlZCIsICJDYXBzIHByb3RlY3Rpb24gaGFzIGJlZW4gZGlzYWJsZWQuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJFbW90ZSBQcm90ZWN0aW9uIEVuYWJsZWQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlVG9nZ2xlRW1vdGVzRW5hYmxlZCIsICJFbW90ZSBwcm90ZWN0aW9uIGhhcyBiZWVuIGVuYWJsZWQuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJFbW90ZSBQcm90ZWN0aW9uIERpc2FibGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVRvZ2dsZUVtb3Rlc0Rpc2FibGVkIiwgIkVtb3RlIHByb3RlY3Rpb24gaGFzIGJlZW4gZGlzYWJsZWQuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJBU0NJSSBQcm90ZWN0aW9uIEVuYWJsZWQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlVG9nZ2xlQXNjaWlFbmFibGVkIiwgIkFTQ0lJIHByb3RlY3Rpb24gaGFzIGJlZW4gZW5hYmxlZC4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkFTQ0lJIFByb3RlY3Rpb24gRGlzYWJsZWQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlVG9nZ2xlQXNjaWlEaXNhYmxlZCIsICJBU0NJSSBwcm90ZWN0aW9uIGhhcyBiZWVuIGRpc2FibGVkLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiUmVhc29uIChDYXBzIFNwYW0pIiwgIlRoaXMgaXMganVzdCB0aGUgcmVhc29uIGdpdmVuIGZvciB0aW1lb3V0cyBldGMsIG5vdCBhIGNoYXQgcmVzcG9uc2UuIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19yZWFzb25DYXBzIiwgIkV4Y2Vzc2l2ZSBjYXBzIHVzYWdlLiBBdXRvbWF0aWNhbGx5IGhhbmRsZWQgYnkgU3RyZWFtZXIuYm90Iik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJDYXBzIFNwYW0iLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlbWF4Q2Fwc0NvdW50JSwgJXVzZWRDYXBzQ291bnQlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlQ2FwcyIsICJIZXkgaGV5LCBAJXVzZXIlLCBkaWQgeW91IGZvcmdldCB0byB0dXJuIG9mZiB5b3VyIGNhcHNsb2NrIGJ1dHRvbj8g8J+arCIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiUmVhc29uIChFbW90ZSBTcGFtKSIsICJUaGlzIGlzIGp1c3QgdGhlIHJlYXNvbiBnaXZlbiBmb3IgdGltZW91dHMgZXRjLCBub3QgYSBjaGF0IHJlc3BvbnNlLiIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfcmVhc29uRW1vdGVzIiwgIkV4Y2Vzc2l2ZSBlbW90ZSB1c2FnZS4gQXV0b21hdGljYWxseSBoYW5kbGVkIGJ5IFN0cmVhbWVyLmJvdCIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiRW1vdGUgU3BhbSIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUsICVtYXhFbW90ZUNvdW50JSwgJXVzZWRFbW90ZUNvdW50JSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZUVtb3RlcyIsICJAJXVzZXIlLCB3aHkgZG9uJ3Qgd2Ugc2xvdyBkb3duIHdpdGggdGhlIGVtb3RlIHNwYW0uLi4/IPCfmqwiKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlJlYXNvbiAoQVNDSUkgU3BhbSkiLCAiVGhpcyBpcyBqdXN0IHRoZSByZWFzb24gZ2l2ZW4gZm9yIHRpbWVvdXRzIGV0Yywgbm90IGEgY2hhdCByZXNwb25zZS4iLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX3JlYXNvbkFzY2lpIiwgIkFTQ0lJIHNwYW0gZGV0ZWN0ZWQuIEF1dG9tYXRpY2FsbHkgaGFuZGxlZCBieSBTdHJlYW1lci5ib3QiKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkFTQ0lJIFNwYW0iLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlY3VycmVudFllYXIlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlQXNjaWkiLCAiQCV1c2VyJSwgQVNDSUkgc3BhbSBpbiAlY3VycmVudFllYXIlPyBSZWFsbHk/IPCfmqwiKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlJlZGFjdGVkIE1lc3NhZ2UiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlcmVkYWN0ZWRNZXNzYWdlJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVJlcGxhY2VtZW50TWVzc2FnZSIsICJAJXVzZXIlIHdyb3RlOiAlcmVkYWN0ZWRNZXNzYWdlJSIpOw0KICAgICAgICAvLyDilIDilIDilIAgUG9sbHMgJiBQcmVkaWN0aW9ucyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIANCiAgICAgICAgdWkuQWRkVGl0bGUoIlBvbGxzICYgUHJlZGljdGlvbnMiLCAiQ2hhdCBSZXNwb25zZXMiKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlBvbGwgQ3JlYXRlZCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAlcG9sbFRpdGxlJSwgJXBvbGxEdXJhdGlvbiUsICVwb2xsT3B0aW9ucyUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VQb2xsQ3JlYXRlZCIsICJUaGUgcG9sbCAnJXBvbGxUaXRsZSUnIGhhcyBiZWVuIGNyZWF0ZWQuIFlvdSBoYXZlICVwb2xsRHVyYXRpb24lcyB0aW1lIHRvIHZvdGUgZm9yIHRoZSBvcHRpb25zOiAlcG9sbE9wdGlvbnMlIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJBbHJlYWR5IEFjdGl2ZSBQb2xsIE1lc3NhZ2UiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXBvbGxUaXRsZSUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VBbHJlYWR5QWN0aXZlUG9sbCIsICJDYW4ndCBjcmVhdGUgYSBwb2xsLCBiZWNhdXNlIHRoZSBwb2xsICclcG9sbFRpdGxlJScgaXMgc3RpbGwgYWN0aXZlLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiUG9sbCBFbmRlZCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAlcG9sbFRpdGxlJSwgJXBvbGxXaW5uaW5nT3B0aW9uJSwgJXBvbGxXaW5uaW5nT3B0aW9uVm90ZXMlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlUG9sbEVuZGVkIiwgIlRoZSBwb2xsICclcG9sbFRpdGxlJScgaGFzIGJlZW4gZW5kZWQuICclcG9sbFdpbm5pbmdPcHRpb24lJyBoYXMgd29uIHdpdGggJXBvbGxXaW5uaW5nT3B0aW9uVm90ZXMlIHZvdGVzISIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiUG9sbCBFbmRlZCBUaWVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICVwb2xsV2lubmluZ09wdGlvbnMlLCAlcG9sbFdpbm5pbmdPcHRpb25Wb3RlcyUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VQb2xsRW5kZWRUaWVkIiwgIlRoZSBwb2xsICclcG9sbFRpdGxlJScgaGFzIGJlZW4gZW5kZWQuIFRoZXJlJ3MgYSB0aWUgYmV0d2VlbiAlcG9sbFdpbm5pbmdPcHRpb25zJSB3aXRoICVwb2xsV2lubmluZ09wdGlvblZvdGVzJSB2b3RlcyBlYWNoLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiTm8gQWN0aXZlIFBvbGwiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogKG5vbmUpIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlTm9BY3RpdmVQb2xsIiwgIlRoZXJlJ3MgY3VycmVudGx5IG5vIGFjdGl2ZSBwb2xsLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiUHJlZGljdGlvbiBDcmVhdGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICVwcmVkaWN0aW9uVGl0bGUlLCAlcHJlZGljdGlvbkR1cmF0aW9uJSwgJXByZWRpY3Rpb25PcHRpb25zJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVByZWRpY3Rpb25sQ3JlYXRlZCIsICJUaGUgcHJlZGljdGlvbiAnJXByZWRpY3Rpb25UaXRsZSUnIGhhcyBiZWVuIGNyZWF0ZWQuIFlvdSBoYXZlICVwcmVkaWN0aW9uRHVyYXRpb24lcyB0aW1lIHRvIHZvdGUgZm9yIHRoZSBvcHRpb25zOiAlcHJlZGljdGlvbk9wdGlvbnMlIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJBbHJlYWR5IEFjdGl2ZSBQcmVkaWN0aW9uIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICVwcmVkaWN0aW9uVGl0bGUlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlQWxyZWFkeUFjdGl2ZVByZWRpY3Rpb24iLCAiQ2FuJ3QgY3JlYXRlIGEgcHJlZGljdGlvbiwgYmVjYXVzZSB0aGUgcHJlZGljdGlvbiAnJXByZWRpY3Rpb25UaXRsZSUnIGlzIHN0aWxsIGFjdGl2ZS4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIk5vIEFjdGl2ZSBQcmVkaWN0aW9uIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6IChub25lKSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZU5vQWN0aXZlUHJlZGljdGlvbiIsICJUaGVyZSdzIGN1cnJlbnRseSBubyBhY3RpdmUgcHJlZGljdGlvbi4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlByZWRpY3Rpb24gRW5kZWQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXByZWRpY3Rpb25UaXRsZSUsICVwcmVkaWN0aW9uV2lubmluZ09wdGlvbiUsICVwcmVkaWN0aW9uVG90YWxQb2ludHMlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlUHJlZGljdGlvbkVuZGVkIiwgIlRoZSBwcmVkaWN0aW9uICclcHJlZGljdGlvblRpdGxlJScgaGFzIGJlZW4gZW5kZWQuICclcHJlZGljdGlvbldpbm5pbmdPcHRpb24lJyB3YXMgdGhlIGNvcnJlY3Qgb3V0Y29tZS4gJXByZWRpY3Rpb25Ub3RhbFBvaW50cyUgY2hhbm5lbCBwb2ludHMgYXJlIGJlaW5nIGRpc3RyaWJ1dGVkIGFjcm9zcyB0aGUgd2lubmVycy4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlByZWRpY3Rpb24gTG9ja2VkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICVwcmVkaWN0aW9uVGl0bGUlLCAlcHJlZGljdGlvblRvdGFsVXNlcnMlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlUHJlZGljdGlvbkxvY2tlZCIsICJUaGUgcHJlZGljdGlvbiAnJXByZWRpY3Rpb25UaXRsZSUnIGhhcyBiZWVuIGxvY2tlZC4gJXByZWRpY3Rpb25Ub3RhbFVzZXJzJSBoYXZlIHB1dCB0aGVpciBiZXRzIGluIHBsYWNlLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiUHJlZGljdGlvbiBBbHJlYWR5IExvY2tlZCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAlcHJlZGljdGlvblRpdGxlJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVByZWRpY3Rpb25BbHJlYWR5TG9ja2VkIiwgIlRoZSBwcmVkaWN0aW9uICclcHJlZGljdGlvblRpdGxlJScgaXMgYWxyZWFkeSBsb2NrZWQuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJQcmVkaWN0aW9uIENhbmNlbGxlZCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAlcHJlZGljdGlvblRpdGxlJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVByZWRpY3Rpb25DYW5jZWxsZWQiLCAiVGhlIHByZWRpY3Rpb24gJyVwcmVkaWN0aW9uVGl0bGUlJyBoYXMgYmVlbiBjYW5jZWxsZWQuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJQcmVkaWN0aW9uIE5vdCBMb2NrZWQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlcHJlZGljdGlvblRpdGxlJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVByZWRpY3Rpb25Ob3RMb2NrZWQiLCAiQCV1c2VyJSwgdGhlIHByZWRpY3Rpb24gJyVwcmVkaWN0aW9uVGl0bGUlJyBtdXN0IGJlIGxvY2tlZCBiZWZvcmUgaXQgY2FuIGJlIHJlc29sdmVkLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiSW52YWxpZCBQcmVkaWN0aW9uIE9wdGlvbiIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VQcmVkaWN0aW9uSW52YWxpZE9wdGlvbiIsICJAJXVzZXIlLCB0aGF0IG9wdGlvbiBpcyBub3QgdmFsaWQuIEVpdGhlciB1c2UgdGhlIGV4YWN0IG9wdGlvbiB0aXRsZSBvciB0aGUgbnVtYmVyIG9mIHRoZSBvcHRpb24uIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJQcmVkaWN0aW9uIFJlc29sdmVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICVwcmVkaWN0aW9uVGl0bGUlLCAlcHJlZGljdGlvbldpbm5pbmdPcHRpb24lLCAlcHJlZGljdGlvbldpbm5pbmdPcHRpb25Wb3RlcyUsICVwcmVkaWN0aW9uVG90YWxQb2ludHMlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlUHJlZGljdGlvblJlc29sdmVkIiwgIlRoZSBwcmVkaWN0aW9uICclcHJlZGljdGlvblRpdGxlJScgaGFzIGJlZW4gcmVzb2x2ZWQuICclcHJlZGljdGlvbldpbm5pbmdPcHRpb24lJyB3b24gd2l0aCAlcHJlZGljdGlvbldpbm5pbmdPcHRpb25Wb3RlcyUgdm90ZXMhICVwcmVkaWN0aW9uVG90YWxQb2ludHMlIGNoYW5uZWwgcG9pbnRzIGFyZSBiZWluZyBkaXN0cmlidXRlZCBhY3Jvc3MgdGhlIHdpbm5lcnMuIik7DQogICAgICAgIC8vIOKUgOKUgOKUgCBPQlMgTWFuYWdlbWVudCDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIANCiAgICAgICAgdWkuQWRkVGl0bGUoIk9CUyBNYW5hZ2VtZW50IiwgIkNoYXQgUmVzcG9uc2VzIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJPQlMgTm90IENvbm5lY3RlZCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VPYnNOb3RDb25uZWN0ZWQiLCAiVGhpcyBhY3Rpb24gcmVxdWlyZXMgT0JTIHRvIGJlIGNvbm5lY3RlZCB0byBTdHJlYW1lci5ib3QuIE9CUyBpcyBjdXJyZW50bHkgbm90IGNvbm5lY3RlZC4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIk5vIFNjZW5lIFByb3ZpZGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJWNvbW1hbmQlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlT2JzTm9TY2VuZU5hbWUiLCAiQCV1c2VyJSwgcGxlYXNlIHByb3ZpZGUgYSBzY2VuZSBuYW1lIG9yIHRoZSBpbmRleCBudW1iZXIgb2YgdGhlIHNjZW5lLiBFeGFtcGxlOiAnJWNvbW1hbmQlIDAnIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJTY2VuZSBEb2VzIE5vdCBFeGlzdCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUsICV0YXJnZXRTY2VuZSUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VPYnNOb1N1Y2hTY2VuZSIsICJAJXVzZXIlLCB0aGUgc2NlbmUgJyV0YXJnZXRTY2VuZSUnIGRvZXNuJ3QgZXhpc3QuIENoZWNrIGZvciB0aGUgZXhhY3QgbmFtZSBvciB1c2UgdGhlIGluZGV4IG51bWJlci4gWW91IGNhbiBzZWUgYWxsIGF2YWlsYWJsZSBzY2VuZXMgd2l0aCAnIWdldFNjZW5lcyciKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlNjZW5lIEFscmVhZHkgT24iLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAldGFyZ2V0U2NlbmUlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlT2JzU2NlbmVBbHJlYWR5T24iLCAiQCV1c2VyJSwgdGhlIHNjZW5lICcldGFyZ2V0U2NlbmUlJyBpcyBhbHJlYWR5IG9uLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiU2NlbmUgQ2hhbmdlZCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUsICVvbGRTY2VuZSUsICV0YXJnZXRTY2VuZSUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VPYnNTY2VuZUNoYW5nZWQiLCAiU2NlbmUgY2hhbmdlZCBzdWNjZXNzZnVsbHk6ICclb2xkU2NlbmUlJyDihpIgJyV0YXJnZXRTY2VuZSUnIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJBcHBsaWNhdGlvbiBBdWRpbyBDYXB0dXJlIFNvdXJjZXMgUmVmcmVzaGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJXNvdXJjZUNvdW50JSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZU9ic0FsbEFwcGxpY2F0aW9uQXVkaW9DYXB0dXJlU291cmNlc1JlZnJlc2hlZCIsICJTdWNjZXNzZnVsbHkgcmVmcmVzaGVkICVzb3VyY2VDb3VudCUgQXBwbGljYXRpb24gQXVkaW8gQ2FwdHVyZSBTb3VyY2VzLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiQnJvd3NlciBTb3VyY2VzIFJlZnJlc2hlZCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUsICVzb3VyY2VDb3VudCUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VPYnNBbGxCcm93c2VyU291cmNlc1JlZnJlc2hlZCIsICJTdWNjZXNzZnVsbHkgcmVmcmVzaGVkICVzb3VyY2VDb3VudCUgQnJvd3NlciBTb3VyY2VzLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiU3RyZWFtIEVuZGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZU9ic1N0cmVhbUVuZGVkIiwgIiV1c2VyJSBoYXMgZW5kZWQgdGhlIHN0cmVhbS4iKTsNCiAgICAgICAgLy8g4pSA4pSA4pSAIEhhdGUgUmFpZCBQcm90ZWN0aW9uIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgA0KICAgICAgICB1aS5BZGRUaXRsZSgiSGF0ZSBSYWlkIFByb3RlY3Rpb24iLCAiQ2hhdCBSZXNwb25zZXMiKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkhhdGUgUmFpZCBFbmFibGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6IChub25lKSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZUhhdGVSYWlkUHJvdGVjdGlvbkVuYWJsZWQiLCAiSGF0ZSBSYWlkIFByb3RlY3Rpb24gZW5hYmxlZCA6KSIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiSGF0ZSBSYWlkIERpc2FibGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6IChub25lKSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZUhhdGVSYWlkUHJvdGVjdGlvbkRpc2FibGVkIiwgIkhhdGUgUmFpZCBQcm90ZWN0aW9uIGRpc2FibGVkLiIpOw0KICAgICAgICAvLyDilIDilIDilIAgUmV3YXJkcyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIANCiAgICAgICAgdWkuQWRkVGl0bGUoIlJld2FyZHMgTWFuYWdlbWVudCIsICJDaGF0IFJlc3BvbnNlcyIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiUmV3YXJkcyBBbGwgRW5hYmxlZCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUsICV0b3RhbENvdW50JSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVJld2FyZHNBbGxFbmFibGVkIiwgIkAldXNlciUsIGFsbCByZXdhcmRzIGhhdmUgYmVlbiBlbmFibGVkICgldG90YWxDb3VudCUpLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiUmV3YXJkcyBBbGwgRGlzYWJsZWQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAldG90YWxDb3VudCUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzQWxsRGlzYWJsZWQiLCAiQCV1c2VyJSwgYWxsIHJld2FyZHMgaGF2ZSBiZWVuIGRpc2FibGVkICgldG90YWxDb3VudCUpLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiUmV3YXJkcyBHcm91cCBFbmFibGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJWdyb3VwTmFtZSUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzR3JvdXBFbmFibGVkIiwgIkAldXNlciUsIHJld2FyZCBncm91cCAnJWdyb3VwTmFtZSUnIGhhcyBiZWVuIGVuYWJsZWQuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJSZXdhcmRzIEdyb3VwIERpc2FibGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJWdyb3VwTmFtZSUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzR3JvdXBEaXNhYmxlZCIsICJAJXVzZXIlLCByZXdhcmQgZ3JvdXAgJyVncm91cE5hbWUlJyBoYXMgYmVlbiBkaXNhYmxlZC4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlJld2FyZHMgU2luZ2xlIEVuYWJsZWQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlcmV3YXJkTmFtZSUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzU2luZ2xlRW5hYmxlZCIsICJAJXVzZXIlLCByZXdhcmQgJyVyZXdhcmROYW1lJScgaGFzIGJlZW4gZW5hYmxlZC4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlJld2FyZHMgU2luZ2xlIERpc2FibGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJXJld2FyZE5hbWUlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlUmV3YXJkc1NpbmdsZURpc2FibGVkIiwgIkAldXNlciUsIHJld2FyZCAnJXJld2FyZE5hbWUlJyBoYXMgYmVlbiBkaXNhYmxlZC4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlJld2FyZHMgQWxsIFBhdXNlZCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUsICV0b3RhbENvdW50JSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVJld2FyZHNBbGxQYXVzZWQiLCAiQCV1c2VyJSwgYWxsIHJld2FyZHMgaGF2ZSBiZWVuIHBhdXNlZCAoJXRvdGFsQ291bnQlKS4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlJld2FyZHMgQWxsIFVucGF1c2VkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJXRvdGFsQ291bnQlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlUmV3YXJkc0FsbFVucGF1c2VkIiwgIkAldXNlciUsIGFsbCByZXdhcmRzIGhhdmUgYmVlbiB1bnBhdXNlZCAoJXRvdGFsQ291bnQlKS4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlJld2FyZHMgR3JvdXAgUGF1c2VkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJWdyb3VwTmFtZSUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzR3JvdXBQYXVzZWQiLCAiQCV1c2VyJSwgcmV3YXJkIGdyb3VwICclZ3JvdXBOYW1lJScgaGFzIGJlZW4gcGF1c2VkLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiUmV3YXJkcyBHcm91cCBVbnBhdXNlZCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUsICVncm91cE5hbWUlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlUmV3YXJkc0dyb3VwVW5wYXVzZWQiLCAiQCV1c2VyJSwgcmV3YXJkIGdyb3VwICclZ3JvdXBOYW1lJScgaGFzIGJlZW4gdW5wYXVzZWQuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJSZXdhcmRzIFNpbmdsZSBQYXVzZWQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlcmV3YXJkTmFtZSUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzU2luZ2xlUGF1c2VkIiwgIkAldXNlciUsIHJld2FyZCAnJXJld2FyZE5hbWUlJyBoYXMgYmVlbiBwYXVzZWQuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJSZXdhcmRzIFNpbmdsZSBVbnBhdXNlZCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUsICVyZXdhcmROYW1lJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVJld2FyZHNTaW5nbGVVbnBhdXNlZCIsICJAJXVzZXIlLCByZXdhcmQgJyVyZXdhcmROYW1lJScgaGFzIGJlZW4gdW5wYXVzZWQuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJSZXdhcmRzIE5vIFN1Y2ggR3JvdXAiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlZ3JvdXBOYW1lJSwgJWNvbW1hbmQlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlUmV3YXJkc05vU3VjaEdyb3VwIiwgIkAldXNlciUsIG5vIHJld2FyZCBncm91cCBuYW1lZCAnJWdyb3VwTmFtZSUnLiBVc2UgJyVjb21tYW5kJSA8Z3JvdXA+Jy4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlJld2FyZHMgTm8gU3VjaCBSZXdhcmQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlcmV3YXJkTmFtZSUsICVjb21tYW5kJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVJld2FyZHNOb1N1Y2hSZXdhcmQiLCAiQCV1c2VyJSwgbm8gcmV3YXJkIG5hbWVkICclcmV3YXJkTmFtZSUnLiBVc2UgJyVjb21tYW5kJSA8cmV3YXJkPicuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJSZXdhcmRzIFByb21wdCBDaGFuZ2VkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJXJld2FyZE5hbWUlLCAlbmV3UHJvbXB0JSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVJld2FyZHNQcm9tcHRDaGFuZ2VkIiwgIkAldXNlciUsIHByb21wdCBmb3IgJyVyZXdhcmROYW1lJScgY2hhbmdlZCB0byAnJW5ld1Byb21wdCUnLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiUmV3YXJkcyBUaXRsZSBDaGFuZ2VkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJXJld2FyZE5hbWUlLCAlb2xkVGl0bGUlLCAlbmV3VGl0bGUlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlUmV3YXJkc1RpdGxlQ2hhbmdlZCIsICJAJXVzZXIlLCB0aXRsZSBvZiAnJXJld2FyZE5hbWUlJyBjaGFuZ2VkIGZyb20gJyVvbGRUaXRsZSUnIHRvICclbmV3VGl0bGUlJy4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlJld2FyZHMgQ29zdCBDaGFuZ2VkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJXJld2FyZE5hbWUlLCAlb2xkQ29zdCUsICVuZXdDb3N0JSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVJld2FyZHNDb3N0Q2hhbmdlZCIsICJAJXVzZXIlLCBjb3N0IG9mICclcmV3YXJkTmFtZSUnIHVwZGF0ZWQgZnJvbSAlb2xkQ29zdCUgdG8gJW5ld0Nvc3QlLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiUmV3YXJkcyBOb3QgT3duZWQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlcmV3YXJkTmFtZSUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzTm90T3duZWQiLCAiQCV1c2VyJSwgcmV3YXJkICclcmV3YXJkTmFtZSUnIGlzIG5vdCBvd25lZCBieSB0aGlzIGJvdC4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlJld2FyZHMgTWF4LiBQZXIgU3RyZWFtIEVuYWJsZWQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlcmV3YXJkTmFtZSUsICVtYXhQZXJTdHJlYW1Db3VudCUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzTWF4UGVyU3RyZWFtRW5hYmxlZCIsICJAJXVzZXIlLCByZXdhcmQgJyVyZXdhcmROYW1lJScgaGFzIGJlZW4gc2V0IHRvIG1heC4gJW1heFBlclN0cmVhbUNvdW50JSByZWRlbXB0aW9ucy4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlJld2FyZHMgTWF4LiBQZXIgU3RyZWFtIERpc2FibGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJXJld2FyZE5hbWUlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlUmV3YXJkc01heFBlclN0cmVhbURpc2FibGVkIiwgIkAldXNlciUsIHJld2FyZCAnJXJld2FyZE5hbWUlJyBoYXMgbm8gbW9yZSBtYXguIHBlciBzdHJlYW0gbGltaXQuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJSZXdhcmRzIE1heC4gUGVyIFBlciBVc2VyIFN0cmVhbSBFbmFibGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJXJld2FyZE5hbWUlLCAlbWF4UGVyU3RyZWFtUGVyVXNlckNvdW50JSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVJld2FyZHNNYXhQZXJTdHJlYW1QZXJVc2VyRW5hYmxlZCIsICJAJXVzZXIlLCByZXdhcmQgJyVyZXdhcmROYW1lJScgaGFzIGJlZW4gc2V0IHRvIG1heC4gJW1heFBlclN0cmVhbUNvdW50JSByZWRlbXB0aW9ucyBwZXIgdXNlci4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlJld2FyZHMgTWF4LiBQZXIgUGVyIFVzZXIgU3RyZWFtIERpc2FibGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJXJld2FyZE5hbWUlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlUmV3YXJkc01heFBlclN0cmVhbVBlclVzZXJEaXNhYmxlZCIsICJAJXVzZXIlLCByZXdhcmQgJyVyZXdhcmROYW1lJScgaGFzIG5vIG1vcmUgbWF4LiBwZXIgc3RyZWFtIHBlciB1c2VyIGxpbWl0LiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiUmV3YXJkcyBHbG9iYWwgQ29vbGRvd24gRW5hYmxlZCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUsICVyZXdhcmROYW1lJSwgJW5ld0Nvb2xkb3duJSwgJW9sZENvb2xkb3duJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVJld2FyZHNHbG9iYWxDb29sZG93bkVuYWJsZWQiLCAiQCV1c2VyJSwgcmV3YXJkICclcmV3YXJkTmFtZSUnIG5vdyBoYXMgYSBjb29sZG93biBvZiAlbmV3Q29vbGRvd24lIHNlY29uZHMuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJSZXdhcmRzIEdsb2JhbCBDb29sZG93biBEaXNhYmxlZCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUsICVyZXdhcmROYW1lJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVJld2FyZHNHbG9iYWxDb29sZG93bkRpc2FibGVkIiwgIkAldXNlciUsIHJld2FyZCAnJXJld2FyZE5hbWUlJyBoYXMgbm8gbW9yZSBnbG9iYWwgY29vbGRvd24uIik7DQogICAgICAgIC8vIOKUgOKUgOKUgCBDdXN0b20gQ29tbWFuZHMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSADQogICAgICAgIHVpLkFkZFRpdGxlKCJDdXN0b20gQ29tbWFuZHMiLCAiQ2hhdCBSZXNwb25zZXMiKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkN1c3RvbSBDb21tYW5kIEFkZGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJWNvbW1hbmROYW1lJSwgJWNvbW1hbmRUZXh0JSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZUN1c3RvbUNvbW1hbmRBZGRlZCIsICJAJXVzZXIlLCBjb21tYW5kICclY29tbWFuZE5hbWUlJyBhZGRlZCB3aXRoIHRleHQgJyVjb21tYW5kVGV4dCUnLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiQ3VzdG9tIENvbW1hbmQgRXhjbGFtYXRpb24gUmVxdWlyZWQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlY29tbWFuZE5hbWUlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlQ3VzdG9tQ29tbWFuZEV4TWFyayIsICJAJXVzZXIlLCBjb21tYW5kcyBtdXN0IHN0YXJ0IHdpdGggJyEnLiBUcnkgJyVjb21tYW5kTmFtZSUnLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiQ3VzdG9tIENvbW1hbmQgRWRpdGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJWNvbW1hbmROYW1lJSwgJWNvbW1hbmRUZXh0JSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZUN1c3RvbUNvbW1hbmRFZGl0ZWQiLCAiQCV1c2VyJSwgY29tbWFuZCAnJWNvbW1hbmROYW1lJScgZWRpdGVkIHRvICclY29tbWFuZFRleHQlJy4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkN1c3RvbSBDb21tYW5kIFJlbW92ZWQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlY29tbWFuZE5hbWUlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlQ3VzdG9tQ29tbWFuZFJlbW92ZWQiLCAiQCV1c2VyJSwgY29tbWFuZCAnJWNvbW1hbmROYW1lJScgaGFzIGJlZW4gcmVtb3ZlZC4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkFscmVhZHkgQSBSZWd1bGFyIENvbW1hbmQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlY29tbWFuZE5hbWUlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlQ3VzdG9tQ29tbWFuZHNBbHJlYWR5QVJlZ3VsYXJDb21tYW5kIiwgIkAldXNlciUsICclY29tbWFuZE5hbWUlJyBpcyBhbHJlYWR5IGEgcmVndWxhciBjb21tYW5kLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiQWxyZWFkeSBBIEN1c3RvbSBDb21tYW5kIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJWNvbW1hbmROYW1lJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZUN1c3RvbUNvbW1hbmRzQWxyZWFkeUFDdXN0b21Db21tYW5kIiwgIkAldXNlciUsICclY29tbWFuZE5hbWUlJyBpcyBhbHJlYWR5IGEgY3VzdG9tIGNvbW1hbmQuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJBbHJlYWR5IEEgQ291bnRlciBDb21tYW5kIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJWNvbW1hbmROYW1lJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZUN1c3RvbUNvbW1hbmRzQWxyZWFkeUFDb3VudGVyIiwgIkAldXNlciUsICclY29tbWFuZE5hbWUlJyBpcyBhbHJlYWR5IGEgY291bnRlciBjb21tYW5kLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiQ3VzdG9tIENvbW1hbmQgUmVxdWlyZXMgVGV4dCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUsICVjb21tYW5kJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZUN1c3RvbUNvbW1hbmRzTm9UZXh0IiwgIkAldXNlciUsIHBsZWFzZSBwcm92aWRlIHRleHQgZm9yIHRoZSBjb21tYW5kLiBVc2FnZTogJyVjb21tYW5kJSA8dGV4dD4nLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiTm90IEEgQ3VzdG9tIENvbW1hbmQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlY29tbWFuZE5hbWUlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlQ3VzdG9tQ29tbWFuZE5vdEFDdXN0b21Db21tYW5kIiwgIkAldXNlciUsICclY29tbWFuZE5hbWUlJyBpcyBub3QgYSBjdXN0b20gY29tbWFuZC4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkN1c3RvbSBDb21tYW5kcyBMaXN0IFByZWZpeCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VDdXN0b21Db21tYW5kc0dldENvbW1hbmRzUHJlZml4IiwgIkAldXNlciUsIGF2YWlsYWJsZSBjdXN0b20gY29tbWFuZHM6Iik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJObyBDdXN0b20gQ29tbWFuZHMiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlQ3VzdG9tQ29tbWFuZHNOb0NvbW1hbmRzIiwgIkAldXNlciUsIHRoZXJlIGFyZSBubyBjdXN0b20gY29tbWFuZHMgYXZhaWxhYmxlLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiQ3VzdG9tIENvbW1hbmQgR2xvYmFsIENvb2xkb3duIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJWNvbW1hbmROYW1lJSwgJWdsb2JhbENvb2xkb3duJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZUN1c3RvbUNvbW1hbmRzR2xvYmFsQ29vbGRvd24iLCAiQCV1c2VyJSwgJyVjb21tYW5kTmFtZSUnIGlzIHN0aWxsIG9uIGNvb2xkb3duIGZvciAlZ2xvYmFsQ29vbGRvd24lIHNlY29uZHMuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJDdXN0b20gQ29tbWFuZCBVc2VyIENvb2xkb3duIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJWNvbW1hbmROYW1lJSwgJXVzZXJDb29sZG93biUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VDdXN0b21Db21tYW5kc1VzZXJDb29sZG93biIsICJAJXVzZXIlLCAnJWNvbW1hbmROYW1lJScgaXMgc3RpbGwgb24gY29vbGRvd24gZm9yICV1c2VyQ29vbGRvd24lIHNlY29uZHMgZm9yIHlvdS4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkN1c3RvbSBDb21tYW5kIE5vIFBlcm1pc3Npb24iLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlY29tbWFuZE5hbWUlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlQ3VzdG9tQ29tbWFuZHNOb1Blcm1pc3Npb24iLCAiQCV1c2VyJSwgeW91IGRvbid0IGhhdmUgcGVybWlzc2lvbiB0byB1c2UgJyVjb21tYW5kTmFtZSUnLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiQ3VzdG9tIENvbW1hbmQgTm8gQ291bnRlciBFZGl0IFBlcm1pc3Npb24iLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlY29tbWFuZE5hbWUlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlQ3VzdG9tQ29tbWFuZHNDb3VudGVyRWRpdE5vUGVybWlzc2lvbiIsICJAJXVzZXIlLCB5b3UgZG9uJ3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGVkaXQgdGhlIGNvdW50ZXIgZm9yICclY29tbWFuZE5hbWUlJy4iKTsNCiAgICAgICAgLy8g4pSA4pSA4pSAIENoYW5uZWwgTWFuYWdlbWVudCDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIANCiAgICAgICAgdWkuQWRkVGl0bGUoIkNoYW5uZWwgU2V0dGluZ3MiLCAiQ2hhdCBSZXNwb25zZXMiKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkNoYW5uZWwgVGl0bGUgQ2hhbmdlZCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUsICVuZXdUaXRsZSUsICVvbGRUaXRsZSUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VDaGFubmVsVGl0bGVDaGFuZ2VkIiwgIkAldXNlciUsIHRpdGxlIGNoYW5nZWQgZnJvbSAnJW9sZFRpdGxlJScgdG8gJyVuZXdUaXRsZSUnLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiQ2hhbm5lbCBHYW1lIENoYW5nZWQiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlbmV3R2FtZSUsICVvbGRHYW1lJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZUNoYW5uZWxHYW1lQ2hhbmdlZCIsICJAJXVzZXIlLCBnYW1lL2NhdGVnb3J5IGNoYW5nZWQgZnJvbSAnJW9sZEdhbWUlJyB0byAnJW5ld0dhbWUlJy4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkNoYW5uZWwgR2FtZSBBbHJlYWR5IFNldCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUsICVuZXdHYW1lJSwgJW9sZEdhbWUlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlQ2hhbm5lbEdhbWVBbHJlYWR5U2V0IiwgIkAldXNlciUsIHRoZSBnYW1lIGlzIGFscmVhZHkgc2V0IHRvICclbmV3R2FtZSUnLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiQ2hhbm5lbCBDYXRlZ29yeSBDaGFuZ2VkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJW5ld0dhbWUlLCAlb2xkR2FtZSUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VDaGFubmVsQ2F0ZWdvcnlDaGFuZ2VkIiwgIkAldXNlciUsIGNhdGVnb3J5IGNoYW5nZWQgZnJvbSAnJW9sZEdhbWUlJyB0byAnJW5ld0dhbWUlJy4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkNoYW5uZWwgVGFnIEFkZGVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJWFkZGVkVGFnJSwgJW9sZFRhZ0xpc3QlLCAlbmV3VGFnTGlzdCUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VDaGFubmVsVGFnQWRkZWQiLCAiQCV1c2VyJSwgYWRkZWQgdGFnICclYWRkZWRUYWclJy4gVGFnczogJW5ld1RhZ0xpc3QlIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJDaGFubmVsIFRhZyBSZW1vdmVkIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJXJlbW92ZWRUYWclLCAlb2xkVGFnTGlzdCUsICVuZXdUYWdMaXN0JSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZUNoYW5uZWxUYWdSZW1vdmVkIiwgIkAldXNlciUsIHJlbW92ZWQgdGFnICclcmVtb3ZlZFRhZyUnLiBUYWdzOiAlbmV3VGFnTGlzdCUiKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkNoYW5uZWwgTm8gVGFncyIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VDaGFubmVsTm9UYWdzIiwgIkAldXNlciUsIHRoZXJlIGFyZSBubyB0YWdzIHNldCBvbiB0aGUgY2hhbm5lbC4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkNoYW5uZWwgTWF4IFRhZ3MgUmVhY2hlZCIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VDaGFubmVsTWF4VGFncyIsICJAJXVzZXIlLCB0aGUgY2hhbm5lbCBhbHJlYWR5IGhhcyB0aGUgbWF4aW11bSBvZiAxMCB0YWdzLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiVGFnIE5vdCBJbiBMaXN0IiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJXJlbW92ZWRUYWclIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlQ2hhbm5lbFRhZ05vdEluTGlzdCIsICJAJXVzZXIlLCB0YWcgJyVyZW1vdmVkVGFnJScgaXMgbm90IGluIHRoZSBjaGFubmVs4oCZcyB0YWcgbGlzdC4iKTsNCiAgICAgICAgLy8g4pSA4pSA4pSAIFJhaWRzICYgU2hvdXRvdXQg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSADQogICAgICAgIHVpLkFkZFRpdGxlKCJSYWlkcyAmIFNob3V0b3V0cyIsICJDaGF0IFJlc3BvbnNlcyIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiSW5jb21pbmcgUmFpZCBNZXNzYWdlIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV0YXJnZXRVc2VyJSwgJXRhcmdldFVzZXJOYW1lJSwgJWdhbWUlLCAldGl0bGUlLCAldGFncyUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VJbmNvbWluZ1JhaWQiLCAiJXRhcmdldFVzZXIlIGlzIHJhaWRpbmcgdXMgd2l0aCAldmlld2VycyUgcGVlcHMhIFRoZXkgd2VyZSByZWNlbnRseSBzZWVuIHBsYXlpbmcgJyVnYW1lJScsIGRlZmluaXRlbHkgZ28gY2hlY2sgdGhlbSBvdXQgYW5kIGxlYXZlIGEgZm9sbG93IGF0IGh0dHBzOi8vdHdpdGNoLnR2LyV0YXJnZXRVc2VyTmFtZSUiKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIk91dGdvaW5nIFJhaWQgTWVzc2FnZSIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldGFyZ2V0VXNlciUsICV0YXJnZXRVc2VyTmFtZSUsICVnYW1lJSwgJXRpdGxlJSwgJXRhZ3MlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlT3V0Z29pbmdSYWlkIiwgIldlIGFyZSByYWlkaW5nIG92ZXIgdG8gJXRhcmdldFVzZXIlIGF0IGh0dHBzOi8vdHdpdGNoLnR2LyV0YXJnZXRVc2VyTmFtZSUg4oCTIHRoZXnigJlyZSBwbGF5aW5nICclZ2FtZSUnICgnJXRpdGxlJSfigJ0nKSBNYWtlIHN1cmUgdG8gY29weSBvdXIgcmFpZCBtZXNzYWdlIGFuZCBzaG93IHNvbWUgbG92ZSA8MyIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiUmFpZCBNZXNzYWdlIChTdWJzKSIsICJZb3VyIGN1c3RvbSByYWlkIG1lc3NhZ2UgZm9yIG91dGdvaW5nIHJhaWRzIGZvciBzdWJzY3JpYmVycyAoaW4gY2FzZSB5b3UgdXNlIHN1YiBlbW90ZXMpLiBUaGlzIGlzIHBvc3RlZCBieSB5b3VyIGJyb2FkY2FzdGVyIGFjY291bnQgdW5sZXNzIHlvdSB0b2dnbGUgaXQgYmVsb3cuIEF2YWlsYWJsZSB2YXJpYWJsZXM6ICVicm9hZGNhc3Rlck5hbWVBbGxDYXBzJSwgJWJyb2FkY2FzdGVyTmFtZSUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VTb091dGdvaW5nUmFpZE1lc3NhZ2VTdWJzIiwgIuKcqCAlYnJvYWRjYXN0ZXJOYW1lQWxsQ2FwcyUgUkFJRCDinKggJWJyb2FkY2FzdGVyTmFtZUFsbENhcHMlIFJBSUQg4pyoICVicm9hZGNhc3Rlck5hbWVBbGxDYXBzJSBSQUlEIOKcqCIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiUmFpZCBNZXNzYWdlIChOb24tU3VicykiLCAiWW91ciBjdXN0b20gcmFpZCBtZXNzYWdlIGZvciBvdXRnb2luZyByYWlkcyBmb3Igbm9uLXN1YnNjcmliZXJzLiBBdmFpbGFibGUgdmFyaWFibGVzOiAlYnJvYWRjYXN0ZXJOYW1lQWxsQ2FwcyUsICVicm9hZGNhc3Rlck5hbWUlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlU29PdXRnb2luZ1JhaWRNZXNzYWdlTm9uU3VicyIsICLinKggJWJyb2FkY2FzdGVyTmFtZUFsbENhcHMlIFJBSUQg4pyoICVicm9hZGNhc3Rlck5hbWVBbGxDYXBzJSBSQUlEIOKcqCAlYnJvYWRjYXN0ZXJOYW1lQWxsQ2FwcyUgUkFJRCDinKgiKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIlNob3V0b3V0IE1lc3NhZ2UiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAldGFyZ2V0VXNlciUsICV0YXJnZXRVc2VyTmFtZSUsICVnYW1lJSwgJXRpdGxlJSwgJXRhZ3MlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlU2hvdXRvdXQiLCAiQ2hlY2sgb3V0ICV0YXJnZXRVc2VyJSBhdCBodHRwczovL3R3aXRjaC50di8ldGFyZ2V0VXNlck5hbWUlIGFuZCBzaG93IHNvbWUgbG92ZSA8MyBUaGV5IHdlcmUgcmVjZW50bHkgcGxheWluZyAnJWdhbWUlJy4iKTsNCiAgICAgICAgLy8g4pSA4pSA4pSAIENoYXQgTWFuYWdlbWVudCDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIANCiAgICAgICAgdWkuQWRkVGl0bGUoIkNoYXQgTWFuYWdlbWVudCIsICJDaGF0IFJlc3BvbnNlcyIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiVGltZW91dCBTdXBlcm1vZHMgT25seSIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VUaW1lb3V0U3VwZXJtb2RzT25seSIsICJAJXVzZXIlLCBvbmx5IHN1cGVyIG1vZGVyYXRvcnMgY2FuIHRpbWVvdXQgb3RoZXIgbW9kZXJhdG9ycy4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkNhbm5vdCBUaW1lb3V0IFN1cGVybW9kcyIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VUaW1lb3V0Q2FudFRpbWVvdXRTdXBlcm1vZHMiLCAiQCV1c2VyJSwgeW91IGNhbuKAmXQgdGltZW91dCBhIHN1cGVyIG1vZGVyYXRvci4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkJhbiBTdXBlcm1vZHMgT25seSIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VCYW5TdXBlcm1vZHNPbmx5IiwgIkAldXNlciUsIG9ubHkgc3VwZXIgbW9kZXJhdG9ycyBjYW4gYmFuIG90aGVyIG1vZGVyYXRvcnMuIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJDYW5ub3QgQmFuIFN1cGVybW9kcyIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VCYW5DYW50QmFuU3VwZXJtb2RzIiwgIkAldXNlciUsIHlvdSBjYW7igJl0IGJhbiBhIHN1cGVyIG1vZGVyYXRvci4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkFkcyBSdW4iLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlYWRMZW5ndGglIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlQWRzUnVuIiwgIlN0YXJ0aW5nIGEgJWFkTGVuZ3RoJXMgYWQgYnJlYWshIik7DQogICAgICAgIHVpLkFkZFJlc3BvbnNlQm94KCJHZXQgUHJlLVJvbGwgRnJlZSBUaW1lIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSwgJXByZXJvbGxGcmVlVGltZSUsICVwcmVyb2xsRnJlZVRpbWVNaW51dGVzJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVByZXJvbGxGcmVlVGltZSIsICJQcmUtcm9sbCBhZHMgYXJlIGRpc2FibGVkIGZvciAlcHJlcm9sbEZyZWVUaW1lTWludXRlcyUgbWludXRlcy4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIk5vIFByZS1Sb2xsLUZyZWUgVGltZSIsICJBdmFpbGFibGUgdmFyaWFibGVzOiAldXNlciUiLCAiQ2hhdCBSZXNwb25zZXMiLCAibW9kX3Rvb2xzX21lc3NhZ2VQcmVyb2xsRnJlZVRpbWVaZXJvIiwgIkFkcyBhcmUgY3VycmVudGx5IG5vdCBwcmUtcm9sbCBmcmVlLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiQWQgU25vb3plIFN1Y2Nlc3MiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlLCAlbmV4dEFkTWludXRlcyUsICVzbm9vemVDb3VudCUsICVtaW51dGVzVW50aWxSZWZyZXNoJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVNub296ZUFkc1N1Y2Nlc3MiLCAiQWRzIHN1Y2Nlc3NmdWxseSBzbm9vemVkLiBUaGUgbmV4dCBhZCBub3cgc3RhcnRzIGluICVuZXh0QWRNaW51dGVzJSBtaW51dGVzLiIpOw0KICAgICAgICB1aS5BZGRSZXNwb25zZUJveCgiQWQgU25vb3plIEZhaWwiLCAiQXZhaWxhYmxlIHZhcmlhYmxlczogJXVzZXIlIiwgIkNoYXQgUmVzcG9uc2VzIiwgIm1vZF90b29sc19tZXNzYWdlU25vb3plQWRzRmFpbCIsICJGYWlsZWQgdG8gc25vb3plIGFkcy4iKTsNCiAgICAgICAgdWkuQWRkUmVzcG9uc2VCb3goIkFkIFNub296ZSBGYWlsIChObyBTbm9vemVzIExlZnQpIiwgIkF2YWlsYWJsZSB2YXJpYWJsZXM6ICV1c2VyJSIsICJDaGF0IFJlc3BvbnNlcyIsICJtb2RfdG9vbHNfbWVzc2FnZVNub296ZUFkc0ZhaWxDb3VudFplcm8iLCAiRmFpbGVkIHRvIHNub296ZSBhZHMsIGJlY2F1c2Ugbm8gbW9yZSBzbm9vemVzIHdlcmUgbGVmdC4iKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdWkuTG9nRXhpc3RpbmdTZXR0aW5ncygpOw0KICAgICAgICB1aS5TaG93VUkoKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgcHJpdmF0ZSBzdGF0aWMgc3RyaW5nW10gdXJscyA9IG5ld1tdDQogICAgew0KICAgICAgICAidHdpdGNoLnR2IiwNCiAgICAgICAgInlvdXR1YmUuY29tIiwNCiAgICAgICAgInN0cmVhbWVyLmJvdCIsDQogICAgICAgICJ0YXdtYWUueHl6IiwNCiAgICAgICAgInNwb3RpZnkuY29tIiwNCiAgICAgICAgInNvdW5kY2xvdWQuY29tIiwNCiAgICAgICAgImdpcGh5LmNvbSINCiAgICB9Ow0KICAgIHByaXZhdGUgdm9pZCBSZWZyZXNoQWN0aW9uc0FuZFF1ZXVlcygpDQogICAgew0KICAgICAgICBMaXN0PEFjdGlvbkRhdGE+IF9hY3Rpb25zID0gQ1BILkdldEFjdGlvbnMoKTsNCiAgICAgICAgc3RyaW5nW10gYWN0aW9ucyA9IF9hY3Rpb25zLlNlbGVjdChhID0+IGEuTmFtZSkuV2hlcmUobmFtZSA9PiAhc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShuYW1lKSkuT3JkZXJCeShuYW1lID0+IG5hbWUpLlByZXBlbmQoIjwgQ2hvb3NlIEFuIEFjdGlvbiA+IikuVG9BcnJheSgpOw0KICAgICAgICBzdHJpbmdbXSBxdWV1ZXMgPSBfYWN0aW9ucy5TZWxlY3QoYSA9PiBhLlF1ZXVlKS5XaGVyZShxdWV1ZSA9PiAhc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShxdWV1ZSkpLkRpc3RpbmN0KCkuT3JkZXJCeShxdWV1ZSA9PiBxdWV1ZSkuUHJlcGVuZCgiPCBDaG9vc2UgQSBRdWV1ZSA+IikuVG9BcnJheSgpOw0KICAgICAgICB1aS5VcGRhdGVEeW5hbWljRHJvcGRvd24oIm1vZF90b29sc19mb2xsb3dBdHRhY2tBbGVydEFjdGlvbnMiLCBhY3Rpb25zKTsNCiAgICAgICAgdWkuVXBkYXRlRHluYW1pY0Ryb3Bkb3duKCJtb2RfdG9vbHNfZm9sbG93QXR0YWNrQWxlcnRBY3Rpb25RdWV1ZXMiLCBxdWV1ZXMpOw0KICAgICAgICB1aS5BZGRQb3B1cFdpbmRvdyhleHRlbnNpb25OYW1lLCAiQWN0aW9uICYgQWN0aW9uIFF1ZXVlcyBzdWNjZXNzZnVsbHkgcmVmcmVzaGVkIDopIik7DQogICAgfQ0KDQogICAgcHJpdmF0ZSBhc3luYyB2b2lkIFVwZGF0ZU1vZHMoKQ0KICAgIHsNCiAgICAgICAgdmFyIG1vZExpc3QgPSBhd2FpdCBNb2RMaXN0KCk7DQogICAgICAgIHVpLlVwZGF0ZUR5bmFtaWNEcm9wZG93bigibW9kX3Rvb2xzX3N1cGVyTW9kZXJhdG9ycyIsIG1vZExpc3QpOw0KICAgICAgICB1aS5BZGRQb3B1cFdpbmRvdyhleHRlbnNpb25OYW1lLCAiVHdpdGNoIE1vZGVyYXRvcnMgc3VjY2Vzc2Z1bGx5IHJlZnJlc2hlZCA6KSIpOw0KICAgIH0NCg0KICAgIHByaXZhdGUgYXN5bmMgVGFzazxzdHJpbmdbXT4gTW9kTGlzdCgpDQogICAgew0KICAgICAgICB2YXIgYnJvYWRjYXN0ZXJJbmZvID0gQ1BILlR3aXRjaEdldEJyb2FkY2FzdGVyKCk7DQogICAgICAgIGlmIChicm9hZGNhc3RlckluZm8gPT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgUG9zdFRvTG9nKCJOb3QgbG9nZ2VkIGludG8gYnJvYWRjYXN0ZXIgYWNjb3VudCBmb3IgVHdpdGNoLiBSZXR1cm5pbmcgZW1wdHkgbW9kIGxpc3QuIik7DQogICAgICAgICAgICByZXR1cm4gQXJyYXkuRW1wdHk8c3RyaW5nPigpOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIGJyb2FkY2FzdGVySWQgPSBicm9hZGNhc3RlckluZm8uVXNlcklkOw0KICAgICAgICB2YXIgdG9rZW4gPSBDUEguVHdpdGNoT0F1dGhUb2tlbjsNCiAgICAgICAgdmFyIGNsaWVudElkID0gQ1BILlR3aXRjaENsaWVudElkOw0KICAgICAgICB2YXIgbW9kcyA9IG5ldyBMaXN0PHN0cmluZz4oKTsNCiAgICAgICAgc3RyaW5nIGN1cnNvciA9IG51bGw7DQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICBkbw0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciB1cmwgPSBuZXcgU3RyaW5nQnVpbGRlcigkImh0dHBzOi8vYXBpLnR3aXRjaC50di9oZWxpeC9tb2RlcmF0aW9uL21vZGVyYXRvcnM/YnJvYWRjYXN0ZXJfaWQ9e2Jyb2FkY2FzdGVySWR9JmZpcnN0PTEwMCIpOw0KICAgICAgICAgICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkoY3Vyc29yKSkNCiAgICAgICAgICAgICAgICAgICAgdXJsLkFwcGVuZCgkIiZhZnRlcj17Y3Vyc29yfSIpOw0KICAgICAgICAgICAgICAgIHVzaW5nIHZhciByZXF1ZXN0ID0gbmV3IEh0dHBSZXF1ZXN0TWVzc2FnZShIdHRwTWV0aG9kLkdldCwgdXJsLlRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgICAgIHJlcXVlc3QuSGVhZGVycy5BdXRob3JpemF0aW9uID0gbmV3IEF1dGhlbnRpY2F0aW9uSGVhZGVyVmFsdWUoIkJlYXJlciIsIHRva2VuKTsNCiAgICAgICAgICAgICAgICByZXF1ZXN0LkhlYWRlcnMuQWRkKCJDbGllbnQtSWQiLCBjbGllbnRJZCk7DQogICAgICAgICAgICAgICAgdXNpbmcgdmFyIHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LlNlbmRBc3luYyhyZXF1ZXN0KTsNCiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLklzU3VjY2Vzc1N0YXR1c0NvZGUpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQgdG8gZmV0Y2ggbW9kZXJhdG9yczoge3Jlc3BvbnNlLlN0YXR1c0NvZGV9Iik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBBcnJheS5FbXB0eTxzdHJpbmc+KCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBhd2FpdCByZXNwb25zZS5Db250ZW50LlJlYWRBc1N0cmluZ0FzeW5jKCk7DQogICAgICAgICAgICAgICAgdmFyIGpzb24gPSBKT2JqZWN0LlBhcnNlKGNvbnRlbnQpOw0KICAgICAgICAgICAgICAgIHZhciBkYXRhID0ganNvblsiZGF0YSJdIGFzIEpBcnJheTsNCiAgICAgICAgICAgICAgICBpZiAoZGF0YSA9PSBudWxsIHx8IGRhdGEuQ291bnQgPT0gMCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmICghbW9kcy5BbnkoKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygiTm8gbW9kZXJhdG9ycyBmb3VuZC4iKTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGl0ZW0gaW4gZGF0YSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gaXRlbVsidXNlcl9uYW1lIl0/LlRvU3RyaW5nKCk7DQogICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IGl0ZW1bInVzZXJfaWQiXT8uVG9TdHJpbmcoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdHJpbmcuSXNOdWxsT3JFbXB0eShuYW1lKSAmJiAhc3RyaW5nLklzTnVsbE9yRW1wdHkoaWQpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbW9kcy5BZGQoJCJ7bmFtZX0gKHtpZH0pIik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY3Vyc29yID0ganNvblsicGFnaW5hdGlvbiJdP1siY3Vyc29yIl0/LlRvU3RyaW5nKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB3aGlsZSAoIXN0cmluZy5Jc051bGxPckVtcHR5KGN1cnNvcikpOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpDQogICAgICAgIHsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkV4Y2VwdGlvbiB3aGlsZSBmZXRjaGluZyBtb2RlcmF0b3JzOiB7ZXguTWVzc2FnZX0iKTsNCiAgICAgICAgICAgIHJldHVybiBBcnJheS5FbXB0eTxzdHJpbmc+KCk7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgc29ydGVkID0gbW9kcy5PcmRlckJ5KHggPT4geCkuVG9MaXN0KCk7DQogICAgICAgIHJldHVybiBzb3J0ZWQuVG9BcnJheSgpOw0KICAgIH0NCg0KICAgIHByaXZhdGUgc3RhdGljIHN0cmluZ1tdIHNjZW5lTGlzdCA9IG5ldyBzdHJpbmdbXQ0KICAgIHsNCiAgICAgICAgIjwgQ2hvb3NlIEEgU2NlbmUgPiINCiAgICB9Ow0KICAgIHByaXZhdGUgdm9pZCBJbml0T0JTU2NlbmVzKCkNCiAgICB7DQogICAgICAgIGludCBjb25uZWN0aW9uID0gR2V0Q29ubmVjdGVkT0JTSW5kZXgoKTsNCiAgICAgICAgaWYgKGNvbm5lY3Rpb24gPCAwKQ0KICAgICAgICB7DQogICAgICAgICAgICBQb3N0VG9Mb2coIk9CUyBub3QgY29ubmVjdGVkLiIpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgc3RyaW5nIHNjZW5lTGlzdFJlc3BvbnNlID0gQ1BILk9ic1NlbmRSYXcoIkdldFNjZW5lTGlzdCIsICJ7fSIsIGNvbm5lY3Rpb24pOw0KICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkoc2NlbmVMaXN0UmVzcG9uc2UpIHx8IHNjZW5lTGlzdFJlc3BvbnNlID09ICJ7fSIpDQogICAgICAgIHsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiRW1wdHkgc2NlbmUgbGlzdCByZXNwb25zZSIpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgc2NlbmVMaXN0ID0gSk9iamVjdC5QYXJzZShzY2VuZUxpc3RSZXNwb25zZSlbInNjZW5lcyJdLlNlbGVjdChzID0+IChzdHJpbmcpc1sic2NlbmVOYW1lIl0pLk9yZGVyQnkobiA9PiBuLCBTdHJpbmdDb21wYXJlci5PcmRpbmFsSWdub3JlQ2FzZSkuUHJlcGVuZCgiPCBDaG9vc2UgQSBTY2VuZSA+IikuVG9BcnJheSgpOw0KICAgIH0NCg0KICAgIHByaXZhdGUgdm9pZCBVcGRhdGVTY2VuZXMoKQ0KICAgIHsNCiAgICAgICAgaW50IGNvbm5lY3Rpb24gPSBHZXRDb25uZWN0ZWRPQlNJbmRleCgpOw0KICAgICAgICBpZiAoY29ubmVjdGlvbiA8IDApDQogICAgICAgIHsNCiAgICAgICAgICAgIHVpLkFkZFBvcHVwV2luZG93KGV4dGVuc2lvbk5hbWUsICJGYWlsZWQgdG8gcmVmcmVzaCBzY2VuZXMuIE9CUyBpcyBub3QgY29ubmVjdGVkLiIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJPQlMgbm90IGNvbm5lY3RlZC4iKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIHN0cmluZyBzY2VuZUxpc3RSZXNwb25zZSA9IENQSC5PYnNTZW5kUmF3KCJHZXRTY2VuZUxpc3QiLCAie30iLCBjb25uZWN0aW9uKTsNCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KHNjZW5lTGlzdFJlc3BvbnNlKSB8fCBzY2VuZUxpc3RSZXNwb25zZSA9PSAie30iKQ0KICAgICAgICB7DQogICAgICAgICAgICB1aS5BZGRQb3B1cFdpbmRvdyhleHRlbnNpb25OYW1lLCAiRmFpbGVkIHRvIHJlZnJlc2ggT0JTIHNjZW5lcy4iKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiRW1wdHkgc2NlbmUgbGlzdCByZXNwb25zZSIpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgc2NlbmVMaXN0ID0gSk9iamVjdC5QYXJzZShzY2VuZUxpc3RSZXNwb25zZSlbInNjZW5lcyJdLlNlbGVjdChzID0+IChzdHJpbmcpc1sic2NlbmVOYW1lIl0pLk9yZGVyQnkobiA9PiBuLCBTdHJpbmdDb21wYXJlci5PcmRpbmFsSWdub3JlQ2FzZSkuUHJlcGVuZCgiPCBDaG9vc2UgQSBTY2VuZSA+IikuVG9BcnJheSgpOw0KICAgICAgICB1aS5VcGRhdGVEeW5hbWljRHJvcGRvd24oIm1vZF90b29sc19vYnNFeGNsdWRlZFNjZW5lTGlzdCIsIHNjZW5lTGlzdCk7DQogICAgICAgIHVpLkFkZFBvcHVwV2luZG93KGV4dGVuc2lvbk5hbWUsICJPQlMgc2NlbmVzIHN1Y2Nlc3NmdWxseSByZWZyZXNoZWQgOikiKTsNCiAgICB9DQoNCiAgICBwcml2YXRlIHN0YXRpYyBpbnQgX2Nvbm5lY3Rpb24gPSAtMTsNCiAgICBwcml2YXRlIGludCBHZXRDb25uZWN0ZWRPQlNJbmRleCgpDQogICAgew0KICAgICAgICBpZiAoX2Nvbm5lY3Rpb24gPj0gMCkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKENQSC5PYnNJc0Nvbm5lY3RlZChfY29ubmVjdGlvbikpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiUHJldmlvdXMgT0JTIGluZGV4IHtfY29ubmVjdGlvbn0gc3RpbGwgY29ubmVjdGVkLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBfY29ubmVjdGlvbjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiUHJldmlvdXMgT0JTIGluZGV4IHtfY29ubmVjdGlvbn0gbG9zdDsgY2hlY2tpbmcgYWdhaW4uLi4iKTsNCiAgICAgICAgICAgIF9jb25uZWN0aW9uID0gLTE7DQogICAgICAgIH0NCg0KICAgICAgICBQb3N0VG9Mb2coIkNoZWNraW5nIGZvciBleGlzdGluZyBPQlMgY29ubmVjdGlvbnMuLi4iKTsNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPD0gMTA7IGkrKykNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKENQSC5PYnNJc0Nvbm5lY3RlZChpKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJPQlMgaW5kZXgge2l9IGlzIGNvbm5lY3RlZC4iKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gX2Nvbm5lY3Rpb24gPSBpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgUG9zdFRvTG9nKCJObyBleGlzdGluZyBjb25uZWN0aW9ucyBmb3VuZDsgYXR0ZW1wdGluZyB0byBjb25uZWN0Li4uIik7DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDw9IDEwOyBpKyspDQogICAgICAgIHsNCiAgICAgICAgICAgIENQSC5PYnNDb25uZWN0KGkpOw0KICAgICAgICAgICAgQ1BILldhaXQoMjUwKTsNCiAgICAgICAgICAgIGlmIChDUEguT2JzSXNDb25uZWN0ZWQoaSkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiT0JTIGluZGV4IHtpfSBzdWNjZXNzZnVsbHkgY29ubmVjdGVkIGFmdGVyIHJldHJ5LiIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBfY29ubmVjdGlvbiA9IGk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBQb3N0VG9Mb2coIk5vIE9CUyBjb25uZWN0aW9uIGZvdW5kIGFmdGVyIHJldHJpZXMuIik7DQogICAgICAgIHJldHVybiBfY29ubmVjdGlvbjsNCiAgICB9DQoNCiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBIdHRwQ2xpZW50IGNsaWVudCA9IG5ldyBIdHRwQ2xpZW50DQogICAgew0KICAgICAgICBUaW1lb3V0ID0gVGltZVNwYW4uRnJvbVNlY29uZHMoMTApDQogICAgfTsNCiAgICBwdWJsaWMgdm9pZCBQb3N0VG9Mb2coc3RyaW5nIGxvZykNCiAgICB7DQogICAgICAgIENQSC5Mb2dJbmZvKCJbIiArIGV4dGVuc2lvbk5hbWUgKyAiIHYuIiArIGV4dGVuc2lvblZlcnNpb24gKyAiXSAiICsgbG9nKTsNCiAgICB9DQp9",
                                "precompile": false,
                                "delayStart": false,
                                "saveResultToVariable": false,
                                "saveToVariable": "",
                                "id": "729e55f1-541e-4525-98dd-7a1429be4036",
                                "weight": 0.0,
                                "type": 99999,
                                "parentId": "ad7e150a-b9c2-4352-a21e-4083772f8c24",
                                "enabled": false,
                                "index": 3
                            }
                        ],
                        "id": "ad7e150a-b9c2-4352-a21e-4083772f8c24",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 3
                    }
                ],
                "collapsedGroups": [
                    "27f00b22-f7a1-4937-b93d-ffbc337952f1"
                ]
            },
            {
                "id": "737e9dea-4e6e-4eec-ad6a-c6ba485fde51",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": true,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] # - URL Filter",
                "group": "MOD TOOLS - URL Filter",
                "alwaysRun": true,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "id": "46223efa-10ea-443b-892c-d143327a1ed9",
                        "type": 133,
                        "enabled": true,
                        "exclusions": []
                    },
                    {
                        "id": "35a570bb-b019-4fd6-a5f5-cb243059f1ae",
                        "type": 463,
                        "enabled": true,
                        "exclusions": []
                    },
                    {
                        "id": "d00746d0-3d9c-40fd-a9a8-1d29266f4e6b",
                        "type": 495,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "e0422f45-6c90-45d7-982b-875d45bb896a",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "f6040727-86a3-42a1-ac2d-637922dae23e",
                                "enabled": true,
                                "index": 2
                            },
                            {
                                "variableName": "debug",
                                "value": true,
                                "autoType": true,
                                "id": "5d940316-04bd-4998-8cae-4c3a3f865530",
                                "weight": 0.0,
                                "type": 123,
                                "parentId": "f6040727-86a3-42a1-ac2d-637922dae23e",
                                "enabled": true,
                                "index": 3
                            },
                            {
                                "name": "[MOD TOOLS] URL Filter",
                                "description": "",
                                "references": [
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\mscorlib.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Core.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Net.Http.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Net.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Web.dll",
                                    ".\\Microsoft.Bcl.AsyncInterfaces.dll",
                                    ".\\System.Threading.Tasks.Extensions.dll",
                                    ".\\Newtonsoft.Json.dll",
                                    ".\\Newtonsoft.Json.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Runtime.Serialization.dll",
                                    ".\\Microsoft.Bcl.AsyncInterfaces.dll",
                                    ".\\System.Threading.Tasks.Extensions.dll",
                                    ".\\Microsoft.CodeAnalysis.dll",
                                    ".\\System.Collections.Immutable.dll",
                                    ".\\System.Reflection.Metadata.dll",
                                    ".\\dlls\\TawmaeUI.dll"
                                ],
                                "byteCode": "dXNpbmcgU3lzdGVtOw0KdXNpbmcgU3lzdGVtLkxpbnE7DQp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsNCnVzaW5nIFN5c3RlbS5UZXh0LlJlZ3VsYXJFeHByZXNzaW9uczsNCnVzaW5nIFN5c3RlbS5XZWI7DQp1c2luZyBTeXN0ZW0uTmV0Ow0KdXNpbmcgU3lzdGVtLk5ldC5IdHRwOw0KdXNpbmcgU3lzdGVtLk5ldC5IdHRwLkhlYWRlcnM7DQp1c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzOw0KdXNpbmcgTmV3dG9uc29mdC5Kc29uLkxpbnE7DQp1c2luZyBOZXd0b25zb2Z0Lkpzb247DQp1c2luZyBTeXN0ZW0uR2xvYmFsaXphdGlvbjsNCnVzaW5nIFN5c3RlbS5UZXh0Ow0KdXNpbmcgVGF3bWFlVUk7DQoNCnB1YmxpYyBjbGFzcyBDUEhJbmxpbmUNCnsNCiAgICBwdWJsaWMgYm9vbCBFeGVjdXRlKCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBHZXRCcm9hZGNhc3Rlck5hbWUoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRXZlbnRUeXBlIF9lID0gQ1BILkdldEV2ZW50VHlwZSgpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJtZXNzYWdlIiwgb3V0IHN0cmluZyBtZXNzYWdlKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygibXNnSWQiLCBvdXQgc3RyaW5nIG1lc3NhZ2VJZCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChfZSA9PSBFdmVudFR5cGUuVHdpdGNoQXV0b01vZE1lc3NhZ2VIZWxkKQ0KICAgICAgICB7DQogICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJyYXdJbnB1dCIsIG91dCBtZXNzYWdlKTsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoIm1lc3NhZ2VJZCIsIG91dCBtZXNzYWdlSWQpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygiZmlyc3RNZXNzYWdlIiwgb3V0IGJvb2wgZmlyc3RNZXNzYWdlKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygiZGVidWciLCBvdXQgYm9vbCBkZWJ1Zyk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghX3JlZ2V4LklzTWF0Y2gobWVzc2FnZSkgJiYgIWZpcnN0TWVzc2FnZSAmJiBfZSAhPSBFdmVudFR5cGUuVHdpdGNoQXV0b01vZE1lc3NhZ2VIZWxkICYmIF9lICE9IEV2ZW50VHlwZS5Ud2l0Y2hTdXNwaWNpb3VzVXNlck1lc3NhZ2UpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJOYW1lIiwgb3V0IHN0cmluZyB1c2VyTmFtZSk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICh1c2VyTmFtZSA9PSBicm9hZGNhc3Rlck5hbWUgfHwgdXNlck5hbWUgPT0gYm90TmFtZSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKGRlYnVnKQ0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkFsbG93ZWQgbGluayBpbiBjaGF0IGZyb20gYnJvYWRjYXN0ZXIvYm90ICd7dXNlck5hbWV9JyAoJ3ttZXNzYWdlfScpIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyIiwgb3V0IHN0cmluZyB1c2VyKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlcklkIiwgb3V0IHN0cmluZyB1c2VySWQpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJpc1N1YnNjcmliZWQiLCBvdXQgYm9vbCBpc1N1YnNjcmliZWQpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJpc01vZGVyYXRvciIsIG91dCBib29sIGlzTW9kZXJhdG9yKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygiaXNWaXAiLCBvdXQgYm9vbCBpc1ZpcCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEZldGNoU2V0dGluZ3MoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFTaGFyZWRDaGF0Q2hlY2soZGVidWcsIHVzZXIsIG1lc3NhZ2UpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAodXJsV2hpdGVsaXN0ZWRVc2Vycy5Db250YWlucyh1c2VyTmFtZSkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkFsbG93ZWQgbGluayBpbiBjaGF0IGZyb20gd2hpdGVsaXN0ZWQgdXNlciAne3VzZXJOYW1lfScgKCd7bWVzc2FnZX0nKSIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKGZpcnN0TWVzc2FnZSB8fCBfZSA9PSBFdmVudFR5cGUuVHdpdGNoQXV0b01vZE1lc3NhZ2VIZWxkIHx8IF9lID09IEV2ZW50VHlwZS5Ud2l0Y2hTdXNwaWNpb3VzVXNlck1lc3NhZ2UpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBtYXRjaGVzID0gX3JlZ2V4Lk1hdGNoZXMobWVzc2FnZSk7DQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgYm9vbCBjb250YWluc0NsYXNzaWNUbGQgPSBUTERDaGVjayhtZXNzYWdlLlRvTG93ZXIoKSwgY2xhc3NpY3RsZHMpOw0KICAgICAgICAgICAgYm9vbCBjb250YWluc0RvdFRsZCA9IERvdFRMRENoZWNrKE5vcm1hbGl6ZU1lc3NhZ2UobWVzc2FnZSksIHRsZHMpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiRXZlbnRUeXBlOiB7X2V9IC8vIEZpcnN0IE1lc3NhZ2U/OiB7Zmlyc3RNZXNzYWdlfSAvLyBCYW5TYWxlQm90czoge2JhblNhbGVCb3RzfSAvLyBDb250YWluc0RvdFRsZDoge2NvbnRhaW5zRG90VGxkfSAvLyBjb250YWluc0NsYXNzaWNUbGQ6IHtjb250YWluc0NsYXNzaWNUbGR9IC8vIE1lc3NhZ2UgU3RyaW5nOiB7bWVzc2FnZX0gLy8gTm9ybWFsaXplZCBNZXNzYWdlOiB7Tm9ybWFsaXplTWVzc2FnZShtZXNzYWdlKX0iKTsNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBpZiAoKGZpcnN0TWVzc2FnZSB8fCBfZSA9PSBFdmVudFR5cGUuVHdpdGNoQXV0b01vZE1lc3NhZ2VIZWxkIHx8IF9lID09IEV2ZW50VHlwZS5Ud2l0Y2hTdXNwaWNpb3VzVXNlck1lc3NhZ2UpICYmIGJhblNhbGVCb3RzICYmIChtYXRjaGVzLkNvdW50ID4gMCB8fCBjb250YWluc0RvdFRsZCB8fCBtZXNzYWdlLkNvbnRhaW5zKCIqKioiKSB8fCAoS2V5d29yZENoZWNrKE5vcm1hbGl6ZU1lc3NhZ2UobWVzc2FnZSkpICYmIGNvbnRhaW5zQ2xhc3NpY1RsZCkpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIENQSC5Ud2l0Y2hCYW5Vc2VyKHVzZXJOYW1lLCAiQXV0b21hdGljIGJhbiBmb3IgbGlrZWx5IGJlaW5nIGEgc3BhbSBib3QiLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgQ1BILlNldFR3aXRjaFVzZXJWYXIodXNlck5hbWUsICJ0YXdtYWVfTU9EX1RPT0xTX2JvdEZsYWciLCB0cnVlLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiQmFubmVkIHt1c2VyTmFtZX0gb24gdGhlaXIgZmlyc3QgZXZlciBtZXNzYWdlIGZvciBjb250YWluaW5nIGEgVVJMOiAiICsgbWVzc2FnZSk7DQogICAgICAgICAgICAgICAgaWYgKF9lID09IEV2ZW50VHlwZS5Ud2l0Y2hBdXRvTW9kTWVzc2FnZUhlbGQpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBDUEguVHdpdGNoRGVueUF1dG9IZWxkTWVzc2FnZShtZXNzYWdlSWQpOw0KICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coIkRlbmllZCBhdXRvLWhlbGQgbWVzc2FnZS4iKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoX2UgPT0gRXZlbnRUeXBlLlR3aXRjaFN1c3BpY2lvdXNVc2VyTWVzc2FnZSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygiUmVzdHJpY3RlZCBzdXNwaWNpb3VzIG1lc3NhZ2UuIik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChmaXJzdE1lc3NhZ2UgJiYgYmFuRGlzY29yZEJvdHMgJiYgKEtleXdvcmRDaGVja0Rpc2NvcmRCb3RzKG1lc3NhZ2UpKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBDUEguVHdpdGNoQmFuVXNlcih1c2VyTmFtZSwgIlRoaXMgd2FzIGFuIGF1dG9tYXRpYyBiYW4gZm9yIHBvdGVudGlhbCBib3Qga2V5d29yZHMgaW4geW91ciBmaXJzdCBtZXNzYWdlIGV2ZXIgZm9yIHRoaXMgY2hhbm5lbC4gSWYgdGhpcyB3YXMgYSBmYWxzZS1wb3NpdGl2ZSwgcGxlYXNlIHN1Ym1pdCBhbiB1bmJhbiBhcHBlYWwuIiwgZmFsc2UpOw0KICAgICAgICAgICAgICAgIENQSC5TZXRUd2l0Y2hVc2VyVmFyKHVzZXJOYW1lLCAibW9kVG9vbHNCYW4iLCB0cnVlLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiQmFubmVkICd7dXNlck5hbWV9JyBiZWNhdXNlIHRoZXkncmUgcG90ZW50aWFsbHkgYSBib3QuIE1lc3NhZ2U6ICIgKyBtZXNzYWdlKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoIXVybEJsb2NrTGlua3MpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiQWxsb3dlZCBsaW5rIGluIGNoYXQgZnJvbSAne3VzZXJOYW1lfScgKCd7bWVzc2FnZX0nKSwgYmVjYXVzZSB0aGUgVVJMIGZpbHRlciBpcyBkaXNhYmxlZC4iKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBEYXRlVGltZSB1c2VyUGVybWl0ID0gQ1BILkdldFR3aXRjaFVzZXJWYXJCeUlkPERhdGVUaW1lPih1c2VySWQsICJ0YXdtYWVfTU9EX1RPT0xTX3VybFBlcm1pc3Npb24iLCBmYWxzZSk7DQogICAgICAgICAgICBib29sIHBlcm1pdCA9IGZhbHNlOw0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIERhdGVUaW1lIG5vdyA9IERhdGVUaW1lLk5vdzsNCiAgICAgICAgICAgIGlmICh1c2VyUGVybWl0ICE9IERhdGVUaW1lLk1pblZhbHVlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFRpbWVTcGFuIHRpbWVQYXNzZWQgPSBub3cgLSB1c2VyUGVybWl0Ow0KICAgICAgICAgICAgICAgIGlmICh0aW1lUGFzc2VkLlRvdGFsU2Vjb25kcyA8PSB1cmxQZXJtaXREdXJhdGlvbikNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkFsbG93ZWQgbGluayBpbiBjaGF0IGZyb20gJ3t1c2VyTmFtZX0nICgne21lc3NhZ2V9JyksIGJlY2F1c2UgdGhleSdyZSBwZXJtaXR0ZWQgKG5vdzoge25vd30gdnMuIHBlcm1pdCB7dXNlclBlcm1pdH0pIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChpc01vZGVyYXRvciB8fCAoaXNWaXAgJiYgdXJsQWxsb3dWaXBzKSB8fCAoaXNTdWJzY3JpYmVkICYmIHVybEFsbG93U3VicykpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiQWxsb3dlZCBsaW5rIGluIGNoYXQgZnJvbSAne3VzZXJOYW1lfScgKCd7bWVzc2FnZX0nKTogLSBtb2Q6IHtpc01vZGVyYXRvcn0sIGlzVmlwIHtpc1ZpcH0sIGlzU3ViIHtpc1N1YnNjcmliZWR9Iik7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBMaXN0PHN0cmluZz4gbG93ZXJjYXNlV2hpdGVsaXN0ZWRVUkxzID0gdXJsV2hpdGVsaXN0ZWRVUkxzLlNlbGVjdCh1cmwgPT4gTm9ybWFsaXplVXJsKHVybCkuVG9Mb3dlcigpKS5Ub0xpc3QoKTsNCiAgICAgICAgICAgIExpc3Q8c3RyaW5nPiBmb3VuZExpbmtzID0gbmV3IExpc3Q8c3RyaW5nPigpOw0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIHN0cmluZyBwYXR0ZXJuID0gQCJcYig/Omh0dHBzPzovLyk/KD86d3d3XC4pP1thLXpBLVowLTktXStcLlthLXpBLVpdezIsfSg/OlwuW2EtekEtWl17Mix9KT8oPzovW15cc10qKT9cYiI7DQogICAgICAgICAgICBNYXRjaENvbGxlY3Rpb24gbWF0Y2hlczIgPSBSZWdleC5NYXRjaGVzKG1lc3NhZ2UsIHBhdHRlcm4sIFJlZ2V4T3B0aW9ucy5JZ25vcmVDYXNlKTsNCiAgICAgICAgICAgIGJvb2wgdmFsaWRUTEQgPSBmYWxzZTsNCiAgICAgICAgICAgIGJvb2wgX2Nvb2xDYXQgPSBmYWxzZTsNCiAgICAgICAgICAgIGZvcmVhY2ggKE1hdGNoIG1hdGNoIGluIG1hdGNoZXMyKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmICghX2Nvb2xDYXQpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJGb3VuZCBsaW5rKHMpIGluICd7dXNlcn0ncycgbWVzc2FnZToge21lc3NhZ2V9Iik7DQogICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHN0cmluZyBfdXJsIGluIHVybFdoaXRlbGlzdGVkVVJMcykNCiAgICAgICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIldoaXRlbGlzdGVkOiB7X3VybH0iKTsNCiAgICAgICAgICAgICAgICAgICAgX2Nvb2xDYXQgPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHN0cmluZyBub3JtYWxpemVkTGluayA9IE5vcm1hbGl6ZVVybChtYXRjaC5WYWx1ZSk7DQogICAgICAgICAgICAgICAgZm91bmRMaW5rcy5BZGQobm9ybWFsaXplZExpbmspOw0KICAgICAgICAgICAgICAgIHN0cmluZyB0bGQgPSBFeHRyYWN0VExEKG5vcm1hbGl6ZWRMaW5rKTsNCiAgICAgICAgICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KHRsZCkgJiYgdGxkcy5Db250YWlucyh0bGQpKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiVmFsaWQgVExEIGRldGVjdGVkOiB7dGxkfSIpOw0KICAgICAgICAgICAgICAgICAgICB2YWxpZFRMRCA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiSW52YWxpZCBvciB1bmtub3duIFRMRCBkZXRlY3RlZDoge3RsZH0iKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJNYXRjaCBWYWx1ZTogIiArIG1hdGNoLlZhbHVlKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJOb3JtYWxpemVkIE1hdGNoIFZhbHVlOiAiICsgbm9ybWFsaXplZExpbmspOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBib29sIGFsbExpbmtzV2hpdGVsaXN0ZWQgPSBmb3VuZExpbmtzLkFsbChsaW5rID0+IGxvd2VyY2FzZVdoaXRlbGlzdGVkVVJMcy5Db250YWlucyhsaW5rLlRvTG93ZXIoKSkpOw0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIGlmIChhbGxMaW5rc1doaXRlbGlzdGVkKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkFsbCBsaW5rcyBhcmUgb24gdGhlIHdoaXRlbGlzdC4gRm91bmQgbGlua3MgY291bnQ6IHtmb3VuZExpbmtzLkNvdW50fSIpOw0KICAgICAgICAgICAgICAgIGZvcmVhY2ggKHN0cmluZyBfdXJsIGluIHVybFdoaXRlbGlzdGVkVVJMcykNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiV2hpdGVsaXN0ZWQ6IHtfdXJsfSIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKHVybEFsbG93Rm9sbG93ZXJzKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhcihpc0ZvbGxvd2luZywgZm9sbG93ZWRBdCkgPSBHZXRGb2xsb3dJbmZvKHVzZXJJZCkuUmVzdWx0Ow0KICAgICAgICAgICAgICAgIGludCBkYXlzU2luY2VGb2xsb3dlZCA9IChEYXRlVGltZS5Ob3cgLSBmb2xsb3dlZEF0KS5EYXlzOw0KICAgICAgICAgICAgICAgIGlmICh1cmxNaW5Gb2xsb3dEYXlzICE9IDApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpZiAoaXNGb2xsb3dpbmcgJiYgZGF5c1NpbmNlRm9sbG93ZWQgPj0gdXJsTWluRm9sbG93RGF5cykNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRm9sbG93aW5nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgc3RyaW5nIHNhbmN0aW9uID0gbnVsbDsNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBpZiAodmFsaWRUTEQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKHVybFRpbWVvdXRVc2VyKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgQ1BILlR3aXRjaFRpbWVvdXRVc2VyKHVzZXJOYW1lLCB1cmxUaW1lb3V0RHVyYXRpb24sIHJlYXNvbiwgZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICBzYW5jdGlvbiA9ICQiVGltZWQgb3V0IGZvciB7dXJsVGltZW91dER1cmF0aW9ufXMuIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgQ1BILlR3aXRjaERlbGV0ZUNoYXRNZXNzYWdlKG1lc3NhZ2VJZCwgYm90KTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHVybFdhcm5Vc2VyKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBDUEguVHdpdGNoV2FyblVzZXIodXNlck5hbWUsIHJlYXNvbik7DQogICAgICAgICAgICAgICAgICAgICAgICBzYW5jdGlvbiA9ICQiV2FybmVkLiI7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBDUEguU2VuZE1lc3NhZ2UobWVzc2FnZVVybFdhcm5pbmcuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikpOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkZvdW5kIFVSTCBpbiB7dXNlcn0ncyBtZXNzYWdlOiB7bWVzc2FnZX0gLy8ge3NhbmN0aW9ufSIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgcHJpdmF0ZSBzdHJpbmcgTm9ybWFsaXplVXJsKHN0cmluZyB1cmwpDQogICAgew0KICAgICAgICBpZiAoIXVybC5TdGFydHNXaXRoKCJodHRwOi8vIikgJiYgIXVybC5TdGFydHNXaXRoKCJodHRwczovLyIpKQ0KICAgICAgICB7DQogICAgICAgICAgICB1cmwgPSAiaHR0cDovLyIgKyB1cmw7DQogICAgICAgIH0NCg0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgVXJpIHVyaSA9IG5ldyBVcmkodXJsKTsNCiAgICAgICAgICAgIHN0cmluZyBob3N0ID0gdXJpLkhvc3Q7DQogICAgICAgICAgICB2YXIgaG9zdFNlZ21lbnRzID0gaG9zdC5TcGxpdCgnLicpOw0KICAgICAgICAgICAgaWYgKGhvc3RTZWdtZW50cy5MZW5ndGggPiAyKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHN0cmluZyBtYWluRG9tYWluID0gJCJ7aG9zdFNlZ21lbnRzW2hvc3RTZWdtZW50cy5MZW5ndGggLSAyXX0ue2hvc3RTZWdtZW50c1tob3N0U2VnbWVudHMuTGVuZ3RoIC0gMV19IjsNCiAgICAgICAgICAgICAgICByZXR1cm4gbWFpbkRvbWFpbjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmV0dXJuIGhvc3Q7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2gNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIHVybDsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IEh0dHBDbGllbnQgY2xpZW50ID0gbmV3IEh0dHBDbGllbnQNCiAgICB7DQogICAgICAgIFRpbWVvdXQgPSBUaW1lU3Bhbi5Gcm9tU2Vjb25kcygyMCkNCiAgICB9Ow0KICAgIHB1YmxpYyBzdGF0aWMgSGFzaFNldDxzdHJpbmc+IHRsZHMgPSBuZXcgSGFzaFNldDxzdHJpbmc+KFN0cmluZ0NvbXBhcmVyLk9yZGluYWxJZ25vcmVDYXNlKTsNCiAgICBwcml2YXRlIGFzeW5jIFRhc2sgRmV0Y2hUTERzKCkNCiAgICB7DQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICBzdHJpbmcgdXJsID0gImh0dHBzOi8vZGF0YS5pYW5hLm9yZy9UTEQvdGxkcy1hbHBoYS1ieS1kb21haW4udHh0IjsNCiAgICAgICAgICAgIEh0dHBSZXNwb25zZU1lc3NhZ2UgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuR2V0QXN5bmModXJsKTsNCiAgICAgICAgICAgIHJlc3BvbnNlLkVuc3VyZVN1Y2Nlc3NTdGF0dXNDb2RlKCk7DQogICAgICAgICAgICBzdHJpbmcgY29udGVudCA9IGF3YWl0IHJlc3BvbnNlLkNvbnRlbnQuUmVhZEFzU3RyaW5nQXN5bmMoKTsNCiAgICAgICAgICAgIHRsZHMgPSBjb250ZW50LlNwbGl0KG5ld1tdIHsgJ1xuJywgJ1xyJyB9LCBTdHJpbmdTcGxpdE9wdGlvbnMuUmVtb3ZlRW1wdHlFbnRyaWVzKS5XaGVyZShsaW5lID0+ICFsaW5lLlN0YXJ0c1dpdGgoIiMiKSkuU2VsZWN0KGxpbmUgPT4gbGluZS5UcmltKCkpLlRvSGFzaFNldChTdHJpbmdDb21wYXJlci5PcmRpbmFsSWdub3JlQ2FzZSk7DQogICAgICAgICAgICBDUEguU2V0R2xvYmFsVmFyKCJ0YXdtYWVfTU9EX1RPT0xTX1RMRF9Db2xsZWN0aW9uIiwgdGxkcywgdHJ1ZSk7DQogICAgICAgICAgICBDUEguTG9nSW5mbygkIltNT0QgVE9PTFNdIFtVUkwgRklMVEVSXSBUTERzIGZldGNoZWQuIik7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBleCkNCiAgICAgICAgew0KICAgICAgICAgICAgQ1BILkxvZ0luZm8oJCJbTU9EIFRPT0xTXSBbVVJMIEZJTFRFUl0gRmV0Y2hUTERzIGV4Y2VwdGlvbjoge2V4Lk1lc3NhZ2V9Iik7DQogICAgICAgICAgICBIYXNoU2V0PHN0cmluZz4gX3RsZHMgPSBDUEguR2V0R2xvYmFsVmFyPEhhc2hTZXQ8c3RyaW5nPj4oInRhd21hZV9NT0RfVE9PTFNfVExEX0NvbGxlY3Rpb24iLCB0cnVlKTsNCiAgICAgICAgICAgIGlmIChfdGxkcy5Db3VudCAhPSAwKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRsZHMgPSBfdGxkczsNCiAgICAgICAgICAgICAgICBDUEguTG9nSW5mbygkIltNT0QgVE9PTFNdIFtVUkwgRklMVEVSXSBGYWxsaW5nIGJhY2sgdG8gVExEcyBpbiBnbG9iYWwgdmFyLiIpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBDUEguTG9nSW5mbygkIltNT0QgVE9PTFNdIFtVUkwgRklMVEVSXSBDYW4ndCBmYWxsYmFjayB0byBnbG9iYWwgdmFyIFRMRHMsIGJlY2F1c2UgZW1wdHkiKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHN0YXRpYyBib29sIERvdFRMRENoZWNrKHN0cmluZyBpbnB1dCwgSGFzaFNldDxzdHJpbmc+IHRsZHMpDQogICAgew0KICAgICAgICBmb3JlYWNoIChzdHJpbmcgdGxkIGluIHRsZHMpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChpbnB1dC5Db250YWlucygiZG90IiArIHRsZC5Ub0xvd2VyKCkpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIHByaXZhdGUgYm9vbCBUTERDaGVjayhzdHJpbmcgaW5wdXQsIEhhc2hTZXQ8c3RyaW5nPiB0bGRzKQ0KICAgIHsNCiAgICAgICAgZm9yZWFjaCAoc3RyaW5nIHRsZCBpbiB0bGRzKQ0KICAgICAgICB7DQogICAgICAgICAgICBzdHJpbmcgcGF0dGVybiA9ICRAIlxie1JlZ2V4LkVzY2FwZSh0bGQuVG9Mb3dlcigpKX1cYiI7DQogICAgICAgICAgICBNYXRjaCBtYXRjaCA9IFJlZ2V4Lk1hdGNoKGlucHV0LlRvTG93ZXIoKSwgcGF0dGVybik7DQogICAgICAgICAgICBpZiAobWF0Y2guU3VjY2VzcykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJUTERDaGVjazoge21hdGNoLlZhbHVlfSIpOw0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIHB1YmxpYyBib29sIEtleXdvcmRDaGVjayhzdHJpbmcgaW5wdXQpDQogICAgew0KICAgICAgICBzdHJpbmdbXSB3b3JkcyA9DQogICAgICAgIHsNCiAgICAgICAgICAgICJ2aXNpdCIsDQogICAgICAgICAgICAicmVtb3ZlIHNwYWNlIiwNCiAgICAgICAgICAgICJyZW1vdmUgdGhlIHNwYWNlIiwNCiAgICAgICAgICAgICJjaGVhcCIsDQogICAgICAgICAgICAidmlld2VyIiwNCiAgICAgICAgICAgICJmYW1vdXMiLA0KICAgICAgICAgICAgInByb21vdGUiDQogICAgICAgIH07DQogICAgICAgIGZvcmVhY2ggKHN0cmluZyB3b3JkIGluIHdvcmRzKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoaW5wdXQuQ29udGFpbnMod29yZCkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgcHVibGljIGJvb2wgS2V5d29yZENoZWNrRGlzY29yZEJvdHMoc3RyaW5nIGlucHV0KQ0KICAgIHsNCiAgICAgICAgc3RyaW5nW10gd29yZHMgPQ0KICAgICAgICB7DQogICAgICAgICAgICAiZGlzY29yZCIsDQogICAgICAgICAgICAiZnJpZW5kcyB3aXRoIHlvdSIsDQogICAgICAgICAgICAiYWRkIG1lIg0KICAgICAgICB9Ow0KICAgICAgICBmb3JlYWNoIChzdHJpbmcgd29yZCBpbiB3b3JkcykNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKGlucHV0LkNvbnRhaW5zKHdvcmQpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIHByaXZhdGUgc3RyaW5nIEV4dHJhY3RUTEQoc3RyaW5nIHVybCkNCiAgICB7DQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoIXVybC5TdGFydHNXaXRoKCJodHRwOi8vIikgJiYgIXVybC5TdGFydHNXaXRoKCJodHRwczovLyIpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHVybCA9ICJodHRwOi8vIiArIHVybDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgVXJpIHVyaSA9IG5ldyBVcmkodXJsKTsNCiAgICAgICAgICAgIHN0cmluZyBob3N0ID0gdXJpLkhvc3Q7DQogICAgICAgICAgICBzdHJpbmdbXSBob3N0U2VnbWVudHMgPSBob3N0LlNwbGl0KCcuJyk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJFeHRyYWN0ZWQgaG9zdDoge2hvc3R9Iik7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJFeHRyYWN0ZWQgVVJJOiB7dXJpfSIpOw0KICAgICAgICAgICAgcmV0dXJuIGhvc3RTZWdtZW50cy5MZW5ndGggPiAxID8gaG9zdFNlZ21lbnRzW2hvc3RTZWdtZW50cy5MZW5ndGggLSAxXS5Ub0xvd2VyKCkgOiBzdHJpbmcuRW1wdHk7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2gNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5FbXB0eTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHByaXZhdGUgYXN5bmMgVGFzazwoYm9vbCBpc0ZvbGxvd2luZywgRGF0ZVRpbWUgZm9sbG93ZWRBdCk+IEdldEZvbGxvd0luZm8oc3RyaW5nIHVzZXJJZCkNCiAgICB7DQogICAgICAgIHZhciBicm9hZGNhc3RlciA9IENQSC5Ud2l0Y2hHZXRCcm9hZGNhc3RlcigpOw0KICAgICAgICBzdHJpbmcgdG9rZW4gPSBDUEguVHdpdGNoT0F1dGhUb2tlbjsNCiAgICAgICAgc3RyaW5nIGNsaWVudElkID0gQ1BILlR3aXRjaENsaWVudElkOw0KICAgICAgICBjbGllbnQuRGVmYXVsdFJlcXVlc3RIZWFkZXJzLkNsZWFyKCk7DQogICAgICAgIGNsaWVudC5EZWZhdWx0UmVxdWVzdEhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IG5ldyBBdXRoZW50aWNhdGlvbkhlYWRlclZhbHVlKCJCZWFyZXIiLCB0b2tlbik7DQogICAgICAgIGNsaWVudC5EZWZhdWx0UmVxdWVzdEhlYWRlcnMuQWRkKCJDbGllbnQtSWQiLCBjbGllbnRJZCk7DQogICAgICAgIHZhciByZXF1ZXN0VXJpID0gJCJodHRwczovL2FwaS50d2l0Y2gudHYvaGVsaXgvY2hhbm5lbHMvZm9sbG93ZXJzP2Jyb2FkY2FzdGVyX2lkPXticm9hZGNhc3Rlci5Vc2VySWR9JnVzZXJfaWQ9e3VzZXJJZH0iOw0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgSHR0cFJlc3BvbnNlTWVzc2FnZSByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5HZXRBc3luYyhyZXF1ZXN0VXJpKTsNCiAgICAgICAgICAgIGlmIChyZXNwb25zZS5Jc1N1Y2Nlc3NTdGF0dXNDb2RlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHN0cmluZyBqc29uUmVzcG9uc2UgPSBhd2FpdCByZXNwb25zZS5Db250ZW50LlJlYWRBc1N0cmluZ0FzeW5jKCk7DQogICAgICAgICAgICAgICAgSk9iamVjdCBqc29uID0gSk9iamVjdC5QYXJzZShqc29uUmVzcG9uc2UpOw0KICAgICAgICAgICAgICAgIHZhciBkYXRhID0ganNvblsiZGF0YSJdOw0KICAgICAgICAgICAgICAgIGlmIChkYXRhICE9IG51bGwgJiYgZGF0YS5IYXNWYWx1ZXMpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZm9sbG93ZXIgPSBkYXRhWzBdOw0KICAgICAgICAgICAgICAgICAgICBzdHJpbmcgZm9sbG93ZWRBdFN0cmluZyA9IGZvbGxvd2VyWyJmb2xsb3dlZF9hdCJdPy5Ub1N0cmluZygpOw0KICAgICAgICAgICAgICAgICAgICBzdHJpbmcgZm9sbG93ZXJVc2VyTmFtZSA9IGZvbGxvd2VyWyJ1c2VyX25hbWUiXT8uVG9TdHJpbmcoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdHJpbmcuSXNOdWxsT3JFbXB0eShmb2xsb3dlZEF0U3RyaW5nKSkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZVRpbWUgZm9sbG93ZWRBdCA9IERhdGVUaW1lLlBhcnNlKGZvbGxvd2VkQXRTdHJpbmcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiVXNlciB7Zm9sbG93ZXJVc2VyTmFtZX0gZm9sbG93ZWQgYXQge2ZvbGxvd2VkQXRTdHJpbmd9LiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0cnVlLCBmb2xsb3dlZEF0KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJVc2VyIHtmb2xsb3dlclVzZXJOYW1lfSBkb2VzIG5vdCBmb2xsb3cgdGhlIGJyb2FkY2FzdGVyLiIpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHJldHVybiAoZmFsc2UsIERhdGVUaW1lLk1pblZhbHVlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJHZXRGb2xsb3dJbmZvIEZhaWxlZCBSZXNwb25zZToge3Jlc3BvbnNlLlN0YXR1c0NvZGV9Iik7DQogICAgICAgICAgICAgICAgcmV0dXJuIChmYWxzZSwgRGF0ZVRpbWUuTWluVmFsdWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpDQogICAgICAgIHsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkdldEZvbGxvd0luZm8gRXhjZXB0aW9uOiB7ZXguTWVzc2FnZX0iKTsNCiAgICAgICAgICAgIHJldHVybiAoZmFsc2UsIERhdGVUaW1lLk1pblZhbHVlKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIE5vcm1hbGl6ZU1lc3NhZ2Uoc3RyaW5nIGlucHV0KQ0KICAgIHsNCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KGlucHV0KSkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIGlucHV0Ow0KICAgICAgICB9DQoNCiAgICAgICAgc3RyaW5nIG5vcm1hbGl6ZWQgPSBpbnB1dC5Ob3JtYWxpemUoTm9ybWFsaXphdGlvbkZvcm0uRm9ybUQpOw0KICAgICAgICB2YXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpOw0KICAgICAgICBmb3JlYWNoIChjaGFyIGMgaW4gbm9ybWFsaXplZCkNCiAgICAgICAgew0KICAgICAgICAgICAgVW5pY29kZUNhdGVnb3J5IHVjID0gQ2hhclVuaWNvZGVJbmZvLkdldFVuaWNvZGVDYXRlZ29yeShjKTsNCiAgICAgICAgICAgIGlmICh1YyAhPSBVbmljb2RlQ2F0ZWdvcnkuTm9uU3BhY2luZ01hcmspDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgc2IuQXBwZW5kKGMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgbm9ybWFsaXplZCA9IHNiLlRvU3RyaW5nKCk7DQogICAgICAgIHZhciByZXBsYWNlbWVudHMgPSBuZXcgRGljdGlvbmFyeTxjaGFyLCBjaGFyPigpOw0KICAgICAgICB2b2lkIEFkZFJlcGxhY2VtZW50KGNoYXIgb3JpZ2luYWwsIGNoYXIgcmVwbGFjZW1lbnQpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICghcmVwbGFjZW1lbnRzLkNvbnRhaW5zS2V5KG9yaWdpbmFsKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudHNbb3JpZ2luYWxdID0gcmVwbGFjZW1lbnQ7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrEnLCAnYScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrInLCAnYicpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrMnLCAnZycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrQnLCAnZCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrUnLCAnZScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrYnLCAneicpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrcnLCAnaCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrknLCAnaScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzronLCAnaycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrsnLCAnbCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrwnLCAnbScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzr0nLCAndicpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzr4nLCAneCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzr8nLCAnbycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnz4AnLCAncCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnz4EnLCAncicpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnz4MnLCAncycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnz4QnLCAndCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnz4UnLCAneScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnz4YnLCAnZicpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnz4cnLCAneCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnz4gnLCAneScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnz4knLCAnbycpOw0KICAgICAgICAvLw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0JAnLCAnQScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0JInLCAnQicpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0JUnLCAnRScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0JonLCAnSycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0JwnLCAnTScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0J0nLCAnSCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0J4nLCAnTycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0KAnLCAnUCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0KEnLCAnQycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0KInLCAnVCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0KMnLCAnWScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0KUnLCAnWCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0LAnLCAnYScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0LInLCAndicpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0LUnLCAnZScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0LonLCAnaycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0LwnLCAnbScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0L0nLCAnbicpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0L4nLCAnbycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0YAnLCAncicpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0YEnLCAncycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0YInLCAndCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0YMnLCAndScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0YUnLCAneCcpOw0KICAgICAgICAvLw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnQCcsICdhJyk7DQogICAgICAgIEFkZFJlcGxhY2VtZW50KCchJywgJ2knKTsNCiAgICAgICAgQWRkUmVwbGFjZW1lbnQoJyQnLCAncycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnMCcsICdvJyk7DQogICAgICAgIEFkZFJlcGxhY2VtZW50KCczJywgJ2UnKTsNCiAgICAgICAgQWRkUmVwbGFjZW1lbnQoJzEnLCAnaScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnfCcsICdsJyk7DQogICAgICAgIEFkZFJlcGxhY2VtZW50KCc1JywgJ3MnKTsNCiAgICAgICAgQWRkUmVwbGFjZW1lbnQoJzQnLCAnYScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnwqknLCAnYycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnwqInLCAnYycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0ZUnLCAncycpOw0KICAgICAgICBmb3JlYWNoICh2YXIga3ZwIGluIHJlcGxhY2VtZW50cykNCiAgICAgICAgew0KICAgICAgICAgICAgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZWQuUmVwbGFjZShrdnAuS2V5LCBrdnAuVmFsdWUpOw0KICAgICAgICB9DQoNCiAgICAgICAgbm9ybWFsaXplZCA9IFJlZ2V4LlJlcGxhY2Uobm9ybWFsaXplZCwgQCJccysiLCAiIik7DQogICAgICAgIG5vcm1hbGl6ZWQgPSBSZWdleC5SZXBsYWNlKG5vcm1hbGl6ZWQsIEAiW15cd10iLCAiIik7DQogICAgICAgIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkLlRvTG93ZXJJbnZhcmlhbnQoKTsNCiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWQ7DQogICAgfQ0KDQogICAgcHJpdmF0ZSBzdGF0aWMgSGFzaFNldDxzdHJpbmc+IGNsYXNzaWN0bGRzID0gbmV3IEhhc2hTZXQ8c3RyaW5nPg0KICAgIHsNCiAgICAgICAgIkNPTSIsDQogICAgICAgICJJTyIsDQogICAgICAgICJORVQiLA0KICAgICAgICAiT1JHIiwNCiAgICAgICAgIkRLIg0KICAgIH07DQogICAgcHVibGljIHZvaWQgSW5pdCgpDQogICAgew0KICAgICAgICBUYXNrLlJ1bihhc3luYyAoKSA9Pg0KICAgICAgICB7DQogICAgICAgICAgICBhd2FpdCBGZXRjaFRMRHMoKTsNCiAgICAgICAgfSkuV2FpdCgpOw0KICAgIH0NCg0KICAgIHByaXZhdGUgYm9vbCBTaGFyZWRDaGF0Q2hlY2soYm9vbCBkZWJ1Zywgc3RyaW5nIHVzZXIsIHN0cmluZyBtZXNzYWdlKQ0KICAgIHsNCiAgICAgICAgaWYgKENQSC5UcnlHZXRBcmcoImlzSW5TaGFyZWRDaGF0Iiwgb3V0IGJvb2wgaXNJblNoYXJlZENoYXQpKQ0KICAgICAgICB7DQogICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJpc0Zyb21TaGFyZWRDaGF0R3Vlc3QiLCBvdXQgYm9vbCBpc0Zyb21TaGFyZWRDaGF0R3Vlc3QpOw0KICAgICAgICAgICAgaWYgKGlzRnJvbVNoYXJlZENoYXRHdWVzdCAmJiBpZ25vcmVTaGFyZWRDaGF0KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChkZWJ1ZykNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiQWN0aW9uIGhhcHBlbmVkIGluIHNoYXJlZCBndWVzdCBjaGF0IHdpdGggaWdub3Jpbmcgc2hhcmVkIGNoYXQgc2V0IHRvIFRydWUuIEFib3J0aW5nLiAvLyBVc2VyOiB7dXNlcn0gLy8gTWVzc2FnZToge21lc3NhZ2V9Iik7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoaXNGcm9tU2hhcmVkQ2hhdEd1ZXN0ICYmICFpZ25vcmVTaGFyZWRDaGF0KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChkZWJ1ZykNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiQWN0aW9uIGhhcHBlbmVkIGluIHNoYXJlZCBndWVzdCBjaGF0IHdpdGggaWdub3Jpbmcgc2hhcmVkIGNoYXQgc2V0IHRvIEZhbHNlLiBDb250aW51ZWluZy4uLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgR2V0RXh0ZW5zaW9uSW5mbygpDQogICAgew0KICAgICAgICBpZiAoZXh0ZW5zaW9uTmFtZSA9PSBudWxsIHx8IGV4dGVuc2lvblZlcnNpb24gPT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgQ1BILkV4ZWN1dGVNZXRob2QoIk1PRCBUT09MUyBWZXJzaW9uIENoZWNrIiwgIkV4ZWN1dGUiKTsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoImV4dGVuc2lvbk5hbWUiLCBvdXQgZXh0ZW5zaW9uTmFtZSk7DQogICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJleHRlbnNpb25WZXJzaW9uIiwgb3V0IGV4dGVuc2lvblZlcnNpb24pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgUmVwbHlUb0NoYXQoc3RyaW5nIHRleHQpDQogICAgew0KICAgICAgICBpZiAodGV4dCAhPSAiLSIpDQogICAgICAgIHsNCiAgICAgICAgICAgIGludCBtYXhMZW5ndGggPSA0ODA7DQogICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJtc2dJZCIsIG91dCBzdHJpbmcgcmVwbHlJZCk7DQogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHRleHQuTGVuZ3RoOyBpICs9IG1heExlbmd0aCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBzdHJpbmcgbWVzc2FnZVBhcnQgPSB0ZXh0LlN1YnN0cmluZyhpLCBNYXRoLk1pbihtYXhMZW5ndGgsIHRleHQuTGVuZ3RoIC0gaSkpOw0KICAgICAgICAgICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkocmVwbHlJZCkgJiYgcG9zdE1lc3NhZ2VzQXNSZXBsaWVzKQ0KICAgICAgICAgICAgICAgICAgICBDUEguVHdpdGNoUmVwbHlUb01lc3NhZ2UobWVzc2FnZVBhcnQsIHJlcGx5SWQpOw0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgQ1BILlNlbmRNZXNzYWdlKG1lc3NhZ2VQYXJ0KTsNCiAgICAgICAgICAgICAgICBDUEguV2FpdCgxNTApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgUG9zdFRvTG9nKHN0cmluZyBsb2cpDQogICAgew0KICAgICAgICBDUEguTG9nSW5mbygkIlt7ZXh0ZW5zaW9uTmFtZX0gdi57ZXh0ZW5zaW9uVmVyc2lvbn1dIFtVUkwgRklMVEVSXSB7bG9nfSIpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIFNlbmRUb2FzdChzdHJpbmcgdGV4dCkNCiAgICB7DQogICAgICAgIENQSC5TaG93VG9hc3ROb3RpZmljYXRpb24oZXh0ZW5zaW9uTmFtZSwgdGV4dCwgIkhlbHAgYXQ6IHRhd21hZS54eXovZGlzY29yZCIsICJodHRwczovL2dpdGh1Yi5jb20vdGF3bWFlL3Rhd21hZS9ibG9iL21haW4vYXNzZXRzL3BhZ2UtZGVzaWduL3RvYXN0LWxvZ28ucG5nP3Jhdz10cnVlIik7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgR2V0QnJvYWRjYXN0ZXJOYW1lKCkNCiAgICB7DQogICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShicm9hZGNhc3Rlck5hbWUpKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgYmNJbmZvID0gQ1BILlR3aXRjaEdldEJyb2FkY2FzdGVyKCk7DQogICAgICAgICAgICBpZiAoYmNJbmZvICE9IG51bGwpDQogICAgICAgICAgICAgICAgYnJvYWRjYXN0ZXJOYW1lID0gYmNJbmZvLlVzZXJMb2dpbjsNCiAgICAgICAgICAgIHZhciBib3RJbmZvID0gQ1BILlR3aXRjaEdldEJvdCgpOw0KICAgICAgICAgICAgaWYgKGJvdEluZm8gIT0gbnVsbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBib3ROYW1lID0gYm90SW5mby5Vc2VyTG9naW47DQogICAgICAgICAgICAgICAgYm90ID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIGV4dGVuc2lvbk5hbWUgPSBudWxsOw0KICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIGV4dGVuc2lvblZlcnNpb24gPSBudWxsOw0KICAgIHByaXZhdGUgVGF3bWFlVUkuVGF3bWFlIHVpOw0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgUmVnZXggX3JlZ2V4ID0gbmV3IFJlZ2V4KEAiXGIoPzpodHRwOi8vfGh0dHBzOi8vKT8oPzp3d3dcLik/W2EtekEtWjAtOS1dK1wuW2EtekEtWl17Mix9XGIiLCBSZWdleE9wdGlvbnMuQ29tcGlsZWQpOw0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIHN0YXRpYyBzdHJpbmcgYnJvYWRjYXN0ZXJOYW1lID0gbnVsbDsNCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBib3ROYW1lID0gbnVsbDsNCiAgICBwdWJsaWMgc3RhdGljIGJvb2wgYm90ID0gZmFsc2U7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBwb3N0TWVzc2FnZXNBc1JlcGxpZXMgPSBmYWxzZTsNCiAgICBwdWJsaWMgYm9vbCBpZ25vcmVTaGFyZWRDaGF0ID0gdHJ1ZTsNCiAgICBwdWJsaWMgYm9vbCB1cmxCbG9ja0xpbmtzID0gdHJ1ZTsNCiAgICBwdWJsaWMgYm9vbCBiYW5TYWxlQm90cyA9IHRydWU7DQogICAgcHVibGljIGJvb2wgYmFuRGlzY29yZEJvdHMgPSB0cnVlOw0KICAgIHB1YmxpYyBib29sIHVybEFsbG93VmlwcyA9IHRydWU7DQogICAgcHVibGljIGJvb2wgdXJsQWxsb3dTdWJzID0gdHJ1ZTsNCiAgICBwdWJsaWMgYm9vbCB1cmxBbGxvd0ZvbGxvd2VycyA9IHRydWU7DQogICAgcHVibGljIGJvb2wgdXJsV2FyblVzZXIgPSB0cnVlOw0KICAgIHB1YmxpYyBib29sIHVybFRpbWVvdXRVc2VyID0gZmFsc2U7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgaW50IHVybE1pbkZvbGxvd0RheXMgPSAzMDsNCiAgICBwdWJsaWMgaW50IHVybFRpbWVvdXREdXJhdGlvbiA9IDMwOw0KICAgIHB1YmxpYyBpbnQgdXJsUGVybWl0RHVyYXRpb24gPSAxMjA7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VVcmxXYXJuaW5nID0gIkAldXNlciUsIHBsZWFzZSBkb24ndCBwb3N0IGxpbmtzIHRvIGNoYXQuIEFzayBmb3IgYSBwZXJtaXNzaW9uIGJlZm9yZWhhbmQuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VVcmxBZGRlZFRvV2hpdGVsaXN0ID0gIicldXJsJScgaGFzIGJlZW4gYWRkZWQgdG8gdGhlIHdoaXRlbGlzdC4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVVybFJlbW92ZWRGcm9tV2hpdGVsaXN0ID0gIicldXJsJScgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSB3aGl0ZWxpc3QuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VVcmxBbHJlYWR5T25XaGl0ZWxpc3QgPSAiQCV1c2VyJSwgJyV1cmwlJyBpcyBhbHJlYWR5IHdoaXRlbGlzdGVkLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlVXJsTm90T25XaGl0ZWxpc3QgPSAiQCV1c2VyJSwgJyV1cmwlJyBpcyBub3Qgb24gdGhlIHdoaXRlbGlzdC4iOw0KICAgIHB1YmxpYyBzdHJpbmcgcmVhc29uID0gIlBvc3RlZCBhIFVSTCB0byBjaGF0IHdpdGhvdXQgcGVybWlzc2lvbi4gQXV0b21hdGljYWxseSBoYW5kbGVkIGJ5IFN0cmVhbWVyLmJvdCI7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgSGFzaFNldDxzdHJpbmc+IHVybFdoaXRlbGlzdGVkVVJMcyA9IG5ldyBIYXNoU2V0PHN0cmluZz4NCiAgICB7DQogICAgICAgICJ0d2l0Y2gudHYiLA0KICAgICAgICAieW91dHViZS5jb20iLA0KICAgICAgICAic3RyZWFtZXIuYm90IiwNCiAgICAgICAgInRhd21hZS54eXoiLA0KICAgICAgICAic3BvdGlmeS5jb20iLA0KICAgICAgICAic291bmRjbG91ZC5jb20iLA0KICAgICAgICAiZ2lwaHkuY29tIg0KICAgIH07DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgSGFzaFNldDxzdHJpbmc+IHVybFdoaXRlbGlzdGVkVXNlcnMgPSBuZXcgSGFzaFNldDxzdHJpbmc+DQogICAgew0KICAgIH07DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwcml2YXRlIHZvaWQgRmV0Y2hTZXR0aW5ncygpDQogICAgew0KICAgICAgICB1aSA9IG5ldyBUYXdtYWUoQ1BILCBleHRlbnNpb25OYW1lLCBleHRlbnNpb25WZXJzaW9uLCBmYWxzZSk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHBvc3RNZXNzYWdlc0FzUmVwbGllcyA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX3Bvc3RNZXNzYWdlc0FzUmVwbGllcyIpID8/IHBvc3RNZXNzYWdlc0FzUmVwbGllczsNCiAgICAgICAgaWdub3JlU2hhcmVkQ2hhdCA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX2lnbm9yZVNoYXJlZENoYXQiKSA/PyBpZ25vcmVTaGFyZWRDaGF0Ow0KICAgICAgICB1cmxCbG9ja0xpbmtzID0gdWkuR2V0VmFsdWU8Ym9vbD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfdXJsQmxvY2tMaW5rcyIpID8/IHVybEJsb2NrTGlua3M7DQogICAgICAgIGJhblNhbGVCb3RzID0gdWkuR2V0VmFsdWU8Ym9vbD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfYmFuU2FsZUJvdHMiKSA/PyBiYW5TYWxlQm90czsNCiAgICAgICAgYmFuRGlzY29yZEJvdHMgPSB1aS5HZXRWYWx1ZTxib29sPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19iYW5EaXNjb3JkQm90cyIpID8/IGJhbkRpc2NvcmRCb3RzOw0KICAgICAgICB1cmxBbGxvd1ZpcHMgPSB1aS5HZXRWYWx1ZTxib29sPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc191cmxBbGxvd1ZpcHMiKSA/PyB1cmxBbGxvd1ZpcHM7DQogICAgICAgIHVybEFsbG93U3VicyA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX3VybEFsbG93U3VicyIpID8/IHVybEFsbG93U3ViczsNCiAgICAgICAgdXJsV2FyblVzZXIgPSB1aS5HZXRWYWx1ZTxib29sPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc191cmxXYXJuVXNlciIpID8/IHVybFdhcm5Vc2VyOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB1cmxQZXJtaXREdXJhdGlvbiA9IHVpLkdldFZhbHVlPGludD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfdXJsUGVybWl0RHVyYXRpb24iKSA/PyB1cmxQZXJtaXREdXJhdGlvbjsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgbWVzc2FnZVVybFdhcm5pbmcgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VVcmxXYXJuaW5nIikgPz8gbWVzc2FnZVVybFdhcm5pbmc7DQogICAgICAgIG1lc3NhZ2VVcmxBZGRlZFRvV2hpdGVsaXN0ID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlVXJsQWRkZWRUb1doaXRlbGlzdCIpID8/IG1lc3NhZ2VVcmxBZGRlZFRvV2hpdGVsaXN0Ow0KICAgICAgICBtZXNzYWdlVXJsUmVtb3ZlZEZyb21XaGl0ZWxpc3QgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VVcmxSZW1vdmVkRnJvbVdoaXRlbGlzdCIpID8/IG1lc3NhZ2VVcmxSZW1vdmVkRnJvbVdoaXRlbGlzdDsNCiAgICAgICAgbWVzc2FnZVVybEFscmVhZHlPbldoaXRlbGlzdCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVVybEFscmVhZHlPbldoaXRlbGlzdCIpID8/IG1lc3NhZ2VVcmxBbHJlYWR5T25XaGl0ZWxpc3Q7DQogICAgICAgIG1lc3NhZ2VVcmxOb3RPbldoaXRlbGlzdCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVVybE5vdE9uV2hpdGVsaXN0IikgPz8gbWVzc2FnZVVybE5vdE9uV2hpdGVsaXN0Ow0KICAgICAgICByZWFzb24gPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX3JlYXNvblVybCIpID8/IHJlYXNvbjsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgc3RyaW5nIHMxID0gdWkuR2V0VmFsdWU8c3RyaW5nPihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX3VybEFsbG93Rm9sbG93ZXJzIik7DQogICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkoczEpKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgajEgPSBKT2JqZWN0LlBhcnNlKHMxKTsNCiAgICAgICAgICAgIHVybEFsbG93Rm9sbG93ZXJzID0gajFbImVuYWJsZWQiXT8uVmFsdWU8Ym9vbD4oKSA/PyB1cmxBbGxvd0ZvbGxvd2VyczsNCiAgICAgICAgICAgIHVybE1pbkZvbGxvd0RheXMgPSAoaW50KU1hdGguUm91bmQoajFbInZhbHVlIl0/LlZhbHVlPGRvdWJsZT4oKSA/PyB1cmxNaW5Gb2xsb3dEYXlzKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyBzMiA9IHVpLkdldFZhbHVlPHN0cmluZz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc191cmxUaW1lb3V0VXNlciIpOw0KICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KHMyKSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGoyID0gSk9iamVjdC5QYXJzZShzMik7DQogICAgICAgICAgICB1cmxUaW1lb3V0VXNlciA9IGoyWyJlbmFibGVkIl0/LlZhbHVlPGJvb2w+KCkgPz8gdXJsVGltZW91dFVzZXI7DQogICAgICAgICAgICB1cmxUaW1lb3V0RHVyYXRpb24gPSAoaW50KU1hdGguUm91bmQoajJbInZhbHVlIl0/LlZhbHVlPGRvdWJsZT4oKSA/PyB1cmxUaW1lb3V0RHVyYXRpb24pOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgc3RyaW5nIHMzID0gdWkuR2V0VmFsdWU8c3RyaW5nPihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX3VybFdoaXRlbGlzdGVkVVJMcyIpOw0KICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KHMzKSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGxpc3QgPSBKc29uQ29udmVydC5EZXNlcmlhbGl6ZU9iamVjdDxMaXN0PHN0cmluZz4+KHMzKT8uV2hlcmUoeCA9PiAhc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZSh4KSkuVG9MaXN0KCk7DQogICAgICAgICAgICBpZiAobGlzdCBpcyB7IENvdW50OiA+IDAgfSkNCiAgICAgICAgICAgICAgICB1cmxXaGl0ZWxpc3RlZFVSTHMgPSBuZXcgSGFzaFNldDxzdHJpbmc+KGxpc3QsIFN0cmluZ0NvbXBhcmVyLk9yZGluYWxJZ25vcmVDYXNlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyBzNCA9IHVpLkdldFZhbHVlPHN0cmluZz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc191cmxVc2VyV2hpdGVsaXN0Iik7DQogICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkoczQpKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgbGlzdCA9IEpzb25Db252ZXJ0LkRlc2VyaWFsaXplT2JqZWN0PExpc3Q8c3RyaW5nPj4oczQpPy5XaGVyZSh4ID0+ICFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKHgpKS5Ub0xpc3QoKTsNCiAgICAgICAgICAgIGlmIChsaXN0IGlzIHsgQ291bnQ6ID4gMCB9KQ0KICAgICAgICAgICAgICAgIHVybFdoaXRlbGlzdGVkVXNlcnMgPSBuZXcgSGFzaFNldDxzdHJpbmc+KGxpc3QsIFN0cmluZ0NvbXBhcmVyLk9yZGluYWxJZ25vcmVDYXNlKTsNCiAgICAgICAgfQ0KICAgIH0NCn0=",
                                "precompile": true,
                                "delayStart": false,
                                "saveResultToVariable": false,
                                "saveToVariable": "",
                                "id": "7e6feb67-48a2-412c-9022-736c3657a48c",
                                "weight": 0.0,
                                "type": 99999,
                                "parentId": "f6040727-86a3-42a1-ac2d-637922dae23e",
                                "enabled": true,
                                "index": 4
                            }
                        ],
                        "id": "f6040727-86a3-42a1-ac2d-637922dae23e",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    }
                ],
                "collapsedGroups": [
                    "f6040727-86a3-42a1-ac2d-637922dae23e"
                ]
            },
            {
                "id": "9ff077a1-d438-4736-825e-3282861ed8d3",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": true,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] # - Follow Attack",
                "group": "MOD TOOLS - Bot & Hate Raid Protection",
                "alwaysRun": true,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "id": "e8ed5d77-8c84-44ac-b7eb-a6fe8a7ffeff",
                        "type": 101,
                        "enabled": true,
                        "exclusions": []
                    },
                    {
                        "variables": {
                            "userName": "dsaf2323"
                        },
                        "id": "447dc901-26ba-425c-b902-ed14a70ecdc6",
                        "type": 702,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "5a3cb0f6-bf5b-4c06-9d36-06be8a3f87f7",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "3b627250-0ef5-4bdf-9a42-30f5c5390269",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "name": "[MOD TOOLS] Follow Attack",
                                "description": null,
                                "references": [
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\mscorlib.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Core.dll",
                                    ".\\Microsoft.CodeAnalysis.dll",
                                    ".\\System.Collections.Immutable.dll",
                                    ".\\Newtonsoft.Json.dll",
                                    ".\\dlls\\TawmaeUI.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Net.Http.dll"
                                ],
                                "byteCode": "dXNpbmcgU3lzdGVtOw0KdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7DQp1c2luZyBTeXN0ZW0uTGlucTsNCnVzaW5nIFN5c3RlbS5UaHJlYWRpbmc7DQp1c2luZyBTeXN0ZW0uTmV0Lkh0dHA7DQp1c2luZyBTeXN0ZW0uTmV0Lkh0dHAuSGVhZGVyczsNCnVzaW5nIFN5c3RlbS5UZXh0Ow0KdXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrczsNCnVzaW5nIE5ld3RvbnNvZnQuSnNvbjsNCnVzaW5nIE5ld3RvbnNvZnQuSnNvbi5MaW5xOw0KdXNpbmcgU3lzdGVtLlJ1bnRpbWUuQ29tcGlsZXJTZXJ2aWNlczsNCnVzaW5nIFRhd21hZVVJOw0KDQpwdWJsaWMgY2xhc3MgQ1BISW5saW5lDQp7DQogICAgcHVibGljIGJvb2wgRXhlY3V0ZSgpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEZldGNoU2V0dGluZ3MoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgR2V0QnJvYWRjYXN0ZXJOYW1lKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJOYW1lIiwgb3V0IHN0cmluZyB1c2VyTmFtZSk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciBub3cgPSBEYXRlVGltZS5VdGNOb3c7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGxvY2sgKF9zeW5jKQ0KICAgICAgICB7DQogICAgICAgICAgICBfd2luZG93LkFkZExhc3QobmV3IEtleVZhbHVlUGFpcjxzdHJpbmcsIERhdGVUaW1lPih1c2VyTmFtZSwgbm93KSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJBZGRlZDoge3VzZXJOYW1lfSIpOw0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIHdoaWxlIChfd2luZG93LkNvdW50ID4gMCAmJiAobm93IC0gX3dpbmRvdy5GaXJzdC5WYWx1ZS5WYWx1ZSkuVG90YWxTZWNvbmRzID4gZm9sbG93QXR0YWNrRHVyYXRpb25UaHJlc2hvbGQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgX3dpbmRvdy5SZW1vdmVGaXJzdCgpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoIV9pbkF0dGFjayAmJiBfd2luZG93LkNvdW50ID49IGZvbGxvd0F0dGFja0ZvbGxvd2VyVGhyZXNob2xkKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChmb2xsb3dBdHRhY2tBdXRvVHVybk9uKQ0KICAgICAgICAgICAgICAgICAgICBFbmFibGVPbkF0dGFjaygpOw0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIFNlbmRUb2FzdCgkIkZPTExPVyBCVVJTVCBERVRFQ1RFRFxue193aW5kb3cuQ291bnR9IG5ldyBmb2xsb3dzIGluIOKJpHtmb2xsb3dBdHRhY2tEdXJhdGlvblRocmVzaG9sZH1zLiIpOw0KICAgICAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdCgkIkhleSBAe2Jyb2FkY2FzdGVyTmFtZX0sIFN0cmVhbWVyQm90IGRldGVjdGVkIGEgZm9sbG93IGJ1cnN0ICh7X3dpbmRvdy5Db3VudH0gZm9sbG93cyB3aXRoaW4ge2ZvbGxvd0F0dGFja0R1cmF0aW9uVGhyZXNob2xkfSBzZWNvbmRzKS4gWW91IGhhdmUgZGlzYWJsZWQgdGhlIGF1dG9tYXRpYyBwcm90ZWN0aXZlIG1vZGUsIHNvIGlmIHlvdSB3aXNoIHRvIGVuYWJsZSBpdCwgdHlwZSAnIWZvbGxvd1NoaWVsZCcgaW50byBjaGF0IGFuZCBTdHJlYW1lckJvdCB3aWxsIGhhbmRsZSB0aGUgcmVzdCA6KSIpOw0KICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJbRk9MTE9XIEJVUlNUIERFVEVDVEVEXSBBdXRvVHVybk9uID0gRmFsc2U7IHtfd2luZG93LkNvdW50fSBuZXcgZm9sbG93cyBpbiDiiaR7Zm9sbG93QXR0YWNrRHVyYXRpb25UaHJlc2hvbGR9cyIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKF9pbkF0dGFjaykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBfYXR0YWNrZXJVc2VyTmFtZXMuQWRkKHVzZXJOYW1lKTsNCiAgICAgICAgICAgICAgICBfYXR0YWNrVGltZXIuQ2hhbmdlKGZvbGxvd0F0dGFja0R1cmF0aW9uICogMTAwMCwgVGltZW91dC5JbmZpbml0ZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBwdWJsaWMgYm9vbCBFbmFibGVPbkF0dGFjaygpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChfaW5BdHRhY2spDQogICAgICAgIHsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkF0dGVtcHRlZCB0byBlbmFibGUgRm9sbG93IEF0dGFjayBQcm90ZWN0aW9uLCBidXQgaXQgYWxyZWFkeSB3YXMgZW5hYmxlZCIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgR2V0QnJvYWRjYXN0ZXJOYW1lKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoImVuYWJsZWRNYW51YWxseSIsIG91dCBib29sIGVuYWJsZWRNYW51YWxseSk7DQogICAgICAgIF9pbkF0dGFjayA9IHRydWU7DQogICAgICAgIGlmICghZW5hYmxlZE1hbnVhbGx5KQ0KICAgICAgICB7DQogICAgICAgICAgICBfYXR0YWNrZXJVc2VyTmFtZXMgPSBfd2luZG93LlNlbGVjdChrdiA9PiBrdi5LZXkpLlRvTGlzdCgpOw0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJIZXkgQHticm9hZGNhc3Rlck5hbWV9LCBTdHJlYW1lckJvdCBkZXRlY3RlZCBhIGZvbGxvdyBidXJzdCAoe193aW5kb3cuQ291bnR9IGZvbGxvd3Mgd2l0aGluIHtmb2xsb3dBdHRhY2tEdXJhdGlvblRocmVzaG9sZH0gc2Vjb25kcykgYW5kIGhhcyBlbmFibGVkIHRoZSBhdXRvbWF0aWMgcHJvdGVjdGl2ZSBtb2RlLiBZb3UgY2FuIHNpdCBiYWNrIGFuZCByZWxheCwgU3RyZWFtZXJCb3Qgd2lsbCB0YWtlIGNhcmUgb2YgZXZlcnl0aGluZyA6KSIpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHticm9hZGNhc3Rlck5hbWV9LCB0aGUgcHJvdGVjdGl2ZSBtb2RlIGhhcyBiZWVuIGVuYWJsZWQuIHlvdSBjYW4gc2l0IGJhY2sgYW5kIHJlbGF4LCBTdHJlYW1lckJvdCB3aWxsIHRha2UgY2FyZSBvZiBldmVyeXRoaW5nIDopIik7DQogICAgICAgIFBvc3RUb0xvZygkIlByb3RlY3Rpb24gTW9kZSBFbmFibGVkOiB7X2F0dGFja2VyVXNlck5hbWVzLkNvdW50fSBGb2xsb3dzIGluIOKJpHtmb2xsb3dBdHRhY2tEdXJhdGlvblRocmVzaG9sZH1zIik7DQogICAgICAgIFNlbmRUb2FzdCgkIkZvbGxvdyBCb3QgUHJvdGVjdGlvbiBpbml0aWF0ZWQuIFNpdCBiYWNrLCByZWxheCBhbmQgbGV0IFN0cmVhbWVyQm90IGhhbmRsZSB0aGlzIDopIik7DQogICAgICAgIF9hdHRhY2tUaW1lcj8uRGlzcG9zZSgpOw0KICAgICAgICBfYXR0YWNrVGltZXIgPSBuZXcgVGltZXIoRGlzYWJsZU9uQXR0YWNrQ2FsbGJhY2ssIG51bGwsIGZvbGxvd0F0dGFja0R1cmF0aW9uICogMTAwMCwgVGltZW91dC5JbmZpbml0ZSk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChmb2xsb3dBdHRhY2tDbGVhclRUUykNCiAgICAgICAgew0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiQ2xlYXJpbmcgVFRTIFF1ZXVlLiIpOw0KICAgICAgICAgICAgQ1BILkJyb2FkY2FzdFVkcCg2NjY5LCAie1wiY29tbWFuZFwiOlwic3RvcFwifSIpOw0KICAgICAgICAgICAgQ1BILkJyb2FkY2FzdFVkcCg2NjY5LCAie1wiY29tbWFuZFwiOlwicGF1c2VcIn0iKTsNCiAgICAgICAgICAgIENQSC5Ccm9hZGNhc3RVZHAoNjY2OSwgIntcImNvbW1hbmRcIjpcImNsZWFyXCJ9Iik7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBEaXNhYmxlQWxsQnJvd3NlclNvdXJjZXMoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgZm9yZWFjaCAoc3RyaW5nIGFjdGlvbiBpbiBmb2xsb3dBdHRhY2tBbGVydEFjdGlvbnMpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChhY3Rpb24gPT0gIjwgQ2hvb3NlIEFuIEFjdGlvbiA+IiB8fCBzdHJpbmcuSXNOdWxsT3JFbXB0eShhY3Rpb24pKQ0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgQ1BILkRpc2FibGVBY3Rpb24oYWN0aW9uKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkRpc2FibGVkIGFjdGlvbjogJ3thY3Rpb259JyIpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgZm9yZWFjaCAoc3RyaW5nIHF1ZXVlIGluIGZvbGxvd0F0dGFja0FsZXJ0QWN0aW9uUXVldWVzKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAocXVldWUgPT0gIjwgQ2hvb3NlIEEgUXVldWUgPiIgfHwgc3RyaW5nLklzTnVsbE9yRW1wdHkocXVldWUpKQ0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgQ1BILlBhdXNlQWN0aW9uUXVldWUocXVldWUpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiUGF1c2luZyBxdWV1ZTogJ3txdWV1ZX0nIik7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoZm9sbG93QXR0YWNrUGF1c2VDaGFubmVsUmV3YXJkcykNCiAgICAgICAgew0KICAgICAgICAgICAgTGlzdDxUd2l0Y2hSZXdhcmQ+IHJld2FyZERhdGEgPSBDUEguVHdpdGNoR2V0UmV3YXJkcygpOw0KICAgICAgICAgICAgaWYgKHJld2FyZERhdGEgIT0gbnVsbCAmJiByZXdhcmREYXRhLkNvdW50ICE9IDApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaW50IHJld2FyZHNQYXVzZWQgPSAwOw0KICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciByZXdhcmQgaW4gcmV3YXJkRGF0YSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmICghcmV3YXJkLklzT3VycykNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiRmFpbGVkIHRvIHBhdXNlIHRoZSByZXdhcmQgJ3tyZXdhcmQuVGl0bGV9JyBiZWNhdXNlIGl0J3Mgbm90IG93bmVkIGJ5IFN0cmVhbWVyQm90Iik7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIENQSC5QYXVzZVJld2FyZChyZXdhcmQuSWQpOw0KICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJQYXVzZWQgY2hhbm5lbCByZXdhcmQ6ICd7cmV3YXJkLlRpdGxlfSciKTsNCiAgICAgICAgICAgICAgICAgICAgcmV3YXJkc1BhdXNlZCsrOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIlBhdXNlZCB7cmV3YXJkc1BhdXNlZH0ve3Jld2FyZERhdGEuQ291bnR9IGNoYW5uZWwgcmV3YXJkcy4iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIHB1YmxpYyBib29sIERpc2FibGVPbkF0dGFjaygpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghX2luQXR0YWNrKQ0KICAgICAgICB7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJBdHRlbXB0ZWQgdG8gZGlzYWJsZSBGb2xsb3cgQXR0YWNrIFByb3RlY3Rpb24sIGJ1dCBpdCB3YXNuJ3QgZW5hYmxlZCIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgbG9jayAoX3N5bmMpDQogICAgICAgIHsNCiAgICAgICAgICAgIEdldEJyb2FkY2FzdGVyTmFtZSgpOw0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIFBvc3RUb0xvZygkIlByb3RlY3Rpb24gTW9kZSBEaXNhYmxlZDoge19hdHRhY2tlclVzZXJOYW1lcy5Db3VudH0gRm9sbG93cyBnZXNhbW1lbHQiKTsNCiAgICAgICAgICAgIFNlbmRUb2FzdCgkIkVuZGluZyB0aGUgRm9sbG93IEF0dGFjayBQcm90ZWN0aW9uLi4gOikiKTsNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBDUEguU2V0R2xvYmFsVmFyKCJsYXN0QXR0YWNrZXJVc2VyTmFtZXMiLCBfYXR0YWNrZXJVc2VyTmFtZXMsIGZhbHNlKTsNCiAgICAgICAgICAgIF9pbkF0dGFjayA9IGZhbHNlOw0KICAgICAgICAgICAgX2F0dGFja1RpbWVyPy5EaXNwb3NlKCk7DQogICAgICAgICAgICBfYXR0YWNrVGltZXIgPSBudWxsOw0KICAgICAgICAgICAgX3dpbmRvdy5DbGVhcigpOw0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBmb3JlYWNoIChzdHJpbmcgcXVldWUgaW4gZm9sbG93QXR0YWNrQWxlcnRBY3Rpb25RdWV1ZXMpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKHF1ZXVlID09ICI8IENob29zZSBBIFF1ZXVlID4iIHx8IHN0cmluZy5Jc051bGxPckVtcHR5KHF1ZXVlKSkNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgQ1BILlJlc3VtZUFjdGlvblF1ZXVlKHF1ZXVlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJSZXN1bWluZyBxdWV1ZTogJ3txdWV1ZX0nIik7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBmb3JlYWNoIChzdHJpbmcgYWN0aW9uIGluIGZvbGxvd0F0dGFja0FsZXJ0QWN0aW9ucykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uID09ICI8IENob29zZSBBbiBBY3Rpb24gPiIgfHwgc3RyaW5nLklzTnVsbE9yRW1wdHkoYWN0aW9uKSkNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgQ1BILkVuYWJsZUFjdGlvbihhY3Rpb24pOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIlJlLWVuYWJsZWQgYWN0aW9uOiAne2FjdGlvbn0nIik7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBpZiAoZm9sbG93QXR0YWNrUGF1c2VDaGFubmVsUmV3YXJkcykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBMaXN0PFR3aXRjaFJld2FyZD4gcmV3YXJkRGF0YSA9IENQSC5Ud2l0Y2hHZXRSZXdhcmRzKCk7DQogICAgICAgICAgICAgICAgaWYgKHJld2FyZERhdGEgIT0gbnVsbCAmJiByZXdhcmREYXRhLkNvdW50ICE9IDApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpbnQgcmV3YXJkc1VucGF1c2VkID0gMDsNCiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHJld2FyZCBpbiByZXdhcmREYXRhKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJld2FyZC5Jc091cnMpDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiRmFpbGVkIHRvIHVucGF1c2UgdGhlIHJld2FyZCAne3Jld2FyZC5UaXRsZX0nIGJlY2F1c2UgaXQncyBub3Qgb3duZWQgYnkgU3RyZWFtZXJCb3QiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgQ1BILlVuUGF1c2VSZXdhcmQocmV3YXJkLklkKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIlVucGF1c2VkIGNoYW5uZWwgcmV3YXJkOiAne3Jld2FyZC5UaXRsZX0nIik7DQogICAgICAgICAgICAgICAgICAgICAgICByZXdhcmRzVW5wYXVzZWQrKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIlVucGF1c2VkIHtyZXdhcmRzVW5wYXVzZWR9L3tyZXdhcmREYXRhLkNvdW50fSBjaGFubmVsIHJld2FyZHMuIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgaWYgKGZvbGxvd0F0dGFja0NsZWFyVFRTKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIENQSC5Ccm9hZGNhc3RVZHAoNjY2OSwgIntcImNvbW1hbmRcIjpcInJlc3VtZVwifSIpOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIlJlc3VtaW5nIFRUUyIpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgRW5hYmxlQWxsQnJvd3NlclNvdXJjZXMoKTsNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBpZiAoZm9sbG93QXR0YWNrUmVtb3ZlTmV3Rm9sbG93ZXJzKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChfYXR0YWNrZXJVc2VyTmFtZXMuQ291bnQgPiAwKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgU2VuZFRvYXN0KCQiUmVtb3Zpbmcge19hdHRhY2tlclVzZXJOYW1lcy5Db3VudH0gYm90dGVkIGZvbGxvd2VycywgdGhpcyBtaWdodCB0YWtlIGEgbGl0dGxlIHdoaWxlIDopIFNpdCB0aWdodCEiKTsNCiAgICAgICAgICAgICAgICAgICAgaW50IGJsb2NrZWQgPSAwOw0KICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJTdGFydGluZyB0byBibG9jayB7X2F0dGFja2VyVXNlck5hbWVzLkNvdW50fSBib3R0ZWQgZm9sbG93ZXJzLiIpOw0KICAgICAgICAgICAgICAgICAgICBmb3JlYWNoIChzdHJpbmcgdXNlciBpbiBfYXR0YWNrZXJVc2VyTmFtZXMpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChDUEguVHdpdGNoQmxvY2tVc2VyKHVzZXIsIFR3aXRjaEJsb2NrQ29udGV4dC5DaGF0LCBUd2l0Y2hCbG9ja1JlYXNvbi5PdGhlcikpDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tlZCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkJsb2NrZWQgJ3t1c2VyfScuIik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiRmFpbGVkIHRvIGJsb2NrICd7dXNlcn0nLiIpOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrZWQgPiAwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgU2VuZFRvYXN0KCQiU3VjY2Vzc2Z1bGx5IHJlbW92ZWQge2Jsb2NrZWR9IGJvdHRlZCBmb2xsb3dlcnMgOikiKTsNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiV2Fzbid0IGFibGUgdG8gYmxvY2sgYW55IG9mIHRoZSBib3R0ZWQgZm9sbG93ZXJzOiB7YmxvY2tlZH0ve19hdHRhY2tlclVzZXJOYW1lcy5Db3VudH0iKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiTm90IGJsb2NraW5nIHtfYXR0YWNrZXJVc2VyTmFtZXMuQ291bnR9IGJvdHRlZCBmb2xsb3dlcnMsIGJlY2F1c2UgYXV0by1yZW1vdmFsIGlzIGRpc2FibGVkIik7DQogICAgICAgICAgICBSZXBseVRvQ2hhdCgkIkB7YnJvYWRjYXN0ZXJOYW1lfSwgYWxsIGRvbmUhIFRoZSBwcm90ZWN0aXZlIG1vZGUgaGFzIGJlZW4gZGlzYWJsZWQuIEhhcHB5IHN0cmVhbWluZyEgOikiKTsNCiAgICAgICAgICAgIFNlbmRUb2FzdCgkIkFsbCBkb25lLiBIYXBweSBzdHJlYW1pbmchIDopIik7DQogICAgICAgICAgICBpZiAoZm9sbG93QXR0YWNrU2VuZERhdGEpDQogICAgICAgICAgICAgICAgU2VuZERhdGEoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgfQ0KDQogICAgICAgIGJyb3dzZXJTb3VyY2VzQnlTY2VuZS5DbGVhcigpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBwcml2YXRlIHZvaWQgRGlzYWJsZU9uQXR0YWNrQ2FsbGJhY2sob2JqZWN0IHN0YXRlKQ0KICAgIHsNCiAgICAgICAgRGlzYWJsZU9uQXR0YWNrKCk7DQogICAgfQ0KDQogICAgcHJpdmF0ZSBzdGF0aWMgRGljdGlvbmFyeTxzdHJpbmcsIExpc3Q8c3RyaW5nPj4gYnJvd3NlclNvdXJjZXNCeVNjZW5lID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBMaXN0PHN0cmluZz4+KCk7DQogICAgcHJpdmF0ZSB2b2lkIERpc2FibGVBbGxCcm93c2VyU291cmNlcygpDQogICAgew0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGludCBjb25uZWN0aW9uID0gR2V0Q29ubmVjdGVkT0JTSW5kZXgoKTsNCiAgICAgICAgaWYgKGNvbm5lY3Rpb24gPCAwKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyBzY2VuZUxpc3RSZXNwb25zZSA9IENQSC5PYnNTZW5kUmF3KCJHZXRTY2VuZUxpc3QiLCAie30iLCBjb25uZWN0aW9uKTsNCiAgICAgICAgSk9iamVjdCBzY2VuZUxpc3RPYmo7DQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICBzY2VuZUxpc3RPYmogPSBKT2JqZWN0LlBhcnNlKHNjZW5lTGlzdFJlc3BvbnNlKTsNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaA0KICAgICAgICB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICBKQXJyYXkgc2NlbmVzID0gc2NlbmVMaXN0T2JqWyJzY2VuZXMiXSBhcyBKQXJyYXk7DQogICAgICAgIGlmIChzY2VuZXMgPT0gbnVsbCkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgZm9yZWFjaCAodmFyIHNjZW5lIGluIHNjZW5lcykNCiAgICAgICAgew0KICAgICAgICAgICAgc3RyaW5nIHNjZW5lTmFtZSA9IHNjZW5lWyJzY2VuZU5hbWUiXT8uVG9TdHJpbmcoKTsNCiAgICAgICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShzY2VuZU5hbWUpKQ0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgYnJvd3NlclNvdXJjZXNCeVNjZW5lW3NjZW5lTmFtZV0gPSBuZXcgTGlzdDxzdHJpbmc+KCk7DQogICAgICAgICAgICBzdHJpbmcgc2NlbmVJdGVtc1Jlc3BvbnNlID0gQ1BILk9ic1NlbmRSYXcoIkdldFNjZW5lSXRlbUxpc3QiLCBKc29uQ29udmVydC5TZXJpYWxpemVPYmplY3QobmV3IHsgc2NlbmVOYW1lIH0pLCBjb25uZWN0aW9uKTsNCiAgICAgICAgICAgIEpPYmplY3Qgc2NlbmVJdGVtc09iajsNCiAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHNjZW5lSXRlbXNPYmogPSBKT2JqZWN0LlBhcnNlKHNjZW5lSXRlbXNSZXNwb25zZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjYXRjaA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBKQXJyYXkgc2NlbmVJdGVtcyA9IHNjZW5lSXRlbXNPYmpbInNjZW5lSXRlbXMiXSBhcyBKQXJyYXk7DQogICAgICAgICAgICBpZiAoc2NlbmVJdGVtcyA9PSBudWxsKQ0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgZm9yZWFjaCAodmFyIGl0ZW0gaW4gc2NlbmVJdGVtcykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBib29sIGlzR3JvdXAgPSBpdGVtWyJpc0dyb3VwIl0/LlR5cGUgPT0gSlRva2VuVHlwZS5Cb29sZWFuICYmIGl0ZW1bImlzR3JvdXAiXS5Ub09iamVjdDxib29sPigpOw0KICAgICAgICAgICAgICAgIGJvb2wgZW5hYmxlZCA9IGl0ZW1bInNjZW5lSXRlbUVuYWJsZWQiXT8uVHlwZSA9PSBKVG9rZW5UeXBlLkJvb2xlYW4gJiYgaXRlbVsic2NlbmVJdGVtRW5hYmxlZCJdLlRvT2JqZWN0PGJvb2w+KCk7DQogICAgICAgICAgICAgICAgc3RyaW5nIGlucHV0S2luZCA9IGl0ZW1bImlucHV0S2luZCJdPy5Ub1N0cmluZygpOw0KICAgICAgICAgICAgICAgIHN0cmluZyBzb3VyY2VOYW1lID0gaXRlbVsic291cmNlTmFtZSJdPy5Ub1N0cmluZygpOw0KICAgICAgICAgICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShzb3VyY2VOYW1lKSkNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgaWYgKGlucHV0S2luZCA9PSAiYnJvd3Nlcl9zb3VyY2UiKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVuYWJsZWQpDQogICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyU291cmNlc0J5U2NlbmVbc2NlbmVOYW1lXS5BZGQoc291cmNlTmFtZSk7DQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIlNraXBwaW5nIGJyb3dzZXIgc291cmNlOiAne3NvdXJjZU5hbWV9JyBpbiBzY2VuZSAne3NjZW5lTmFtZX0nIGJlY2F1c2UgYWxyZWFkeSBkaXNhYmxlZC4iKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNHcm91cCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHN0cmluZyBncm91cFJlc3BvbnNlID0gQ1BILk9ic1NlbmRSYXcoIkdldEdyb3VwU2NlbmVJdGVtTGlzdCIsIEpzb25Db252ZXJ0LlNlcmlhbGl6ZU9iamVjdChuZXcgeyBzY2VuZU5hbWUgPSBzb3VyY2VOYW1lIH0pLCBjb25uZWN0aW9uKTsNCiAgICAgICAgICAgICAgICAgICAgSk9iamVjdCBncm91cE9iajsNCiAgICAgICAgICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwT2JqID0gSk9iamVjdC5QYXJzZShncm91cFJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBjYXRjaA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIEpBcnJheSBncm91cEl0ZW1zID0gZ3JvdXBPYmpbInNjZW5lSXRlbXMiXSBhcyBKQXJyYXk7DQogICAgICAgICAgICAgICAgICAgIGlmIChncm91cEl0ZW1zID09IG51bGwpDQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGdJdGVtIGluIGdyb3VwSXRlbXMpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgZ0VuYWJsZWQgPSBnSXRlbVsic2NlbmVJdGVtRW5hYmxlZCJdPy5UeXBlID09IEpUb2tlblR5cGUuQm9vbGVhbiAmJiBnSXRlbVsic2NlbmVJdGVtRW5hYmxlZCJdLlRvT2JqZWN0PGJvb2w+KCk7DQogICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmcgZ0lucHV0S2luZCA9IGdJdGVtWyJpbnB1dEtpbmQiXT8uVG9TdHJpbmcoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyBnU291cmNlTmFtZSA9IGdJdGVtWyJzb3VyY2VOYW1lIl0/LlRvU3RyaW5nKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkoZ1NvdXJjZU5hbWUpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdJbnB1dEtpbmQgPT0gImJyb3dzZXJfc291cmNlIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ0VuYWJsZWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXJTb3VyY2VzQnlTY2VuZVtzY2VuZU5hbWVdLkFkZChnU291cmNlTmFtZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJTa2lwcGluZyBicm93c2VyIHNvdXJjZTogJ3tnU291cmNlTmFtZX0nIGluIHNjZW5lICd7c2NlbmVOYW1lfScgYmVjYXVzZSBhbHJlYWR5IGRpc2FibGVkLiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBmb3JlYWNoICh2YXIga3ZwIGluIGJyb3dzZXJTb3VyY2VzQnlTY2VuZSkNCiAgICAgICAgew0KICAgICAgICAgICAgc3RyaW5nIHNjZW5lTmFtZSA9IGt2cC5LZXk7DQogICAgICAgICAgICBmb3JlYWNoICh2YXIgc3JjIGluIGt2cC5WYWx1ZS5EaXN0aW5jdCgpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShzY2VuZU5hbWUpIHx8IHN0cmluZy5Jc051bGxPckVtcHR5KHNyYykpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIENQSC5PYnNIaWRlU291cmNlKHNjZW5lTmFtZSwgc3JjLCBjb25uZWN0aW9uKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJIaWRpbmcgYnJvd3NlciBzb3VyY2U6ICd7c3JjfScgaW4gc2NlbmUgJ3tzY2VuZU5hbWV9JyIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lkIEVuYWJsZUFsbEJyb3dzZXJTb3VyY2VzKCkNCiAgICB7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaW50IGNvbm5lY3Rpb24gPSBHZXRDb25uZWN0ZWRPQlNJbmRleCgpOw0KICAgICAgICBpZiAoY29ubmVjdGlvbiA8IDApDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgZm9yZWFjaCAodmFyIGt2cCBpbiBicm93c2VyU291cmNlc0J5U2NlbmUpDQogICAgICAgIHsNCiAgICAgICAgICAgIHN0cmluZyBzY2VuZU5hbWUgPSBrdnAuS2V5Ow0KICAgICAgICAgICAgZm9yZWFjaCAodmFyIHNyYyBpbiBrdnAuVmFsdWUuRGlzdGluY3QoKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkoc2NlbmVOYW1lKSB8fCBzdHJpbmcuSXNOdWxsT3JFbXB0eShzcmMpKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICBDUEguT2JzU2hvd1NvdXJjZShzY2VuZU5hbWUsIHNyYywgY29ubmVjdGlvbik7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiU2hvd2luZyBicm93c2VyIHNvdXJjZTogJ3tzcmN9JyBpbiBzY2VuZSAne3NjZW5lTmFtZX0nIik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwcml2YXRlIHN0YXRpYyBpbnQgX2Nvbm5lY3Rpb24gPSAtMTsNCiAgICBwcml2YXRlIGludCBHZXRDb25uZWN0ZWRPQlNJbmRleCgpDQogICAgew0KICAgICAgICBpZiAoX2Nvbm5lY3Rpb24gPj0gMCkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKENQSC5PYnNJc0Nvbm5lY3RlZChfY29ubmVjdGlvbikpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiUHJldmlvdXMgT0JTIGluZGV4IHtfY29ubmVjdGlvbn0gc3RpbGwgY29ubmVjdGVkLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBfY29ubmVjdGlvbjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiUHJldmlvdXMgT0JTIGluZGV4IHtfY29ubmVjdGlvbn0gbG9zdDsgY2hlY2tpbmcgYWdhaW4uLi4iKTsNCiAgICAgICAgICAgIF9jb25uZWN0aW9uID0gLTE7DQogICAgICAgIH0NCg0KICAgICAgICBQb3N0VG9Mb2coIkNoZWNraW5nIGZvciBleGlzdGluZyBPQlMgY29ubmVjdGlvbnMuLi4iKTsNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPD0gMTA7IGkrKykNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKENQSC5PYnNJc0Nvbm5lY3RlZChpKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJPQlMgaW5kZXgge2l9IGlzIGNvbm5lY3RlZC4iKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gX2Nvbm5lY3Rpb24gPSBpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgUG9zdFRvTG9nKCJObyBleGlzdGluZyBjb25uZWN0aW9ucyBmb3VuZDsgYXR0ZW1wdGluZyB0byBjb25uZWN0Li4uIik7DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDw9IDEwOyBpKyspDQogICAgICAgIHsNCiAgICAgICAgICAgIENQSC5PYnNDb25uZWN0KGkpOw0KICAgICAgICAgICAgQ1BILldhaXQoMjUwKTsNCiAgICAgICAgICAgIGlmIChDUEguT2JzSXNDb25uZWN0ZWQoaSkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiT0JTIGluZGV4IHtpfSBzdWNjZXNzZnVsbHkgY29ubmVjdGVkIGFmdGVyIHJldHJ5LiIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBfY29ubmVjdGlvbiA9IGk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBQb3N0VG9Mb2coIk5vIE9CUyBjb25uZWN0aW9uIGZvdW5kIGFmdGVyIHJldHJpZXMuIik7DQogICAgICAgIHJldHVybiBfY29ubmVjdGlvbjsNCiAgICB9DQoNCiAgICBwcml2YXRlIGFzeW5jIFRhc2sgU2VuZERhdGEoKQ0KICAgIHsNCiAgICAgICAgUG9zdFRvTG9nKCJTZW5kaW5nIGJvdCB1c2VybmFtZXMuLi4iKTsNCiAgICAgICAgY2xpZW50LkRlZmF1bHRSZXF1ZXN0SGVhZGVycy5Vc2VyQWdlbnQuUGFyc2VBZGQoIk1PRCBUT09MUyIpOw0KICAgICAgICBjbGllbnQuRGVmYXVsdFJlcXVlc3RIZWFkZXJzLkF1dGhvcml6YXRpb24gPSBuZXcgQXV0aGVudGljYXRpb25IZWFkZXJWYWx1ZSgidG9rZW4iLCAiZ2l0aHViX3BhdF8xMUJVV0VDSFkwWUp4ZWtzTUNxWm1FX2E2eHVnd1lKWFRSWnVPZm5mYmUwVm5KM2NyYmJONE5YSFI5RVc3cnpqNGpWQlFCQlNMQ2VoRTFLdFBjIik7DQogICAgICAgIHZhciBmaWxlTmFtZSA9ICQie0RhdGVUaW1lLlV0Y05vdzp5eXl5TU1kZEhIbW1zc31fe0d1aWQuTmV3R3VpZCgpfS50eHQiOw0KICAgICAgICB2YXIgY29udGVudCA9IENvbnZlcnQuVG9CYXNlNjRTdHJpbmcoRW5jb2RpbmcuVVRGOC5HZXRCeXRlcyhzdHJpbmcuSm9pbigiXG4iLCBfYXR0YWNrZXJVc2VyTmFtZXMpKSk7DQogICAgICAgIHZhciBwYXlsb2FkID0gSnNvbkNvbnZlcnQuU2VyaWFsaXplT2JqZWN0KG5ldyB7IG1lc3NhZ2UgPSBmaWxlTmFtZSwgY29udGVudCA9IGNvbnRlbnQgfSk7DQogICAgICAgIHZhciB1cmwgPSAkImh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvTU9EVE9PTFNTQi9NT0QtVE9PTFMtRGF0YS9jb250ZW50cy9kYXRhL3tmaWxlTmFtZX0iOw0KICAgICAgICBhd2FpdCBjbGllbnQuUHV0QXN5bmModXJsLCBuZXcgU3RyaW5nQ29udGVudChwYXlsb2FkLCBFbmNvZGluZy5VVEY4LCAiYXBwbGljYXRpb24vanNvbiIpKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBHZXRFeHRlbnNpb25JbmZvKCkNCiAgICB7DQogICAgICAgIGlmIChleHRlbnNpb25OYW1lID09IG51bGwgfHwgZXh0ZW5zaW9uVmVyc2lvbiA9PSBudWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICBDUEguRXhlY3V0ZU1ldGhvZCgiTU9EIFRPT0xTIFZlcnNpb24gQ2hlY2siLCAiRXhlY3V0ZSIpOw0KICAgICAgICAgICAgQ1BILlRyeUdldEFyZygiZXh0ZW5zaW9uTmFtZSIsIG91dCBleHRlbnNpb25OYW1lKTsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoImV4dGVuc2lvblZlcnNpb24iLCBvdXQgZXh0ZW5zaW9uVmVyc2lvbik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBSZXBseVRvQ2hhdChzdHJpbmcgdGV4dCkNCiAgICB7DQogICAgICAgIGludCBtYXhMZW5ndGggPSA0ODA7DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdGV4dC5MZW5ndGg7IGkgKz0gbWF4TGVuZ3RoKQ0KICAgICAgICB7DQogICAgICAgICAgICBzdHJpbmcgbWVzc2FnZVBhcnQgPSB0ZXh0LlN1YnN0cmluZyhpLCBNYXRoLk1pbihtYXhMZW5ndGgsIHRleHQuTGVuZ3RoIC0gaSkpOw0KICAgICAgICAgICAgQ1BILlNlbmRNZXNzYWdlKG1lc3NhZ2VQYXJ0KTsNCiAgICAgICAgICAgIENQSC5XYWl0KDE1MCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwcml2YXRlIHZvaWQgUG9zdFRvTG9nKHN0cmluZyBsb2csIFtDYWxsZXJNZW1iZXJOYW1lXSBzdHJpbmcgbWV0aG9kTmFtZSA9IG51bGwpDQogICAgew0KICAgICAgICBDUEguTG9nSW5mbygkIlt7ZXh0ZW5zaW9uTmFtZX0gdi57ZXh0ZW5zaW9uVmVyc2lvbn1dIFtGT0xMT1cgQVRUQUNLIFBST1RFQ1RJT05dIFt7bWV0aG9kTmFtZX1dIHtsb2d9Iik7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgU2VuZFRvYXN0KHN0cmluZyB0ZXh0KQ0KICAgIHsNCiAgICAgICAgQ1BILlNob3dUb2FzdE5vdGlmaWNhdGlvbihleHRlbnNpb25OYW1lLCB0ZXh0LCAiSGVscCBhdDogdGF3bWFlLnh5ei9kaXNjb3JkIiwgImh0dHBzOi8vZ2l0aHViLmNvbS90YXdtYWUvdGF3bWFlL2Jsb2IvbWFpbi9hc3NldHMvcGFnZS1kZXNpZ24vdG9hc3QtbG9nby5wbmc/cmF3PXRydWUiKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBHZXRCcm9hZGNhc3Rlck5hbWUoKQ0KICAgIHsNCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KGJyb2FkY2FzdGVyTmFtZSkpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBiY0luZm8gPSBDUEguVHdpdGNoR2V0QnJvYWRjYXN0ZXIoKTsNCiAgICAgICAgICAgIGlmIChiY0luZm8gIT0gbnVsbCkNCiAgICAgICAgICAgICAgICBicm9hZGNhc3Rlck5hbWUgPSBiY0luZm8uVXNlck5hbWU7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBIdHRwQ2xpZW50IGNsaWVudCA9IG5ldyBIdHRwQ2xpZW50DQogICAgew0KICAgICAgICBUaW1lb3V0ID0gVGltZVNwYW4uRnJvbVNlY29uZHMoNjkpDQogICAgfTsNCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBleHRlbnNpb25OYW1lID0gbnVsbDsNCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBleHRlbnNpb25WZXJzaW9uID0gbnVsbDsNCiAgICBwcml2YXRlIFRhd21hZVVJLlRhd21hZSB1aTsNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIGJyb2FkY2FzdGVyTmFtZSA9IG51bGw7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgaW50IGZvbGxvd0F0dGFja0ZvbGxvd2VyVGhyZXNob2xkID0gMTAwOw0KICAgIHB1YmxpYyBpbnQgZm9sbG93QXR0YWNrRHVyYXRpb25UaHJlc2hvbGQgPSA1Ow0KICAgIHB1YmxpYyBpbnQgZm9sbG93QXR0YWNrRHVyYXRpb24gPSA2MDA7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBmb2xsb3dBdHRhY2tBdXRvVHVybk9uID0gdHJ1ZTsNCiAgICBwdWJsaWMgYm9vbCBmb2xsb3dBdHRhY2tSZW1vdmVOZXdGb2xsb3dlcnMgPSB0cnVlOw0KICAgIHB1YmxpYyBib29sIGZvbGxvd0F0dGFja0NsZWFyVFRTID0gdHJ1ZTsNCiAgICBwdWJsaWMgYm9vbCBmb2xsb3dBdHRhY2tQYXVzZUNoYW5uZWxSZXdhcmRzID0gdHJ1ZTsNCiAgICBwdWJsaWMgYm9vbCBmb2xsb3dBdHRhY2tTZW5kRGF0YSA9IHRydWU7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgc3RyaW5nW10gZm9sbG93QXR0YWNrQWxlcnRBY3Rpb25zID0NCiAgICB7DQogICAgICAgICI8IENob29zZSBBbiBBY3Rpb24gPiINCiAgICB9Ow0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIHN0cmluZ1tdIGZvbGxvd0F0dGFja0FsZXJ0QWN0aW9uUXVldWVzID0NCiAgICB7DQogICAgICAgICI8IENob29zZSBBIFF1ZXVlID4iDQogICAgfTsNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTGlua2VkTGlzdDxLZXlWYWx1ZVBhaXI8c3RyaW5nLCBEYXRlVGltZT4+IF93aW5kb3cgPSBuZXcgTGlua2VkTGlzdDxLZXlWYWx1ZVBhaXI8c3RyaW5nLCBEYXRlVGltZT4+KCk7DQogICAgcHVibGljIHN0YXRpYyByZWFkb25seSBvYmplY3QgX3N5bmMgPSBuZXcgb2JqZWN0ICgpOw0KICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBfaW5BdHRhY2s7DQogICAgcHVibGljIHN0YXRpYyBMaXN0PHN0cmluZz4gX2F0dGFja2VyVXNlck5hbWVzID0gbmV3IExpc3Q8c3RyaW5nPigpOw0KICAgIHB1YmxpYyBzdGF0aWMgVGltZXIgX2F0dGFja1RpbWVyOw0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHJpdmF0ZSB2b2lkIEZldGNoU2V0dGluZ3MoKQ0KICAgIHsNCiAgICAgICAgdWkgPSBuZXcgVGF3bWFlKENQSCwgZXh0ZW5zaW9uTmFtZSwgZXh0ZW5zaW9uVmVyc2lvbiwgZmFsc2UpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBmb2xsb3dBdHRhY2tGb2xsb3dlclRocmVzaG9sZCA9IHVpLkdldFZhbHVlPGludD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfZm9sbG93QXR0YWNrRm9sbG93ZXJUaHJlc2hvbGQiKSA/PyBmb2xsb3dBdHRhY2tGb2xsb3dlclRocmVzaG9sZDsNCiAgICAgICAgZm9sbG93QXR0YWNrRHVyYXRpb25UaHJlc2hvbGQgPSB1aS5HZXRWYWx1ZTxpbnQ/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX2ZvbGxvd0F0dGFja0R1cmF0aW9uVGhyZXNob2xkIikgPz8gZm9sbG93QXR0YWNrRHVyYXRpb25UaHJlc2hvbGQ7DQogICAgICAgIGZvbGxvd0F0dGFja0R1cmF0aW9uID0gdWkuR2V0VmFsdWU8aW50Pz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19mb2xsb3dBdHRhY2tEdXJhdGlvbiIpID8/IGZvbGxvd0F0dGFja0R1cmF0aW9uOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBmb2xsb3dBdHRhY2tBdXRvVHVybk9uID0gdWkuR2V0VmFsdWU8Ym9vbD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfZm9sbG93QXR0YWNrQXV0b1R1cm5PbiIpID8/IGZvbGxvd0F0dGFja0F1dG9UdXJuT247DQogICAgICAgIGZvbGxvd0F0dGFja1JlbW92ZU5ld0ZvbGxvd2VycyA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX2ZvbGxvd0F0dGFja1JlbW92ZU5ld0ZvbGxvd2VycyIpID8/IGZvbGxvd0F0dGFja1JlbW92ZU5ld0ZvbGxvd2VyczsNCiAgICAgICAgZm9sbG93QXR0YWNrQ2xlYXJUVFMgPSB1aS5HZXRWYWx1ZTxib29sPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19mb2xsb3dBdHRhY2tDbGVhclRUUyIpID8/IGZvbGxvd0F0dGFja0NsZWFyVFRTOw0KICAgICAgICBmb2xsb3dBdHRhY2tQYXVzZUNoYW5uZWxSZXdhcmRzID0gdWkuR2V0VmFsdWU8Ym9vbD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfZm9sbG93QXR0YWNrUGF1c2VDaGFubmVsUmV3YXJkcyIpID8/IGZvbGxvd0F0dGFja1BhdXNlQ2hhbm5lbFJld2FyZHM7DQogICAgICAgIGZvbGxvd0F0dGFja1NlbmREYXRhID0gdWkuR2V0VmFsdWU8Ym9vbD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfZm9sbG93QXR0YWNrU2VuZERhdGEiKSA/PyBmb2xsb3dBdHRhY2tTZW5kRGF0YTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgc3RyaW5nIHJhd19mb2xsb3dBdHRhY2tBbGVydEFjdGlvbnMgPSB1aS5HZXRWYWx1ZTxzdHJpbmc+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfZm9sbG93QXR0YWNrQWxlcnRBY3Rpb25zIik7DQogICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkocmF3X2ZvbGxvd0F0dGFja0FsZXJ0QWN0aW9ucykpDQogICAgICAgICAgICBmb2xsb3dBdHRhY2tBbGVydEFjdGlvbnMgPSBKQXJyYXkuUGFyc2UocmF3X2ZvbGxvd0F0dGFja0FsZXJ0QWN0aW9ucykuVG9PYmplY3Q8c3RyaW5nW10+KCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyByYXdfZm9sbG93QXR0YWNrQWxlcnRBY3Rpb25RdWV1ZXMgPSB1aS5HZXRWYWx1ZTxzdHJpbmc+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfZm9sbG93QXR0YWNrQWxlcnRBY3Rpb25RdWV1ZXMiKTsNCiAgICAgICAgaWYgKCFzdHJpbmcuSXNOdWxsT3JFbXB0eShyYXdfZm9sbG93QXR0YWNrQWxlcnRBY3Rpb25RdWV1ZXMpKQ0KICAgICAgICAgICAgZm9sbG93QXR0YWNrQWxlcnRBY3Rpb25RdWV1ZXMgPSBKQXJyYXkuUGFyc2UocmF3X2ZvbGxvd0F0dGFja0FsZXJ0QWN0aW9uUXVldWVzKS5Ub09iamVjdDxzdHJpbmdbXT4oKTsNCiAgICB9DQp9",
                                "precompile": true,
                                "delayStart": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "a5e4a3be-3dd2-41e1-8704-29b70f89fbe9",
                                "weight": 0.0,
                                "type": 99999,
                                "parentId": "3b627250-0ef5-4bdf-9a42-30f5c5390269",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "3b627250-0ef5-4bdf-9a42-30f5c5390269",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    }
                ],
                "collapsedGroups": [
                    "3b627250-0ef5-4bdf-9a42-30f5c5390269"
                ]
            },
            {
                "id": "5a0776a3-ca5f-4057-b803-f24d08edaba5",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": true,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] # - Spam Filter",
                "group": "MOD TOOLS - Spam Filter",
                "alwaysRun": true,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "id": "6906b600-3825-40f4-abd8-7a66ffb0ed80",
                        "type": 133,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "3b517f1e-24e2-44e3-8771-db3a5ceef5ee",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "f6040727-86a3-42a1-ac2d-637922dae23e",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "variableName": "debug",
                                "value": false,
                                "autoType": true,
                                "id": "d4dee85f-fde4-4e73-aa24-2c01edff744f",
                                "weight": 0.0,
                                "type": 123,
                                "parentId": "f6040727-86a3-42a1-ac2d-637922dae23e",
                                "enabled": true,
                                "index": 1
                            },
                            {
                                "name": "[MOD TOOLS] Spam Filter",
                                "description": "",
                                "references": [
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\mscorlib.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Core.dll",
                                    ".\\Newtonsoft.Json.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Runtime.Serialization.dll",
                                    ".\\Microsoft.CodeAnalysis.dll",
                                    ".\\System.Text.Encodings.Web.dll",
                                    ".\\System.Collections.Immutable.dll",
                                    ".\\System.Reflection.Metadata.dll",
                                    ".\\dlls\\TawmaeUI.dll"
                                ],
                                "byteCode": "dXNpbmcgU3lzdGVtOw0KdXNpbmcgU3lzdGVtLkxpbnE7DQp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsNCnVzaW5nIE5ld3RvbnNvZnQuSnNvbjsNCnVzaW5nIE5ld3RvbnNvZnQuSnNvbi5MaW5xOw0KdXNpbmcgU3lzdGVtLkdsb2JhbGl6YXRpb247DQp1c2luZyBTeXN0ZW0uVGV4dDsNCnVzaW5nIFN5c3RlbS5UZXh0LlJlZ3VsYXJFeHByZXNzaW9uczsNCnVzaW5nIFRhd21hZVVJOw0KDQpwdWJsaWMgY2xhc3MgQ1BISW5saW5lDQp7DQogICAgcHVibGljIGJvb2wgRXhlY3V0ZSgpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEdldEJyb2FkY2FzdGVyTmFtZSgpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyTmFtZSIsIG91dCBzdHJpbmcgdXNlck5hbWUpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJkZWJ1ZyIsIG91dCBib29sIGRlYnVnKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFTaGFyZWRDaGF0Q2hlY2soZGVidWcpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAodXNlck5hbWUgPT0gYnJvYWRjYXN0ZXJOYW1lIHx8IHVzZXJOYW1lID09IGJvdE5hbWUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChkZWJ1ZykNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJTa2lwcGluZyBtZXNzYWdlOiBTZW5kZXIgJ3t1c2VyfScgaXMgYnJvYWRjYXN0ZXI/e2Jyb2FkY2FzdGVyTmFtZX0vYm90P3tib3ROYW1lfSIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygiaXNNb2RlcmF0b3IiLCBvdXQgYm9vbCBpc01vZGVyYXRvcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImlzVmlwIiwgb3V0IGJvb2wgaXNWaXApOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJpc1N1YnNjcmliZWQiLCBvdXQgYm9vbCBpc1N1YnNjcmliZWQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoKGlzU3Vic2NyaWJlZCAmJiBhbGxvd1N1YnMpIHx8IChpc1ZpcCAmJiBhbGxvd1ZpcHMpIHx8IChpc01vZGVyYXRvciAmJiBhbGxvd01vZHMpKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoZGVidWcpDQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiU2tpcHBpbmcgbWVzc2FnZTogU2VuZGVyICd7dXNlcn0nIGlzIHN1Yj97aXNTdWJzY3JpYmVkfTt2aXA/e2lzVmlwfTttb2Q/e2lzTW9kZXJhdG9yfSIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygibXNnSWQiLCBvdXQgc3RyaW5nIG1lc3NhZ2VJZCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoIm1lc3NhZ2UiLCBvdXQgc3RyaW5nIG1lc3NhZ2UpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBzdHJpbmcgbWVzc2FnZUxvd2VyID0gbWVzc2FnZS5Ub0xvd2VyKCk7DQogICAgICAgIHN0cmluZyBtZXNzYWdlTm9ybWFsaXplZCA9IE5vcm1hbGl6ZU1lc3NhZ2UobWVzc2FnZUxvd2VyKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgc3RyaW5nIGZvdW5kV29yZDEgPSBibGFja2xpc3RlZFdvcmRzTGlzdC5GaXJzdE9yRGVmYXVsdCh3b3JkID0+IG1lc3NhZ2VMb3dlci5Db250YWlucyh3b3JkLlRvTG93ZXIoKSkpOw0KICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KGZvdW5kV29yZDEpICYmIGZvdW5kV29yZDEuTGVuZ3RoIDwgNCkNCiAgICAgICAgew0KICAgICAgICAgICAgZm91bmRXb3JkMSA9IE5vcm1hbGl6ZU1lc3NhZ2VTaG9ydChtZXNzYWdlTG93ZXIsIGJsYWNrbGlzdGVkV29yZHNMaXN0KTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyBmb3VuZFdvcmQyID0gYmxhY2tsaXN0ZWRXb3Jkc0xpc3QuRmlyc3RPckRlZmF1bHQod29yZCA9PiBtZXNzYWdlTm9ybWFsaXplZC5Db250YWlucyh3b3JkLlRvTG93ZXIoKSkpOw0KICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KGZvdW5kV29yZDIpICYmIGZvdW5kV29yZDIuTGVuZ3RoIDwgNCkNCiAgICAgICAgew0KICAgICAgICAgICAgZm91bmRXb3JkMiA9IE5vcm1hbGl6ZU1lc3NhZ2VTaG9ydChtZXNzYWdlTG93ZXIsIGJsYWNrbGlzdGVkV29yZHNMaXN0KTsNCiAgICAgICAgfTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgc3RyaW5nIHJlYXNvbiA9ICJCbGFja2xpc3RlZCBXb3JkLiI7DQogICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShmb3VuZFdvcmQxKSAmJiBzdHJpbmcuSXNOdWxsT3JFbXB0eShmb3VuZFdvcmQyKSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKGFzY2lpUHJvdGVjdGlvbikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBzdHJpbmcgcGF0dGVybiA9IEAiW1x1MjU4MC1cdTI1OUZcdTI4MDAtXHUyOEZGXSI7DQogICAgICAgICAgICAgICAgaW50IGNvdW50ID0gUmVnZXguTWF0Y2hlcyhtZXNzYWdlLCBwYXR0ZXJuKS5Db3VudDsNCiAgICAgICAgICAgICAgICBpZiAoY291bnQgPj0gMTUpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpZiAoY29uc2VxdWVuY2UgPT0gIldhcm4iKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBDUEguVHdpdGNoV2FyblVzZXIodXNlck5hbWUsIHJlYXNvbkFzY2lpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIENQSC5Ud2l0Y2hEZWxldGVDaGF0TWVzc2FnZShtZXNzYWdlSWQsIGJvdCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY29uc2VxdWVuY2UgPT0gIlRpbWVvdXQiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgQ1BILlR3aXRjaFRpbWVvdXRVc2VyKHVzZXJOYW1lLCB0aW1lb3V0RHVyYXRpb24sIHJlYXNvbkFzY2lpLCBib3QpOw0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjb25zZXF1ZW5jZSA9PSAiQmFuIikNCiAgICAgICAgICAgICAgICAgICAgICAgIENQSC5Ud2l0Y2hCYW5Vc2VyKHVzZXJOYW1lLCByZWFzb25Bc2NpaSwgYm90KTsNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgQ1BILlR3aXRjaERlbGV0ZUNoYXRNZXNzYWdlKG1lc3NhZ2VJZCwgZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJ7dXNlck5hbWV9IHJlY2VpdmVkIGNvbnNlcXVlbmNlICd7Y29uc2VxdWVuY2V9Jy4gUmVhc29uOiB7cmVhc29uQXNjaWl9LiBNZXNzYWdlOiB7bWVzc2FnZX0iKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgICAgICAgICAgaW50IGN1cnJlbnRZZWFyID0gRGF0ZVRpbWUuTm93LlllYXI7DQogICAgICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VBc2NpaS5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlY3VycmVudFllYXIlIiwgY3VycmVudFllYXIuVG9TdHJpbmcoKSkpOw0KICAgICAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChlbW90ZVByb3RlY3Rpb24pDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgQ1BILlRyeUdldEFyZygiZW1vdGVDb3VudCIsIG91dCBpbnQgbWVzc2FnZUVtb3RlQ291bnQpOw0KICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlRW1vdGVDb3VudCA+PSBlbW90ZVByb3RlY3Rpb25Db3VudCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmIChjb25zZXF1ZW5jZSA9PSAiV2FybiIpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIENQSC5Ud2l0Y2hXYXJuVXNlcih1c2VyTmFtZSwgcmVhc29uRW1vdGVzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIENQSC5Ud2l0Y2hEZWxldGVDaGF0TWVzc2FnZShtZXNzYWdlSWQsIGJvdCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY29uc2VxdWVuY2UgPT0gIlRpbWVvdXQiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgQ1BILlR3aXRjaFRpbWVvdXRVc2VyKHVzZXJOYW1lLCB0aW1lb3V0RHVyYXRpb24sIHJlYXNvbkVtb3RlcywgYm90KTsNCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY29uc2VxdWVuY2UgPT0gIkJhbiIpDQogICAgICAgICAgICAgICAgICAgICAgICBDUEguVHdpdGNoQmFuVXNlcih1c2VyTmFtZSwgcmVhc29uRW1vdGVzLCBib3QpOw0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBDUEguVHdpdGNoRGVsZXRlQ2hhdE1lc3NhZ2UobWVzc2FnZUlkLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkInt1c2VyTmFtZX0gcmVjZWl2ZWQgY29uc2VxdWVuY2UgJ3tjb25zZXF1ZW5jZX0nLiBSZWFzb246IHtyZWFzb25FbW90ZXN9LiBNZXNzYWdlOiB7bWVzc2FnZX0iKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZUVtb3Rlcy5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlbWF4RW1vdGVzQ291bnQlIiwgZW1vdGVQcm90ZWN0aW9uQ291bnQuVG9TdHJpbmcoKSkuUmVwbGFjZSgiJXVzZWRFbW90ZXNDb3VudCUiLCBtZXNzYWdlRW1vdGVDb3VudC5Ub1N0cmluZygpKSk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKGNhcHNQcm90ZWN0aW9uKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGludCBtZXNzYWdlQ2Fwc0NvdW50ID0gR2V0Q2Fwc0NvdW50KG1lc3NhZ2UpOw0KICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlQ2Fwc0NvdW50ID49IGNhcHNQcm90ZWN0aW9uQ291bnQpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpZiAoY29uc2VxdWVuY2UgPT0gIldhcm4iKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBDUEguVHdpdGNoV2FyblVzZXIodXNlck5hbWUsIHJlYXNvbkNhcHMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgQ1BILlR3aXRjaERlbGV0ZUNoYXRNZXNzYWdlKG1lc3NhZ2VJZCwgYm90KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjb25zZXF1ZW5jZSA9PSAiVGltZW91dCIpDQogICAgICAgICAgICAgICAgICAgICAgICBDUEguVHdpdGNoVGltZW91dFVzZXIodXNlck5hbWUsIHRpbWVvdXREdXJhdGlvbiwgcmVhc29uQ2FwcywgYm90KTsNCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY29uc2VxdWVuY2UgPT0gIkJhbiIpDQogICAgICAgICAgICAgICAgICAgICAgICBDUEguVHdpdGNoQmFuVXNlcih1c2VyTmFtZSwgcmVhc29uQ2FwcywgYm90KTsNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgQ1BILlR3aXRjaERlbGV0ZUNoYXRNZXNzYWdlKG1lc3NhZ2VJZCwgZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJ7dXNlck5hbWV9IHJlY2VpdmVkIGNvbnNlcXVlbmNlICd7Y29uc2VxdWVuY2V9Jy4gUmVhc29uOiB7cmVhc29uQ2Fwc30uIE1lc3NhZ2U6IHttZXNzYWdlfSIpOw0KICAgICAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQ2Fwcy5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlbWF4Q2Fwc0NvdW50JSIsIGNhcHNQcm90ZWN0aW9uQ291bnQuVG9TdHJpbmcoKSkuUmVwbGFjZSgiJXVzZWRDYXBzQ291bnQlIiwgbWVzc2FnZUNhcHNDb3VudC5Ub1N0cmluZygpKSk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKGRlYnVnKQ0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIk5vIHNwYW0gZGV0ZWN0ZWQgZm9yICd7dXNlcn0nLiBNZXNzYWdlOiB7bWVzc2FnZX0iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghZmlsdGVyQmxhY2tsaXN0ZWRXb3JkcykNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKGRlYnVnKQ0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygiU2tpcHBpbmcgbWVzc2FnZTogRmlsdGVyaW5nIGZvciBibGFja2xpc3RlZCB3b3JkcyBpcyBkaXNhYmxlZC4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChpc01vZGVyYXRvcikNCiAgICAgICAgICAgIGJvdCA9IGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoY29uc2VxdWVuY2UgPT0gIldhcm4iKQ0KICAgICAgICB7DQogICAgICAgICAgICBDUEguVHdpdGNoV2FyblVzZXIodXNlck5hbWUsIHJlYXNvbkJsYWNrbGlzdGVkV29yZCk7DQogICAgICAgICAgICBDUEguVHdpdGNoRGVsZXRlQ2hhdE1lc3NhZ2UobWVzc2FnZUlkLCBib3QpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKGNvbnNlcXVlbmNlID09ICJUaW1lb3V0IikNCiAgICAgICAgICAgIENQSC5Ud2l0Y2hUaW1lb3V0VXNlcih1c2VyTmFtZSwgdGltZW91dER1cmF0aW9uLCByZWFzb25CbGFja2xpc3RlZFdvcmQsIGJvdCk7DQogICAgICAgIGVsc2UgaWYgKGNvbnNlcXVlbmNlID09ICJCYW4iKQ0KICAgICAgICAgICAgQ1BILlR3aXRjaEJhblVzZXIodXNlck5hbWUsIHJlYXNvbkJsYWNrbGlzdGVkV29yZCwgYm90KTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgQ1BILlR3aXRjaERlbGV0ZUNoYXRNZXNzYWdlKG1lc3NhZ2VJZCwgZmFsc2UpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBQb3N0VG9Mb2coJCJ7dXNlck5hbWV9IHJlY2VpdmVkIGNvbnNlcXVlbmNlICd7Y29uc2VxdWVuY2V9Jy4gUmVhc29uOiB7cmVhc29uQmxhY2tsaXN0ZWRXb3JkfS4gLy8gRGVidWc6IGZvdW5kV29yZDE6ICd7Zm91bmRXb3JkMX0nIC8gZm91bmRXb3JkMjogJ3tmb3VuZFdvcmQyfScgTWVzc2FnZToge21lc3NhZ2V9IC8vIChOb3JtYWxpemVkIG1lc3NhZ2U6IHttZXNzYWdlTm9ybWFsaXplZH0pIC8vIGlzVmlwOiB7aXNWaXB9LCBpc1N1Yjoge2lzU3Vic2NyaWJlZH07IGlzTW9kIHtpc01vZGVyYXRvcn0iKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKHJlcGxhY2VCYWRXb3JkKQ0KICAgICAgICB7DQogICAgICAgICAgICBtZXNzYWdlID0gUmVnZXguUmVwbGFjZShtZXNzYWdlLCBAIlxiXHcrXGIiLCBtYXRjaCA9Pg0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IG1hdGNoLlZhbHVlOw0KICAgICAgICAgICAgICAgIHZhciBub3JtID0gTm9ybWFsaXplTWVzc2FnZSh0b2tlbi5Ub0xvd2VySW52YXJpYW50KCkpOw0KICAgICAgICAgICAgICAgIGlmIChibGFja2xpc3RlZFdvcmRzTGlzdC5Db250YWlucyhub3JtLCBTdHJpbmdDb21wYXJlci5PcmRpbmFsSWdub3JlQ2FzZSkpDQogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXBsYWNlZEJhZFdvcmQ7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRva2VuOw0KICAgICAgICAgICAgfSwgUmVnZXhPcHRpb25zLklnbm9yZUNhc2UpOw0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVJlcGxhY2VtZW50TWVzc2FnZS5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlcmVkYWN0ZWRNZXNzYWdlJSIsIG1lc3NhZ2UpKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIE5vcm1hbGl6ZU1lc3NhZ2Uoc3RyaW5nIGlucHV0KQ0KICAgIHsNCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KGlucHV0KSkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIGlucHV0Ow0KICAgICAgICB9DQoNCiAgICAgICAgc3RyaW5nIG5vcm1hbGl6ZWQgPSBpbnB1dC5Ob3JtYWxpemUoTm9ybWFsaXphdGlvbkZvcm0uRm9ybUQpOw0KICAgICAgICB2YXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpOw0KICAgICAgICBmb3JlYWNoIChjaGFyIGMgaW4gbm9ybWFsaXplZCkNCiAgICAgICAgew0KICAgICAgICAgICAgVW5pY29kZUNhdGVnb3J5IHVjID0gQ2hhclVuaWNvZGVJbmZvLkdldFVuaWNvZGVDYXRlZ29yeShjKTsNCiAgICAgICAgICAgIGlmICh1YyAhPSBVbmljb2RlQ2F0ZWdvcnkuTm9uU3BhY2luZ01hcmspDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgc2IuQXBwZW5kKGMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgbm9ybWFsaXplZCA9IHNiLlRvU3RyaW5nKCk7DQogICAgICAgIHZhciByZXBsYWNlbWVudHMgPSBuZXcgRGljdGlvbmFyeTxjaGFyLCBjaGFyPigpOw0KICAgICAgICB2b2lkIEFkZFJlcGxhY2VtZW50KGNoYXIgb3JpZ2luYWwsIGNoYXIgcmVwbGFjZW1lbnQpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICghcmVwbGFjZW1lbnRzLkNvbnRhaW5zS2V5KG9yaWdpbmFsKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudHNbb3JpZ2luYWxdID0gcmVwbGFjZW1lbnQ7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrEnLCAnYScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrInLCAnYicpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrMnLCAnZycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrQnLCAnZCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrUnLCAnZScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrYnLCAneicpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrcnLCAnaCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrknLCAnaScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzronLCAnaycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrsnLCAnbCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzrwnLCAnbScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzr0nLCAndicpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzr4nLCAneCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnzr8nLCAnbycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnz4AnLCAncCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnz4EnLCAncicpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnz4MnLCAncycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnz4QnLCAndCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnz4UnLCAneScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnz4YnLCAnZicpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnz4cnLCAneCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnz4gnLCAneScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnz4knLCAnbycpOw0KICAgICAgICAvLw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0JAnLCAnQScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0JInLCAnQicpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0JUnLCAnRScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0JonLCAnSycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0JwnLCAnTScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0J0nLCAnSCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0J4nLCAnTycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0KAnLCAnUCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0KEnLCAnQycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0KInLCAnVCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0KMnLCAnWScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0KUnLCAnWCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0LAnLCAnYScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0LInLCAndicpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0LUnLCAnZScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0LonLCAnaycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0LwnLCAnbScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0L0nLCAnbicpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0L4nLCAnbycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0YAnLCAncicpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0YEnLCAncycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0YInLCAndCcpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0YMnLCAndScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0YUnLCAneCcpOw0KICAgICAgICAvLw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnQCcsICdhJyk7DQogICAgICAgIEFkZFJlcGxhY2VtZW50KCchJywgJ2knKTsNCiAgICAgICAgQWRkUmVwbGFjZW1lbnQoJyQnLCAncycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnMCcsICdvJyk7DQogICAgICAgIEFkZFJlcGxhY2VtZW50KCczJywgJ2UnKTsNCiAgICAgICAgQWRkUmVwbGFjZW1lbnQoJzEnLCAnaScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnfCcsICdsJyk7DQogICAgICAgIEFkZFJlcGxhY2VtZW50KCc1JywgJ3MnKTsNCiAgICAgICAgQWRkUmVwbGFjZW1lbnQoJzQnLCAnYScpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnwqknLCAnYycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgnwqInLCAnYycpOw0KICAgICAgICBBZGRSZXBsYWNlbWVudCgn0ZUnLCAncycpOw0KICAgICAgICBmb3JlYWNoICh2YXIga3ZwIGluIHJlcGxhY2VtZW50cykNCiAgICAgICAgew0KICAgICAgICAgICAgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZWQuUmVwbGFjZShrdnAuS2V5LCBrdnAuVmFsdWUpOw0KICAgICAgICB9DQoNCiAgICAgICAgbm9ybWFsaXplZCA9IFJlZ2V4LlJlcGxhY2Uobm9ybWFsaXplZCwgQCJccysiLCAiIik7DQogICAgICAgIG5vcm1hbGl6ZWQgPSBSZWdleC5SZXBsYWNlKG5vcm1hbGl6ZWQsIEAiW15cd10iLCAiIik7DQogICAgICAgIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkLlRvTG93ZXJJbnZhcmlhbnQoKTsNCiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWQ7DQogICAgfQ0KDQogICAgc3RhdGljIGludCBHZXRDYXBzQ291bnQoc3RyaW5nIGlucHV0KQ0KICAgIHsNCiAgICAgICAgaW5wdXQgPSBpbnB1dC5SZXBsYWNlKCIgIiwgIiIpLlRyaW0oKTsNCiAgICAgICAgaW50IG1heENhcHMgPSAwOw0KICAgICAgICBpbnQgY3VycmVudENhcHMgPSAwOw0KICAgICAgICBmb3JlYWNoIChjaGFyIGMgaW4gaW5wdXQpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChjaGFyLklzVXBwZXIoYykpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgY3VycmVudENhcHMrKzsNCiAgICAgICAgICAgICAgICBpZiAoY3VycmVudENhcHMgPiBtYXhDYXBzKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgbWF4Q2FwcyA9IGN1cnJlbnRDYXBzOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBjdXJyZW50Q2FwcyA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gbWF4Q2FwczsNCiAgICB9DQoNCiAgICBzdHJpbmcgTm9ybWFsaXplTWVzc2FnZVNob3J0KHN0cmluZyBpbnB1dCwgSGFzaFNldDxzdHJpbmc+IGJsYWNrbGlzdGVkV29yZHMpDQogICAgew0KICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkoaW5wdXQpKQ0KICAgICAgICAgICAgcmV0dXJuIGlucHV0Ow0KICAgICAgICBzdHJpbmcgbm9ybWFsaXplZCA9IGlucHV0Lk5vcm1hbGl6ZShOb3JtYWxpemF0aW9uRm9ybS5Gb3JtRCk7DQogICAgICAgIHZhciBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7DQogICAgICAgIGZvcmVhY2ggKGNoYXIgYyBpbiBub3JtYWxpemVkKQ0KICAgICAgICB7DQogICAgICAgICAgICBVbmljb2RlQ2F0ZWdvcnkgdWMgPSBDaGFyVW5pY29kZUluZm8uR2V0VW5pY29kZUNhdGVnb3J5KGMpOw0KICAgICAgICAgICAgaWYgKHVjICE9IFVuaWNvZGVDYXRlZ29yeS5Ob25TcGFjaW5nTWFyaykNCiAgICAgICAgICAgICAgICBzYi5BcHBlbmQoYyk7DQogICAgICAgIH0NCg0KICAgICAgICBub3JtYWxpemVkID0gc2IuVG9TdHJpbmcoKTsNCiAgICAgICAgc3RyaW5nIG5vcm1hbGl6ZWRGb3JTaG9ydFdvcmRzID0gUmVnZXguUmVwbGFjZShub3JtYWxpemVkLCBAIlteXHdcc10iLCAiIikuVG9Mb3dlckludmFyaWFudCgpOw0KICAgICAgICBzdHJpbmcgbm9ybWFsaXplZEZvckxvbmdXb3JkcyA9IFJlZ2V4LlJlcGxhY2Uobm9ybWFsaXplZCwgQCJccysiLCAiIikuVG9Mb3dlckludmFyaWFudCgpOw0KICAgICAgICBmb3JlYWNoICh2YXIgd29yZCBpbiBibGFja2xpc3RlZFdvcmRzKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAod29yZC5MZW5ndGggPCA0KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHN0cmluZyBwYXR0ZXJuID0gJEAiXGJ7UmVnZXguRXNjYXBlKHdvcmQuVG9Mb3dlcigpKX1cYiI7DQogICAgICAgICAgICAgICAgaWYgKFJlZ2V4LklzTWF0Y2gobm9ybWFsaXplZEZvclNob3J0V29yZHMsIHBhdHRlcm4pKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29yZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAobm9ybWFsaXplZEZvckxvbmdXb3Jkcy5Db250YWlucyh3b3JkLlRvTG93ZXIoKSkpDQogICAgICAgICAgICAgICAgICAgIHJldHVybiB3b3JkOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHN0cmluZy5FbXB0eTsNCiAgICB9DQoNCiAgICBwcml2YXRlIGJvb2wgU2hhcmVkQ2hhdENoZWNrKGJvb2wgZGVidWcpDQogICAgew0KICAgICAgICBpZiAoQ1BILlRyeUdldEFyZygiaXNJblNoYXJlZENoYXQiLCBvdXQgYm9vbCBpc0luU2hhcmVkQ2hhdCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoImlzRnJvbVNoYXJlZENoYXRHdWVzdCIsIG91dCBib29sIGlzRnJvbVNoYXJlZENoYXRHdWVzdCk7DQogICAgICAgICAgICBpZiAoaXNGcm9tU2hhcmVkQ2hhdEd1ZXN0ICYmIGlnbm9yZVNoYXJlZENoYXQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKGRlYnVnKQ0KICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJBY3Rpb24gaGFwcGVuZWQgaW4gc2hhcmVkIGd1ZXN0IGNoYXQgd2l0aCBpZ25vcmluZyBzaGFyZWQgY2hhdCBzZXQgdG8gVHJ1ZS4gQWJvcnRpbmcuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoaXNGcm9tU2hhcmVkQ2hhdEd1ZXN0ICYmICFpZ25vcmVTaGFyZWRDaGF0KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChkZWJ1ZykNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiQWN0aW9uIGhhcHBlbmVkIGluIHNoYXJlZCBndWVzdCBjaGF0IHdpdGggaWdub3Jpbmcgc2hhcmVkIGNoYXQgc2V0IHRvIEZhbHNlLiBDb250aW51ZWluZy4uLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgR2V0RXh0ZW5zaW9uSW5mbygpDQogICAgew0KICAgICAgICBpZiAoZXh0ZW5zaW9uTmFtZSA9PSBudWxsIHx8IGV4dGVuc2lvblZlcnNpb24gPT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgQ1BILkV4ZWN1dGVNZXRob2QoIk1PRCBUT09MUyBWZXJzaW9uIENoZWNrIiwgIkV4ZWN1dGUiKTsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoImV4dGVuc2lvbk5hbWUiLCBvdXQgZXh0ZW5zaW9uTmFtZSk7DQogICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJleHRlbnNpb25WZXJzaW9uIiwgb3V0IGV4dGVuc2lvblZlcnNpb24pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgUmVwbHlUb0NoYXQoc3RyaW5nIHRleHQpDQogICAgew0KICAgICAgICBpZiAodGV4dCAhPSAiLSIpDQogICAgICAgIHsNCiAgICAgICAgICAgIGludCBtYXhMZW5ndGggPSA0ODA7DQogICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJtc2dJZCIsIG91dCBzdHJpbmcgcmVwbHlJZCk7DQogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHRleHQuTGVuZ3RoOyBpICs9IG1heExlbmd0aCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBzdHJpbmcgbWVzc2FnZVBhcnQgPSB0ZXh0LlN1YnN0cmluZyhpLCBNYXRoLk1pbihtYXhMZW5ndGgsIHRleHQuTGVuZ3RoIC0gaSkpOw0KICAgICAgICAgICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkocmVwbHlJZCkgJiYgcG9zdE1lc3NhZ2VzQXNSZXBsaWVzKQ0KICAgICAgICAgICAgICAgICAgICBDUEguVHdpdGNoUmVwbHlUb01lc3NhZ2UobWVzc2FnZVBhcnQsIHJlcGx5SWQpOw0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgQ1BILlNlbmRNZXNzYWdlKG1lc3NhZ2VQYXJ0KTsNCiAgICAgICAgICAgICAgICBDUEguV2FpdCgxNTApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgUG9zdFRvTG9nKHN0cmluZyBsb2cpDQogICAgew0KICAgICAgICBDUEguTG9nSW5mbygkIlt7ZXh0ZW5zaW9uTmFtZX0gdi57ZXh0ZW5zaW9uVmVyc2lvbn1dIFtTUEFNIEZJTFRFUl0ge2xvZ30iKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBTZW5kVG9hc3Qoc3RyaW5nIHRleHQpDQogICAgew0KICAgICAgICBDUEguU2hvd1RvYXN0Tm90aWZpY2F0aW9uKGV4dGVuc2lvbk5hbWUsIHRleHQsICJIZWxwIGF0OiB0YXdtYWUueHl6L2Rpc2NvcmQiLCAiaHR0cHM6Ly9naXRodWIuY29tL3Rhd21hZS90YXdtYWUvYmxvYi9tYWluL2Fzc2V0cy9wYWdlLWRlc2lnbi90b2FzdC1sb2dvLnBuZz9yYXc9dHJ1ZSIpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIEdldEJyb2FkY2FzdGVyTmFtZSgpDQogICAgew0KICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkoYnJvYWRjYXN0ZXJOYW1lKSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGJjSW5mbyA9IENQSC5Ud2l0Y2hHZXRCcm9hZGNhc3RlcigpOw0KICAgICAgICAgICAgaWYgKGJjSW5mbyAhPSBudWxsKQ0KICAgICAgICAgICAgICAgIGJyb2FkY2FzdGVyTmFtZSA9IGJjSW5mby5Vc2VyTG9naW47DQogICAgICAgICAgICB2YXIgYm90SW5mbyA9IENQSC5Ud2l0Y2hHZXRCb3QoKTsNCiAgICAgICAgICAgIGlmIChib3RJbmZvICE9IG51bGwpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgYm90TmFtZSA9IGJvdEluZm8uVXNlckxvZ2luOw0KICAgICAgICAgICAgICAgIGJvdCA9IHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBleHRlbnNpb25OYW1lID0gbnVsbDsNCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBleHRlbnNpb25WZXJzaW9uID0gbnVsbDsNCiAgICBwcml2YXRlIFRhd21hZVVJLlRhd21hZSB1aTsNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIGJyb2FkY2FzdGVyTmFtZSA9IG51bGw7DQogICAgcHVibGljIHN0YXRpYyBzdHJpbmcgYm90TmFtZSA9IG51bGw7DQogICAgcHVibGljIHN0YXRpYyBib29sIGJvdCA9IGZhbHNlOw0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgcG9zdE1lc3NhZ2VzQXNSZXBsaWVzID0gZmFsc2U7DQogICAgcHVibGljIGJvb2wgaWdub3JlU2hhcmVkQ2hhdCA9IHRydWU7DQogICAgcHVibGljIGJvb2wgZmlsdGVyQmxhY2tsaXN0ZWRXb3JkcyA9IGZhbHNlOw0KICAgIHB1YmxpYyBib29sIGFsbG93TW9kcyA9IHRydWU7DQogICAgcHVibGljIGJvb2wgYWxsb3dWaXBzID0gZmFsc2U7DQogICAgcHVibGljIGJvb2wgYWxsb3dTdWJzID0gZmFsc2U7DQogICAgcHVibGljIGJvb2wgYXNjaWlQcm90ZWN0aW9uID0gZmFsc2U7DQogICAgcHVibGljIGJvb2wgY2Fwc1Byb3RlY3Rpb24gPSBmYWxzZTsNCiAgICBwdWJsaWMgYm9vbCBlbW90ZVByb3RlY3Rpb24gPSBmYWxzZTsNCiAgICBwdWJsaWMgYm9vbCByZXBsYWNlQmFkV29yZCA9IGZhbHNlOw0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGludCB0aW1lb3V0RHVyYXRpb24gPSAzMDsNCiAgICBwdWJsaWMgaW50IGNhcHNQcm90ZWN0aW9uQ291bnQgPSAxMDsNCiAgICBwdWJsaWMgaW50IGVtb3RlUHJvdGVjdGlvbkNvdW50ID0gMTA7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgc3RyaW5nIHJlcGxhY2VkQmFkV29yZCA9ICJbUkVEQUNURURdIjsNCiAgICBwdWJsaWMgc3RyaW5nIGNvbnNlcXVlbmNlID0gIkRlbGV0ZSBPbmx5IjsNCiAgICBwdWJsaWMgc3RyaW5nIHJlYXNvbkJsYWNrbGlzdGVkV29yZCA9ICJQb3N0ZWQgYSBibGFja2xpc3RlZCB3b3JkIHRvIGNoYXQuIEF1dG9tYXRpY2FsbHkgaGFuZGxlZCBieSBTdHJlYW1lci5ib3QiOw0KICAgIHB1YmxpYyBzdHJpbmcgcmVhc29uQ2FwcyA9ICJFeGNlc3NpdmUgY2FwcyB1c2FnZS4gQXV0b21hdGljYWxseSBoYW5kbGVkIGJ5IFN0cmVhbWVyLmJvdCI7DQogICAgcHVibGljIHN0cmluZyByZWFzb25FbW90ZXMgPSAiRXhjZXNzaXZlIGVtb3RlIHVzYWdlLiBBdXRvbWF0aWNhbGx5IGhhbmRsZWQgYnkgU3RyZWFtZXIuYm90IjsNCiAgICBwdWJsaWMgc3RyaW5nIHJlYXNvbkFzY2lpID0gIkFTQ0lJIHNwYW0gZGV0ZWN0ZWQuIEF1dG9tYXRpY2FsbHkgaGFuZGxlZCBieSBTdHJlYW1lci5ib3QiOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVBvc3RlZEJsYWNrbGlzdGVkV29yZCA9ICItIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VDYXBzID0gIkhleSBoZXksIEAldXNlciUsIGRpZCB5b3UgZm9yZ2V0IHRvIHR1cm4gb2ZmIHlvdXIgY2Fwc2xvY2sgYnV0dG9uPyDwn5qsIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VFbW90ZXMgPSAiQCV1c2VyJSwgd2h5IGRvbid0IHdlIHNsb3cgZG93biB3aXRoIHRoZSBlbW90ZSBzcGFtLi4uPyDwn5qsIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VBc2NpaSA9ICJAJXVzZXIlLCBBU0NJSSBzcGFtIGluICVjdXJyZW50WWVhciU/IFJlYWxseT8g8J+arCI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlUmVwbGFjZW1lbnRNZXNzYWdlID0gIkAldXNlciUgd3JvdGU6ICVyZWRhY3RlZE1lc3NhZ2UlIjsNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBIYXNoU2V0PHN0cmluZz4gYmxhY2tsaXN0ZWRXb3Jkc0xpc3QgPSBuZXcgSGFzaFNldDxzdHJpbmc+DQogICAgew0KICAgIH07DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwcml2YXRlIHZvaWQgRmV0Y2hTZXR0aW5ncygpDQogICAgew0KICAgICAgICB1aSA9IG5ldyBUYXdtYWUoQ1BILCBleHRlbnNpb25OYW1lLCBleHRlbnNpb25WZXJzaW9uLCBmYWxzZSk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHBvc3RNZXNzYWdlc0FzUmVwbGllcyA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX3Bvc3RNZXNzYWdlc0FzUmVwbGllcyIpID8/IHBvc3RNZXNzYWdlc0FzUmVwbGllczsNCiAgICAgICAgaWdub3JlU2hhcmVkQ2hhdCA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX2lnbm9yZVNoYXJlZENoYXQiKSA/PyBpZ25vcmVTaGFyZWRDaGF0Ow0KICAgICAgICBmaWx0ZXJCbGFja2xpc3RlZFdvcmRzID0gdWkuR2V0VmFsdWU8Ym9vbD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfZmlsdGVyQmxhY2tsaXN0ZWRXb3JkcyIpID8/IGZpbHRlckJsYWNrbGlzdGVkV29yZHM7DQogICAgICAgIGFsbG93TW9kcyA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX2JsYWNrbGlzdGVkV29yZHNBbGxvd01vZHMiKSA/PyBhbGxvd01vZHM7DQogICAgICAgIGFsbG93VmlwcyA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX2JsYWNrbGlzdGVkV29yZHNBbGxvd1ZpcHMiKSA/PyBhbGxvd1ZpcHM7DQogICAgICAgIGFsbG93U3VicyA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX2JsYWNrbGlzdGVkV29yZHNBbGxvd1N1YnMiKSA/PyBhbGxvd1N1YnM7DQogICAgICAgIGFzY2lpUHJvdGVjdGlvbiA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX2JsYWNrbGlzdGVkV29yZHNBc2NpaVByb3RlY3Rpb24iKSA/PyBhc2NpaVByb3RlY3Rpb247DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHRpbWVvdXREdXJhdGlvbiA9IHVpLkdldFZhbHVlPGludD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfYmxhY2tsaXN0ZWRXb3Jkc1RpbWVvdXREdXJhdGlvbiIpID8/IHRpbWVvdXREdXJhdGlvbjsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgY29uc2VxdWVuY2UgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX2JsYWNrbGlzdGVkV29yZHNDb25zZXF1ZW5jZSIpID8/IGNvbnNlcXVlbmNlOw0KICAgICAgICByZWFzb25CbGFja2xpc3RlZFdvcmQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX3JlYXNvbkJsYWNrbGlzdGVkV29yZCIpID8/IHJlYXNvbkJsYWNrbGlzdGVkV29yZDsNCiAgICAgICAgcmVhc29uQ2FwcyA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfcmVhc29uQ2FwcyIpID8/IHJlYXNvbkNhcHM7DQogICAgICAgIHJlYXNvbkVtb3RlcyA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfcmVhc29uRW1vdGVzIikgPz8gcmVhc29uRW1vdGVzOw0KICAgICAgICByZWFzb25Bc2NpaSA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfcmVhc29uQXNjaWkiKSA/PyByZWFzb25Bc2NpaTsNCiAgICAgICAgbWVzc2FnZVBvc3RlZEJsYWNrbGlzdGVkV29yZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVBvc3RlZEJsYWNrbGlzdGVkV29yZCIpID8/IG1lc3NhZ2VQb3N0ZWRCbGFja2xpc3RlZFdvcmQ7DQogICAgICAgIG1lc3NhZ2VDYXBzID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlQ2FwcyIpID8/IG1lc3NhZ2VDYXBzOw0KICAgICAgICBtZXNzYWdlRW1vdGVzID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlRW1vdGVzIikgPz8gbWVzc2FnZUVtb3RlczsNCiAgICAgICAgbWVzc2FnZUFzY2lpID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlQXNjaWkiKSA/PyBtZXNzYWdlQXNjaWk7DQogICAgICAgIG1lc3NhZ2VSZXBsYWNlbWVudE1lc3NhZ2UgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXBsYWNlbWVudE1lc3NhZ2UiKSA/PyBtZXNzYWdlUmVwbGFjZW1lbnRNZXNzYWdlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBzdHJpbmcgczEgPSB1aS5HZXRWYWx1ZTxzdHJpbmc+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfYmxhY2tsaXN0ZWRXb3Jkc1JlcGxhY2VCYWRXb3JkIik7DQogICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkoczEpKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgajEgPSBKT2JqZWN0LlBhcnNlKHMxKTsNCiAgICAgICAgICAgIHJlcGxhY2VCYWRXb3JkID0gajFbImVuYWJsZWQiXT8uVmFsdWU8Ym9vbD4oKSA/PyByZXBsYWNlQmFkV29yZDsNCiAgICAgICAgICAgIHJlcGxhY2VkQmFkV29yZCA9IGoxWyJ0ZXh0Il0/LlZhbHVlPHN0cmluZz4oKSA/PyByZXBsYWNlZEJhZFdvcmQ7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBzdHJpbmcgczIgPSB1aS5HZXRWYWx1ZTxzdHJpbmc+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfYmxhY2tsaXN0ZWRXb3Jkc0NhcHNQcm90ZWN0aW9uIik7DQogICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkoczIpKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgajIgPSBKT2JqZWN0LlBhcnNlKHMyKTsNCiAgICAgICAgICAgIGNhcHNQcm90ZWN0aW9uID0gajJbImVuYWJsZWQiXT8uVmFsdWU8Ym9vbD4oKSA/PyBjYXBzUHJvdGVjdGlvbjsNCiAgICAgICAgICAgIGNhcHNQcm90ZWN0aW9uQ291bnQgPSAoaW50KU1hdGguUm91bmQoajJbInZhbHVlIl0/LlZhbHVlPGRvdWJsZT4oKSA/PyBjYXBzUHJvdGVjdGlvbkNvdW50KTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyBzMyA9IHVpLkdldFZhbHVlPHN0cmluZz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19ibGFja2xpc3RlZFdvcmRzRW1vdGVQcm90ZWN0aW9uIik7DQogICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkoczMpKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgajMgPSBKT2JqZWN0LlBhcnNlKHMzKTsNCiAgICAgICAgICAgIGVtb3RlUHJvdGVjdGlvbiA9IGozWyJlbmFibGVkIl0/LlZhbHVlPGJvb2w+KCkgPz8gZW1vdGVQcm90ZWN0aW9uOw0KICAgICAgICAgICAgZW1vdGVQcm90ZWN0aW9uQ291bnQgPSAoaW50KU1hdGguUm91bmQoajNbInZhbHVlIl0/LlZhbHVlPGRvdWJsZT4oKSA/PyBlbW90ZVByb3RlY3Rpb25Db3VudCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBzdHJpbmcgczQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfYmxhY2tsaXN0ZWRXb3Jkc0xpc3QiKTsNCiAgICAgICAgaWYgKCFzdHJpbmcuSXNOdWxsT3JFbXB0eShzNCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBsaXN0ID0gSnNvbkNvbnZlcnQuRGVzZXJpYWxpemVPYmplY3Q8TGlzdDxzdHJpbmc+PihzNCk7DQogICAgICAgICAgICBibGFja2xpc3RlZFdvcmRzTGlzdCA9IG5ldyBIYXNoU2V0PHN0cmluZz4obGlzdCwgU3RyaW5nQ29tcGFyZXIuT3JkaW5hbElnbm9yZUNhc2UpOw0KICAgICAgICB9DQogICAgfQ0KfQ==",
                                "precompile": false,
                                "delayStart": false,
                                "saveResultToVariable": false,
                                "saveToVariable": "",
                                "id": "06d0ee97-8049-427d-a992-2f7bf80ce4fe",
                                "weight": 0.0,
                                "type": 99999,
                                "parentId": "f6040727-86a3-42a1-ac2d-637922dae23e",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "f6040727-86a3-42a1-ac2d-637922dae23e",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    }
                ],
                "collapsedGroups": [
                    "f6040727-86a3-42a1-ac2d-637922dae23e"
                ]
            },
            {
                "id": "05d22b1d-9b87-4b94-bae3-9c95240534f1",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 1 - Enable Follow Attack Protection",
                "group": "MOD TOOLS - Bot & Hate Raid Protection",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "d941d1fa-9880-4fff-9683-6090185af581",
                        "id": "58d64472-2004-4e7d-b0a4-a81801ec4deb",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!enableFollowAttackProtection",
                        "color": "#80FFFF",
                        "id": "3f37660f-36d6-486d-82a9-2a05760e05dd",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "44a4161a-d194-4b80-b77c-3408b0ccdafc",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "8dcbe31f-84b2-42e8-8ab6-928e65d55c63",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "variableName": "enabledManually",
                                "value": true,
                                "autoType": true,
                                "id": "e61cd7ba-6f4f-4f8d-b3ad-f7751a16afd0",
                                "weight": 0.0,
                                "type": 123,
                                "parentId": "8dcbe31f-84b2-42e8-8ab6-928e65d55c63",
                                "enabled": true,
                                "index": 1
                            },
                            {
                                "executeCodeId": "a5e4a3be-3dd2-41e1-8704-29b70f89fbe9",
                                "method": "EnableOnAttack",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "f997d202-63fc-49fd-a748-97903ed43aa6",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "8dcbe31f-84b2-42e8-8ab6-928e65d55c63",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "8dcbe31f-84b2-42e8-8ab6-928e65d55c63",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "8dcbe31f-84b2-42e8-8ab6-928e65d55c63"
                ]
            },
            {
                "id": "3bb89d02-61db-4c87-8fc6-41c202360686",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 2 - Disable Follow Attack Protection",
                "group": "MOD TOOLS - Bot & Hate Raid Protection",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "7221ec58-a109-4183-b25e-0ad257ed9765",
                        "id": "9d915c48-d791-4269-8006-764458b32fcc",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!disableFollowAttackProtection",
                        "color": "#80FFFF",
                        "id": "3d866a59-5fb7-4918-975b-91b0f0fb1ea5",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "24a02530-6b3b-4313-8ce1-945e154f36c4",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "c0d00608-c6ef-4733-888e-3b365cabf353",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "a5e4a3be-3dd2-41e1-8704-29b70f89fbe9",
                                "method": "DisableOnAttack",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "1e765061-8c6a-4887-b826-c1bd8517deba",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "c0d00608-c6ef-4733-888e-3b365cabf353",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "c0d00608-c6ef-4733-888e-3b365cabf353",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "c0d00608-c6ef-4733-888e-3b365cabf353"
                ]
            },
            {
                "id": "9c92d173-8426-4264-b0f7-77c44ab9e684",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 2 - Add URL To Whitelist",
                "group": "MOD TOOLS - URL Filter",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "ae7f9b19-7231-45e4-ab1d-4122f9a94a3e",
                        "id": "a93ecc42-3d05-4244-ab61-19443d4a306e",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!addURL [URL]",
                        "color": "#80FFFF",
                        "id": "75995311-75a7-4762-af8f-2b79d60aa347",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "8a07f910-c860-40a7-a233-1e206f47378c",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "55800f6c-4485-4316-a94f-6f37f105f07f",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "AddURLToWhitelist",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "256bfd80-ebf7-4287-bc88-cc3304ba5db9",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "55800f6c-4485-4316-a94f-6f37f105f07f",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "55800f6c-4485-4316-a94f-6f37f105f07f",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "55800f6c-4485-4316-a94f-6f37f105f07f"
                ]
            },
            {
                "id": "f469ae8f-4a21-4f81-bfa7-705503a89d24",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": true,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] [#] 2 - Actions",
                "group": "MOD TOOLS - # Settings",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "min": -1,
                        "max": -1,
                        "id": "66f61eb6-f98c-49f5-855e-8ad3ac0e1b58",
                        "type": 107,
                        "enabled": true,
                        "exclusions": []
                    },
                    {
                        "id": "c044956e-42c8-45cc-a096-23d925ea4791",
                        "type": 158,
                        "enabled": true,
                        "exclusions": []
                    },
                    {
                        "id": "e7f06de3-f160-4a86-a047-04b412b03493",
                        "type": 154,
                        "enabled": true,
                        "exclusions": []
                    },
                    {
                        "id": "aa32b23d-20ec-4387-b837-45d0f3c45e24",
                        "type": 155,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "5404a63e-4b7c-4bad-9840-b78ce4b1491b",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "59b411bf-68f8-4432-aefc-c5c947b6c081",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "name": "[MOD TOOLS] Actions",
                                "description": null,
                                "references": [
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\mscorlib.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Web.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Net.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Net.Http.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Core.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Runtime.WindowsRuntime.dll",
                                    ".\\dlls\\TawmaeUI.dll"
                                ],
                                "byteCode": "dXNpbmcgU3lzdGVtOw0KdXNpbmcgU3lzdGVtLkxpbnE7DQp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsNCnVzaW5nIFN5c3RlbS5SZWZsZWN0aW9uOw0KdXNpbmcgTmV3dG9uc29mdC5Kc29uOw0KdXNpbmcgTmV3dG9uc29mdC5Kc29uLkxpbnE7DQp1c2luZyBTeXN0ZW0uVGV4dDsNCnVzaW5nIFN5c3RlbS5XZWI7DQp1c2luZyBTeXN0ZW0uTmV0Ow0KdXNpbmcgU3lzdGVtLk5ldC5IdHRwOw0KdXNpbmcgU3lzdGVtLk5ldC5IdHRwLkhlYWRlcnM7DQp1c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzOw0KdXNpbmcgU3lzdGVtLlJ1bnRpbWUuQ29tcGlsZXJTZXJ2aWNlczsNCnVzaW5nIFN5c3RlbS5UZXh0LlJlZ3VsYXJFeHByZXNzaW9uczsNCnVzaW5nIFN5c3RlbS5HbG9iYWxpemF0aW9uOw0KdXNpbmcgVGF3bWFlVUk7DQoNCnB1YmxpYyBjbGFzcyBDUEhJbmxpbmUNCnsNCiAgICBwdWJsaWMgYm9vbCBFeGVjdXRlKCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgSW5pdExvZygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEdldEJyb2FkY2FzdGVyQW5kQm90KCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoIl9mcm9tIiwgb3V0IHN0cmluZyBfZnJvbSk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkoX2Zyb20pKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoX2Zyb20gPT0gIkZvbGxvd2VyTGlzdE92ZXJsYXkiKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygiQ2FsbGVkIGZyb20gRm9sbG93ZXIgUmVtb3ZhbCBPdmVybGF5IFN0YXJ0VXAuLi4iKTsNCiAgICAgICAgICAgICAgICB2YXIgZm9sbG93ZXJzID0gR2V0Rm9sbG93ZXJMaXN0KCkuR2V0QXdhaXRlcigpLkdldFJlc3VsdCgpOw0KICAgICAgICAgICAgICAgIHZhciBmb2xsb3dlcnNMaXN0ID0gZm9sbG93ZXJzLlNlbGVjdChmID0+IG5ldyB7IHVzZXJfbmFtZSA9IGYuVXNlck5hbWUsIHVzZXJfbG9naW4gPSBmLlVzZXJMb2dpbiwgdXNlcl9pZCA9IGYuVXNlcklkLCBmb2xsb3dlZF9hdF9sb2NhbCA9IGYuRm9sbG93ZWRBdExvY2FsLlRvU3RyaW5nKCJ5eXl5LU1NLWRkIEhIOm1tOnNzIikgfSkuVG9MaXN0KCk7DQogICAgICAgICAgICAgICAgc3RyaW5nIGZvbGxvd2Vyc0xpc3RKc29uID0gSnNvbkNvbnZlcnQuU2VyaWFsaXplT2JqZWN0KGZvbGxvd2Vyc0xpc3QpOw0KICAgICAgICAgICAgICAgIENQSC5TZXRHbG9iYWxWYXIoInRhd21hZV9NT0RfVE9PTFNfRm9sbG93ZXJMaXN0T3ZlcmxheSIsIGZvbGxvd2Vyc0xpc3RKc29uLCBmYWxzZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgZWxzZSBpZiAoX2Zyb20gPT0gIkJsb2NrVXNlciIpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCJDYWxsZWQgZnJvbSBGb2xsb3dlciBSZW1vdmFsIE92ZXJsYXkgU2luZ2xlIFVzZXIgQmxvY2suLiIpOw0KICAgICAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJfbmFtZSIsIG91dCBzdHJpbmcgX3VzZXIpOw0KICAgICAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJfbG9naW4iLCBvdXQgc3RyaW5nIF91c2VyTmFtZSk7DQogICAgICAgICAgICAgICAgQ1BILlRyeUdldEFyZygidXNlcl9pZCIsIG91dCBzdHJpbmcgX3VzZXJJZCk7DQogICAgICAgICAgICAgICAgaWYgKENQSC5Ud2l0Y2hCbG9ja1VzZXJCeUlkKF91c2VySWQpKQ0KICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJCbG9ja2VkIHVzZXIgJ3tfdXNlcn0nICgne191c2VyTmFtZX0nKSB2aWEgb3ZlcmxheSBzaW5nbGUgYmxvY2siKTsNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkZhaWxlZCAgdG8gYmxvY2sgdXNlciAne191c2VyfScgKCd7X3VzZXJOYW1lfScpIHZpYSBvdmVybGF5IHNpbmdsZSBibG9jayIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIGVsc2UgaWYgKF9mcm9tID09ICJSZW1vdmVGb2xsb3dlclJhbmdlIikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coIkNhbGxlZCBmcm9tIEZvbGxvd2VyIFJlbW92YWwgT3ZlcmxheSBSYW5nZSBVc2VyIEJsb2NrLi4uIik7DQogICAgICAgICAgICAgICAgQ1BILlRyeUdldEFyZygidXNlcnMiLCBvdXQgc3RyaW5nIF91c2Vycyk7DQogICAgICAgICAgICAgICAgdmFyIGFyciA9IEpBcnJheS5QYXJzZShfdXNlcnMpOw0KICAgICAgICAgICAgICAgIGZvcmVhY2ggKEpPYmplY3QgdSBpbiBhcnIpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHVbInVzZXJfbmFtZSJdLlZhbHVlPHN0cmluZz4oKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGxvZ2luID0gdVsidXNlcl9sb2dpbiJdLlZhbHVlPHN0cmluZz4oKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gdVsidXNlcl9pZCJdLlZhbHVlPHN0cmluZz4oKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKENQSC5Ud2l0Y2hCbG9ja1VzZXJCeUlkKGlkKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkJsb2NrZWQgdXNlciAne25hbWV9JyAoJ3tsb2dpbn0nKSB2aWEgb3ZlcmxheSByYW5nZSBibG9jayIpOw0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQgdG8gYmxvY2sgdXNlciAne25hbWV9JyAoJ3tsb2dpbn0nKSB2aWEgb3ZlcmxheSByYW5nZSBibG9jayIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKF9mcm9tID09ICJHZXRDaGF0TG9nRGF0YSIpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgQ1BILlRyeUdldEFyZygic2JDbGllbnRSZXNwb25zZSIsIG91dCBzdHJpbmcgc2JDbGllbnRSZXNwb25zZSk7DQogICAgICAgICAgICAgICAgQ1BILlRyeUdldEFyZygidXNlck5hbWUiLCBvdXQgc3RyaW5nIHVzZXJOYW1lKTsNCiAgICAgICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VySWQiLCBvdXQgc3RyaW5nIHVzZXJJZCk7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiRmV0Y2hpbmcgYWRkaXRpb25hbCBVc2VyIENoYXQgTG9nIGRhdGEgZm9yICd7dXNlck5hbWV9JyAoe3VzZXJJZH0pOiB7c2JDbGllbnRSZXNwb25zZX0iKTsNCiAgICAgICAgICAgICAgICB2YXIgaW5mbyA9IENQSC5Ud2l0Y2hHZXRFeHRlbmRlZFVzZXJJbmZvQnlJZCh1c2VySWQpOw0KICAgICAgICAgICAgICAgIGJvb2wgaXNGb2xsb3dpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBEYXRlVGltZT8gZm9sbG93ZWRBdCA9IG51bGw7DQogICAgICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IEdldEZvbGxvd0luZm8odXNlcklkKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHQgIT0gbnVsbCkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0LlJlc3VsdDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlzRm9sbG93aW5nID0gci5pc0ZvbGxvd2luZzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbGxvd2VkQXQgPSByLmZvbGxvd2VkQXQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2gNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKCFpc0ZvbGxvd2luZyB8fCAhZm9sbG93ZWRBdC5IYXNWYWx1ZSB8fCBmb2xsb3dlZEF0LlZhbHVlID09IERhdGVUaW1lLk1pblZhbHVlKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaXNGb2xsb3dpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgZm9sbG93ZWRBdCA9IG51bGw7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaW50IGZvbGxvd0RheXMgPSBpc0ZvbGxvd2luZyAmJiBmb2xsb3dlZEF0Lkhhc1ZhbHVlID8gKGludClNYXRoLk1heCgwLCAoRGF0ZVRpbWUuVXRjTm93IC0gZm9sbG93ZWRBdC5WYWx1ZS5Ub1VuaXZlcnNhbFRpbWUoKSkuVG90YWxEYXlzKSA6IDA7DQogICAgICAgICAgICAgICAgYm9vbCBpc1N1YnNjcmliZWQgPSBpbmZvPy5Jc1N1YnNjcmliZWQgPz8gZmFsc2U7DQogICAgICAgICAgICAgICAgc3RyaW5nIHN1YnNjcmlwdGlvblRpZXIgPSBpbmZvPy5TdWJzY3JpcHRpb25UaWVyID8/ICIiOw0KICAgICAgICAgICAgICAgIERhdGVUaW1lPyBsYXN0QWN0aXZlVXRjID0gaW5mbz8uTGFzdEFjdGl2ZTsNCiAgICAgICAgICAgICAgICBEYXRlVGltZT8gY3JlYXRlZEF0VXRjID0gaW5mbz8uQ3JlYXRlZEF0Ow0KICAgICAgICAgICAgICAgIGRvdWJsZSBhY2NvdW50QWdlU2Vjb25kcyA9IGluZm8/LkFjY291bnRBZ2UgPz8gMC4wOw0KICAgICAgICAgICAgICAgIHZhciBhY2NvdW50QWdlU3BhbiA9IFRpbWVTcGFuLkZyb21TZWNvbmRzKGFjY291bnRBZ2VTZWNvbmRzKTsNCiAgICAgICAgICAgICAgICBpbnQgYWNjb3VudEFnZURheXMgPSAoaW50KU1hdGguTWF4KDAsIGFjY291bnRBZ2VTcGFuLlRvdGFsRGF5cyk7DQogICAgICAgICAgICAgICAgdmFyKGlzQmFubmVkLCBpc1RpbWVkT3V0LCBiYW5DcmVhdGVkQXQsIHRpbWVvdXRFeHBpcmVzQXQsIHJlYXNvbikgPSBHZXRUd2l0Y2hVc2VyQmFuSW5mbyh1c2VySWQpLkdldEF3YWl0ZXIoKS5HZXRSZXN1bHQoKTsNCiAgICAgICAgICAgICAgICBDUEguU2V0QXJndW1lbnQoInVzZXJDaGF0TG9nX3VzZXJOYW1lIiwgdXNlck5hbWUgPz8gIiIpOw0KICAgICAgICAgICAgICAgIENQSC5TZXRBcmd1bWVudCgidXNlckNoYXRMb2dfdXNlcklkIiwgdXNlcklkID8/ICIiKTsNCiAgICAgICAgICAgICAgICBDUEguU2V0QXJndW1lbnQoInVzZXJDaGF0TG9nX2lzRm9sbG93aW5nIiwgaXNGb2xsb3dpbmcpOw0KICAgICAgICAgICAgICAgIENQSC5TZXRBcmd1bWVudCgidXNlckNoYXRMb2dfZm9sbG93ZWRBdFV0YyIsIGZvbGxvd2VkQXQuSGFzVmFsdWUgPyBmb2xsb3dlZEF0LlZhbHVlLlRvVW5pdmVyc2FsVGltZSgpLlRvU3RyaW5nKCJvIikgOiAiIik7DQogICAgICAgICAgICAgICAgQ1BILlNldEFyZ3VtZW50KCJ1c2VyQ2hhdExvZ19mb2xsb3dEYXlzIiwgZm9sbG93RGF5cyk7DQogICAgICAgICAgICAgICAgQ1BILlNldEFyZ3VtZW50KCJ1c2VyQ2hhdExvZ19pc1N1YnNjcmliZWQiLCBpc1N1YnNjcmliZWQpOw0KICAgICAgICAgICAgICAgIENQSC5TZXRBcmd1bWVudCgidXNlckNoYXRMb2dfc3Vic2NyaXB0aW9uVGllciIsIHN1YnNjcmlwdGlvblRpZXIgPz8gIiIpOw0KICAgICAgICAgICAgICAgIENQSC5TZXRBcmd1bWVudCgidXNlckNoYXRMb2dfbGFzdEFjdGl2ZVV0YyIsIGxhc3RBY3RpdmVVdGMuSGFzVmFsdWUgPyBsYXN0QWN0aXZlVXRjLlZhbHVlLlRvVW5pdmVyc2FsVGltZSgpLlRvU3RyaW5nKCJvIikgOiAiIik7DQogICAgICAgICAgICAgICAgQ1BILlNldEFyZ3VtZW50KCJ1c2VyQ2hhdExvZ19jcmVhdGVkQXRVdGMiLCBjcmVhdGVkQXRVdGMuSGFzVmFsdWUgPyBjcmVhdGVkQXRVdGMuVmFsdWUuVG9Vbml2ZXJzYWxUaW1lKCkuVG9TdHJpbmcoIm8iKSA6ICIiKTsNCiAgICAgICAgICAgICAgICBDUEguU2V0QXJndW1lbnQoInVzZXJDaGF0TG9nX2FjY291bnRBZ2VTZWNvbmRzIiwgYWNjb3VudEFnZVNlY29uZHMpOw0KICAgICAgICAgICAgICAgIENQSC5TZXRBcmd1bWVudCgidXNlckNoYXRMb2dfYWNjb3VudEFnZURheXMiLCBhY2NvdW50QWdlRGF5cyk7DQogICAgICAgICAgICAgICAgQ1BILlNldEFyZ3VtZW50KCJ1c2VyQ2hhdExvZ19pc0Jhbm5lZCIsIGlzQmFubmVkKTsNCiAgICAgICAgICAgICAgICBDUEguU2V0QXJndW1lbnQoInVzZXJDaGF0TG9nX2lzVGltZWRPdXQiLCBpc1RpbWVkT3V0KTsNCiAgICAgICAgICAgICAgICBDUEguU2V0QXJndW1lbnQoInVzZXJDaGF0TG9nX2JhbkNyZWF0ZWRBdCIsIGJhbkNyZWF0ZWRBdCk7DQogICAgICAgICAgICAgICAgQ1BILlNldEFyZ3VtZW50KCJ1c2VyQ2hhdExvZ190aW1lb3V0RXhwaXJlc0F0IiwgdGltZW91dEV4cGlyZXNBdCk7DQogICAgICAgICAgICAgICAgQ1BILlNldEFyZ3VtZW50KCJ1c2VyQ2hhdExvZ19yZWFzb24iLCByZWFzb24pOw0KICAgICAgICAgICAgICAgIENQSC5UcmlnZ2VyRXZlbnQoc2JDbGllbnRSZXNwb25zZSwgdHJ1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChfZnJvbSA9PSAiQ2hhdExvZ1RpbWVvdXQiKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJOYW1lIiwgb3V0IHN0cmluZyB1c2VyTmFtZSk7DQogICAgICAgICAgICAgICAgQ1BILlRyeUdldEFyZygidXNlcklkIiwgb3V0IHN0cmluZyB1c2VySWQpOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkNoYXQgTG9nIEJ1dHRvbiBwcmVzc2VkLiBUaW1pbmcgb3V0OiAne3VzZXJOYW1lfScgKHt1c2VySWR9KSIpOw0KICAgICAgICAgICAgICAgIENQSC5Ud2l0Y2hUaW1lb3V0VXNlcih1c2VyTmFtZSwgNjAwLCAiTU9EIFRPT0xTIC0gQ2hhdCBMb2cgVGltZW91dCIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAoX2Zyb20gPT0gIkNoYXRMb2dCYW4iKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJOYW1lIiwgb3V0IHN0cmluZyB1c2VyTmFtZSk7DQogICAgICAgICAgICAgICAgQ1BILlRyeUdldEFyZygidXNlcklkIiwgb3V0IHN0cmluZyB1c2VySWQpOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkNoYXQgTG9nIEJ1dHRvbiBwcmVzc2VkLiBCYW5uaW5nOiAne3VzZXJOYW1lfScgKHt1c2VySWR9KSIpOw0KICAgICAgICAgICAgICAgIENQSC5Ud2l0Y2hCYW5Vc2VyKHVzZXJOYW1lLCAiTU9EIFRPT0xTIC0gQ2hhdCBMb2cgQmFuIik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCJDYWxsZWQgZnJvbSBzb21ldGhpbmcgZWxzZS4uLiBzbWguIEFib3J0aW5nIik7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgRXZlbnRUeXBlIGV2ZW50VHlwZVVXVSA9IENQSC5HZXRFdmVudFR5cGUoKTsNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBpZiAoZXZlbnRUeXBlVVdVID09IEV2ZW50VHlwZS5Ud2l0Y2hSYWlkKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHJhaWRVc2VyKTsNCiAgICAgICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyTmFtZSIsIG91dCBzdHJpbmcgcmFpZFVzZXJOYW1lKTsNCiAgICAgICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJ2aWV3ZXJzIiwgb3V0IGludCByYWlkVmlld2Vycyk7DQogICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJJbmNvbWluZyByYWlkIGJ5IHtyYWlkVXNlcn0gd2l0aCB7cmFpZFZpZXdlcnN9IHZpZXdlcnMiKTsNCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgIGlmIChzb0F1dG9TaG91dG91dE9uUmFpZCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmIChzb01pblZpZXdlcnMgPiByYWlkVmlld2VycykNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiU2tpcHBpbmcgYXV0b3Nob3V0b3V0IHRvIHtyYWlkVXNlcn0sIG5vdCBlbm91Z2ggdmlld2Vyczoge3JhaWRWaWV3ZXJzfSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgICAgICAgICAgaWYgKHNvT25seUZvbGxvd2VkKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBMaXN0PHN0cmluZz4gZm9sbG93ZWRMaXN0ID0gR2V0QnJvYWRjYXN0ZXJGb2xsb3dzKCkuR2V0QXdhaXRlcigpLkdldFJlc3VsdCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmb2xsb3dlZExpc3QuQ29udGFpbnMocmFpZFVzZXJOYW1lKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJTa2lwcGluZyBhdXRvc2hvdXRvdXQgdG8ge3JhaWRVc2VyfSwgYmVjYXVzZSB7YnJvYWRjYXN0ZXJVc2VyfSBkb2Vzbid0IGZvbGxvdyB0aGVtLiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgICAgICBpZiAoc29BdXRvU25vb3plQWRzKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgICAgICB2YXIgZXhJbmZvID0gQ1BILlR3aXRjaEdldEV4dGVuZGVkVXNlckluZm9CeUlkKGJyb2FkY2FzdGVyVXNlcklkKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGV4SW5mby5Jc0FmZmlsaWF0ZSB8fCBleEluZm8uSXNQYXJ0bmVyKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIoc25vb3plU3VjY2VzcywgbmV4dEFkTWludXRlcywgc25vb3plQ291bnQsIG1pbnV0ZXNVbnRpbFJlZnJlc2gpID0gU25vb3plTmV4dEFkKCkuR2V0QXdhaXRlcigpLkdldFJlc3VsdCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNub296ZVN1Y2Nlc3MpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCJTbm9vemVkIGFkcy4iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQgdG8gc25vb3plIGFkcy4gU25vb3plIENvdW50OiB7c25vb3plQ291bnR9Iik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiU2tpcHBpbmcgc25vb3ppbmcgYWRzLCBiZWNhdXNlIHticm9hZGNhc3RlclVzZXJ9IGlzIG5vdCBwYXJ0bmVyZWQgb3IgYWZmaWxpYXRlZC4iKTsNCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgICAgICB2YXIgdXNlckluZm8gPSBDUEguVHdpdGNoR2V0RXh0ZW5kZWRVc2VySW5mb0J5TG9naW4ocmFpZFVzZXJOYW1lKTsNCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VJbmNvbWluZ1JhaWQuUmVwbGFjZSgiJXRhcmdldFVzZXIlIiwgdXNlckluZm8uVXNlck5hbWUpLlJlcGxhY2UoIiV0YXJnZXRVc2VyTmFtZSUiLCB1c2VySW5mby5Vc2VyTG9naW4pLlJlcGxhY2UoIiVnYW1lJSIsIHVzZXJJbmZvLkdhbWUpLlJlcGxhY2UoIiV0aXRsZSUiLCB1c2VySW5mby5DaGFubmVsVGl0bGUpLlJlcGxhY2UoIiV0YWdzJSIsIHN0cmluZy5Kb2luKCIsICIsIHVzZXJJbmZvLlRhZ3MpKS5SZXBsYWNlKCIldmlld2VycyUiLCByYWlkVmlld2Vycy5Ub1N0cmluZygpKSk7DQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnRUeXBlVVdVID09IEV2ZW50VHlwZS5Ud2l0Y2hSYWlkU3RhcnQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgQ1BILlRyeUdldEFyZygicmFpZFVzZXIiLCBvdXQgc3RyaW5nIG91dF9yYWlkVXNlcik7DQogICAgICAgICAgICAgICAgQ1BILlRyeUdldEFyZygicmFpZFVzZXJOYW1lIiwgb3V0IHN0cmluZyBvdXRfcmFpZFVzZXJOYW1lKTsNCiAgICAgICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJ2aWV3ZXJzIiwgb3V0IGludCBvdXRfcmFpZFZpZXdlcnMpOw0KICAgICAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICAgICAgdmFyIG91dF91c2VySW5mbyA9IENQSC5Ud2l0Y2hHZXRFeHRlbmRlZFVzZXJJbmZvQnlMb2dpbihvdXRfcmFpZFVzZXJOYW1lKTsNCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VPdXRnb2luZ1JhaWQuUmVwbGFjZSgiJXRhcmdldFVzZXIlIiwgb3V0X3VzZXJJbmZvLlVzZXJOYW1lKS5SZXBsYWNlKCIldGFyZ2V0VXNlck5hbWUlIiwgb3V0X3VzZXJJbmZvLlVzZXJMb2dpbikuUmVwbGFjZSgiJWdhbWUlIiwgb3V0X3VzZXJJbmZvLkdhbWUpLlJlcGxhY2UoIiV0aXRsZSUiLCBvdXRfdXNlckluZm8uQ2hhbm5lbFRpdGxlKS5SZXBsYWNlKCIldGFncyUiLCBzdHJpbmcuSm9pbigiLCAiLCBvdXRfdXNlckluZm8uVGFncykpLlJlcGxhY2UoIiV2aWV3ZXJzJSIsIG91dF9yYWlkVmlld2Vycy5Ub1N0cmluZygpKSk7DQogICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgICAgICBDUEguV2FpdCgxMDAwKTsNCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgIGludCBfaSA9IDA7DQogICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgICAgICBpZiAoc29Qb3N0U3ViUmFpZE1lc3NhZ2UpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpZiAoc29Qb3N0U3ViUmFpZE1lc3NhZ2VBc0Jyb2FkY2FzdGVyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgUmVwbHlUb0NoYXRBc0Jyb2FkY2FzdGVyKG1lc3NhZ2VTb091dGdvaW5nUmFpZE1lc3NhZ2VTdWJzLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWVBbGxDYXBzJSIsIGJyb2FkY2FzdGVyVXNlci5Ub1VwcGVyKCkuUmVwbGFjZSgiJWJyb2FkY2FzdGVyTmFtZSUiLCBicm9hZGNhc3RlclVzZXIpKSk7DQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VTb091dGdvaW5nUmFpZE1lc3NhZ2VTdWJzLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWVBbGxDYXBzJSIsIGJyb2FkY2FzdGVyVXNlci5Ub1VwcGVyKCkuUmVwbGFjZSgiJWJyb2FkY2FzdGVyTmFtZSUiLCBicm9hZGNhc3RlclVzZXIpKSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgIGlmIChzb1Bvc3ROb25TdWJSYWlkTWVzc2FnZSkNCiAgICAgICAgICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVNvT3V0Z29pbmdSYWlkTWVzc2FnZU5vblN1YnMuUmVwbGFjZSgiJWJyb2FkY2FzdGVyTmFtZUFsbENhcHMlIiwgYnJvYWRjYXN0ZXJVc2VyLlRvVXBwZXIoKS5SZXBsYWNlKCIlYnJvYWRjYXN0ZXJOYW1lJSIsIGJyb2FkY2FzdGVyVXNlcikpKTsNCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiUG9zdGVkIG91dGdvaW5nIHJhaWQgbWVzc2FnZSBhbmQgcmFpZCBtZXNzYWdlczoiKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2cobWVzc2FnZU91dGdvaW5nUmFpZC5SZXBsYWNlKCIldGFyZ2V0VXNlciUiLCBvdXRfdXNlckluZm8uVXNlck5hbWUpLlJlcGxhY2UoIiVnYW1lJSIsIG91dF91c2VySW5mby5HYW1lKS5SZXBsYWNlKCIldGl0bGUlIiwgb3V0X3VzZXJJbmZvLkNoYW5uZWxUaXRsZSkuUmVwbGFjZSgiJXRhZ3MlIiwgc3RyaW5nLkpvaW4oIiwgIiwgb3V0X3VzZXJJbmZvLlRhZ3MpKS5SZXBsYWNlKCIldmlld2VycyUiLCBvdXRfcmFpZFZpZXdlcnMuVG9TdHJpbmcoKSkpOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZyhtZXNzYWdlU29PdXRnb2luZ1JhaWRNZXNzYWdlU3Vicy5SZXBsYWNlKCIlYnJvYWRjYXN0ZXJOYW1lQWxsQ2FwcyUiLCBicm9hZGNhc3RlclVzZXIuVG9VcHBlcigpLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWUlIiwgYnJvYWRjYXN0ZXJVc2VyKSkpOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZyhtZXNzYWdlU29PdXRnb2luZ1JhaWRNZXNzYWdlTm9uU3Vicy5SZXBsYWNlKCIlYnJvYWRjYXN0ZXJOYW1lQWxsQ2FwcyUiLCBicm9hZGNhc3RlclVzZXIuVG9VcHBlcigpLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWUlIiwgYnJvYWRjYXN0ZXJVc2VyKSkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnRUeXBlVVdVID09IEV2ZW50VHlwZS5Ud2l0Y2hTdHJlYW1PbmxpbmUpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKHRvZ2dsZUVtb3RlT25seU9uU3RyZWFtU3RhcnRBbmRFbmQpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBDUEguVHdpdGNoRW1vdGVPbmx5KGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCJFbW90ZS1Pbmx5IHR1cm5lZCBvZmYgYXQgc3RyZWFtIHN0YXJ0LiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50VHlwZVVXVSA9PSBFdmVudFR5cGUuVHdpdGNoU3RyZWFtT2ZmbGluZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAodG9nZ2xlRW1vdGVPbmx5T25TdHJlYW1TdGFydEFuZEVuZCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIENQSC5Ud2l0Y2hFbW90ZU9ubHkodHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygiRW1vdGUtT25seSB0dXJuZWQgb24gYXQgc3RyZWFtIHN0YXJ0LiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBib29sIFRvZ2dsZVVSTEZpbHRlcigpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEZldGNoU2V0dGluZ3MoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFTaGFyZWRDaGF0Q2hlY2soKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHVybEJsb2NrTGlua3MgPSAhdXJsQmxvY2tMaW5rczsNCiAgICAgICAgdWkuU2V0VmFsdWUoZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc191cmxCbG9ja0xpbmtzIiwgdXJsQmxvY2tMaW5rcyk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICh1cmxCbG9ja0xpbmtzKQ0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVRvZ2dsZVVybEVuYWJsZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikpOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlVG9nZ2xlVXJsRGlzYWJsZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikpOw0KICAgICAgICBQb3N0VG9Mb2coJCIne3VzZXJ9JyB0b2dnbGVkIHVybEJsb2NrTGlua3MgdG8ge3VybEJsb2NrTGlua3N9LiIpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBBZGRVc2VyVG9VUkxXaGl0ZWxpc3QoKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghQ2hlY2tTZXR0aW5nc0dsb2JhbCgpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJyYXdJbnB1dCIsIG91dCBzdHJpbmcgcmF3SW5wdXQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoImNvbW1hbmQiLCBvdXQgc3RyaW5nIGNvbW1hbmQpOw0KICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkoY29tbWFuZCkpDQogICAgICAgICAgICBjb21tYW5kID0gIiFjb21tYW5kIjsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KHJhd0lucHV0KSkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZUNvbW1hbmROb1VzZXJQcm92aWRlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlY29tbWFuZCUiLCBjb21tYW5kKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCIne3VzZXJ9JyB0cmllZCB0byB1cmwtd2hpdGVsaXN0IGEgdXNlciB3aXRob3V0IGFueSBpbnB1dC4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHJhd0lucHV0ID0gcmF3SW5wdXQuUmVwbGFjZSgiQCIsICIiKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgc3RyaW5nIGxvY2FsaXplZCA9IEdldExvY2FsaXplZE5hbWUocmF3SW5wdXQpOw0KICAgICAgICBpZiAobG9jYWxpemVkICE9IG51bGwpDQogICAgICAgICAgICByYXdJbnB1dCA9IGxvY2FsaXplZDsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIHVzZXJJbmZvID0gQ1BILlR3aXRjaEdldFVzZXJJbmZvQnlMb2dpbihyYXdJbnB1dCk7DQogICAgICAgIGlmICh1c2VySW5mbyA9PSBudWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlVXNlckRvZXNOb3RFeGlzdC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIldGFyZ2V0VXNlciIsIHJhd0lucHV0KSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCIne3VzZXJ9JyB0cmllZCB0byB1cmwtd2hpdGVsaXN0IGEgbm9uLWV4aXN0aW5nIHVzZXI6IHtyYXdJbnB1dH0iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICh1cmxXaGl0ZWxpc3RlZFVzZXJzLkFueShzID0+IHMuRXF1YWxzKHJhd0lucHV0LCBTdHJpbmdDb21wYXJpc29uLk9yZGluYWxJZ25vcmVDYXNlKSkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VVcmxVc2VyQWxyZWFkeU9uV2hpdGVsaXN0LlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiV0YXJnZXRVc2VyJSIsIHVzZXJJbmZvLlVzZXJOYW1lKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCIne3VzZXJ9JyB0cmllZCB0byBhZGQgJ3t1c2VySW5mby5Vc2VyTmFtZX0nICgne3VzZXJJbmZvLlVzZXJMb2dpbn0nKSB0byB0aGUgd2hpdGVsaXN0LCBidXQgaXQncyBhbHJlYWR5IHdoaXRlbGlzdGVkLiIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJXaGl0ZWxpc3RlZCB1c2VyczoiKTsNCiAgICAgICAgICAgIGZvcmVhY2ggKHN0cmluZyBfdXNlciBpbiB1cmxXaGl0ZWxpc3RlZFVzZXJzKQ0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZyhfdXNlcik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICB1cmxXaGl0ZWxpc3RlZFVzZXJzLkFkZCh1c2VySW5mby5Vc2VyTG9naW4pOw0KICAgICAgICBzdHJpbmcgdXBkYXRlZFVybHMgPSBKc29uQ29udmVydC5TZXJpYWxpemVPYmplY3QodXJsV2hpdGVsaXN0ZWRVc2Vycyk7DQogICAgICAgIHVpLlNldFZhbHVlKGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfdXJsVXNlcldoaXRlbGlzdCIsIHVwZGF0ZWRVcmxzKTsNCiAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVVybFVzZXJBZGRlZFRvV2hpdGVsaXN0LlJlcGxhY2UoIiV0YXJnZXRVc2VyJSIsIHVzZXJJbmZvLlVzZXJOYW1lKS5SZXBsYWNlKCIldXNlciUiLCB1c2VyKSk7DQogICAgICAgIFBvc3RUb0xvZygkIid7dXNlcn0nIGFkZGVkICd7dXNlckluZm8uVXNlck5hbWV9JyAoJ3t1c2VySW5mby5Vc2VyTG9naW59JykgdG8gdGhlIHVybCB3aGl0ZWxpc3QuIik7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBib29sIFJlbW92ZVVzZXJGcm9tVVJMV2hpdGVsaXN0KCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVNoYXJlZENoYXRDaGVjaygpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJyYXdJbnB1dCIsIG91dCBzdHJpbmcgcmF3SW5wdXQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoImNvbW1hbmQiLCBvdXQgc3RyaW5nIGNvbW1hbmQpOw0KICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkoY29tbWFuZCkpDQogICAgICAgICAgICBjb21tYW5kID0gIiFjb21tYW5kIjsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkocmF3SW5wdXQpKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQ29tbWFuZE5vVXNlclByb3ZpZGVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVjb21tYW5kJSIsIGNvbW1hbmQpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIid7dXNlcn0nIHRyaWVkIHRvIHVybC1yZW1vdmUgYSB1c2VyIHdpdGhvdXQgYW55IGlucHV0LiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICByYXdJbnB1dCA9IHJhd0lucHV0LlJlcGxhY2UoIkAiLCAiIik7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyBsb2NhbGl6ZWQgPSBHZXRMb2NhbGl6ZWROYW1lKHJhd0lucHV0KTsNCiAgICAgICAgaWYgKGxvY2FsaXplZCAhPSBudWxsKQ0KICAgICAgICAgICAgcmF3SW5wdXQgPSBsb2NhbGl6ZWQ7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciB1c2VySW5mbyA9IENQSC5Ud2l0Y2hHZXRVc2VySW5mb0J5TG9naW4ocmF3SW5wdXQpOw0KICAgICAgICBpZiAodXNlckluZm8gPT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVVzZXJEb2VzTm90RXhpc3QuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXRhcmdldFVzZXIiLCByYXdJbnB1dCkpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgdHJpZWQgdG8gcmVtb3ZlLXVybC13aGl0ZWxpc3QgYSBub24tZXhpc3RpbmcgdXNlcjoge3Jhd0lucHV0fSIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIXVybFdoaXRlbGlzdGVkVXNlcnMuQW55KHMgPT4gcy5FcXVhbHMocmF3SW5wdXQsIFN0cmluZ0NvbXBhcmlzb24uT3JkaW5hbElnbm9yZUNhc2UpKSkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVVybFVzZXJOb3RPbldoaXRlbGlzdC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIldGFyZ2V0VXNlciUiLCB1c2VySW5mby5Vc2VyTmFtZSkpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgdHJpZWQgdG8gcmVtb3ZlICd7dXNlckluZm8uVXNlck5hbWV9JyAoJ3t1c2VySW5mby5Vc2VyTG9naW59JykgZnJvbSB0aGUgd2hpdGVsaXN0LCBidXQgdGhleSdyZSBub3Qgd2hpdGVsaXN0ZWQuIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coIldoaXRlbGlzdGVkIHVzZXJzOiIpOw0KICAgICAgICAgICAgZm9yZWFjaCAoc3RyaW5nIF91c2VyIGluIHVybFdoaXRlbGlzdGVkVXNlcnMpDQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKF91c2VyKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdXJsV2hpdGVsaXN0ZWRVc2Vycy5SZW1vdmUodXNlckluZm8uVXNlckxvZ2luKTsNCiAgICAgICAgc3RyaW5nIHVwZGF0ZWRVcmxzID0gSnNvbkNvbnZlcnQuU2VyaWFsaXplT2JqZWN0KHVybFdoaXRlbGlzdGVkVXNlcnMpOw0KICAgICAgICB1aS5TZXRWYWx1ZShleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX3VybFVzZXJXaGl0ZWxpc3QiLCB1cGRhdGVkVXJscyk7DQogICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VVcmxVc2VyUmVtb3ZlZEZyb21XaGl0ZWxpc3QuUmVwbGFjZSgiJXRhcmdldFVzZXIlIiwgdXNlckluZm8uVXNlck5hbWUpLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpKTsNCiAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgcmVtb3ZlZCAne3VzZXJJbmZvLlVzZXJOYW1lfScgKCd7dXNlckluZm8uVXNlckxvZ2lufScpIGZyb20gdGhlIHVybCB3aGl0ZWxpc3QuIik7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgQWRkVVJMVG9XaGl0ZWxpc3QoKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghQ2hlY2tTZXR0aW5nc0dsb2JhbCgpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJyYXdJbnB1dCIsIG91dCBzdHJpbmcgcmF3SW5wdXQpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJjb21tYW5kIiwgb3V0IHN0cmluZyBjb21tYW5kKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KHJhd0lucHV0KSkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCBwbGVhc2UgZW50ZXIgYSBVUkwgdG8gd2hpdGVsaXN0LiBFeGFtcGxlOiAne2NvbW1hbmR9IHR3aXRjaC50diciKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIid7dXNlcn0nIHRyaWVkIHRvIGFkZCBVUkwgdG8gd2hpdGVsaXN0IHdpdGhvdXQgYW55IGlucHV0LiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKHVybFdoaXRlbGlzdGVkVVJMcy5BbnkocyA9PiBzLkVxdWFscyhyYXdJbnB1dCwgU3RyaW5nQ29tcGFyaXNvbi5PcmRpbmFsSWdub3JlQ2FzZSkpKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlVXJsQWxyZWFkeU9uV2hpdGVsaXN0LlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiV1cmwlIiwgcmF3SW5wdXQuVG9Mb3dlckludmFyaWFudCgpKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCIne3VzZXJ9JyB0cmllZCB0byBhZGQgJ3tyYXdJbnB1dH0nIHRvIHRoZSB3aGl0ZWxpc3QsIGJ1dCBpdCdzIGFscmVhZHkgd2hpdGVsaXN0ZWQuIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coIldoaXRlbGlzdGVkIFVSTHM6Iik7DQogICAgICAgICAgICBmb3JlYWNoIChzdHJpbmcgX3VybCBpbiB1cmxXaGl0ZWxpc3RlZFVSTHMpDQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKF91cmwpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgdXJsV2hpdGVsaXN0ZWRVUkxzLkFkZChyYXdJbnB1dC5Ub0xvd2VySW52YXJpYW50KCkpOw0KICAgICAgICBzdHJpbmcgdXBkYXRlZFVybHMgPSBKc29uQ29udmVydC5TZXJpYWxpemVPYmplY3QodXJsV2hpdGVsaXN0ZWRVUkxzKTsNCiAgICAgICAgdWkuU2V0VmFsdWUoZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc191cmxXaGl0ZWxpc3RlZFVSTHMiLCB1cGRhdGVkVXJscyk7DQogICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VVcmxBZGRlZFRvV2hpdGVsaXN0LlJlcGxhY2UoIiV1cmwlIiwgcmF3SW5wdXQuVG9Mb3dlckludmFyaWFudCgpKS5SZXBsYWNlKCIldXNlciUiLCB1c2VyKSk7DQogICAgICAgIFBvc3RUb0xvZygkIid7dXNlcn0nIGFkZGVkICd7cmF3SW5wdXR9JyB0byB0aGUgd2hpdGVsaXN0LiIpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBSZW1vdmVVUkxGcm9tV2hpdGVsaXN0KCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgSW5pdExvZygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVNoYXJlZENoYXRDaGVjaygpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyIiwgb3V0IHN0cmluZyB1c2VyKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygicmF3SW5wdXQiLCBvdXQgc3RyaW5nIHJhd0lucHV0KTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygiY29tbWFuZCIsIG91dCBzdHJpbmcgY29tbWFuZCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShyYXdJbnB1dCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgcGxlYXNlIGVudGVyIGEgVVJMIHRvIHJlbW92ZSBmcm9tIHRoZSB3aGl0ZWxpc3QuIEV4YW1wbGU6ICd7Y29tbWFuZH0gdHdpdGNoLnR2JyIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgdHJpZWQgdG8gcmVtb3ZlIFVSTCBmcm9tIHdoaXRlbGlzdCB3aXRob3V0IGFueSBpbnB1dC4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghdXJsV2hpdGVsaXN0ZWRVUkxzLkFueShzID0+IHMuRXF1YWxzKHJhd0lucHV0LCBTdHJpbmdDb21wYXJpc29uLk9yZGluYWxJZ25vcmVDYXNlKSkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VVcmxOb3RPbldoaXRlbGlzdC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIldXJsJSIsIHJhd0lucHV0LlRvTG93ZXJJbnZhcmlhbnQoKSkpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgdHJpZWQgdG8gcmVtb3ZlICd7cmF3SW5wdXR9JyBmcm9tIHRoZSB3aGl0ZWxpc3QsIGJ1dCBpdCdzIG5vdCB3aGl0ZWxpc3RlZC4iKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiV2hpdGVsaXN0ZWQgVVJMczoiKTsNCiAgICAgICAgICAgIGZvcmVhY2ggKHN0cmluZyBfdXJsIGluIHVybFdoaXRlbGlzdGVkVVJMcykNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coX3VybCk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICB1cmxXaGl0ZWxpc3RlZFVSTHMuUmVtb3ZlKHJhd0lucHV0KTsNCiAgICAgICAgc3RyaW5nIHVwZGF0ZWRVcmxzID0gSnNvbkNvbnZlcnQuU2VyaWFsaXplT2JqZWN0KHVybFdoaXRlbGlzdGVkVVJMcyk7DQogICAgICAgIHVpLlNldFZhbHVlKGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfdXJsV2hpdGVsaXN0ZWRVUkxzIiwgdXBkYXRlZFVybHMpOw0KICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlVXJsUmVtb3ZlZEZyb21XaGl0ZWxpc3QuUmVwbGFjZSgiJXVybCUiLCByYXdJbnB1dC5Ub0xvd2VySW52YXJpYW50KCkpLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpKTsNCiAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgcmVtb3ZlZCAne3Jhd0lucHV0fScgZnJvbSB3aGl0ZWxpc3QuIik7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBib29sIEdldFdoaXRlbGlzdGVkVVJMcygpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEZldGNoU2V0dGluZ3MoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFTaGFyZWRDaGF0Q2hlY2soKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICh1cmxXaGl0ZWxpc3RlZFVSTHMuQ291bnQgPT0gMCkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVVybE5vV2hpdGVsaXN0LlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIid7dXNlcn0nIHRyaWVkIHRvIGZldGNoIHdoaXRlbGlzdGVkIFVSTHMsIGJ1dCBjb3VudCBpcyAwIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlVXJsR2V0V2hpdGVsaXN0LlJlcGxhY2UoIiV1cmxXaGl0ZWxpc3QlIiwgc3RyaW5nLkpvaW4oIiwgIiwgdXJsV2hpdGVsaXN0ZWRVUkxzKSkuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikpOw0KICAgICAgICBQb3N0VG9Mb2coJCIne3VzZXJ9JyBmZXRjaGVkIHdoaXRlbGlzdDoiKTsNCiAgICAgICAgZm9yZWFjaCAoc3RyaW5nIF91cmwgaW4gdXJsV2hpdGVsaXN0ZWRVUkxzKQ0KICAgICAgICAgICAgUG9zdFRvTG9nKF91cmwpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBBZGRCbGFja2xpc3RlZFdvcmQoKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghQ2hlY2tTZXR0aW5nc0dsb2JhbCgpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJyYXdJbnB1dCIsIG91dCBzdHJpbmcgcmF3SW5wdXQpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJjb21tYW5kIiwgb3V0IHN0cmluZyBjb21tYW5kKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KHJhd0lucHV0KSkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCBwbGVhc2UgcHJvdmlkZSBhIHdvcmQgdG8gYWRkIHRvIHRoZSBibGFja2xpc3QuIEV4YW1wbGU6ICd7Y29tbWFuZH0gYmFuYW5hJyIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgdHJpZWQgdG8gYWRkIGEgd29yZCB3aXRob3V0IGFueSBpbnB1dCB0byB0aGUgYmxhY2tsaXN0LiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgc3RyaW5nIHdvcmQgPSByYXdJbnB1dC5Ub0xvd2VySW52YXJpYW50KCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChibGFja2xpc3RlZFdvcmRzTGlzdC5Db250YWlucyh3b3JkKSkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZUJsYWNrbGlzdEFscmVhZHlBZGRlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCIne3VzZXJ9JyB0cmllZCB0byBhZGQgJ3t3b3JkfScgdG8gdGhlIGJsYWNrbGlzdCwgYnV0IGl0J3MgYWxyZWFkeSBwcmVzZW50LiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgYmxhY2tsaXN0ZWRXb3Jkc0xpc3QuQWRkKHdvcmQpOw0KICAgICAgICBzdHJpbmcgdXBkYXRlZExpc3QgPSBKc29uQ29udmVydC5TZXJpYWxpemVPYmplY3QoYmxhY2tsaXN0ZWRXb3Jkc0xpc3QpOw0KICAgICAgICB1aS5TZXRWYWx1ZShleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX2JsYWNrbGlzdGVkV29yZHNMaXN0IiwgdXBkYXRlZExpc3QpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQmxhY2tsaXN0QWRkZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikpOw0KICAgICAgICBQb3N0VG9Mb2coJCIne3VzZXJ9JyBhZGRlZCAne3dvcmR9JyB0byB0aGUgYmxhY2tsaXN0LiIpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBSZW1vdmVCbGFja2xpc3RlZFdvcmQoKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghQ2hlY2tTZXR0aW5nc0dsb2JhbCgpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJyYXdJbnB1dCIsIG91dCBzdHJpbmcgcmF3SW5wdXQpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJjb21tYW5kIiwgb3V0IHN0cmluZyBjb21tYW5kKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KHJhd0lucHV0KSkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCBwbGVhc2UgcHJvdmlkZSBhIHdvcmQgdG8gcmVtb3ZlIGZyb20gdGhlIGJsYWNrbGlzdC4gRXhhbXBsZTogJ3tjb21tYW5kfSBzcGFtJyIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgdHJpZWQgdG8gcmVtb3ZlIGEgd29yZCB3aXRob3V0IGFueSBpbnB1dCBmcm9tIHRoZSBibGFja2xpc3QuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBzdHJpbmcgd29yZCA9IHJhd0lucHV0LlRvTG93ZXJJbnZhcmlhbnQoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFibGFja2xpc3RlZFdvcmRzTGlzdC5Db250YWlucyh3b3JkKSkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZUJsYWNrbGlzdE5vdExpc3RlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCIne3VzZXJ9JyB0cmllZCB0byByZW1vdmUgJ3t3b3JkfScgZnJvbSB0aGUgYmxhY2tsaXN0LCBidXQgaXQncyBub3QgcHJlc2VudC4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGJsYWNrbGlzdGVkV29yZHNMaXN0LlJlbW92ZSh3b3JkKTsNCiAgICAgICAgc3RyaW5nIHVwZGF0ZWRMaXN0ID0gSnNvbkNvbnZlcnQuU2VyaWFsaXplT2JqZWN0KGJsYWNrbGlzdGVkV29yZHNMaXN0KTsNCiAgICAgICAgdWkuU2V0VmFsdWUoZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19ibGFja2xpc3RlZFdvcmRzTGlzdCIsIHVwZGF0ZWRMaXN0KTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZUJsYWNrbGlzdFJlbW92ZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikpOw0KICAgICAgICBQb3N0VG9Mb2coJCIne3VzZXJ9JyByZW1vdmVkICd7d29yZH0nIGZyb20gdGhlIGJsYWNrbGlzdC4iKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgVG9nZ2xlQmxhY2tsaXN0ZWRXb3Jkc0ZpbHRlcigpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEZldGNoU2V0dGluZ3MoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFTaGFyZWRDaGF0Q2hlY2soKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGZpbHRlckJsYWNrbGlzdGVkV29yZHMgPSAhZmlsdGVyQmxhY2tsaXN0ZWRXb3JkczsNCiAgICAgICAgdWkuU2V0VmFsdWUoZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19maWx0ZXJCbGFja2xpc3RlZFdvcmRzIiwgZmlsdGVyQmxhY2tsaXN0ZWRXb3Jkcyk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChmaWx0ZXJCbGFja2xpc3RlZFdvcmRzKQ0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVRvZ2dsZUJsYWNrbGlzdGVkV29yZHNFbmFibGVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVRvZ2dsZUJsYWNrbGlzdGVkV29yZHNEaXNhYmxlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKSk7DQogICAgICAgIFBvc3RUb0xvZygkIid7dXNlcn0nIHRvZ2dsZWQgZmlsdGVyQmxhY2tsaXN0ZWRXb3JkcyB0byB7ZmlsdGVyQmxhY2tsaXN0ZWRXb3Jkc30uIik7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBib29sIFRvZ2dsZUNhcHNQcm90ZWN0aW9uKCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgSW5pdExvZygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVNoYXJlZENoYXRDaGVjaygpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyIiwgb3V0IHN0cmluZyB1c2VyKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgY2Fwc1Byb3RlY3Rpb24gPSAhY2Fwc1Byb3RlY3Rpb247DQogICAgICAgIHZhciBjYXBzU2V0dGluZ3MgPSBuZXcgSk9iamVjdA0KICAgICAgICB7DQogICAgICAgICAgICBbImVuYWJsZWQiXSA9IGNhcHNQcm90ZWN0aW9uLA0KICAgICAgICAgICAgWyJ2YWx1ZSJdID0gY2Fwc1Byb3RlY3Rpb25Db3VudA0KICAgICAgICB9Ow0KICAgICAgICB1aS5TZXRWYWx1ZShleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX2JsYWNrbGlzdGVkV29yZHNDYXBzUHJvdGVjdGlvbiIsIGNhcHNTZXR0aW5ncy5Ub1N0cmluZyhGb3JtYXR0aW5nLk5vbmUpKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKGNhcHNQcm90ZWN0aW9uKQ0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVRvZ2dsZUNhcHNFbmFibGVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVRvZ2dsZUNhcHNEaXNhYmxlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKSk7DQogICAgICAgIFBvc3RUb0xvZygkIid7dXNlcn0nIHRvZ2dsZWQgY2Fwc1Byb3RlY3Rpb24gdG8ge2NhcHNQcm90ZWN0aW9ufS4iKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgVG9nZ2xlRW1vdGVQcm90ZWN0aW9uKCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgSW5pdExvZygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVNoYXJlZENoYXRDaGVjaygpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyIiwgb3V0IHN0cmluZyB1c2VyKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgZW1vdGVQcm90ZWN0aW9uID0gIWVtb3RlUHJvdGVjdGlvbjsNCiAgICAgICAgdmFyIGVtb3RlU2V0dGluZ3MgPSBuZXcgSk9iamVjdA0KICAgICAgICB7DQogICAgICAgICAgICBbImVuYWJsZWQiXSA9IGVtb3RlUHJvdGVjdGlvbiwNCiAgICAgICAgICAgIFsidmFsdWUiXSA9IGVtb3RlUHJvdGVjdGlvbkNvdW50DQogICAgICAgIH07DQogICAgICAgIHVpLlNldFZhbHVlKGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfYmxhY2tsaXN0ZWRXb3Jkc0Vtb3RlUHJvdGVjdGlvbiIsIGVtb3RlU2V0dGluZ3MuVG9TdHJpbmcoRm9ybWF0dGluZy5Ob25lKSk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChlbW90ZVByb3RlY3Rpb24pDQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlVG9nZ2xlRW1vdGVzRW5hYmxlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKSk7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VUb2dnbGVFbW90ZXNEaXNhYmxlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKSk7DQogICAgICAgIFBvc3RUb0xvZygkIid7dXNlcn0nIHRvZ2dsZWQgZW1vdGVQcm90ZWN0aW9uIHRvIHtlbW90ZVByb3RlY3Rpb259LiIpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBUb2dnbGVBc2NpaVByb3RlY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghQ2hlY2tTZXR0aW5nc0dsb2JhbCgpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBhc2NpaVByb3RlY3Rpb24gPSAhYXNjaWlQcm90ZWN0aW9uOw0KICAgICAgICB1aS5TZXRWYWx1ZShleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX2JsYWNrbGlzdGVkV29yZHNBc2NpaVByb3RlY3Rpb24iLCBhc2NpaVByb3RlY3Rpb24pOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoYXNjaWlQcm90ZWN0aW9uKQ0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVRvZ2dsZUFzY2lpRW5hYmxlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKSk7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VUb2dnbGVBc2NpaURpc2FibGVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpKTsNCiAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgdG9nZ2xlZCBhc2NpaVByb3RlY3Rpb24gdG8ge2FzY2lpUHJvdGVjdGlvbn0uIik7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHByaXZhdGUgc3RhdGljIGludCBfcmVtb3ZhbFRpbWUgPSAtMTMzNzsNCiAgICBwdWJsaWMgYm9vbCBSZW1vdmVMYXRlc3RGb2xsb3dlcnMoKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghQ2hlY2tTZXR0aW5nc0dsb2JhbCgpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEdldEJyb2FkY2FzdGVyQW5kQm90KCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VySWQiLCBvdXQgc3RyaW5nIHVzZXJJZCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChDUEguR2V0RXZlbnRUeXBlKCkgIT0gRXZlbnRUeXBlLkNvbW1hbmRUcmlnZ2VyZWQpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiU29ycnksIEB7YnJvYWRjYXN0ZXJVc2VyfSwgYnV0IHRoaXMgYWN0aW9uIGlzIG9ubHkgYXZhaWxhYmxlIHdpdGggYSBjb21tYW5kIHRyaWdnZXIuIElmIHlvdSBzdGlsbCB3aXNoIHRvIGNoZWNrIGZvciBib3R0ZWQgZm9sbG93ZXJzIGFuZCByZW1vdmUgdGhlbSwgZWl0aGVyIHVzZSB0aGUgY29tbWFuZCAnIXJlbW92ZUxhdGVzdEZvbGxvd2VycyBbTWludXRlc10nIG9yIGdvIHRvIGh0dHA6Ly93d3cudGF3bWFlLnh5ei9vdmVybGF5cy9tb2QtdG9vbHMtZm9sbG93ZXItcmVtb3ZlciIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgdHJpZWQgdG8gcmVtb3ZlIGxhdGVzdCBmb2xsb3dlcnMgd2l0aCBhIGRpZmZlcmVudCB0cmlnZ2VyOiB7Q1BILkdldEV2ZW50VHlwZSgpfSIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgYm9vbCBjb25maXJtZWQgPSBDUEguR2V0R2xvYmFsVmFyPGJvb2w+KCJ0YXdtYWVfTU9EX1RPT0xTX2ZvbGxvd2VyUmVtb3ZhbENvbmZpcm1hdGlvbiIsIGZhbHNlKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKHVzZXJJZCAhPSBicm9hZGNhc3RlclVzZXJJZCkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZUJyb2FkY2FzdGVyT25seS5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlYnJvYWRjYXN0ZXJOYW1lJSIsIGJyb2FkY2FzdGVyVXNlcikpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgdHJpZWQgdG8gcmVtb3ZlIGxhdGVzdCBmb2xsb3dlcnMgYnV0IHdhc24ndCB0aGUgYnJvYWRjYXN0ZXIgJ3ticm9hZGNhc3RlclVzZXJ9Jy4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInJhd0lucHV0Iiwgb3V0IHN0cmluZyByYXdJbnB1dCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImNvbW1hbmQiLCBvdXQgc3RyaW5nIGNvbW1hbmQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkocmF3SW5wdXQpKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoIWNvbmZpcm1lZCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdCgkIkB7dXNlcn0sIHBsZWFzZSBzcGVjaWZ5IGEgdGltZS4gRXhhbXBsZTogJ3tjb21tYW5kfSAxNScgdG8gcmVtb3ZlIGZvbGxvd2VycyB0aGF0IGZvbGxvd2VkIHdpdGhpbiB0aGUgbGFzdCAxNSBtaW51dGVzLiBJZiB5b3Ugd2lzaCB0byBjaGVjayBmb3IgYm90dGVkIGZvbGxvd2VycyBieSBoYW5kIGFuZCByZW1vdmUgdGhlbSwgZ28gdG8gaHR0cDovL3d3dy50YXdtYWUueHl6L292ZXJsYXlzL21vZC10b29scy1mb2xsb3dlci1yZW1vdmVyIik7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgdHJpZWQgdG8gcmVtb3ZlIGxhdGVzdCBmb2xsb3dlcnMgd2l0aG91dCBhbnkgaW5wdXQuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgeW91IGhhdmUgdG8gcmV0eXBlIHRoZSBleGFjdCBjb21tYW5kIHRvIGNvbmZpcm0gdGhlIGZvbGxvd2VyIHJlbW92YWw6ICd7Y29tbWFuZH0ge19yZW1vdmFsVGltZX0nLiBJZiB5b3Ugd2lzaCB0byBhYm9ydCBhbmQgZW50ZXIgYSBuZXcgdGltZSwgdHlwZSAne2NvbW1hbmR9IC02OSciKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCIne3VzZXJ9JyBmYWlsZWQgdG8gcHJvcGVybHkgY29uZmlybToge3Jhd0lucHV0fSIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGlmICghaW50LlRyeVBhcnNlKHJhd0lucHV0LCBvdXQgaW50IHJlbW92YWxUaW1lKSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKCFjb25maXJtZWQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCBwbGVhc2Ugc3BlY2lmeSBhIHZhbGlkIHRpbWUuIEV4YW1wbGU6ICd7Y29tbWFuZH0gMTUnIHRvIHJlbW92ZSBmb2xsb3dlcnMgdGhhdCBmb2xsb3dlZCB3aXRoaW4gdGhlIGxhc3QgMTUgbWludXRlcy4iKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCIne3VzZXJ9JyB0cmllZCB0byByZW1vdmUgbGF0ZXN0IGZvbGxvd2VycyB3aXRoIGludmFsaWQgaW5wdXQ6IHtyYXdJbnB1dH0iKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCB5b3UgaGF2ZSB0byByZXR5cGUgdGhlIGV4YWN0IGNvbW1hbmQgdG8gY29uZmlybSB0aGUgZm9sbG93ZXIgcmVtb3ZhbDogJ3tjb21tYW5kfSB7X3JlbW92YWxUaW1lfScuIElmIHlvdSB3aXNoIHRvIGFib3J0IGFuZCBlbnRlciBhIG5ldyB0aW1lLCB0eXBlICd7Y29tbWFuZH0gLTY5JyIpOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIid7dXNlcn0nIGZhaWxlZCB0byBwcm9wZXJseSBjb25maXJtOiB7cmF3SW5wdXR9Iik7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKCFjb25maXJtZWQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKHJlbW92YWxUaW1lIDw9IDApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdCgkIkB7dXNlcn0sIHBsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgdGltZS4gRXhhbXBsZTogJ3tjb21tYW5kfSAxNScgdG8gcmVtb3ZlIGZvbGxvd2VycyB0aGF0IGZvbGxvd2VkIHdpdGhpbiB0aGUgbGFzdCAxNSBtaW51dGVzLiIpOw0KICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCIne3VzZXJ9JyB0cmllZCB0byByZW1vdmUgbGF0ZXN0IGZvbGxvd2VycyB3aXRoIGludmFsaWQgaW5wdXQ6IHtyYXdJbnB1dH0iKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgcGxlYXNlIGNvbmZpcm0gdGhlIGNvbW1hbmQgYnkgdHlwaW5nIGl0IGFnYWluOiAne2NvbW1hbmR9IHtyZW1vdmFsVGltZX0nIik7DQogICAgICAgICAgICAgICAgQ1BILlNldEdsb2JhbFZhcigidGF3bWFlX01PRF9UT09MU19mb2xsb3dlclJlbW92YWxDb25maXJtYXRpb24iLCB0cnVlLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiU3VjY2Vzc2Z1bGx5IHNldCBjb25maXJtYXRpb24gdmFyIGZvciB7dXNlcn0ncyByZXF1ZXN0OiAne3Jhd0lucHV0fSciKTsNCiAgICAgICAgICAgICAgICBfcmVtb3ZhbFRpbWUgPSByZW1vdmFsVGltZTsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAocmVtb3ZhbFRpbWUgPT0gLTY5KQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCBmb2xsb3dlciByZW1vdmFsIGNvbmZpcm1hdGlvbiBoYXMgYmVlbiByZXNldC4gWW91IGNhbiBub3cgZW50ZXIgYSBuZXcgdGltZS4gWW91IGNhbiBhbHNvIGdvIHRvIGh0dHA6Ly93d3cudGF3bWFlLnh5ei9vdmVybGF5cy9tb2QtdG9vbHMtZm9sbG93ZXItcmVtb3ZlciBhbmQgcmVtb3ZlIHRoZW0gYnkgaGFuZC4iKTsNCiAgICAgICAgICAgICAgICAgICAgQ1BILlVuc2V0R2xvYmFsVmFyKCJ0YXdtYWVfTU9EX1RPT0xTX2ZvbGxvd2VyUmVtb3ZhbENvbmZpcm1hdGlvbiIsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiU3VjY2Vzc2Z1bGx5IHJlc2V0IGNvbmZpcm1hdGlvbiB2YXIgZm9yIHt1c2VyfSdzIHJlcXVlc3Q6ICd7cmF3SW5wdXR9JyIpOw0KICAgICAgICAgICAgICAgICAgICBfcmVtb3ZhbFRpbWUgPSAtMTMzNzsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKHJlbW92YWxUaW1lICE9IF9yZW1vdmFsVGltZSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgeW91IGhhdmUgdG8gcmV0eXBlIHRoZSBleGFjdCBjb21tYW5kIHRvIGNvbmZpcm0gdGhlIGZvbGxvd2VyIHJlbW92YWw6ICd7Y29tbWFuZH0ge19yZW1vdmFsVGltZX0nLiBJZiB5b3Ugd2lzaCB0byBhYm9ydCBhbmQgZW50ZXIgYSBuZXcgdGltZSwgdHlwZSAne2NvbW1hbmR9IC02OSciKTsNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgZmFpbGVkIHRvIHByb3Blcmx5IGNvbmZpcm06IHtyYXdJbnB1dH0iKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiU3RhcnRpbmcgdG8gcmVtb3ZlIHRoZSBmb2xsb3dlcnMgb2YgdGhlIGxhc3Qge3JlbW92YWxUaW1lfSBtaW51dGVzLiBEZXBlbmRpbmcgaG93IG1hbnkgaXQgd2VyZSwgdGhpcyBtaWdodCB0YWtlIGEgd2hpbGUuIik7DQogICAgICAgICAgICAgICAgX3JlbW92YWxUaW1lID0gLTEzMzc7DQogICAgICAgICAgICAgICAgQ1BILlVuc2V0R2xvYmFsVmFyKCJ0YXdtYWVfTU9EX1RPT0xTX2ZvbGxvd2VyUmVtb3ZhbENvbmZpcm1hdGlvbiIsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICBDUEguV2FpdCgyNTApOw0KICAgICAgICAgICAgICAgIFJlbW92ZUxhdGVzdEZvbGxvd2Vyc1Rhc2soYnJvYWRjYXN0ZXJVc2VySWQsIHJlbW92YWxUaW1lKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBib29sIE1hbnVhbGx5UmVtb3ZlQm90dGVkRm9sbG93ZXJzKCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgSW5pdExvZygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVNoYXJlZENoYXRDaGVjaygpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBHZXRCcm9hZGNhc3RlckFuZEJvdCgpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyIiwgb3V0IHN0cmluZyB1c2VyKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlcklkIiwgb3V0IHN0cmluZyB1c2VySWQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAodXNlcklkICE9IGJyb2FkY2FzdGVyVXNlcklkKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQnJvYWRjYXN0ZXJPbmx5LlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWUlIiwgYnJvYWRjYXN0ZXJVc2VyKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCIne3VzZXJ9JyB0cmllZCB0byByZW1vdmUgYm90dGVkIGZvbGxvd2VycyBidXQgd2Fzbid0IHRoZSBicm9hZGNhc3RlciAne2Jyb2FkY2FzdGVyVXNlcn0nLiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKENQSC5HZXRFdmVudFR5cGUoKSAhPSBFdmVudFR5cGUuQ29tbWFuZFRyaWdnZXJlZCkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJTb3JyeSwgQHticm9hZGNhc3RlclVzZXJ9LCBidXQgdGhpcyBhY3Rpb24gaXMgb25seSBhdmFpbGFibGUgd2l0aCBhIGNvbW1hbmQgdHJpZ2dlci4iKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIid7dXNlcn0nIHRyaWVkIHRvIHJlbW92ZSBib3R0ZWQgZm9sbG93ZXJzIHdpdGggYSBkaWZmZXJlbnQgdHJpZ2dlcjoge0NQSC5HZXRFdmVudFR5cGUoKX0iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIExpc3Q8c3RyaW5nPiBib3RGb2xsb3dlckxpc3QgPSBDUEguR2V0R2xvYmFsVmFyPExpc3Q8c3RyaW5nPj8+KCJ0YXdtYWVfTU9EX1RPT0xTX2JvdEZvbGxvd2Vyc0xpc3QiLCBmYWxzZSkgPz8gbmV3IExpc3Q8c3RyaW5nPg0KICAgICAgICB7DQogICAgICAgIH07DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChib3RGb2xsb3dlckxpc3QuQ291bnQgPT0gMCkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe2Jyb2FkY2FzdGVyVXNlcn0sIHRoZXJlIGFyZSBubyB0cmFja2VkIGJvdCBmb2xsb3dlcnMgZnJvbSBhIHByZXZpb3VzIGF0dGFjay4gSWYgeW91IHN0aWxsIHdpc2ggdG8gY2hlY2sgZm9yIGJvdHRlZCBmb2xsb3dlcnMgYW5kIHJlbW92ZSB0aGVtLCBlaXRoZXIgdXNlIHRoZSBjb21tYW5kICchcmVtb3ZlTGF0ZXN0Rm9sbG93ZXJzIFtNaW51dGVzXScgb3IgZ28gdG8gaHR0cDovL3d3dy50YXdtYWUueHl6L292ZXJsYXlzL21vZC10b29scy1mb2xsb3dlci1yZW1vdmVyIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCIne3VzZXJ9JyB0cmllZCB0byByZW1vdmUgYm90dGVkIGZvbGxvd2VycywgYnV0IGxpc3Qgd2FzIGVtcHR5Iik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBSZXBseVRvQ2hhdCgkIlN0YXJ0aW5nIHRvIHJlbW92ZSB7Ym90Rm9sbG93ZXJMaXN0LkNvdW50fSBib3R0ZWQgZm9sbG93ZXJzLiBUaGlzIG1pZ2h0IHRha2UgYSB3aGlsZS4iKTsNCiAgICAgICAgUG9zdFRvTG9nKCQiUmVtb3Zpbmcge2JvdEZvbGxvd2VyTGlzdC5Db3VudH0gYm90dGVkIGZvbGxvd2Vycy4uLiIpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpbnQgc3VjY2VzcyA9IDA7DQogICAgICAgIGZvcmVhY2ggKHN0cmluZyBib3RVc2VyTmFtZSBpbiBib3RGb2xsb3dlckxpc3QpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChDUEguVHdpdGNoQmxvY2tVc2VyKGJvdFVzZXJOYW1lKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBzdWNjZXNzKys7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiQmxvY2tlZCAne2JvdFVzZXJOYW1lfSciKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQgdG8gYmxvY2sgJ3tib3RVc2VyTmFtZX0nIik7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBSZXBseVRvQ2hhdCgkIlN1Y2Nlc3NmdWxseSByZW1vdmVkIHtzdWNjZXNzfSBib3R0ZWQgZm9sbG93ZXJzLiIpOw0KICAgICAgICBQb3N0VG9Mb2coJCJSZW1vdmVkIHtzdWNjZXNzfS97Ym90Rm9sbG93ZXJMaXN0LkNvdW50fSBib3R0ZWQgZm9sbG93ZXJzLiIpOw0KICAgICAgICBDUEguVW5zZXRHbG9iYWxWYXIoInRhd21hZV9NT0RfVE9PTFNfYm90Rm9sbG93ZXJzTGlzdCIsIGZhbHNlKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgUGVybWl0VXNlclRvUG9zdExpbmtzKCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgSW5pdExvZygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVNoYXJlZENoYXRDaGVjaygpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyIiwgb3V0IHN0cmluZyB1c2VyKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygicmF3SW5wdXQiLCBvdXQgc3RyaW5nIHJhd0lucHV0KTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJjb21tYW5kIiwgb3V0IHN0cmluZyBjb21tYW5kKTsNCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KGNvbW1hbmQpKQ0KICAgICAgICAgICAgY29tbWFuZCA9ICIhY29tbWFuZCI7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShyYXdJbnB1dCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VDb21tYW5kTm9Vc2VyUHJvdmlkZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJWNvbW1hbmQlIiwgY29tbWFuZCkpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgdHJpZWQgdG8gcGVybWl0IGEgdXNlciB3aXRob3V0IGFueSBpbnB1dC4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHJhd0lucHV0ID0gcmF3SW5wdXQuUmVwbGFjZSgiQCIsICIiKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgc3RyaW5nIGxvY2FsaXplZCA9IEdldExvY2FsaXplZE5hbWUocmF3SW5wdXQpOw0KICAgICAgICBpZiAobG9jYWxpemVkICE9IG51bGwpDQogICAgICAgICAgICByYXdJbnB1dCA9IGxvY2FsaXplZDsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIHVzZXJJbmZvID0gQ1BILlR3aXRjaEdldFVzZXJJbmZvQnlMb2dpbihyYXdJbnB1dCk7DQogICAgICAgIGlmICh1c2VySW5mbyA9PSBudWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlVXNlckRvZXNOb3RFeGlzdC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIldGFyZ2V0VXNlciIsIHJhd0lucHV0KSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCIne3VzZXJ9JyB0cmllZCB0byB1cmwtcGVybWl0IGEgbm9uLWV4aXN0aW5nIHVzZXI6IHtyYXdJbnB1dH0iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIENQSC5TZXRUd2l0Y2hVc2VyVmFyQnlJZCh1c2VySW5mby5Vc2VySWQsICJ0YXdtYWVfTU9EX1RPT0xTX3VybFBlcm1pc3Npb24iLCBEYXRlVGltZS5Ob3csIGZhbHNlKTsNCiAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVBlcm1pdFN1Y2Nlc3MuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXRhcmdldFVzZXIiLCByYXdJbnB1dCkuUmVwbGFjZSgiJXBlcm1pdER1cmF0aW9uJSIsIHBlcm1pdER1cmF0aW9uLlRvU3RyaW5nKCkpKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgQ3JlYXRlUG9sbCgpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEZldGNoU2V0dGluZ3MoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFTaGFyZWRDaGF0Q2hlY2soKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgR2V0QnJvYWRjYXN0ZXJBbmRCb3QoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInJhd0lucHV0Iiwgb3V0IHN0cmluZyByYXdJbnB1dCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImNvbW1hbmQiLCBvdXQgc3RyaW5nIGNvbW1hbmQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgZXhJbmZvID0gQ1BILlR3aXRjaEdldEV4dGVuZGVkVXNlckluZm9CeUlkKGJyb2FkY2FzdGVyVXNlcklkKTsNCiAgICAgICAgaWYgKCFleEluZm8uSXNBZmZpbGlhdGUgJiYgIWV4SW5mby5Jc1BhcnRuZXIpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VBZmZpbGlhdGVkUmVxdWlyZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJWJyb2FkY2FzdGVyTmFtZSUiLCBicm9hZGNhc3RlclVzZXIpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkZhaWxlZCB0byBjcmVhdGUgcG9sbCwgYmVjYXVzZSB7YnJvYWRjYXN0ZXJVc2VyfSBpcyBub3QgcGFydG5lcmVkIG9yIGFmZmlsaWF0ZWQuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShyYXdJbnB1dCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgcGxlYXNlIHByb3ZpZGUgYW4gaW5wdXQuIEV4YW1wbGU6ICd7Y29tbWFuZH0gW1RpdGxlXSB8IFtEdXJhdGlvbl0gfCBbT3B0aW9uMV0gfCBbT3B0aW9uMl0gLi4uJyIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgZ2F2ZSBhbiBlbXB0eSBpbnB1dCIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgSk9iamVjdCBwb2xsID0gR2V0QWN0aXZlUG9sbChicm9hZGNhc3RlclVzZXJJZCkuR2V0QXdhaXRlcigpLkdldFJlc3VsdCgpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAocG9sbCA9PSBudWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICBQb3N0VG9Mb2coIk5vIGFjdGl2ZSBwb2xsIGZvdW5kLiIpOw0KICAgICAgICAgICAgc3RyaW5nW10gcGFydHMgPSByYXdJbnB1dC5TcGxpdCgnfCcpLlNlbGVjdChwYXJ0ID0+IHBhcnQuVHJpbSgpKS5Ub0FycmF5KCk7DQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgaWYgKHBhcnRzLkxlbmd0aCA8IDMpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCBwbGVhc2UgdXNlIHRoZSBjb3JyZWN0IGZvcm1hdCB3aXRoIGF0IGxlYXN0IGEgdGl0bGUgYW5kIHR3byBvcHRpb25zOiAne2NvbW1hbmR9IFtUaXRsZV0gfCBbRHVyYXRpb25dIHwgW09wdGlvbjFdIHwgW09wdGlvbjJdIC4uLiciKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQgdG8gY3JlYXRlIHBvbGwgZm9yICd7dXNlcn0nIGJlY2F1c2Ugb2YgaW5jb3JyZWN0IGZvcm1hdDoge3Jhd0lucHV0fSIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIHN0cmluZyB0aXRsZSA9IHBhcnRzWzBdOw0KICAgICAgICAgICAgaWYgKHRpdGxlLkxlbmd0aCA+IDYwKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgdGhlIHBvbGwgdGl0bGUgY2Fubm90IGV4Y2VlZCA2MCBjaGFyYWN0ZXJzLiAne3RpdGxlfScgaGFzIHt0aXRsZS5MZW5ndGh9IGNoYXJhY3RlcnMuIik7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiRmFpbGVkIHRvIGNyZWF0ZSBwb2xsIGZvciAne3VzZXJ9JyBiZWNhdXNlIG9mIGV4Y2VlZGluZyB0aXRsZSBsaW1pdDoge3Jhd0lucHV0fSAvLyAne3RpdGxlfScgaGFzIHt0aXRsZS5MZW5ndGh9IGNoYXJhY3RlcnMiKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBpbnQgZHVyYXRpb247DQogICAgICAgICAgICBMaXN0PHN0cmluZz4gb3B0aW9uczsNCiAgICAgICAgICAgIGlmIChpbnQuVHJ5UGFyc2UocGFydHNbMV0sIG91dCBkdXJhdGlvbikpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKGR1cmF0aW9uIDwgMTUpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IDE1Ow0KICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJQb2xsIGR1cmF0aW9uIHdhcyBiZWxvdyAxNXMsIHNldHRpbmdzIHRvIDE1cy4gRGVidWc6ICd7dXNlcn0nOiB7cmF3SW5wdXR9Iik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKGR1cmF0aW9uID4gMTgwMCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uID0gMTgwMDsNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiUG9sbCBkdXJhdGlvbiB3YXMgYWJvdmUgMTgwMHMsIHNldHRpbmdzIHRvIDE4MDBzLiBEZWJ1ZzogJ3t1c2VyfSc6IHtyYXdJbnB1dH0iKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBvcHRpb25zID0gcGFydHMuU2tpcCgyKS5Ub0xpc3QoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IGRlZmF1bHRQb2xsRHVyYXRpb247DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiTm8gcG9sbCBkdXJhdGlvbiBwcm92aWRlZCwgZmFsbGluZyBiYWNrIHRvIGRlZmF1bHQgZHVyYXRpb24gb2Yge2RlZmF1bHRQb2xsRHVyYXRpb259IHNlY29uZHMuIERlYnVnOiAne3VzZXJ9Jzoge3Jhd0lucHV0fSIpOw0KICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBwYXJ0cy5Ta2lwKDEpLlRvTGlzdCgpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgaWYgKG9wdGlvbnMuQ291bnQgPCAyIHx8IG9wdGlvbnMuQ291bnQgPiA1KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgcGxlYXNlIHVzZSB0aGUgY29ycmVjdCBmb3JtYXQgd2l0aCBhdCBsZWFzdCBhIHRpdGxlIGFuZCAyLTUgb3B0aW9uczogJ3tjb21tYW5kfSBbVGl0bGVdIHwgW0R1cmF0aW9uXSB8IFtPcHRpb24xXSB8IFtPcHRpb24yXSAuLi4nIik7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiRmFpbGVkIHRvIGNyZWF0ZSBwb2xsIGZvciAne3VzZXJ9JyBiZWNhdXNlIG9mIGluY29ycmVjdCBmb3JtYXQ6IHtyYXdJbnB1dH0iKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBmb3JlYWNoIChzdHJpbmcgb3B0aW9uIGluIG9wdGlvbnMpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKG9wdGlvbi5MZW5ndGggPiAyNSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgdGhlIG9wdGlvbiBcIntvcHRpb259XCIgY2Fubm90IGV4Y2VlZCAyNSBjaGFyYWN0ZXJzLiBJdCBoYXMge29wdGlvbi5MZW5ndGh9IGNoYXJhY3RlcnMuIFBsZWFzZSB0cnkgYWdhaW4uIik7DQogICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkZhaWxlZCB0byBjcmVhdGUgcG9sbCBmb3IgJ3t1c2VyfScgYmVjYXVzZSBvZiBleGNlZWRpbmcgb3B0aW9uIGxpbWl0OiB7cmF3SW5wdXR9IC8vICd7b3B0aW9ufScgaGFzIHtvcHRpb24uTGVuZ3RofSBjaGFyYWN0ZXJzIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBpZiAoIUNQSC5Ud2l0Y2hQb2xsQ3JlYXRlKHRpdGxlLCBvcHRpb25zLCBkdXJhdGlvbiwgMCkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCJGYWlsZWQgdG8gY3JlYXRlIGEgcG9sbC4gV2h5PyBJIGRvbid0IGtub3cgOk8iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUG9sbENyZWF0ZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXBvbGxUaXRsZSUiLCB0aXRsZSkuUmVwbGFjZSgiJXBvbGxPcHRpb25zJSIsIHN0cmluZy5Kb2luKCIsICIsIG9wdGlvbnMuU2VsZWN0KChzLCBpbmRleCkgPT4gJCJbe2luZGV4ICsgMX1dIHtzfSIpKSkuUmVwbGFjZSgiJXBvbGxEdXJhdGlvbiUiLCBkdXJhdGlvbi5Ub1N0cmluZygpKSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBQb3N0VG9Mb2coIkNhbid0IGNyZWF0ZSBuZXcgcG9sbCBiZWNhdXNlIG9mIGFjdGl2ZSBwb2xsOiIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiUG9sbCBUaXRsZToge3BvbGxbInRpdGxlIl19Iik7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJQb2xsIElEOiB7cG9sbFsiaWQiXX0iKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkR1cmF0aW9uOiB7cG9sbFsiZHVyYXRpb24iXX0gc2Vjb25kcyIpOw0KICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNob2ljZSBpbiAoSkFycmF5KXBvbGxbImNob2ljZXMiXSkNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJDaG9pY2Uge2Nob2ljZVsiaWQiXX06IHtjaG9pY2VbInRpdGxlIl19IC0gVm90ZXM6IHtjaG9pY2VbInZvdGVzIl19Iik7DQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZUFscmVhZHlBY3RpdmVQb2xsLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVwb2xsVGl0bGUlIiwgJCJ7cG9sbFsidGl0bGUiXX0iKSk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBFbmRQb2xsKCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgSW5pdExvZygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVNoYXJlZENoYXRDaGVjaygpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBHZXRCcm9hZGNhc3RlckFuZEJvdCgpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyIiwgb3V0IHN0cmluZyB1c2VyKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIGV4SW5mbyA9IENQSC5Ud2l0Y2hHZXRFeHRlbmRlZFVzZXJJbmZvQnlJZChicm9hZGNhc3RlclVzZXJJZCk7DQogICAgICAgIGlmICghZXhJbmZvLklzQWZmaWxpYXRlICYmICFleEluZm8uSXNQYXJ0bmVyKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQWZmaWxpYXRlZFJlcXVpcmVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWUlIiwgYnJvYWRjYXN0ZXJVc2VyKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQgdG8gZW5kIHBvbGwsIGJlY2F1c2Uge2Jyb2FkY2FzdGVyVXNlcn0gaXMgbm90IHBhcnRuZXJlZCBvciBhZmZpbGlhdGVkLiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgSk9iamVjdCBwb2xsID0gR2V0QWN0aXZlUG9sbChicm9hZGNhc3RlclVzZXJJZCkuR2V0QXdhaXRlcigpLkdldFJlc3VsdCgpOw0KICAgICAgICBpZiAocG9sbCA9PSBudWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlTm9BY3RpdmVQb2xsLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWUlIiwgYnJvYWRjYXN0ZXJVc2VyKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coIk5vIGFjdGl2ZSBwb2xsIGZvdW5kIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgY2hvaWNlcyA9IChKQXJyYXkpcG9sbFsiY2hvaWNlcyJdOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHdpdGNoUG9sbFRlcm1pbmF0ZSgkIntwb2xsWyJpZCJdfSIpOyAvLyBwZXcgcGV3IChpIGhvcGUgdGhpcyB3b3JrcywgaSdtIG5vdCBhZmZpbGlhdGVkIGhlaGUgLSB0YXdtYWUpDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGludCBtYXhWb3RlcyA9IGNob2ljZXMuTWF4KGMgPT4gY1sidm90ZXMiXS5WYWx1ZTxpbnQ+KCkpOw0KICAgICAgICB2YXIgdG9wQ2hvaWNlcyA9IGNob2ljZXMuV2hlcmUoYyA9PiBjWyJ2b3RlcyJdLlZhbHVlPGludD4oKSA9PSBtYXhWb3RlcykuVG9MaXN0KCk7DQogICAgICAgIGlmICh0b3BDaG9pY2VzLkNvdW50ID4gMSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHRpdGxlcyA9IHRvcENob2ljZXMuU2VsZWN0KGMgPT4gY1sidGl0bGUiXS5WYWx1ZTxzdHJpbmc+KCkpLlRvTGlzdCgpOw0KICAgICAgICAgICAgc3RyaW5nIHRpZWQ7DQogICAgICAgICAgICBpZiAodGl0bGVzLkNvdW50ID09IDIpDQogICAgICAgICAgICAgICAgdGllZCA9ICQie3RpdGxlc1swXX0gJiB7dGl0bGVzWzFdfSI7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGllZCA9IHN0cmluZy5Kb2luKCIsICIsIHRpdGxlcy5UYWtlKHRpdGxlcy5Db3VudCAtIDEpKSArICIgJiAiICsgdGl0bGVzLkxhc3QoKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIlBvbGwge3BvbGxbInRpdGxlIl0uVmFsdWU8c3RyaW5nPigpfSBoYXMgYmVlbiBlbmRlZC4gVGllIGJldHdlZW46IHt0aWVkfSB3aXRoIHttYXhWb3Rlc30gdm90ZXMgZWFjaCIpOw0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVBvbGxFbmRlZFRpZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXBvbGxUaXRsZSUiLCBwb2xsWyJ0aXRsZSJdLlZhbHVlPHN0cmluZz4oKSkuUmVwbGFjZSgiJXBvbGxXaW5uaW5nT3B0aW9ucyUiLCB0aWVkKS5SZXBsYWNlKCIlcG9sbFdpbm5pbmdPcHRpb25Wb3RlcyUiLCBtYXhWb3Rlcy5Ub1N0cmluZygpKSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgd2lubmVyID0gdG9wQ2hvaWNlc1swXVsidGl0bGUiXS5WYWx1ZTxzdHJpbmc+KCk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJQb2xsIHtwb2xsWyJ0aXRsZSJdLlZhbHVlPHN0cmluZz4oKX0gaGFzIGJlZW4gZW5kZWQuIFdpbm5lcjoge3dpbm5lcn0gd2l0aCB7bWF4Vm90ZXN9IHZvdGVzIik7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUG9sbEVuZGVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVwb2xsVGl0bGUlIiwgcG9sbFsidGl0bGUiXS5WYWx1ZTxzdHJpbmc+KCkpLlJlcGxhY2UoIiVwb2xsV2lubmluZ09wdGlvbiUiLCB3aW5uZXIpLlJlcGxhY2UoIiVwb2xsV2lubmluZ09wdGlvblZvdGVzJSIsIG1heFZvdGVzLlRvU3RyaW5nKCkpKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBib29sIENyZWF0ZVByZWRpY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEdldEJyb2FkY2FzdGVyQW5kQm90KCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInJhd0lucHV0Iiwgb3V0IHN0cmluZyByYXdJbnB1dCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImNvbW1hbmQiLCBvdXQgc3RyaW5nIGNvbW1hbmQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciBleEluZm8gPSBDUEguVHdpdGNoR2V0RXh0ZW5kZWRVc2VySW5mb0J5SWQoYnJvYWRjYXN0ZXJVc2VySWQpOw0KICAgICAgICBpZiAoIWV4SW5mby5Jc0FmZmlsaWF0ZSAmJiAhZXhJbmZvLklzUGFydG5lcikNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZUFmZmlsaWF0ZWRSZXF1aXJlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlYnJvYWRjYXN0ZXJOYW1lJSIsIGJyb2FkY2FzdGVyVXNlcikpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiRmFpbGVkIHRvIGNyZWF0ZSBwcmVkaWN0aW9uLCBiZWNhdXNlIHticm9hZGNhc3RlclVzZXJ9IGlzIG5vdCBwYXJ0bmVyZWQgb3IgYWZmaWxpYXRlZC4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KHJhd0lucHV0KSkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCBwbGVhc2UgcHJvdmlkZSBhbiBpbnB1dC4gRXhhbXBsZTogJ3tjb21tYW5kfSBbVGl0bGVdIHwgW0R1cmF0aW9uXSB8IFtPcHRpb24xXSB8IFtPcHRpb24yXSAuLi4nIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCIne3VzZXJ9JyBnYXZlIGFuIGVtcHR5IGlucHV0Iik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEpPYmplY3QgcHJlZGljdGlvbiA9IEdldEFjdGl2ZVByZWRpY3Rpb24oYnJvYWRjYXN0ZXJVc2VySWQpLkdldEF3YWl0ZXIoKS5HZXRSZXN1bHQoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAocHJlZGljdGlvbiA9PSBudWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICBQb3N0VG9Mb2coIk5vIGFjdGl2ZSBwcmVkaWN0aW9uIGZvdW5kLiIpOw0KICAgICAgICAgICAgc3RyaW5nW10gcGFydHMgPSByYXdJbnB1dC5TcGxpdCgnfCcpLlNlbGVjdChwYXJ0ID0+IHBhcnQuVHJpbSgpKS5Ub0FycmF5KCk7DQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBpZiAocGFydHMuTGVuZ3RoIDwgMykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdCgkIkB7dXNlcn0sIHBsZWFzZSB1c2UgdGhlIGNvcnJlY3QgZm9ybWF0IHdpdGggYXQgbGVhc3QgYSB0aXRsZSBhbmQgdHdvIG9wdGlvbnM6ICd7Y29tbWFuZH0gW1RpdGxlXSB8IFtEdXJhdGlvbl0gfCBbT3B0aW9uMV0gfCBbT3B0aW9uMl0gLi4uJyIpOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkZhaWxlZCB0byBjcmVhdGUgcHJlZGljdGlvbiBmb3IgJ3t1c2VyfScgYmVjYXVzZSBvZiBpbmNvcnJlY3QgZm9ybWF0OiB7cmF3SW5wdXR9Iik7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBzdHJpbmcgdGl0bGUgPSBwYXJ0c1swXTsNCiAgICAgICAgICAgIGlmICh0aXRsZS5MZW5ndGggPiA0NSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdCgkIkB7dXNlcn0sIHRoZSBwcmVkaWN0aW9uIHRpdGxlIGNhbm5vdCBleGNlZWQgNDUgY2hhcmFjdGVycy4gJ3t0aXRsZX0nIGhhcyB7dGl0bGUuTGVuZ3RofSBjaGFyYWN0ZXJzLiIpOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkZhaWxlZCB0byBjcmVhdGUgcHJlZGljdGlvbiBmb3IgJ3t1c2VyfScgYmVjYXVzZSBvZiBleGNlZWRpbmcgdGl0bGUgbGltaXQ6IHtyYXdJbnB1dH0gLy8gJ3t0aXRsZX0nIGhhcyB7dGl0bGUuTGVuZ3RofS80NSBjaGFyYWN0ZXJzIik7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBpbnQgZHVyYXRpb247DQogICAgICAgICAgICBMaXN0PHN0cmluZz4gb3B0aW9uczsNCiAgICAgICAgICAgIGlmIChpbnQuVHJ5UGFyc2UocGFydHNbMV0sIG91dCBkdXJhdGlvbikpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKGR1cmF0aW9uIDwgMzApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IDMwOw0KICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJQcmVkaWN0aW9uIGR1cmF0aW9uIHdhcyBiZWxvdyAzMHMsIHNldHRpbmcgdG8gMzBzLiBEZWJ1ZzogJ3t1c2VyfSc6IHtyYXdJbnB1dH0iKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoZHVyYXRpb24gPiAxODAwKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb24gPSAxODAwOw0KICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJQcmVkaWN0aW9uIGR1cmF0aW9uIHdhcyBhYm92ZSAxODAwcywgc2V0dGluZyB0byAxODAwcy4gRGVidWc6ICd7dXNlcn0nOiB7cmF3SW5wdXR9Iik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgb3B0aW9ucyA9IHBhcnRzLlNraXAoMikuVG9MaXN0KCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZHVyYXRpb24gPSBkZWZhdWx0UHJlZGljdGlvbkR1cmF0aW9uOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIk5vIHByZWRpY3Rpb24gZHVyYXRpb24gcHJvdmlkZWQsIGZhbGxpbmcgYmFjayB0byBkZWZhdWx0IGR1cmF0aW9uIG9mIHtkZWZhdWx0UHJlZGljdGlvbkR1cmF0aW9ufSBzZWNvbmRzLiBEZWJ1ZzogJ3t1c2VyfSc6IHtyYXdJbnB1dH0iKTsNCiAgICAgICAgICAgICAgICBvcHRpb25zID0gcGFydHMuU2tpcCgxKS5Ub0xpc3QoKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgaWYgKG9wdGlvbnMuQ291bnQgPCAyIHx8IG9wdGlvbnMuQ291bnQgPiAxMCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdCgkIkB7dXNlcn0sIHBsZWFzZSB1c2UgdGhlIGNvcnJlY3QgZm9ybWF0IHdpdGggYXQgbGVhc3QgYSB0aXRsZSBhbmQgMi0xMCBvcHRpb25zOiAne2NvbW1hbmR9IFtUaXRsZV0gfCBbRHVyYXRpb25dIHwgW09wdGlvbjFdIHwgW09wdGlvbjJdIC4uLiciKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQgdG8gY3JlYXRlIHByZWRpY3Rpb24gZm9yICd7dXNlcn0nIGJlY2F1c2Ugb2YgaW5jb3JyZWN0IGZvcm1hdDoge3Jhd0lucHV0fSIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgZm9yZWFjaCAoc3RyaW5nIG9wdGlvbiBpbiBvcHRpb25zKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChvcHRpb24uTGVuZ3RoID4gMjUpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdCgkIkB7dXNlcn0sIHRoZSBvcHRpb24gXCJ7b3B0aW9ufVwiIGNhbm5vdCBleGNlZWQgMjUgY2hhcmFjdGVycy4gSXQgaGFzIHtvcHRpb24uTGVuZ3RofSBjaGFyYWN0ZXJzLiBQbGVhc2UgdHJ5IGFnYWluLiIpOw0KICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQgdG8gY3JlYXRlIHByZWRpY3Rpb24gZm9yICd7dXNlcn0nIGJlY2F1c2Ugb2YgZXhjZWVkaW5nIG9wdGlvbiBsaW1pdDoge3Jhd0lucHV0fSAvLyAne29wdGlvbn0nIGhhcyB7b3B0aW9uLkxlbmd0aH0gY2hhcmFjdGVycyIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBzdHJpbmcgY3JlYXRlUHJlZGljdGlvblJlc3BvbnNlID0gQ1BILlR3aXRjaFByZWRpY3Rpb25DcmVhdGUodGl0bGUsIG9wdGlvbnMsIGR1cmF0aW9uKTsNCiAgICAgICAgICAgIHZhciBjcmVhdGVkID0gSk9iamVjdC5QYXJzZShjcmVhdGVQcmVkaWN0aW9uUmVzcG9uc2UpOw0KICAgICAgICAgICAgc3RyaW5nIGNyZWF0ZWRUaXRsZSA9IGNyZWF0ZWRbInRpdGxlIl0uVmFsdWU8c3RyaW5nPigpOw0KICAgICAgICAgICAgc3RyaW5nIHdpbmRvdyA9IGNyZWF0ZWRbInByZWRpY3Rpb25fd2luZG93Il0uVmFsdWU8aW50PigpLlRvU3RyaW5nKCk7DQogICAgICAgICAgICB2YXIgdGl0bGVzID0gKChKQXJyYXkpY3JlYXRlZFsib3V0Y29tZXMiXSkuU2VsZWN0KG8gPT4gb1sidGl0bGUiXS5WYWx1ZTxzdHJpbmc+KCkpLlRvTGlzdCgpOw0KICAgICAgICAgICAgc3RyaW5nIG9wdHM7DQogICAgICAgICAgICBpZiAodGl0bGVzLkNvdW50ID09IDIpDQogICAgICAgICAgICAgICAgb3B0cyA9ICQie3RpdGxlc1swXX0gJiB7dGl0bGVzWzFdfSI7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgb3B0cyA9IHN0cmluZy5Kb2luKCIsICIsIHRpdGxlcy5UYWtlKHRpdGxlcy5Db3VudCAtIDEpKSArICIgJiAiICsgdGl0bGVzLkxhc3QoKTsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VQcmVkaWN0aW9uQ3JlYXRlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlcHJlZGljdGlvblRpdGxlJSIsIGNyZWF0ZWRUaXRsZSkuUmVwbGFjZSgiJXByZWRpY3Rpb25EdXJhdGlvbiUiLCB3aW5kb3cpLlJlcGxhY2UoIiVwcmVkaWN0aW9uT3B0aW9ucyUiLCBvcHRzKSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBQb3N0VG9Mb2coIkNhbid0IGNyZWF0ZSBuZXcgcHJlZGljdGlvbiBiZWNhdXNlIG9mIGFjdGl2ZSBwcmVkaWN0aW9uOiIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiUHJlZGljdGlvbiBUaXRsZToge3ByZWRpY3Rpb25bInRpdGxlIl19Iik7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJQcmVkaWN0aW9uIElEOiB7cHJlZGljdGlvblsiaWQiXX0iKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIlByZWRpY3Rpb24gV2luZG93OiB7cHJlZGljdGlvblsicHJlZGljdGlvbl93aW5kb3ciXX0gc2Vjb25kcyIpOw0KICAgICAgICAgICAgZm9yZWFjaCAodmFyIG91dGNvbWUgaW4gKEpBcnJheSlwcmVkaWN0aW9uWyJvdXRjb21lcyJdKQ0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIk91dGNvbWUge291dGNvbWVbImlkIl19OiB7b3V0Y29tZVsidGl0bGUiXX0gLSBVc2Vyczoge291dGNvbWVbInVzZXJzIl19IC0gUG9pbnRzOiB7b3V0Y29tZVsiY2hhbm5lbF9wb2ludHMiXX0iKTsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VBbHJlYWR5QWN0aXZlUHJlZGljdGlvbi5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlcHJlZGljdGlvblRpdGxlJSIsICQie3ByZWRpY3Rpb25bInRpdGxlIl19IikpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBMb2NrUHJlZGljdGlvbigpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgSW5pdExvZygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghQ2hlY2tTZXR0aW5nc0dsb2JhbCgpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEZldGNoU2V0dGluZ3MoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFTaGFyZWRDaGF0Q2hlY2soKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgR2V0QnJvYWRjYXN0ZXJBbmRCb3QoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyIiwgb3V0IHN0cmluZyB1c2VyKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgZXhJbmZvID0gQ1BILlR3aXRjaEdldEV4dGVuZGVkVXNlckluZm9CeUlkKGJyb2FkY2FzdGVyVXNlcklkKTsNCiAgICAgICAgaWYgKCFleEluZm8uSXNBZmZpbGlhdGUgJiYgIWV4SW5mby5Jc1BhcnRuZXIpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VBZmZpbGlhdGVkUmVxdWlyZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJWJyb2FkY2FzdGVyTmFtZSUiLCBicm9hZGNhc3RlclVzZXIpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkZhaWxlZCB0byBjcmVhdGUgcHJlZGljdGlvbiwgYmVjYXVzZSB7YnJvYWRjYXN0ZXJVc2VyfSBpcyBub3QgcGFydG5lcmVkIG9yIGFmZmlsaWF0ZWQuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEpPYmplY3QgcHJlZGljdGlvbiA9IEdldEFjdGl2ZVByZWRpY3Rpb24oYnJvYWRjYXN0ZXJVc2VySWQpLkdldEF3YWl0ZXIoKS5HZXRSZXN1bHQoKTsNCiAgICAgICAgaWYgKHByZWRpY3Rpb24gPT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZU5vQWN0aXZlUHJlZGljdGlvbi5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlYnJvYWRjYXN0ZXJOYW1lJSIsIGJyb2FkY2FzdGVyVXNlcikpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJObyBhY3RpdmUgcHJlZGljdGlvbiBmb3VuZCIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBzdHJpbmcgc3RhdHVzID0gcHJlZGljdGlvblsic3RhdHVzIl0uVmFsdWU8c3RyaW5nPigpOw0KICAgICAgICBzdHJpbmcgcHJlZGljdGlvblRpdGxlID0gcHJlZGljdGlvblsidGl0bGUiXS5WYWx1ZTxzdHJpbmc+KCk7DQogICAgICAgIHN0cmluZyBwcmVkaWN0aW9uSWQgPSBwcmVkaWN0aW9uWyJpZCJdLlZhbHVlPHN0cmluZz4oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoc3RhdHVzID09ICJMT0NLRUQiKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUHJlZGljdGlvbkFscmVhZHlMb2NrZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXByZWRpY3Rpb25UaXRsZSUiLCBwcmVkaWN0aW9uVGl0bGUpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIlByZWRpY3Rpb24gYWxyZWFkeSBsb2NrZWQ6IHtwcmVkaWN0aW9uVGl0bGV9ICh7cHJlZGljdGlvbklkfSkiKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlR3aXRjaFByZWRpY3Rpb25Mb2NrKHByZWRpY3Rpb25JZCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaW50IHRvdGFsVXNlcnMgPSAoKEpBcnJheSlwcmVkaWN0aW9uWyJvdXRjb21lcyJdKS5TdW0obyA9PiBvWyJ1c2VycyJdLlZhbHVlPGludD4oKSk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgUG9zdFRvTG9nKCQiUHJlZGljdGlvbiBsb2NrZWQ6IHtwcmVkaWN0aW9uVGl0bGV9ICh7cHJlZGljdGlvbklkfSkiKTsNCiAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVByZWRpY3Rpb25Mb2NrZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXByZWRpY3Rpb25UaXRsZSUiLCBwcmVkaWN0aW9uVGl0bGUpLlJlcGxhY2UoIiVwcmVkaWN0aW9uVG90YWxVc2VycyUiLCB0b3RhbFVzZXJzLlRvU3RyaW5nKCkpKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgQ2FuY2VsUHJlZGljdGlvbigpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgSW5pdExvZygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghQ2hlY2tTZXR0aW5nc0dsb2JhbCgpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEZldGNoU2V0dGluZ3MoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFTaGFyZWRDaGF0Q2hlY2soKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgR2V0QnJvYWRjYXN0ZXJBbmRCb3QoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyIiwgb3V0IHN0cmluZyB1c2VyKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgZXhJbmZvID0gQ1BILlR3aXRjaEdldEV4dGVuZGVkVXNlckluZm9CeUlkKGJyb2FkY2FzdGVyVXNlcklkKTsNCiAgICAgICAgaWYgKCFleEluZm8uSXNBZmZpbGlhdGUgJiYgIWV4SW5mby5Jc1BhcnRuZXIpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VBZmZpbGlhdGVkUmVxdWlyZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJWJyb2FkY2FzdGVyTmFtZSUiLCBicm9hZGNhc3RlclVzZXIpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkZhaWxlZCB0byBjcmVhdGUgcHJlZGljdGlvbiwgYmVjYXVzZSB7YnJvYWRjYXN0ZXJVc2VyfSBpcyBub3QgcGFydG5lcmVkIG9yIGFmZmlsaWF0ZWQuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEpPYmplY3QgcHJlZGljdGlvbiA9IEdldEFjdGl2ZVByZWRpY3Rpb24oYnJvYWRjYXN0ZXJVc2VySWQpLkdldEF3YWl0ZXIoKS5HZXRSZXN1bHQoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAocHJlZGljdGlvbiA9PSBudWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlTm9BY3RpdmVQcmVkaWN0aW9uLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWUlIiwgYnJvYWRjYXN0ZXJVc2VyKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coIk5vIGFjdGl2ZSBwcmVkaWN0aW9uIGZvdW5kIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyBwcmVkaWN0aW9uSWQgPSBwcmVkaWN0aW9uWyJpZCJdLlZhbHVlPHN0cmluZz4oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHdpdGNoUHJlZGljdGlvbkNhbmNlbChwcmVkaWN0aW9uSWQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIFBvc3RUb0xvZygkIlByZWRpY3Rpb24gY2FuY2VsZWQ6IHtwcmVkaWN0aW9uSWR9Iik7DQogICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VQcmVkaWN0aW9uQ2FuY2VsbGVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVwcmVkaWN0aW9uVGl0bGUlIiwgcHJlZGljdGlvblsidGl0bGUiXS5WYWx1ZTxzdHJpbmc+KCkpKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgUmVzb2x2ZVByZWRpY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEdldEJyb2FkY2FzdGVyQW5kQm90KCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInJhd0lucHV0Iiwgb3V0IHN0cmluZyByYXdJbnB1dCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIGV4SW5mbyA9IENQSC5Ud2l0Y2hHZXRFeHRlbmRlZFVzZXJJbmZvQnlJZChicm9hZGNhc3RlclVzZXJJZCk7DQogICAgICAgIGlmICghZXhJbmZvLklzQWZmaWxpYXRlICYmICFleEluZm8uSXNQYXJ0bmVyKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQWZmaWxpYXRlZFJlcXVpcmVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWUlIiwgYnJvYWRjYXN0ZXJVc2VyKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQgdG8gY3JlYXRlIHByZWRpY3Rpb24sIGJlY2F1c2Uge2Jyb2FkY2FzdGVyVXNlcn0gaXMgbm90IHBhcnRuZXJlZCBvciBhZmZpbGlhdGVkLiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBKT2JqZWN0IHByZWRpY3Rpb24gPSBHZXRBY3RpdmVQcmVkaWN0aW9uKGJyb2FkY2FzdGVyVXNlcklkKS5HZXRBd2FpdGVyKCkuR2V0UmVzdWx0KCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKHByZWRpY3Rpb24gPT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZU5vQWN0aXZlUHJlZGljdGlvbi5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlYnJvYWRjYXN0ZXJOYW1lJSIsIGJyb2FkY2FzdGVyVXNlcikpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJObyBhY3RpdmUgcHJlZGljdGlvbiBmb3VuZCIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBzdHJpbmcgc3RhdHVzID0gcHJlZGljdGlvblsic3RhdHVzIl0uVmFsdWU8c3RyaW5nPigpOw0KICAgICAgICBpZiAoc3RhdHVzICE9ICJMT0NLRUQiKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUHJlZGljdGlvbk5vdExvY2tlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlcHJlZGljdGlvblRpdGxlJSIsIHByZWRpY3Rpb25bInRpdGxlIl0uVmFsdWU8c3RyaW5nPigpKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJDYW5ub3QgcmVzb2x2ZSBwcmVkaWN0aW9uIGluIHN0YXR1cyB7c3RhdHVzfToge3ByZWRpY3Rpb25bImlkIl0uVmFsdWU8c3RyaW5nPigpfSIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgb3V0Y29tZXMgPSAoSkFycmF5KXByZWRpY3Rpb25bIm91dGNvbWVzIl07DQogICAgICAgIEpPYmplY3QgY2hvc2VuID0gbnVsbDsNCiAgICAgICAgaWYgKGludC5UcnlQYXJzZShyYXdJbnB1dCwgb3V0IGludCBpZHgpKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZHggLT0gMTsNCiAgICAgICAgICAgIGlmIChpZHggPCAwIHx8IGlkeCA+PSBvdXRjb21lcy5Db3VudCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUHJlZGljdGlvbkludmFsaWRPcHRpb24uUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikpOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkludmFsaWQgb3V0Y29tZSBpbmRleDoge3Jhd0lucHV0fSIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY2hvc2VuID0gKEpPYmplY3Qpb3V0Y29tZXNbaWR4XTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIGNob3NlbiA9IG91dGNvbWVzLkNhc3Q8Sk9iamVjdD4oKS5GaXJzdE9yRGVmYXVsdChvID0+IHN0cmluZy5FcXVhbHMob1sidGl0bGUiXS5WYWx1ZTxzdHJpbmc+KCksIHJhd0lucHV0LCBTdHJpbmdDb21wYXJpc29uLk9yZGluYWxJZ25vcmVDYXNlKSk7DQogICAgICAgICAgICBpZiAoY2hvc2VuID09IG51bGwpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVByZWRpY3Rpb25JbnZhbGlkT3B0aW9uLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJJbnZhbGlkIG91dGNvbWUgdGl0bGU6IHtyYXdJbnB1dH0iKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyBwcmVkaWN0aW9uSWQgPSBwcmVkaWN0aW9uWyJpZCJdLlZhbHVlPHN0cmluZz4oKTsNCiAgICAgICAgc3RyaW5nIHdpbm5pbmdJZCA9IGNob3NlblsiaWQiXS5WYWx1ZTxzdHJpbmc+KCk7DQogICAgICAgIHN0cmluZyB3aW5uaW5nVGl0bGUgPSBjaG9zZW5bInRpdGxlIl0uVmFsdWU8c3RyaW5nPigpOw0KICAgICAgICBpbnQgd2lubmluZ1ZvdGVzID0gY2hvc2VuWyJ1c2VycyJdLlZhbHVlPGludD4oKTsNCiAgICAgICAgaW50IHRvdGFsUG9pbnRzID0gb3V0Y29tZXMuU3VtKG8gPT4gb1siY2hhbm5lbF9wb2ludHMiXS5WYWx1ZTxpbnQ+KCkpOw0KICAgICAgICBDUEguVHdpdGNoUHJlZGljdGlvblJlc29sdmUocHJlZGljdGlvbklkLCB3aW5uaW5nSWQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIFBvc3RUb0xvZygkIlByZWRpY3Rpb24gcmVzb2x2ZWQ6IHtwcmVkaWN0aW9uSWR9IC0+IHt3aW5uaW5nSWR9Iik7DQogICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VQcmVkaWN0aW9uUmVzb2x2ZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXByZWRpY3Rpb25UaXRsZSUiLCBwcmVkaWN0aW9uWyJ0aXRsZSJdLlZhbHVlPHN0cmluZz4oKSkuUmVwbGFjZSgiJXByZWRpY3Rpb25XaW5uaW5nT3B0aW9uJSIsIHdpbm5pbmdUaXRsZSkuUmVwbGFjZSgiJXByZWRpY3Rpb25XaW5uaW5nT3B0aW9uVm90ZXMlIiwgd2lubmluZ1ZvdGVzLlRvU3RyaW5nKCkpLlJlcGxhY2UoIiVwcmVkaWN0aW9uVG90YWxQb2ludHMlIiwgdG90YWxQb2ludHMuVG9TdHJpbmcoKSkpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBHZXRPQlNTY2VuZXMoKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEdldEJyb2FkY2FzdGVyQW5kQm90KCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJJZCIsIG91dCBzdHJpbmcgdXNlcklkKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlck5hbWUiLCBvdXQgc3RyaW5nIHVzZXJOYW1lKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAob2JzU2NlbmVzU3VwZXJNb2RzT25seSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKCFJc1N1cGVyTW9kKHVzZXIsIHVzZXJJZCkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVN1cGVyTW9kZXJhdG9yc09ubHkuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJWJyb2FkY2FzdGVyTmFtZSUiLCBicm9hZGNhc3RlclVzZXIpKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGludCBjb25uZWN0aW9uID0gR2V0Q29ubmVjdGVkT0JTSW5kZXgoKTsNCiAgICAgICAgaWYgKGNvbm5lY3Rpb24gPCAwKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlT2JzTm90Q29ubmVjdGVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiT0JTIG5vdCBjb25uZWN0ZWQsIGFib3J0aW5nLiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBzdHJpbmcgZ2V0U2NlbmVMaXN0UmVzcG9uc2VTdHJpbmcgPSBDUEguT2JzU2VuZFJhdygiR2V0U2NlbmVMaXN0IiwgInt9IiwgY29ubmVjdGlvbik7DQogICAgICAgIHZhciByZXNwb25zZSA9IEpPYmplY3QuUGFyc2UoZ2V0U2NlbmVMaXN0UmVzcG9uc2VTdHJpbmcpOw0KICAgICAgICB2YXIgc2NlbmVzID0gcmVzcG9uc2VbInNjZW5lcyJdLldoZXJlKHMgPT4gIW9ic0V4Y2x1ZGVkU2NlbmVMaXN0LkNvbnRhaW5zKChzdHJpbmcpc1sic2NlbmVOYW1lIl0pKTsNCiAgICAgICAgdmFyIHNjZW5lc0xpc3QgPSBzY2VuZXMuU2VsZWN0KHMgPT4gJCJbe3NbInNjZW5lSW5kZXgiXX1dIHtzWyJzY2VuZU5hbWUiXX0iKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAvLyBUaGlzIGlzIHRoZSBIYXVudGVyLVByb3RlY3Rpb24tQ2FzZQ0KICAgICAgICBpZiAoc2NlbmVzTGlzdC5Db3VudCgpID4gMjUpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiV29haCwgaG9sZCB1cCBAe3VzZXJ9LiBAe2Jyb2FkY2FzdGVyVXNlcn0gaGFzIHF1aXRlIGEgZmV3IHNjZW5lcyAod2F5IHRvbyBtYW55KSBhbmQgaXQnZCBwcm9iYWJseSBzcGFtIHRoZSBjaGF0IHRvIGxpc3QgdGhlbSBhbGwgaGVyZS4iKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIlNraXBwaW5nIHNjZW5lIG91dHB1dCB0byBjaGF0LCBiZWNhdXNlIHRoZXkncmUgZnJlYWtpbmcgaG9hcmRpbmcgc2NlbmVzLiBBbW91bnQgb2Ygc2NlbmVzOiB7c2NlbmVzTGlzdC5Db3VudCgpfSIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAob2JzU2NlbmVzU2luZ2xlTWVzc2FnZSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKG9ic1NjZW5lc1doaXNwZXJNZXNzYWdlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmICghQ1BILlNlbmRXaGlzcGVyKHVzZXJOYW1lLCBzdHJpbmcuSm9pbigiLCAiLCBzY2VuZXNMaXN0KSwgZmFsc2UpKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiRmFpbGVkIHRvIHdoaXNwZXIgdG8gJ3t1c2VyTmFtZX0nLiIpOw0KICAgICAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdChzdHJpbmcuSm9pbigiLCAiLCBzY2VuZXNMaXN0KSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KHN0cmluZy5Kb2luKCIsICIsIHNjZW5lc0xpc3QpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChvYnNTY2VuZXNXaGlzcGVyTWVzc2FnZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcyBpbiBzY2VuZXMpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIUNQSC5TZW5kV2hpc3Blcih1c2VyTmFtZSwgJCJbe3NbInNjZW5lSW5kZXgiXX1dIHtzWyJzY2VuZU5hbWUiXX0iLCBmYWxzZSkpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkZhaWxlZCB0byB3aGlzcGVyIHRvICd7dXNlck5hbWV9Jy4iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiW3tzWyJzY2VuZUluZGV4Il19XSB7c1sic2NlbmVOYW1lIl19Iik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHMgaW4gc2NlbmVzKQ0KICAgICAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdCgkIlt7c1sic2NlbmVJbmRleCJdfV0ge3NbInNjZW5lTmFtZSJdfSIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgUG9zdFRvTG9nKCJSZXR1cm5lZCBzY2VuZXM6Iik7DQogICAgICAgIGZvcmVhY2ggKHZhciBzIGluIHNjZW5lcykNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIlt7c1sic2NlbmVJbmRleCJdfV0ge3NbInNjZW5lTmFtZSJdfSIpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBTZXRPYnNTY2VuZSgpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgSW5pdExvZygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghQ2hlY2tTZXR0aW5nc0dsb2JhbCgpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEZldGNoU2V0dGluZ3MoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFTaGFyZWRDaGF0Q2hlY2soKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyIiwgb3V0IHN0cmluZyB1c2VyKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlcklkIiwgb3V0IHN0cmluZyB1c2VySWQpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyTmFtZSIsIG91dCBzdHJpbmcgdXNlck5hbWUpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJyYXdJbnB1dCIsIG91dCBzdHJpbmcgcmF3SW5wdXQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChvYnNTY2VuZXNTdXBlck1vZHNPbmx5KQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoIUlzU3VwZXJNb2QodXNlciwgdXNlcklkKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlU3VwZXJNb2RlcmF0b3JzT25seS5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlYnJvYWRjYXN0ZXJOYW1lJSIsIGJyb2FkY2FzdGVyVXNlcikpOw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UocmF3SW5wdXQpKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlT2JzTm9TY2VuZU5hbWUuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJObyByYXdJbnB1dCBwcm92aWRlZCwgYWJvcnRpbmcuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGludCBjb25uZWN0aW9uID0gR2V0Q29ubmVjdGVkT0JTSW5kZXgoKTsNCiAgICAgICAgaWYgKGNvbm5lY3Rpb24gPCAwKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlT2JzTm90Q29ubmVjdGVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiT0JTIG5vdCBjb25uZWN0ZWQsIGFib3J0aW5nLiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBzdHJpbmcgY3VycmVudFNjZW5lID0gQ1BILk9ic0dldEN1cnJlbnRTY2VuZShjb25uZWN0aW9uKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBzdHJpbmcgcmVzcG9uc2UgPSBDUEguT2JzU2VuZFJhdygiR2V0U2NlbmVMaXN0IiwgInt9IiwgY29ubmVjdGlvbik7DQogICAgICAgIHZhciBzY2VuZXMgPSBKT2JqZWN0LlBhcnNlKHJlc3BvbnNlKVsic2NlbmVzIl07DQogICAgICAgIHN0cmluZyB0YXJnZXROYW1lID0gbnVsbDsNCiAgICAgICAgaW50IHRhcmdldEluZGV4ID0gLTE7DQogICAgICAgIGlmIChpbnQuVHJ5UGFyc2UocmF3SW5wdXQsIG91dCBpbnQgaWR4KSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIG1hdGNoID0gc2NlbmVzLkZpcnN0T3JEZWZhdWx0KHMgPT4gc1sic2NlbmVJbmRleCJdLlZhbHVlPGludD4oKSA9PSBpZHgpOw0KICAgICAgICAgICAgaWYgKG1hdGNoICE9IG51bGwpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGFyZ2V0SW5kZXggPSBpZHg7DQogICAgICAgICAgICAgICAgdGFyZ2V0TmFtZSA9IG1hdGNoWyJzY2VuZU5hbWUiXS5WYWx1ZTxzdHJpbmc+KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgbWF0Y2ggPSBzY2VuZXMuRmlyc3RPckRlZmF1bHQocyA9PiBzdHJpbmcuRXF1YWxzKHNbInNjZW5lTmFtZSJdLlZhbHVlPHN0cmluZz4oKSwgcmF3SW5wdXQsIFN0cmluZ0NvbXBhcmlzb24uT3JkaW5hbElnbm9yZUNhc2UpKTsNCiAgICAgICAgICAgIGlmIChtYXRjaCAhPSBudWxsKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRhcmdldEluZGV4ID0gbWF0Y2hbInNjZW5lSW5kZXgiXS5WYWx1ZTxpbnQ+KCk7DQogICAgICAgICAgICAgICAgdGFyZ2V0TmFtZSA9IG1hdGNoWyJzY2VuZU5hbWUiXS5WYWx1ZTxzdHJpbmc+KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICh0YXJnZXROYW1lID09IG51bGwpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VPYnNOb1N1Y2hTY2VuZS5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIldGFyZ2V0U2NlbmUlIiwgcmF3SW5wdXQpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIlNjZW5lICd7cmF3SW5wdXR9JyBub3QgZm91bmQgaW4gT0JTIHNjZW5lIGxpc3QuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChzdHJpbmcuRXF1YWxzKGN1cnJlbnRTY2VuZSwgdGFyZ2V0TmFtZSwgU3RyaW5nQ29tcGFyaXNvbi5PcmRpbmFsSWdub3JlQ2FzZSkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VPYnNTY2VuZUFscmVhZHlPbi5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIldGFyZ2V0U2NlbmUlIiwgdGFyZ2V0TmFtZSkpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiU2NlbmUgJ3t0YXJnZXROYW1lfScgYWxyZWFkeSBzZWxlY3RlZC4iKTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguT2JzU2V0U2NlbmUodGFyZ2V0TmFtZSwgY29ubmVjdGlvbik7DQogICAgICAgIFBvc3RUb0xvZygkIlNjZW5lIGNoYW5nZWQgdG8gJ3t0YXJnZXROYW1lfScgKGluZGV4IHt0YXJnZXRJbmRleH0pIGJ5IHVzZXIgJ3t1c2VyfScuIik7DQogICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VPYnNTY2VuZUNoYW5nZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXRhcmdldFNjZW5lJSIsIHRhcmdldE5hbWUpLlJlcGxhY2UoIiVvbGRTY2VuZSUiLCBjdXJyZW50U2NlbmUpKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBSZWZyZXNoQWxsQXBwbGljYXRpb25BdWRpb0NhcHR1cmVTb3VyY2VzKCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVNoYXJlZENoYXRDaGVjaygpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VySWQiLCBvdXQgc3RyaW5nIHVzZXJJZCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJOYW1lIiwgb3V0IHN0cmluZyB1c2VyTmFtZSk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKG9ic1NjZW5lc1N1cGVyTW9kc09ubHkpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICghSXNTdXBlck1vZCh1c2VyLCB1c2VySWQpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VTdXBlck1vZGVyYXRvcnNPbmx5LlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWUlIiwgYnJvYWRjYXN0ZXJVc2VyKSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpbnQgY29ubmVjdGlvbiA9IEdldENvbm5lY3RlZE9CU0luZGV4KCk7DQogICAgICAgIGlmIChjb25uZWN0aW9uIDwgMCkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZU9ic05vdENvbm5lY3RlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coIk9CUyBub3QgY29ubmVjdGVkLCBhYm9ydGluZy4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgc3RyaW5nIGdldElucHV0TGlzdFJlc3BvbnNlID0gQ1BILk9ic1NlbmRSYXcoIkdldElucHV0TGlzdCIsICJ7XCJpbnB1dEtpbmRcIjpcIndhc2FwaV9wcm9jZXNzX291dHB1dF9jYXB0dXJlXCJ9IiwgY29ubmVjdGlvbik7DQogICAgICAgIEpPYmplY3QgbGlzdE9iaiA9IEpPYmplY3QuUGFyc2UoZ2V0SW5wdXRMaXN0UmVzcG9uc2UpOw0KICAgICAgICB2YXIgaW5wdXRzID0gbGlzdE9ialsiaW5wdXRzIl0gYXMgSkFycmF5Ow0KICAgICAgICB2YXIgc2V0dGluZ3NMaXN0ID0gbmV3IExpc3Q8KHN0cmluZyBOYW1lLCBpbnQgUHJpb3JpdHksIHN0cmluZyBXaW5kb3cpPigpOw0KICAgICAgICBmb3JlYWNoICh2YXIgaW5wdXQgaW4gaW5wdXRzKQ0KICAgICAgICB7DQogICAgICAgICAgICBzdHJpbmcgbmFtZSA9IGlucHV0P1siaW5wdXROYW1lIl0/LlRvU3RyaW5nKCk7DQogICAgICAgICAgICBzdHJpbmcgZ2V0U2V0dGluZ3NSZXNwb25zZSA9IENQSC5PYnNTZW5kUmF3KCJHZXRJbnB1dFNldHRpbmdzIiwgIntcImlucHV0TmFtZVwiOlwiIiArIG5hbWUgKyAiXCJ9IiwgY29ubmVjdGlvbik7DQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBKT2JqZWN0IHBhcnNlZFNldHRpbmdzID0gSk9iamVjdC5QYXJzZShnZXRTZXR0aW5nc1Jlc3BvbnNlKTsNCiAgICAgICAgICAgIHZhciBzZXR0aW5nc1Rva2VuID0gcGFyc2VkU2V0dGluZ3NbImlucHV0U2V0dGluZ3MiXTsNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIGlmIChzZXR0aW5nc1Rva2VuID09IG51bGwgfHwgc2V0dGluZ3NUb2tlbi5UeXBlICE9IEpUb2tlblR5cGUuT2JqZWN0KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygiV2h5IGlzIGl0IGVtcHR5Pz8gS0VLVyIpOw0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBpbnQgcHJpb3JpdHkgPSAwOw0KICAgICAgICAgICAgdmFyIHByaW9yaXR5VG9rZW4gPSBzZXR0aW5nc1Rva2VuWyJwcmlvcml0eSJdOw0KICAgICAgICAgICAgaWYgKHByaW9yaXR5VG9rZW4gIT0gbnVsbCAmJiBwcmlvcml0eVRva2VuLlR5cGUgPT0gSlRva2VuVHlwZS5JbnRlZ2VyKQ0KICAgICAgICAgICAgICAgIHByaW9yaXR5ID0gcHJpb3JpdHlUb2tlbi5WYWx1ZTxpbnQ+KCk7DQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBzdHJpbmcgd2luZG93ID0gIiI7DQogICAgICAgICAgICB2YXIgd2luZG93VG9rZW4gPSBzZXR0aW5nc1Rva2VuWyJ3aW5kb3ciXTsNCiAgICAgICAgICAgIGlmICh3aW5kb3dUb2tlbiAhPSBudWxsICYmIHdpbmRvd1Rva2VuLlR5cGUgPT0gSlRva2VuVHlwZS5TdHJpbmcpDQogICAgICAgICAgICAgICAgd2luZG93ID0gd2luZG93VG9rZW4uVG9TdHJpbmcoKTsNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIHNldHRpbmdzTGlzdC5BZGQoKG5hbWUsIHByaW9yaXR5LCB3aW5kb3cpKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGludCBjb3VudCA9IDA7DQogICAgICAgIGZvcmVhY2ggKHZhciBpdGVtIGluIHNldHRpbmdzTGlzdCkNCiAgICAgICAgICAgIENQSC5PYnNTZW5kUmF3KCJTZXRJbnB1dFNldHRpbmdzIiwgIntcImlucHV0TmFtZVwiOlwiIiArIGl0ZW0uTmFtZSArICJcIixcImlucHV0U2V0dGluZ3NcIjp7XCJwcmlvcml0eVwiOiIgKyBpdGVtLlByaW9yaXR5ICsgIixcIndpbmRvd1wiOlwiXCJ9LFwib3ZlcmxheVwiOnRydWV9IiwgY29ubmVjdGlvbik7DQogICAgICAgIENQSC5XYWl0KDEwMCk7DQogICAgICAgIGZvcmVhY2ggKHZhciBpdGVtIGluIHNldHRpbmdzTGlzdCkNCiAgICAgICAgew0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiUmVmcmVzaGluZzogJ3tpdGVtLk5hbWV9JzogJ3tpdGVtLldpbmRvd30nIik7DQogICAgICAgICAgICBDUEguT2JzU2VuZFJhdygiU2V0SW5wdXRTZXR0aW5ncyIsICJ7XCJpbnB1dE5hbWVcIjpcIiIgKyBpdGVtLk5hbWUgKyAiXCIsXCJpbnB1dFNldHRpbmdzXCI6e1wicHJpb3JpdHlcIjoiICsgaXRlbS5Qcmlvcml0eSArICIsXCJ3aW5kb3dcIjpcIiIgKyBpdGVtLldpbmRvdyArICJcIn0sXCJvdmVybGF5XCI6dHJ1ZX0iLCBjb25uZWN0aW9uKTsNCiAgICAgICAgICAgIGNvdW50Kys7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VPYnNBbGxBcHBsaWNhdGlvbkF1ZGlvQ2FwdHVyZVNvdXJjZXNSZWZyZXNoZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXNvdXJjZUNvdW50JSIsIGNvdW50LlRvU3RyaW5nKCkpKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBSZWZyZXNoQWxsQnJvd3NlclNvdXJjZXMoKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJJZCIsIG91dCBzdHJpbmcgdXNlcklkKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlck5hbWUiLCBvdXQgc3RyaW5nIHVzZXJOYW1lKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAob2JzU2NlbmVzU3VwZXJNb2RzT25seSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKCFJc1N1cGVyTW9kKHVzZXIsIHVzZXJJZCkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVN1cGVyTW9kZXJhdG9yc09ubHkuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJWJyb2FkY2FzdGVyTmFtZSUiLCBicm9hZGNhc3RlclVzZXIpKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGludCBjb25uZWN0aW9uID0gR2V0Q29ubmVjdGVkT0JTSW5kZXgoKTsNCiAgICAgICAgaWYgKGNvbm5lY3Rpb24gPCAwKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlT2JzTm90Q29ubmVjdGVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiT0JTIG5vdCBjb25uZWN0ZWQsIGFib3J0aW5nLiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBzdHJpbmcgZ2V0SW5wdXRMaXN0UmVzcG9uc2UgPSBDUEguT2JzU2VuZFJhdygiR2V0SW5wdXRMaXN0IiwgIntcImlucHV0S2luZFwiOlwiYnJvd3Nlcl9zb3VyY2VcIn0iLCBjb25uZWN0aW9uKTsNCiAgICAgICAgSk9iamVjdCBsaXN0T2JqID0gSk9iamVjdC5QYXJzZShnZXRJbnB1dExpc3RSZXNwb25zZSk7DQogICAgICAgIHZhciBpbnB1dHMgPSBsaXN0T2JqWyJpbnB1dHMiXSBhcyBKQXJyYXk7DQogICAgICAgIGludCBjb3VudCA9IDA7DQogICAgICAgIGlmIChpbnB1dHMgIT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgZm9yZWFjaCAodmFyIGlucHV0IGluIGlucHV0cykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBzdHJpbmcgbmFtZSA9IGlucHV0P1siaW5wdXROYW1lIl0/LlRvU3RyaW5nKCk7DQogICAgICAgICAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KG5hbWUpKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCJXaHkgaXMgaXQgZW1wdHk/PyBLRUtXIik7DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHN0cmluZyBwYXlsb2FkID0gSnNvbkNvbnZlcnQuU2VyaWFsaXplT2JqZWN0KG5ldyB7IGlucHV0TmFtZSA9IG5hbWUsIHByb3BlcnR5TmFtZSA9ICJyZWZyZXNobm9jYWNoZSIgfSk7DQogICAgICAgICAgICAgICAgQ1BILk9ic1NlbmRSYXcoIlByZXNzSW5wdXRQcm9wZXJ0aWVzQnV0dG9uIiwgcGF5bG9hZCwgY29ubmVjdGlvbik7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiUmVmcmVzaGluZyBicm93c2VyIHNvdXJjZTogJ3tuYW1lfSciKTsNCiAgICAgICAgICAgICAgICBjb3VudCsrOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgUG9zdFRvTG9nKCJObyBpbnB1dHMsIGFib3J0aW5nIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlT2JzQWxsQnJvd3NlclNvdXJjZXNSZWZyZXNoZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXNvdXJjZUNvdW50JSIsIGNvdW50LlRvU3RyaW5nKCkpKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgRW5kU3RyZWFtKCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVNoYXJlZENoYXRDaGVjaygpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VySWQiLCBvdXQgc3RyaW5nIHVzZXJJZCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJOYW1lIiwgb3V0IHN0cmluZyB1c2VyTmFtZSk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInJhd0lucHV0Iiwgb3V0IHN0cmluZyByYXdJbnB1dCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImNvbW1hbmQiLCBvdXQgc3RyaW5nIGNvbW1hbmQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChvYnNTY2VuZXNTdXBlck1vZHNPbmx5KQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoIUlzU3VwZXJNb2QodXNlciwgdXNlcklkKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlU3VwZXJNb2RlcmF0b3JzT25seS5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlYnJvYWRjYXN0ZXJOYW1lJSIsIGJyb2FkY2FzdGVyVXNlcikpOw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaW50IGNvbm5lY3Rpb24gPSBHZXRDb25uZWN0ZWRPQlNJbmRleCgpOw0KICAgICAgICBpZiAoY29ubmVjdGlvbiA8IDApDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VPYnNOb3RDb25uZWN0ZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJPQlMgbm90IGNvbm5lY3RlZCwgYWJvcnRpbmcuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBib29sIGNvbmZpcm1lZCA9IENQSC5HZXRUd2l0Y2hVc2VyVmFyQnlJZDxib29sPih1c2VySWQsICJ0YXdtYWVfTU9EX1RPT0xTX2VuZFN0cmVhbUNvbmZpcm1hdGlvbiIsIGZhbHNlKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFjb25maXJtZWQpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgcGxlYXNlIGNvbmZpcm0gZW5kaW5nIHRoZSBzdHJlYW0gYnkgdHlwaW5nIHRoZSBjb21tbmQgYWdhaW4sIGZvbGxvd2VkIGJ5IHlvdXIgdXNlcm5hbWU6ICd7Y29tbWFuZH0ge3VzZXJOYW1lfSciKTsNCiAgICAgICAgICAgIENQSC5TZXRUd2l0Y2hVc2VyVmFyQnlJZCh1c2VySWQsICJ0YXdtYWVfTU9EX1RPT0xTX2VuZFN0cmVhbUNvbmZpcm1hdGlvbiIsIHRydWUsIGZhbHNlKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIlN1Y2Nlc3NmdWxseSBzZXQgY29uZmlybWF0aW9uIHZhciBmb3Ige3VzZXJ9IGZvciBlbmRpbmcgdGhlIHN0cmVhbS4iKTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKHJhd0lucHV0LlRvTG93ZXIoKSAhPSB1c2VyTmFtZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdCgkIkB7dXNlcn0sIHRvIGNvbmZpcm0gZW5kaW5nIHRoZSBzdHJlYW0sIHlvdSBoYXZlIHRvIGVudGVyIHlvdXIgdXNlcm5hbWUgYWZ0ZXIgdGhlIGNvbW1hbmQ6ICd7Y29tbWFuZH0ge3VzZXJOYW1lfSciKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCIge3VzZXJ9IGZhaWxlZCB0byBlbnRlciB0aGVpciB1c2VybmFtZToge3Jhd0lucHV0fS4iKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgQ1BILk9ic1N0b3BTdHJlYW1pbmcoY29ubmVjdGlvbik7DQogICAgICAgICAgICAgICAgQ1BILlVuc2V0QWxsVXNlcnNWYXIoInRhd21hZV9NT0RfVE9PTFNfZW5kU3RyZWFtQ29uZmlybWF0aW9uIiwgZmFsc2UpOw0KICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VPYnNTdHJlYW1FbmRlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKSk7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiU3RyZWFtIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBlbmRlZCBieSB7dXNlcn0iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgRW5hYmxlUmV3YXJkcygpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgSW5pdExvZygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghQ2hlY2tTZXR0aW5nc0dsb2JhbCgpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEZldGNoU2V0dGluZ3MoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFTaGFyZWRDaGF0Q2hlY2soKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgR2V0QnJvYWRjYXN0ZXJBbmRCb3QoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyIiwgb3V0IHN0cmluZyB1c2VyKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlcklkIiwgb3V0IHN0cmluZyB1c2VySWQpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyTmFtZSIsIG91dCBzdHJpbmcgdXNlck5hbWUpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJyYXdJbnB1dCIsIG91dCBzdHJpbmcgcmF3SW5wdXQpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJjb21tYW5kIiwgb3V0IHN0cmluZyBjb21tYW5kKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgZXhJbmZvID0gQ1BILlR3aXRjaEdldEV4dGVuZGVkVXNlckluZm9CeUlkKGJyb2FkY2FzdGVyVXNlcklkKTsNCiAgICAgICAgaWYgKCFleEluZm8uSXNBZmZpbGlhdGUgJiYgIWV4SW5mby5Jc1BhcnRuZXIpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VBZmZpbGlhdGVkUmVxdWlyZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJWJyb2FkY2FzdGVyTmFtZSUiLCBicm9hZGNhc3RlclVzZXIpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkZhaWxlZCwgYmVjYXVzZSB7YnJvYWRjYXN0ZXJVc2VyfSBpcyBub3QgcGFydG5lcmVkIG9yIGFmZmlsaWF0ZWQuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChjaGFubmVsUmV3YXJkc1N1cGVyTW9kc09ubHkgJiYgIUlzU3VwZXJNb2QodXNlciwgdXNlcklkKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgcmV3YXJkcyA9IENQSC5Ud2l0Y2hHZXRSZXdhcmRzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgYm9vbCBlbmFibGVBbGwgPSBzdHJpbmcuSXNOdWxsT3JFbXB0eShyYXdJbnB1dCkgfHwgcmF3SW5wdXQuRXF1YWxzKCJhbGwiLCBTdHJpbmdDb21wYXJpc29uLk9yZGluYWxJZ25vcmVDYXNlKTsNCiAgICAgICAgdmFyIGdyb3VwTWF0Y2ggPSAhZW5hYmxlQWxsID8gcmV3YXJkcy5GaXJzdE9yRGVmYXVsdChyID0+IHJhd0lucHV0LkVxdWFscyhyLkdyb3VwLCBTdHJpbmdDb21wYXJpc29uLk9yZGluYWxJZ25vcmVDYXNlKSkgOiBudWxsOw0KICAgICAgICBib29sIGdyb3VwRm91bmQgPSBncm91cE1hdGNoICE9IG51bGw7DQogICAgICAgIHN0cmluZyBncm91cE5hbWUgPSBncm91cEZvdW5kID8gZ3JvdXBNYXRjaC5Hcm91cCA6ICJuL2EiOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghZW5hYmxlQWxsICYmICFncm91cEZvdW5kKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgc2luZ2xlTWF0Y2ggPSByZXdhcmRzLkZpcnN0T3JEZWZhdWx0KHIgPT4gcmF3SW5wdXQuRXF1YWxzKHIuVGl0bGUsIFN0cmluZ0NvbXBhcmlzb24uT3JkaW5hbElnbm9yZUNhc2UpKTsNCiAgICAgICAgICAgIGlmIChzaW5nbGVNYXRjaCAhPSBudWxsKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIENQSC5FbmFibGVSZXdhcmQoc2luZ2xlTWF0Y2guSWQpOw0KICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VSZXdhcmRzU2luZ2xlRW5hYmxlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlcmV3YXJkTmFtZSUiLCBzaW5nbGVNYXRjaC5UaXRsZSkpOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIlNpbmdsZSByZXdhcmQgJ3tzaW5nbGVNYXRjaC5UaXRsZX0nIGhhcyBiZWVuIGVuYWJsZWQuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VSZXdhcmRzTm9TdWNoUmV3YXJkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVyZXdhcmROYW1lJSIsIHJhd0lucHV0KS5SZXBsYWNlKCIlY29tbWFuZCUiLCBjb21tYW5kKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJObyBncm91cCBvciByZXdhcmQgZm91bmQgZm9yIGlucHV0ICd7cmF3SW5wdXR9Jy4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKGVuYWJsZUFsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgZm9yZWFjaCAodmFyIGdycCBpbiByZXdhcmRzLlNlbGVjdChyID0+IHIuR3JvdXApLldoZXJlKGcgPT4gIXN0cmluZy5Jc051bGxPckVtcHR5KGcpKS5EaXN0aW5jdCgpKQ0KICAgICAgICAgICAgICAgIENQSC5Ud2l0Y2hSZXdhcmRHcm91cEVuYWJsZShncnApOw0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVJld2FyZHNBbGxFbmFibGVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiV0b3RhbENvdW50JSIsIHJld2FyZHMuQ291bnQuVG9TdHJpbmcoKSkpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiQWxsIHJld2FyZHMgZW5hYmxlZCAodmlhIGdyb3VwIGhlbHBlcnMpLiIpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgQ1BILlR3aXRjaFJld2FyZEdyb3VwRW5hYmxlKGdyb3VwTmFtZSk7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUmV3YXJkc0dyb3VwRW5hYmxlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlZ3JvdXBOYW1lJSIsIGdyb3VwTmFtZSkpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiR3JvdXAgJ3tncm91cE5hbWV9JyBlbmFibGVkICh2aWEgZ3JvdXAgaGVscGVyKS4iKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgRGlzYWJsZVJld2FyZHMoKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEdldEJyb2FkY2FzdGVyQW5kQm90KCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJJZCIsIG91dCBzdHJpbmcgdXNlcklkKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlck5hbWUiLCBvdXQgc3RyaW5nIHVzZXJOYW1lKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygicmF3SW5wdXQiLCBvdXQgc3RyaW5nIHJhd0lucHV0KTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygiY29tbWFuZCIsIG91dCBzdHJpbmcgY29tbWFuZCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIGV4SW5mbyA9IENQSC5Ud2l0Y2hHZXRFeHRlbmRlZFVzZXJJbmZvQnlJZChicm9hZGNhc3RlclVzZXJJZCk7DQogICAgICAgIGlmICghZXhJbmZvLklzQWZmaWxpYXRlICYmICFleEluZm8uSXNQYXJ0bmVyKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQWZmaWxpYXRlZFJlcXVpcmVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWUlIiwgYnJvYWRjYXN0ZXJVc2VyKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQsIGJlY2F1c2Uge2Jyb2FkY2FzdGVyVXNlcn0gaXMgbm90IHBhcnRuZXJlZCBvciBhZmZpbGlhdGVkLiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoY2hhbm5lbFJld2FyZHNTdXBlck1vZHNPbmx5ICYmICFJc1N1cGVyTW9kKHVzZXIsIHVzZXJJZCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIHJld2FyZHMgPSBDUEguVHdpdGNoR2V0UmV3YXJkcygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGJvb2wgZGlzYWJsZUFsbCA9IHN0cmluZy5Jc051bGxPckVtcHR5KHJhd0lucHV0KSB8fCByYXdJbnB1dC5FcXVhbHMoImFsbCIsIFN0cmluZ0NvbXBhcmlzb24uT3JkaW5hbElnbm9yZUNhc2UpOw0KICAgICAgICB2YXIgZ3JvdXBNYXRjaCA9ICFkaXNhYmxlQWxsID8gcmV3YXJkcy5GaXJzdE9yRGVmYXVsdChyID0+IHJhd0lucHV0LkVxdWFscyhyLkdyb3VwLCBTdHJpbmdDb21wYXJpc29uLk9yZGluYWxJZ25vcmVDYXNlKSkgOiBudWxsOw0KICAgICAgICBib29sIGdyb3VwRm91bmQgPSBncm91cE1hdGNoICE9IG51bGw7DQogICAgICAgIHN0cmluZyBncm91cE5hbWUgPSBncm91cEZvdW5kID8gZ3JvdXBNYXRjaC5Hcm91cCA6ICJuL2EiOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghZGlzYWJsZUFsbCAmJiAhZ3JvdXBGb3VuZCkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHNpbmdsZU1hdGNoID0gcmV3YXJkcy5GaXJzdE9yRGVmYXVsdChyID0+IHJhd0lucHV0LkVxdWFscyhyLlRpdGxlLCBTdHJpbmdDb21wYXJpc29uLk9yZGluYWxJZ25vcmVDYXNlKSk7DQogICAgICAgICAgICBpZiAoc2luZ2xlTWF0Y2ggIT0gbnVsbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBDUEguRGlzYWJsZVJld2FyZChzaW5nbGVNYXRjaC5JZCk7DQogICAgICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVJld2FyZHNTaW5nbGVEaXNhYmxlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlcmV3YXJkTmFtZSUiLCBzaW5nbGVNYXRjaC5UaXRsZSkpOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIlNpbmdsZSByZXdhcmQgJ3tzaW5nbGVNYXRjaC5UaXRsZX0nIGhhcyBiZWVuIGRpc2FibGVkLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUmV3YXJkc05vU3VjaFJld2FyZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlcmV3YXJkTmFtZSUiLCByYXdJbnB1dCkuUmVwbGFjZSgiJWNvbW1hbmQlIiwgY29tbWFuZCkpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiTm8gZ3JvdXAgb3IgcmV3YXJkIGZvdW5kIGZvciBpbnB1dCAne3Jhd0lucHV0fScuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChkaXNhYmxlQWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICBmb3JlYWNoICh2YXIgZ3JwIGluIHJld2FyZHMuU2VsZWN0KHIgPT4gci5Hcm91cCkuV2hlcmUoZyA9PiAhc3RyaW5nLklzTnVsbE9yRW1wdHkoZykpLkRpc3RpbmN0KCkpDQogICAgICAgICAgICAgICAgQ1BILlR3aXRjaFJld2FyZEdyb3VwRGlzYWJsZShncnApOw0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVJld2FyZHNBbGxEaXNhYmxlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIldG90YWxDb3VudCUiLCByZXdhcmRzLkNvdW50LlRvU3RyaW5nKCkpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkFsbCByZXdhcmRzIGRpc2FibGVkICh2aWEgZ3JvdXAgaGVscGVycykuIik7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBDUEguVHdpdGNoUmV3YXJkR3JvdXBEaXNhYmxlKGdyb3VwTmFtZSk7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUmV3YXJkc0dyb3VwRGlzYWJsZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJWdyb3VwTmFtZSUiLCBncm91cE5hbWUpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkdyb3VwICd7Z3JvdXBOYW1lfScgZGlzYWJsZWQgKHZpYSBncm91cCBoZWxwZXIpLiIpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBQYXVzZVJld2FyZHMoKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEdldEJyb2FkY2FzdGVyQW5kQm90KCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJJZCIsIG91dCBzdHJpbmcgdXNlcklkKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlck5hbWUiLCBvdXQgc3RyaW5nIHVzZXJOYW1lKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygicmF3SW5wdXQiLCBvdXQgc3RyaW5nIHJhd0lucHV0KTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygiY29tbWFuZCIsIG91dCBzdHJpbmcgY29tbWFuZCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIGV4SW5mbyA9IENQSC5Ud2l0Y2hHZXRFeHRlbmRlZFVzZXJJbmZvQnlJZChicm9hZGNhc3RlclVzZXJJZCk7DQogICAgICAgIGlmICghZXhJbmZvLklzQWZmaWxpYXRlICYmICFleEluZm8uSXNQYXJ0bmVyKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQWZmaWxpYXRlZFJlcXVpcmVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWUlIiwgYnJvYWRjYXN0ZXJVc2VyKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQsIGJlY2F1c2Uge2Jyb2FkY2FzdGVyVXNlcn0gaXMgbm90IHBhcnRuZXJlZCBvciBhZmZpbGlhdGVkLiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoY2hhbm5lbFJld2FyZHNTdXBlck1vZHNPbmx5ICYmICFJc1N1cGVyTW9kKHVzZXIsIHVzZXJJZCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIHJld2FyZHMgPSBDUEguVHdpdGNoR2V0UmV3YXJkcygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGJvb2wgcGF1c2VBbGwgPSBzdHJpbmcuSXNOdWxsT3JFbXB0eShyYXdJbnB1dCkgfHwgcmF3SW5wdXQuRXF1YWxzKCJhbGwiLCBTdHJpbmdDb21wYXJpc29uLk9yZGluYWxJZ25vcmVDYXNlKTsNCiAgICAgICAgdmFyIGdyb3VwTWF0Y2ggPSAhcGF1c2VBbGwgPyByZXdhcmRzLkZpcnN0T3JEZWZhdWx0KHIgPT4gcmF3SW5wdXQuRXF1YWxzKHIuR3JvdXAsIFN0cmluZ0NvbXBhcmlzb24uT3JkaW5hbElnbm9yZUNhc2UpKSA6IG51bGw7DQogICAgICAgIGJvb2wgZ3JvdXBGb3VuZCA9IGdyb3VwTWF0Y2ggIT0gbnVsbDsNCiAgICAgICAgc3RyaW5nIGdyb3VwTmFtZSA9IGdyb3VwRm91bmQgPyBncm91cE1hdGNoLkdyb3VwIDogIm4vYSI7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFwYXVzZUFsbCAmJiAhZ3JvdXBGb3VuZCkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHNpbmdsZU1hdGNoID0gcmV3YXJkcy5GaXJzdE9yRGVmYXVsdChyID0+IHJhd0lucHV0LkVxdWFscyhyLlRpdGxlLCBTdHJpbmdDb21wYXJpc29uLk9yZGluYWxJZ25vcmVDYXNlKSk7DQogICAgICAgICAgICBpZiAoc2luZ2xlTWF0Y2ggIT0gbnVsbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBDUEguUGF1c2VSZXdhcmQoc2luZ2xlTWF0Y2guSWQpOw0KICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VSZXdhcmRzU2luZ2xlUGF1c2VkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVyZXdhcmROYW1lJSIsIHNpbmdsZU1hdGNoLlRpdGxlKSk7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiU2luZ2xlIHJld2FyZCAne3NpbmdsZU1hdGNoLlRpdGxlfScgaGFzIGJlZW4gcGF1c2VkLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUmV3YXJkc05vU3VjaFJld2FyZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlcmV3YXJkTmFtZSUiLCByYXdJbnB1dCkuUmVwbGFjZSgiJWNvbW1hbmQlIiwgY29tbWFuZCkpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiTm8gZ3JvdXAgb3IgcmV3YXJkIGZvdW5kIGZvciBpbnB1dCAne3Jhd0lucHV0fScuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChwYXVzZUFsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgZm9yZWFjaCAodmFyIGdycCBpbiByZXdhcmRzLlNlbGVjdChyID0+IHIuR3JvdXApLldoZXJlKGcgPT4gIXN0cmluZy5Jc051bGxPckVtcHR5KGcpKS5EaXN0aW5jdCgpKQ0KICAgICAgICAgICAgICAgIENQSC5Ud2l0Y2hSZXdhcmRHcm91cFBhdXNlKGdycCk7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUmV3YXJkc0FsbFBhdXNlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIldG90YWxDb3VudCUiLCByZXdhcmRzLkNvdW50LlRvU3RyaW5nKCkpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkFsbCByZXdhcmRzIHBhdXNlZCAodmlhIGdyb3VwIGhlbHBlcnMpLiIpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgQ1BILlR3aXRjaFJld2FyZEdyb3VwUGF1c2UoZ3JvdXBOYW1lKTsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VSZXdhcmRzR3JvdXBQYXVzZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJWdyb3VwTmFtZSUiLCBncm91cE5hbWUpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkdyb3VwICd7Z3JvdXBOYW1lfScgcGF1c2VkICh2aWEgZ3JvdXAgaGVscGVyKS4iKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgVW5wYXVzZVJld2FyZHMoKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEdldEJyb2FkY2FzdGVyQW5kQm90KCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJJZCIsIG91dCBzdHJpbmcgdXNlcklkKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlck5hbWUiLCBvdXQgc3RyaW5nIHVzZXJOYW1lKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygicmF3SW5wdXQiLCBvdXQgc3RyaW5nIHJhd0lucHV0KTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygiY29tbWFuZCIsIG91dCBzdHJpbmcgY29tbWFuZCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIGV4SW5mbyA9IENQSC5Ud2l0Y2hHZXRFeHRlbmRlZFVzZXJJbmZvQnlJZChicm9hZGNhc3RlclVzZXJJZCk7DQogICAgICAgIGlmICghZXhJbmZvLklzQWZmaWxpYXRlICYmICFleEluZm8uSXNQYXJ0bmVyKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQWZmaWxpYXRlZFJlcXVpcmVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWUlIiwgYnJvYWRjYXN0ZXJVc2VyKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQsIGJlY2F1c2Uge2Jyb2FkY2FzdGVyVXNlcn0gaXMgbm90IHBhcnRuZXJlZCBvciBhZmZpbGlhdGVkLiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoY2hhbm5lbFJld2FyZHNTdXBlck1vZHNPbmx5ICYmICFJc1N1cGVyTW9kKHVzZXIsIHVzZXJJZCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIHJld2FyZHMgPSBDUEguVHdpdGNoR2V0UmV3YXJkcygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGJvb2wgdW5wYXVzZUFsbCA9IHN0cmluZy5Jc051bGxPckVtcHR5KHJhd0lucHV0KSB8fCByYXdJbnB1dC5FcXVhbHMoImFsbCIsIFN0cmluZ0NvbXBhcmlzb24uT3JkaW5hbElnbm9yZUNhc2UpOw0KICAgICAgICB2YXIgZ3JvdXBNYXRjaCA9ICF1bnBhdXNlQWxsID8gcmV3YXJkcy5GaXJzdE9yRGVmYXVsdChyID0+IHJhd0lucHV0LkVxdWFscyhyLkdyb3VwLCBTdHJpbmdDb21wYXJpc29uLk9yZGluYWxJZ25vcmVDYXNlKSkgOiBudWxsOw0KICAgICAgICBib29sIGdyb3VwRm91bmQgPSBncm91cE1hdGNoICE9IG51bGw7DQogICAgICAgIHN0cmluZyBncm91cE5hbWUgPSBncm91cEZvdW5kID8gZ3JvdXBNYXRjaC5Hcm91cCA6ICJuL2EiOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghdW5wYXVzZUFsbCAmJiAhZ3JvdXBGb3VuZCkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHNpbmdsZU1hdGNoID0gcmV3YXJkcy5GaXJzdE9yRGVmYXVsdChyID0+IHJhd0lucHV0LkVxdWFscyhyLlRpdGxlLCBTdHJpbmdDb21wYXJpc29uLk9yZGluYWxJZ25vcmVDYXNlKSk7DQogICAgICAgICAgICBpZiAoc2luZ2xlTWF0Y2ggIT0gbnVsbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBDUEguVW5QYXVzZVJld2FyZChzaW5nbGVNYXRjaC5JZCk7DQogICAgICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVJld2FyZHNTaW5nbGVVbnBhdXNlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlcmV3YXJkTmFtZSUiLCBzaW5nbGVNYXRjaC5UaXRsZSkpOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIlNpbmdsZSByZXdhcmQgJ3tzaW5nbGVNYXRjaC5UaXRsZX0nIGhhcyBiZWVuIHVucGF1c2VkLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUmV3YXJkc05vU3VjaFJld2FyZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlcmV3YXJkTmFtZSUiLCByYXdJbnB1dCkuUmVwbGFjZSgiJWNvbW1hbmQlIiwgY29tbWFuZCkpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiTm8gZ3JvdXAgb3IgcmV3YXJkIGZvdW5kIGZvciBpbnB1dCAne3Jhd0lucHV0fScuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICh1bnBhdXNlQWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICBmb3JlYWNoICh2YXIgZ3JwIGluIHJld2FyZHMuU2VsZWN0KHIgPT4gci5Hcm91cCkuV2hlcmUoZyA9PiAhc3RyaW5nLklzTnVsbE9yRW1wdHkoZykpLkRpc3RpbmN0KCkpDQogICAgICAgICAgICAgICAgQ1BILlR3aXRjaFJld2FyZEdyb3VwVW5QYXVzZShncnApOw0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVJld2FyZHNBbGxVbnBhdXNlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIldG90YWxDb3VudCUiLCByZXdhcmRzLkNvdW50LlRvU3RyaW5nKCkpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkFsbCByZXdhcmRzIHVucGF1c2VkICh2aWEgZ3JvdXAgaGVscGVycykuIik7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBDUEguVHdpdGNoUmV3YXJkR3JvdXBVblBhdXNlKGdyb3VwTmFtZSk7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUmV3YXJkc0dyb3VwVW5wYXVzZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJWdyb3VwTmFtZSUiLCBncm91cE5hbWUpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkdyb3VwICd7Z3JvdXBOYW1lfScgdW5wYXVzZWQgKHZpYSBncm91cCBoZWxwZXIpLiIpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBDaGFuZ2VSZXdhcmRDb3N0KCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVNoYXJlZENoYXRDaGVjaygpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBHZXRCcm9hZGNhc3RlckFuZEJvdCgpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VySWQiLCBvdXQgc3RyaW5nIHVzZXJJZCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJOYW1lIiwgb3V0IHN0cmluZyB1c2VyTmFtZSk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInJhd0lucHV0Iiwgb3V0IHN0cmluZyByYXdJbnB1dCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImNvbW1hbmQiLCBvdXQgc3RyaW5nIGNvbW1hbmQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciBleEluZm8gPSBDUEguVHdpdGNoR2V0RXh0ZW5kZWRVc2VySW5mb0J5SWQoYnJvYWRjYXN0ZXJVc2VySWQpOw0KICAgICAgICBpZiAoIWV4SW5mby5Jc0FmZmlsaWF0ZSAmJiAhZXhJbmZvLklzUGFydG5lcikNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZUFmZmlsaWF0ZWRSZXF1aXJlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlYnJvYWRjYXN0ZXJOYW1lJSIsIGJyb2FkY2FzdGVyVXNlcikpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiRmFpbGVkLCBiZWNhdXNlIHticm9hZGNhc3RlclVzZXJ9IGlzIG5vdCBwYXJ0bmVyZWQgb3IgYWZmaWxpYXRlZC4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKGNoYW5uZWxSZXdhcmRzU3VwZXJNb2RzT25seSAmJiAhSXNTdXBlck1vZCh1c2VyLCB1c2VySWQpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShyYXdJbnB1dCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgcGxlYXNlIHVzZSB0aGUgY29ycmVjdCBmb3JtYXQ6ICd7Y29tbWFuZH0gW1Jld2FyZCBOYW1lXSA8Q29zdD4iKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygicmF3SW5wdXQgaXMgZW1wdHkuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciBtYXRjaCA9IFN5c3RlbS5UZXh0LlJlZ3VsYXJFeHByZXNzaW9ucy5SZWdleC5NYXRjaChyYXdJbnB1dCwgQCJeKC4qKTxccyooXGQrKVxzKj4kIik7DQogICAgICAgIGlmICghbWF0Y2guU3VjY2VzcykNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCBwbGVhc2UgdXNlIHRoZSBjb3JyZWN0IGZvcm1hdCAobWFrZSBzdXJlIHRoZSBjb3N0IGlzIGluIHRoZXNlICc8PicgYnJhY2tldHMpOiAne2NvbW1hbmR9IFtSZXdhcmQgTmFtZV0gPENvc3Q+Iik7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJJbnZhbGlkIGZvcm1hdCAne3Jhd0lucHV0fScuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBzdHJpbmcgcmV3YXJkTmFtZSA9IG1hdGNoLkdyb3Vwc1sxXS5WYWx1ZS5UcmltKCk7DQogICAgICAgIHN0cmluZyBjb3N0U3RyID0gbWF0Y2guR3JvdXBzWzJdLlZhbHVlOw0KICAgICAgICBpZiAoIWludC5UcnlQYXJzZShjb3N0U3RyLCBvdXQgaW50IG5ld0Nvc3QpIHx8IG5ld0Nvc3QgPCAxKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdCgkIkB7dXNlcn0sIHRoZSByZXdhcmQgY29zdCBoYXMgdG8gYmUgYSB3aG9sZSBudW1iZXIgYW5kIGdyZWF0ZXIgdGhhbiAwLiIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiSW52YWxpZCBjb3N0ICd7Y29zdFN0cn0nLiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgcmV3YXJkcyA9IENQSC5Ud2l0Y2hHZXRSZXdhcmRzKCk7DQogICAgICAgIHZhciByZXdhcmQgPSByZXdhcmRzLkZpcnN0T3JEZWZhdWx0KHIgPT4gcmV3YXJkTmFtZS5FcXVhbHMoci5UaXRsZSwgU3RyaW5nQ29tcGFyaXNvbi5PcmRpbmFsSWdub3JlQ2FzZSkpOw0KICAgICAgICBpZiAocmV3YXJkID09IG51bGwpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VSZXdhcmRzTm9TdWNoUmV3YXJkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVyZXdhcmROYW1lJSIsIHJld2FyZE5hbWUpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIk5vIHJld2FyZCBmb3VuZCB3aXRoIG5hbWUgJ3tyZXdhcmROYW1lfScuIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coIkF2YWlsYWJsZSByZXdhcmRzOiIpOw0KICAgICAgICAgICAgZm9yZWFjaCAodmFyIF9yZXdhcmQgaW4gcmV3YXJkcykNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2cocmV3YXJkLlRpdGxlICsgJCIgLyBPd25lZD8ge3Jld2FyZC5Jc091cnN9Iik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghcmV3YXJkLklzT3VycykNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVJld2FyZHNOb3RPd25lZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlcmV3YXJkTmFtZSUiLCByZXdhcmROYW1lKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCIne3Jld2FyZC5UaXRsZX0nIG5vdCBvd25lZCBieSBTdHJlYW1lci5ib3QuIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coIkF2YWlsYWJsZSByZXdhcmRzOiIpOw0KICAgICAgICAgICAgZm9yZWFjaCAodmFyIF9yZXdhcmQgaW4gcmV3YXJkcykNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2cocmV3YXJkLlRpdGxlICsgJCIgLyBPd25lZD8ge3Jld2FyZC5Jc091cnN9Iik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5VcGRhdGVSZXdhcmRDb3N0KHJld2FyZC5JZCwgbmV3Q29zdCk7DQogICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VSZXdhcmRzQ29zdENoYW5nZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXJld2FyZE5hbWUlIiwgcmV3YXJkLlRpdGxlKS5SZXBsYWNlKCIlb2xkQ29zdCUiLCByZXdhcmQuQ29zdC5Ub1N0cmluZygpKS5SZXBsYWNlKCIlbmV3Q29zdCUiLCBuZXdDb3N0LlRvU3RyaW5nKCkpKTsNCiAgICAgICAgUG9zdFRvTG9nKCQiUmV3YXJkICd7cmV3YXJkLlRpdGxlfScgY29zdCBjaGFuZ2VkIHRvIHtuZXdDb3N0fS4iKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBDaGFuZ2VSZXdhcmRUaXRsZSgpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgSW5pdExvZygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghQ2hlY2tTZXR0aW5nc0dsb2JhbCgpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEZldGNoU2V0dGluZ3MoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFTaGFyZWRDaGF0Q2hlY2soKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgR2V0QnJvYWRjYXN0ZXJBbmRCb3QoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyIiwgb3V0IHN0cmluZyB1c2VyKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlcklkIiwgb3V0IHN0cmluZyB1c2VySWQpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyTmFtZSIsIG91dCBzdHJpbmcgdXNlck5hbWUpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJyYXdJbnB1dCIsIG91dCBzdHJpbmcgcmF3SW5wdXQpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJjb21tYW5kIiwgb3V0IHN0cmluZyBjb21tYW5kKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgZXhJbmZvID0gQ1BILlR3aXRjaEdldEV4dGVuZGVkVXNlckluZm9CeUlkKGJyb2FkY2FzdGVyVXNlcklkKTsNCiAgICAgICAgaWYgKCFleEluZm8uSXNBZmZpbGlhdGUgJiYgIWV4SW5mby5Jc1BhcnRuZXIpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VBZmZpbGlhdGVkUmVxdWlyZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJWJyb2FkY2FzdGVyTmFtZSUiLCBicm9hZGNhc3RlclVzZXIpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkZhaWxlZCwgYmVjYXVzZSB7YnJvYWRjYXN0ZXJVc2VyfSBpcyBub3QgcGFydG5lcmVkIG9yIGFmZmlsaWF0ZWQuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChjaGFubmVsUmV3YXJkc1N1cGVyTW9kc09ubHkgJiYgIUlzU3VwZXJNb2QodXNlciwgdXNlcklkKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkocmF3SW5wdXQpKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdCgkIkB7dXNlcn0sIHBsZWFzZSB1c2UgdGhlIGNvcnJlY3QgZm9ybWF0IChtYWtlIHN1cmUgdGhlIG5ldyB0aXRsZSBpcyBpbiB0aGVzZSAnPD4nIGJyYWNrZXRzKTogJ3tjb21tYW5kfSBbUmV3YXJkIE5hbWVdIDxOZXcgVGl0bGU+JyIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJyYXdJbnB1dCBpcyBlbXB0eS4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIG1hdGNoID0gU3lzdGVtLlRleHQuUmVndWxhckV4cHJlc3Npb25zLlJlZ2V4Lk1hdGNoKHJhd0lucHV0LCBAIl4oLiopPFxzKiguKylccyo+JCIpOw0KICAgICAgICBpZiAoIW1hdGNoLlN1Y2Nlc3MpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgcGxlYXNlIHVzZSB0aGUgY29ycmVjdCBmb3JtYXQ6ICd7Y29tbWFuZH0gW1Jld2FyZCBOYW1lXSA8TmV3IFRpdGxlPiciKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkludmFsaWQgZm9ybWF0ICd7cmF3SW5wdXR9Jy4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHN0cmluZyBvbGROYW1lID0gbWF0Y2guR3JvdXBzWzFdLlZhbHVlLlRyaW0oKTsNCiAgICAgICAgc3RyaW5nIG5ld1RpdGxlID0gbWF0Y2guR3JvdXBzWzJdLlZhbHVlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChuZXdUaXRsZS5MZW5ndGggPiA0NSkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCBuZXcgdGl0bGUgbXVzdCBiZSBhdCBtb3N0IDQ1IGNoYXJhY3RlcnMuIFlvdXJzIGhhcyB7bmV3VGl0bGUuTGVuZ3RofSBjaGFyYWN0ZXJzLiIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiTmV3IHRpdGxlIHRvbyBsb25nICh7bmV3VGl0bGUuTGVuZ3RofSBjaGFycyk6IHtuZXdUaXRsZX0iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciByZXdhcmRzID0gQ1BILlR3aXRjaEdldFJld2FyZHMoKTsNCiAgICAgICAgaWYgKHJld2FyZHMuQW55KHIgPT4gci5UaXRsZS5FcXVhbHMobmV3VGl0bGUsIFN0cmluZ0NvbXBhcmlzb24uT3JkaW5hbElnbm9yZUNhc2UpKSkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCBhIHJld2FyZCB3aXRoIHRoYXQgdGl0bGUgYWxyZWFkeSBleGlzdHMuIFBsZWFzZSBjaG9vc2UgYSB1bmlxdWUgbmFtZSBhbmQgdHJ5IGFnYWluLiIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiVGl0bGUgJ3tuZXdUaXRsZX0nIGlzIG5vdCB1bmlxdWUuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciByZXdhcmQgPSByZXdhcmRzLkZpcnN0T3JEZWZhdWx0KHIgPT4gb2xkTmFtZS5FcXVhbHMoci5UaXRsZSwgU3RyaW5nQ29tcGFyaXNvbi5PcmRpbmFsSWdub3JlQ2FzZSkpOw0KICAgICAgICBpZiAocmV3YXJkID09IG51bGwpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VSZXdhcmRzTm9TdWNoUmV3YXJkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVyZXdhcmROYW1lJSIsIG9sZE5hbWUpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIk5vIHJld2FyZCBmb3VuZCB3aXRoIG5hbWUgJ3tvbGROYW1lfScuIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coIkF2YWlsYWJsZSByZXdhcmRzOiIpOw0KICAgICAgICAgICAgZm9yZWFjaCAodmFyIHJ3IGluIHJld2FyZHMpDQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKHJ3LlRpdGxlICsgJCIgLyBPd25lZD8ge3J3LklzT3Vyc30iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFyZXdhcmQuSXNPdXJzKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUmV3YXJkc05vdE93bmVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVyZXdhcmROYW1lJSIsIG9sZE5hbWUpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIid7cmV3YXJkLlRpdGxlfScgbm90IG93bmVkIGJ5IFN0cmVhbWVyLmJvdC4iKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiQXZhaWxhYmxlIHJld2FyZHM6Iik7DQogICAgICAgICAgICBmb3JlYWNoICh2YXIgcncgaW4gcmV3YXJkcykNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2cocncuVGl0bGUgKyAkIiAvIE93bmVkPyB7cncuSXNPdXJzfSIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVXBkYXRlUmV3YXJkVGl0bGUocmV3YXJkLklkLCBuZXdUaXRsZSk7DQogICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VSZXdhcmRzVGl0bGVDaGFuZ2VkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVyZXdhcmROYW1lJSIsIHJld2FyZC5UaXRsZSkuUmVwbGFjZSgiJW5ld1RpdGxlJSIsIG5ld1RpdGxlKS5SZXBsYWNlKCIlb2xkVGl0bGUlIiwgcmV3YXJkLlRpdGxlKSk7DQogICAgICAgIFBvc3RUb0xvZygkIlJld2FyZCAne3Jld2FyZC5UaXRsZX0nIHRpdGxlIGNoYW5nZWQgZnJvbSAne3Jld2FyZC5UaXRsZX0nIHRvICd7bmV3VGl0bGV9Jy4iKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBDaGFuZ2VSZXdhcmRQcm9tcHQoKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEdldEJyb2FkY2FzdGVyQW5kQm90KCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJJZCIsIG91dCBzdHJpbmcgdXNlcklkKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlck5hbWUiLCBvdXQgc3RyaW5nIHVzZXJOYW1lKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygicmF3SW5wdXQiLCBvdXQgc3RyaW5nIHJhd0lucHV0KTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygiY29tbWFuZCIsIG91dCBzdHJpbmcgY29tbWFuZCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIGV4SW5mbyA9IENQSC5Ud2l0Y2hHZXRFeHRlbmRlZFVzZXJJbmZvQnlJZChicm9hZGNhc3RlclVzZXJJZCk7DQogICAgICAgIGlmICghZXhJbmZvLklzQWZmaWxpYXRlICYmICFleEluZm8uSXNQYXJ0bmVyKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQWZmaWxpYXRlZFJlcXVpcmVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWUlIiwgYnJvYWRjYXN0ZXJVc2VyKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQsIGJlY2F1c2Uge2Jyb2FkY2FzdGVyVXNlcn0gaXMgbm90IHBhcnRuZXJlZCBvciBhZmZpbGlhdGVkLiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoY2hhbm5lbFJld2FyZHNTdXBlck1vZHNPbmx5ICYmICFJc1N1cGVyTW9kKHVzZXIsIHVzZXJJZCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KHJhd0lucHV0KSkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCBwbGVhc2UgdXNlIHRoZSBjb3JyZWN0IGZvcm1hdCAobWFrZSBzdXJlIHRoZSBuZXcgcHJvbXB0IGlzIGluIHRoZXNlICc8PicgYnJhY2tldHMpOiAne2NvbW1hbmR9IFtSZXdhcmQgTmFtZV0gPE5ldyBQcm9tcHQ+JyIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJyYXdJbnB1dCBpcyBlbXB0eS4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIG1hdGNoID0gU3lzdGVtLlRleHQuUmVndWxhckV4cHJlc3Npb25zLlJlZ2V4Lk1hdGNoKHJhd0lucHV0LCBAIl4oLiopPFxzKiguKylccyo+JCIpOw0KICAgICAgICBpZiAoIW1hdGNoLlN1Y2Nlc3MpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgcGxlYXNlIHVzZSB0aGUgY29ycmVjdCBmb3JtYXQ6ICd7Y29tbWFuZH0gW1Jld2FyZCBOYW1lXSA8TmV3IFByb21wdD4nIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJJbnZhbGlkIGZvcm1hdCAne3Jhd0lucHV0fScuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBzdHJpbmcgcmV3YXJkTmFtZSA9IG1hdGNoLkdyb3Vwc1sxXS5WYWx1ZS5UcmltKCk7DQogICAgICAgIHN0cmluZyBuZXdQcm9tcHQgPSBtYXRjaC5Hcm91cHNbMl0uVmFsdWU7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKG5ld1Byb21wdC5MZW5ndGggPiAyMDApDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgbmV3IHByb21wdCBtdXN0IGJlIGF0IG1vc3QgMjAwIGNoYXJhY3RlcnMuIFlvdXJzIGhhcyB7bmV3UHJvbXB0Lkxlbmd0aH0gY2hhcmFjdGVycy4iKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIk5ldyBwcm9tcHQgdG9vIGxvbmcgKHtuZXdQcm9tcHQuTGVuZ3RofSBjaGFycyk6IHtuZXdQcm9tcHR9Iik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgcmV3YXJkcyA9IENQSC5Ud2l0Y2hHZXRSZXdhcmRzKCk7DQogICAgICAgIHZhciByZXdhcmQgPSByZXdhcmRzLkZpcnN0T3JEZWZhdWx0KHIgPT4gcmV3YXJkTmFtZS5FcXVhbHMoci5UaXRsZSwgU3RyaW5nQ29tcGFyaXNvbi5PcmRpbmFsSWdub3JlQ2FzZSkpOw0KICAgICAgICBpZiAocmV3YXJkID09IG51bGwpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VSZXdhcmRzTm9TdWNoUmV3YXJkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVyZXdhcmROYW1lJSIsIHJld2FyZE5hbWUpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIk5vIHJld2FyZCBmb3VuZCB3aXRoIG5hbWUgJ3tyZXdhcmROYW1lfScuIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coIkF2YWlsYWJsZSByZXdhcmRzOiIpOw0KICAgICAgICAgICAgZm9yZWFjaCAodmFyIHJ3IGluIHJld2FyZHMpDQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKHJ3LlRpdGxlICsgJCIgLyBPd25lZD8ge3J3LklzT3Vyc30iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFyZXdhcmQuSXNPdXJzKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUmV3YXJkc05vdE93bmVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVyZXdhcmROYW1lJSIsIHJld2FyZE5hbWUpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIid7cmV3YXJkLlRpdGxlfScgbm90IG93bmVkIGJ5IFN0cmVhbWVyLmJvdC4iKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiQXZhaWxhYmxlIHJld2FyZHM6Iik7DQogICAgICAgICAgICBmb3JlYWNoICh2YXIgcncgaW4gcmV3YXJkcykNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2cocncuVGl0bGUgKyAkIiAvIE93bmVkPyB7cncuSXNPdXJzfSIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVXBkYXRlUmV3YXJkUHJvbXB0KHJld2FyZC5JZCwgbmV3UHJvbXB0KTsNCiAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVJld2FyZHNQcm9tcHRDaGFuZ2VkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVyZXdhcmROYW1lJSIsIHJld2FyZC5UaXRsZSkuUmVwbGFjZSgiJW5ld1Byb21wdCUiLCBuZXdQcm9tcHQpKTsNCiAgICAgICAgUG9zdFRvTG9nKCQiUmV3YXJkICd7cmV3YXJkLlRpdGxlfScgcHJvbXB0IGNoYW5nZWQgdG8gJ3tuZXdQcm9tcHR9Jy4iKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBDaGFuZ2VSZXdhcmRDb29sZG93bigpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFTaGFyZWRDaGF0Q2hlY2soKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBHZXRCcm9hZGNhc3RlckFuZEJvdCgpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VySWQiLCBvdXQgc3RyaW5nIHVzZXJJZCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInJhd0lucHV0Iiwgb3V0IHN0cmluZyByYXdJbnB1dCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImNvbW1hbmQiLCBvdXQgc3RyaW5nIGNvbW1hbmQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciBleEluZm8gPSBDUEguVHdpdGNoR2V0RXh0ZW5kZWRVc2VySW5mb0J5SWQoYnJvYWRjYXN0ZXJVc2VySWQpOw0KICAgICAgICBpZiAoIWV4SW5mby5Jc0FmZmlsaWF0ZSAmJiAhZXhJbmZvLklzUGFydG5lcikNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZUFmZmlsaWF0ZWRSZXF1aXJlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlYnJvYWRjYXN0ZXJOYW1lJSIsIGJyb2FkY2FzdGVyVXNlcikpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJCcm9hZGNhc3RlciBub3QgYWZmaWxpYXRlIG9yIHBhcnRuZXIuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChjaGFubmVsUmV3YXJkc1N1cGVyTW9kc09ubHkgJiYgIUlzU3VwZXJNb2QodXNlciwgdXNlcklkKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShyYXdJbnB1dCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgcGxlYXNlIHVzZSB0aGUgY29ycmVjdCBmb3JtYXQgKG1ha2Ugc3VyZSB0aGUgY29vbGRvd24gaXMgaW4gdGhlc2UgJzw+JyBicmFja2V0cyk6ICd7Y29tbWFuZH0gW1Jld2FyZCBOYW1lXSA8Q29vbGRvd24+JyIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJGYWlsZWQuIHJhd0lucHV0IGlzIGVtcHR5LiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgbWF0Y2ggPSBSZWdleC5NYXRjaChyYXdJbnB1dCwgQCJeKC4qKTxccyooLT9cZCspXHMqPiQiKTsNCiAgICAgICAgaWYgKCFtYXRjaC5TdWNjZXNzKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdCgkIkB7dXNlcn0sIHBsZWFzZSB1c2UgdGhlIGNvcnJlY3QgZm9ybWF0IChtYWtlIHN1cmUgdGhlIGNvb2xkb3duIGlzIGluIHRoZXNlICc8PicgYnJhY2tldHMpOiAne2NvbW1hbmR9IFtSZXdhcmQgTmFtZV0gPENvb2xkb3duPiciKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkludmFsaWQgZm9ybWF0ICd7cmF3SW5wdXR9Jy4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgc3RyaW5nIHJld2FyZE5hbWUgPSBtYXRjaC5Hcm91cHNbMV0uVmFsdWUuVHJpbSgpOw0KICAgICAgICBpZiAoIWludC5UcnlQYXJzZShtYXRjaC5Hcm91cHNbMl0uVmFsdWUsIG91dCBpbnQgbmV3Q29vbGRvd24pKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdCgkIkB7dXNlcn0sIHRoZSBjb29sZG93biBtdXN0IGJlIGEgd2hvbGUgbnVtYmVyLiIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiSW52YWxpZCBjb29sZG93biAne21hdGNoLkdyb3Vwc1syXS5WYWx1ZX0nLiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgcmV3YXJkID0gQ1BILlR3aXRjaEdldFJld2FyZHMoKS5GaXJzdE9yRGVmYXVsdChyID0+IHJld2FyZE5hbWUuRXF1YWxzKHIuVGl0bGUsIFN0cmluZ0NvbXBhcmlzb24uT3JkaW5hbElnbm9yZUNhc2UpKTsNCiAgICAgICAgaWYgKHJld2FyZCA9PSBudWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUmV3YXJkc05vU3VjaFJld2FyZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlcmV3YXJkTmFtZSUiLCByZXdhcmROYW1lKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJSZXdhcmQgJ3tyZXdhcmROYW1lfScgbm90IGZvdW5kLiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCFyZXdhcmQuSXNPdXJzKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUmV3YXJkc05vdE93bmVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVyZXdhcmROYW1lJSIsIHJld2FyZC5UaXRsZSkpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiUmV3YXJkICd7cmV3YXJkLlRpdGxlfScgbm90IG93bmVkLiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIoXywgXywgXywgXywgZ2xvYmFsRW5hYmxlZCwgZ2xvYmFsU2Vjb25kcykgPSBHZXRBZGRpdGlvbmFsUmV3YXJkSW5mbyhicm9hZGNhc3RlclVzZXJJZCwgcmV3YXJkLlRpdGxlLCByZXdhcmQuSWQpLkdldEF3YWl0ZXIoKS5HZXRSZXN1bHQoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBib29sIHN1Y2Nlc3MgPSBVcGRhdGVSZXdhcmRHbG9iYWxDb29sZG93bihicm9hZGNhc3RlclVzZXJJZCwgcmV3YXJkLklkLCBuZXdDb29sZG93biA+IDAsIG5ld0Nvb2xkb3duID4gMCA/IChpbnQ/ICluZXdDb29sZG93biA6IG51bGwpLkdldEF3YWl0ZXIoKS5HZXRSZXN1bHQoKTsNCiAgICAgICAgaWYgKCFzdWNjZXNzKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdCgkIkB7dXNlcn0sIGZhaWxlZCB0byB1cGRhdGUgY29vbGRvd24gZm9yICd7cmV3YXJkLlRpdGxlfScuIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJBUEkgY2FsbCBmYWlsZWQgZm9yICd7cmV3YXJkLlRpdGxlfScuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChuZXdDb29sZG93biA+IDApDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VSZXdhcmRzR2xvYmFsQ29vbGRvd25FbmFibGVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVyZXdhcmROYW1lJSIsIHJld2FyZC5UaXRsZSkuUmVwbGFjZSgiJW9sZENvb2xkb3duJSIsIGdsb2JhbFNlY29uZHMuVG9TdHJpbmcoKSkuUmVwbGFjZSgiJW5ld0Nvb2xkb3duJSIsIG5ld0Nvb2xkb3duLlRvU3RyaW5nKCkpKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChnbG9iYWxFbmFibGVkKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUmV3YXJkc0dsb2JhbENvb2xkb3duRGlzYWJsZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXJld2FyZE5hbWUlIiwgcmV3YXJkLlRpdGxlKS5SZXBsYWNlKCIlb2xkQ29vbGRvd24lIiwgZ2xvYmFsU2Vjb25kcy5Ub1N0cmluZygpKSk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIFBvc3RUb0xvZygkIkNoYW5nZVJld2FyZEdsb2JhbENvb2xkb3duIHN1Y2NlZWRlZDogcmV3YXJkICd7cmV3YXJkLlRpdGxlfScgY29vbGRvd24gY2hhbmdlZCBmcm9tICIgKyAkInsoZ2xvYmFsRW5hYmxlZCA/IGdsb2JhbFNlY29uZHMuVG9TdHJpbmcoKSA6ICJkaXNhYmxlZCIpfSB0byAiICsgJCJ7KG5ld0Nvb2xkb3duID4gMCA/IG5ld0Nvb2xkb3duLlRvU3RyaW5nKCkgOiAiZGlzYWJsZWQiKX0uIik7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgQ2hhbmdlUmV3YXJkTWF4UGVyU3RyZWFtKCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgR2V0QnJvYWRjYXN0ZXJBbmRCb3QoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyIiwgb3V0IHN0cmluZyB1c2VyKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlcklkIiwgb3V0IHN0cmluZyB1c2VySWQpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJyYXdJbnB1dCIsIG91dCBzdHJpbmcgcmF3SW5wdXQpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJjb21tYW5kIiwgb3V0IHN0cmluZyBjb21tYW5kKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgZXhJbmZvID0gQ1BILlR3aXRjaEdldEV4dGVuZGVkVXNlckluZm9CeUlkKGJyb2FkY2FzdGVyVXNlcklkKTsNCiAgICAgICAgaWYgKCFleEluZm8uSXNBZmZpbGlhdGUgJiYgIWV4SW5mby5Jc1BhcnRuZXIpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VBZmZpbGlhdGVkUmVxdWlyZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJWJyb2FkY2FzdGVyTmFtZSUiLCBicm9hZGNhc3RlclVzZXIpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiQnJvYWRjYXN0ZXIgbXVzdCBiZSBhZmZpbGlhdGUgb3IgcGFydG5lci4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKGNoYW5uZWxSZXdhcmRzU3VwZXJNb2RzT25seSAmJiAhSXNTdXBlck1vZCh1c2VyLCB1c2VySWQpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKHJhd0lucHV0KSkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCBwbGVhc2UgdXNlIHRoZSBjb3JyZWN0IGZvcm1hdCAobWFrZSBzdXJlIHRoZSBtYXggaXMgaW4gdGhlc2UgJzw+JyBicmFja2V0cyk6ICd7Y29tbWFuZH0gW1Jld2FyZCBOYW1lXSA8TWF4PiciKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygicmF3SW5wdXQgaXMgZW1wdHkuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciBtYXRjaCA9IFJlZ2V4Lk1hdGNoKHJhd0lucHV0LCBAIl4oLiopPFxzKigtP1xkKylccyo+JCIpOw0KICAgICAgICBpZiAoIW1hdGNoLlN1Y2Nlc3MpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgcGxlYXNlIHVzZSB0aGUgY29ycmVjdCBmb3JtYXQgKG1ha2Ugc3VyZSB0aGUgbWF4IGlzIGluIHRoZXNlICc8PicgYnJhY2tldHMpOiAne2NvbW1hbmR9IFtSZXdhcmQgTmFtZV0gPE1heD4nIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJJbnZhbGlkIGZvcm1hdCAne3Jhd0lucHV0fScuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyByZXdhcmROYW1lID0gbWF0Y2guR3JvdXBzWzFdLlZhbHVlLlRyaW0oKTsNCiAgICAgICAgaWYgKCFpbnQuVHJ5UGFyc2UobWF0Y2guR3JvdXBzWzJdLlZhbHVlLCBvdXQgaW50IG5ld01heCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgdGhlIG1heCBtdXN0IGJlIGEgd2hvbGUgbnVtYmVyLiIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiSW52YWxpZCBtYXggJ3ttYXRjaC5Hcm91cHNbMl0uVmFsdWV9Jy4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIHJld2FyZCA9IENQSC5Ud2l0Y2hHZXRSZXdhcmRzKCkuRmlyc3RPckRlZmF1bHQociA9PiByZXdhcmROYW1lLkVxdWFscyhyLlRpdGxlLCBTdHJpbmdDb21wYXJpc29uLk9yZGluYWxJZ25vcmVDYXNlKSk7DQogICAgICAgIGlmIChyZXdhcmQgPT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVJld2FyZHNOb1N1Y2hSZXdhcmQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXJld2FyZE5hbWUlIiwgcmV3YXJkTmFtZSkpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiUmV3YXJkICd7cmV3YXJkTmFtZX0nIG5vdCBmb3VuZC4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICghcmV3YXJkLklzT3VycykNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVJld2FyZHNOb3RPd25lZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlcmV3YXJkTmFtZSUiLCByZXdhcmQuVGl0bGUpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIlJld2FyZCAne3Jld2FyZC5UaXRsZX0nIG5vdCBvd25lZC4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyKG9sZE1heEVuYWJsZWQsIG9sZE1heENvdW50LCBfLCBfLCBfLCBfKSA9IEdldEFkZGl0aW9uYWxSZXdhcmRJbmZvKGJyb2FkY2FzdGVyVXNlcklkLCByZXdhcmQuVGl0bGUsIHJld2FyZC5JZCkuR2V0QXdhaXRlcigpLkdldFJlc3VsdCgpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGJvb2wgc3VjY2VzcyA9IFVwZGF0ZVJld2FyZE1heFBlclN0cmVhbShicm9hZGNhc3RlclVzZXJJZCwgcmV3YXJkLklkLCBuZXdNYXggPiAwLCBuZXdNYXggPiAwID8gKGludD8gKW5ld01heCA6IG51bGwpLkdldEF3YWl0ZXIoKS5HZXRSZXN1bHQoKTsNCiAgICAgICAgaWYgKCFzdWNjZXNzKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdCgkIkB7dXNlcn0sIGZhaWxlZCB0byB1cGRhdGUgbWF4IHBlciBzdHJlYW0gZm9yICd7cmV3YXJkLlRpdGxlfScuIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJBUEkgY2FsbCBmYWlsZWQgZm9yICd7cmV3YXJkLlRpdGxlfScuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChuZXdNYXggPiAwKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUmV3YXJkc01heFBlclN0cmVhbUVuYWJsZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXJld2FyZE5hbWUlIiwgcmV3YXJkLlRpdGxlKS5SZXBsYWNlKCIlbWF4UGVyU3RyZWFtQ291bnQlIiwgbmV3TWF4LlRvU3RyaW5nKCkpKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChvbGRNYXhFbmFibGVkKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUmV3YXJkc01heFBlclN0cmVhbURpc2FibGVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVyZXdhcmROYW1lJSIsIHJld2FyZC5UaXRsZSkpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBQb3N0VG9Mb2coJCJTdWNjZXNzOiByZXdhcmQgJ3tyZXdhcmQuVGl0bGV9JyBtYXggcGVyIHN0cmVhbSBjaGFuZ2VkIGZyb20gIiArICQieyhvbGRNYXhFbmFibGVkID8gb2xkTWF4Q291bnQuVG9TdHJpbmcoKSA6ICJkaXNhYmxlZCIpfSB0byAiICsgJCJ7KG5ld01heCA+IDAgPyBuZXdNYXguVG9TdHJpbmcoKSA6ICJkaXNhYmxlZCIpfS4iKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBDaGFuZ2VSZXdhcmRNYXhQZXJVc2VyUGVyU3RyZWFtKCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgR2V0QnJvYWRjYXN0ZXJBbmRCb3QoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyIiwgb3V0IHN0cmluZyB1c2VyKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlcklkIiwgb3V0IHN0cmluZyB1c2VySWQpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJyYXdJbnB1dCIsIG91dCBzdHJpbmcgcmF3SW5wdXQpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJjb21tYW5kIiwgb3V0IHN0cmluZyBjb21tYW5kKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgZXhJbmZvID0gQ1BILlR3aXRjaEdldEV4dGVuZGVkVXNlckluZm9CeUlkKGJyb2FkY2FzdGVyVXNlcklkKTsNCiAgICAgICAgaWYgKCFleEluZm8uSXNBZmZpbGlhdGUgJiYgIWV4SW5mby5Jc1BhcnRuZXIpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VBZmZpbGlhdGVkUmVxdWlyZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJWJyb2FkY2FzdGVyTmFtZSUiLCBicm9hZGNhc3RlclVzZXIpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiQnJvYWRjYXN0ZXIgbXVzdCBiZSBhZmZpbGlhdGUgb3IgcGFydG5lci4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKGNoYW5uZWxSZXdhcmRzU3VwZXJNb2RzT25seSAmJiAhSXNTdXBlck1vZCh1c2VyLCB1c2VySWQpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKHJhd0lucHV0KSkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCBwbGVhc2UgdXNlIHRoZSBjb3JyZWN0IGZvcm1hdCAobWFrZSBzdXJlIHRoZSBtYXggaXMgaW4gdGhlc2UgJzw+JyBicmFja2V0cyk6ICd7Y29tbWFuZH0gW1Jld2FyZCBOYW1lXSA8TWF4PiciKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygicmF3SW5wdXQgaXMgZW1wdHkuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciBtYXRjaCA9IFJlZ2V4Lk1hdGNoKHJhd0lucHV0LCBAIl4oLiopPFxzKigtP1xkKylccyo+JCIpOw0KICAgICAgICBpZiAoIW1hdGNoLlN1Y2Nlc3MpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgcGxlYXNlIHVzZSB0aGUgY29ycmVjdCBmb3JtYXQgKG1ha2Ugc3VyZSB0aGUgbWF4IGlzIGluIHRoZXNlICc8PicgYnJhY2tldHMpOiAne2NvbW1hbmR9IFtSZXdhcmQgTmFtZV0gPE1heD4nIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJJbnZhbGlkIGZvcm1hdCAne3Jhd0lucHV0fScuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyByZXdhcmROYW1lID0gbWF0Y2guR3JvdXBzWzFdLlZhbHVlLlRyaW0oKTsNCiAgICAgICAgaWYgKCFpbnQuVHJ5UGFyc2UobWF0Y2guR3JvdXBzWzJdLlZhbHVlLCBvdXQgaW50IG5ld01heCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgdGhlIG1heCBtdXN0IGJlIGEgd2hvbGUgbnVtYmVyLiIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiSW52YWxpZCBtYXggJ3ttYXRjaC5Hcm91cHNbMl0uVmFsdWV9Jy4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIHJld2FyZCA9IENQSC5Ud2l0Y2hHZXRSZXdhcmRzKCkuRmlyc3RPckRlZmF1bHQociA9PiByZXdhcmROYW1lLkVxdWFscyhyLlRpdGxlLCBTdHJpbmdDb21wYXJpc29uLk9yZGluYWxJZ25vcmVDYXNlKSk7DQogICAgICAgIGlmIChyZXdhcmQgPT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVJld2FyZHNOb1N1Y2hSZXdhcmQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXJld2FyZE5hbWUlIiwgcmV3YXJkTmFtZSkpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiUmV3YXJkICd7cmV3YXJkTmFtZX0nIG5vdCBmb3VuZC4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICghcmV3YXJkLklzT3VycykNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVJld2FyZHNOb3RPd25lZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlcmV3YXJkTmFtZSUiLCByZXdhcmQuVGl0bGUpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIlJld2FyZCAne3Jld2FyZC5UaXRsZX0nIG5vdCBvd25lZC4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyKF8sIF8sIG9sZFVzZXJFbmFibGVkLCBvbGRVc2VyQ291bnQsIF8sIF8pID0gR2V0QWRkaXRpb25hbFJld2FyZEluZm8oYnJvYWRjYXN0ZXJVc2VySWQsIHJld2FyZC5UaXRsZSwgcmV3YXJkLklkKS5HZXRBd2FpdGVyKCkuR2V0UmVzdWx0KCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgYm9vbCBzdWNjZXNzID0gVXBkYXRlUmV3YXJkTWF4UGVyVXNlclBlclN0cmVhbShicm9hZGNhc3RlclVzZXJJZCwgcmV3YXJkLklkLCBuZXdNYXggPiAwLCBuZXdNYXggPiAwID8gKGludD8gKW5ld01heCA6IG51bGwpLkdldEF3YWl0ZXIoKS5HZXRSZXN1bHQoKTsNCiAgICAgICAgaWYgKCFzdWNjZXNzKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdCgkIkB7dXNlcn0sIGZhaWxlZCB0byB1cGRhdGUgbWF4IHBlciB1c2VyIHBlciBzdHJlYW0gZm9yICd7cmV3YXJkLlRpdGxlfScuIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJBUEkgY2FsbCBmYWlsZWQgZm9yICd7cmV3YXJkLlRpdGxlfScuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChuZXdNYXggPiAwKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUmV3YXJkc01heFBlclN0cmVhbVBlclVzZXJFbmFibGVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVyZXdhcmROYW1lJSIsIHJld2FyZC5UaXRsZSkuUmVwbGFjZSgiJW1heFBlclN0cmVhbVBlclVzZXJDb3VudCUiLCBuZXdNYXguVG9TdHJpbmcoKSkpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKG9sZFVzZXJFbmFibGVkKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlUmV3YXJkc01heFBlclN0cmVhbVBlclVzZXJEaXNhYmxlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlcmV3YXJkTmFtZSUiLCByZXdhcmQuVGl0bGUpKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgUG9zdFRvTG9nKCQiQ2hhbmdlUmV3YXJkTWF4UGVyVXNlclBlclN0cmVhbSBzdWNjZWVkZWQ6IHJld2FyZCAne3Jld2FyZC5UaXRsZX0nIG1heCBwZXIgdXNlciBwZXIgc3RyZWFtIGNoYW5nZWQgZnJvbSAiICsgJCJ7KG9sZFVzZXJFbmFibGVkID8gb2xkVXNlckNvdW50LlRvU3RyaW5nKCkgOiAiZGlzYWJsZWQiKX0gdG8gIiArICQieyhuZXdNYXggPiAwID8gbmV3TWF4LlRvU3RyaW5nKCkgOiAiZGlzYWJsZWQiKX0uIik7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgUnVuQWRzKCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVNoYXJlZENoYXRDaGVjaygpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBHZXRCcm9hZGNhc3RlckFuZEJvdCgpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VySWQiLCBvdXQgc3RyaW5nIHVzZXJJZCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJOYW1lIiwgb3V0IHN0cmluZyB1c2VyTmFtZSk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInJhd0lucHV0Iiwgb3V0IHN0cmluZyByYXdJbnB1dCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImNvbW1hbmQiLCBvdXQgc3RyaW5nIGNvbW1hbmQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciBleEluZm8gPSBDUEguVHdpdGNoR2V0RXh0ZW5kZWRVc2VySW5mb0J5SWQoYnJvYWRjYXN0ZXJVc2VySWQpOw0KICAgICAgICBpZiAoIWV4SW5mby5Jc0FmZmlsaWF0ZSAmJiAhZXhJbmZvLklzUGFydG5lcikNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZUFmZmlsaWF0ZWRSZXF1aXJlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlYnJvYWRjYXN0ZXJOYW1lJSIsIGJyb2FkY2FzdGVyVXNlcikpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiRmFpbGVkLCBiZWNhdXNlIHticm9hZGNhc3RlclVzZXJ9IGlzIG5vdCBwYXJ0bmVyZWQgb3IgYWZmaWxpYXRlZC4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgcmF3SW5wdXQgPSByYXdJbnB1dC5SZXBsYWNlKCJzIiwgIiIpLlJlcGxhY2UoInNlY29uZHMiLCAiIikuUmVwbGFjZSgiUyIsICIiKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpbnQgYWRMZW5ndGggPSAxODA7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFpbnQuVHJ5UGFyc2UocmF3SW5wdXQsIG91dCBpbnQgX2FkTGVuZ3RoKSkNCiAgICAgICAgew0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiSW52YWxpZCBpbnB1dDogJ3tyYXdJbnB1dH0nLiBTZXR0aW5nIGFkIGxlbmd0aCB0byAxODBzLiIpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKF9hZExlbmd0aCA8IDMwKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGFkTGVuZ3RoID0gMzA7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiSW5wdXQgYmVsb3cgMzA6ICd7cmF3SW5wdXR9Jy4gU2V0dGluZyBhZCBsZW5ndGggdG8gMzBzLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIGVsc2UgaWYgKF9hZExlbmd0aCA+IDE4MCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJJbnZhbGlkIGFib3ZlIDE4MDogJ3tyYXdJbnB1dH0nLiBTZXR0aW5nIGFkIGxlbmd0aCB0byAxODBzLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBhZExlbmd0aCA9IF9hZExlbmd0aDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlR3aXRjaFJ1bkNvbW1lcmNpYWwoYWRMZW5ndGgpOw0KICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQWRzUnVuLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVhZExlbmd0aCUiLCBhZExlbmd0aC5Ub1N0cmluZygpKSk7DQogICAgICAgIFBvc3RUb0xvZygkIlJ1bm5pbmcgYWQgZm9yIHthZExlbmd0aH0gc2Vjb25kcy4iKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBHZXRQcmVyb2xsRnJlZVRpbWUoKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEdldEJyb2FkY2FzdGVyQW5kQm90KCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJJZCIsIG91dCBzdHJpbmcgdXNlcklkKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlck5hbWUiLCBvdXQgc3RyaW5nIHVzZXJOYW1lKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygicmF3SW5wdXQiLCBvdXQgc3RyaW5nIHJhd0lucHV0KTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygiY29tbWFuZCIsIG91dCBzdHJpbmcgY29tbWFuZCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIGV4SW5mbyA9IENQSC5Ud2l0Y2hHZXRFeHRlbmRlZFVzZXJJbmZvQnlJZChicm9hZGNhc3RlclVzZXJJZCk7DQogICAgICAgIGlmICghZXhJbmZvLklzQWZmaWxpYXRlICYmICFleEluZm8uSXNQYXJ0bmVyKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQWZmaWxpYXRlZFJlcXVpcmVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWUlIiwgYnJvYWRjYXN0ZXJVc2VyKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQsIGJlY2F1c2Uge2Jyb2FkY2FzdGVyVXNlcn0gaXMgbm90IHBhcnRuZXJlZCBvciBhZmZpbGlhdGVkLiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGludCBwcmVyb2xsRnJlZVRpbWUgPSBDUEguVHdpdGNoR2V0UHJlcm9sbEZyZWVUaW1lKCk7DQogICAgICAgIHN0cmluZyBwcmVyb2xsRnJlZVRpbWVNaW51dGVzID0gcHJlcm9sbEZyZWVUaW1lIDwgNjAgPyAiPDEiIDogTWF0aC5DZWlsaW5nKHByZXJvbGxGcmVlVGltZSAvIDYwLjApLlRvU3RyaW5nKCk7DQogICAgICAgIGlmIChwcmVyb2xsRnJlZVRpbWUgPiAwKQ0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVByZXJvbGxGcmVlVGltZS5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlcHJlcm9sbEZyZWVUaW1lJSIsIHByZXJvbGxGcmVlVGltZS5Ub1N0cmluZygpKS5SZXBsYWNlKCIlcHJlcm9sbEZyZWVUaW1lTWludXRlcyUiLCBwcmVyb2xsRnJlZVRpbWVNaW51dGVzKSk7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VQcmVyb2xsRnJlZVRpbWVaZXJvLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVwcmVyb2xsRnJlZVRpbWUlIiwgcHJlcm9sbEZyZWVUaW1lLlRvU3RyaW5nKCkpLlJlcGxhY2UoIiVwcmVyb2xsRnJlZVRpbWVNaW51dGVzJSIsIHByZXJvbGxGcmVlVGltZU1pbnV0ZXMpKTsNCiAgICAgICAgUG9zdFRvTG9nKCQiRmV0Y2hlZCBwcmVyb2xsIGZyZWUgdGltZToge3ByZXJvbGxGcmVlVGltZX1zICh7cHJlcm9sbEZyZWVUaW1lTWludXRlc31taW4pLiIpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBib29sIFNub296ZUFkKCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVNoYXJlZENoYXRDaGVjaygpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBHZXRCcm9hZGNhc3RlckFuZEJvdCgpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VySWQiLCBvdXQgc3RyaW5nIHVzZXJJZCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJOYW1lIiwgb3V0IHN0cmluZyB1c2VyTmFtZSk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInJhd0lucHV0Iiwgb3V0IHN0cmluZyByYXdJbnB1dCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImNvbW1hbmQiLCBvdXQgc3RyaW5nIGNvbW1hbmQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciBleEluZm8gPSBDUEguVHdpdGNoR2V0RXh0ZW5kZWRVc2VySW5mb0J5SWQoYnJvYWRjYXN0ZXJVc2VySWQpOw0KICAgICAgICBpZiAoIWV4SW5mby5Jc0FmZmlsaWF0ZSAmJiAhZXhJbmZvLklzUGFydG5lcikNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZUFmZmlsaWF0ZWRSZXF1aXJlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlYnJvYWRjYXN0ZXJOYW1lJSIsIGJyb2FkY2FzdGVyVXNlcikpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiRmFpbGVkLCBiZWNhdXNlIHticm9hZGNhc3RlclVzZXJ9IGlzIG5vdCBwYXJ0bmVyZWQgb3IgYWZmaWxpYXRlZC4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyKHNub296ZVN1Y2Nlc3MsIG5leHRBZE1pbnV0ZXMsIHNub296ZUNvdW50LCBtaW51dGVzVW50aWxSZWZyZXNoKSA9IFNub296ZU5leHRBZCgpLkdldEF3YWl0ZXIoKS5HZXRSZXN1bHQoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAgICANCiAgICAgICAgaWYgKHNub296ZVN1Y2Nlc3MpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VTbm9vemVBZHNTdWNjZXNzLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVuZXh0QWRNaW51dGVzJSIsIG5leHRBZE1pbnV0ZXMuVG9TdHJpbmcoKSkuUmVwbGFjZSgiJXNub296ZUNvdW50JSIsIHNub296ZUNvdW50LlRvU3RyaW5nKCkpLlJlcGxhY2UoIiVtaW51dGVzVW50aWxSZWZyZXNoJSIsIG1pbnV0ZXNVbnRpbFJlZnJlc2guVG9TdHJpbmcoKSkpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJTbm9vemUgc3VjY2Vzcy4iKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChzbm9vemVDb3VudCA9PSAwKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VTbm9vemVBZHNGYWlsQ291bnRaZXJvLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coIkZhaWxlZCBzbm9vemluZywgYmVjYXVzZSB0aGUgY291bnQgaXMgMC4iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlU25vb3plQWRzRmFpbC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKSk7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCJGYWlsZWQgc25vb3ppbmcuIik7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgQWRkQ3VzdG9tQ29tbWFuZCgpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgSW5pdExvZygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghQ2hlY2tTZXR0aW5nc0dsb2JhbCgpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEZldGNoU2V0dGluZ3MoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFTaGFyZWRDaGF0Q2hlY2soKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyIiwgb3V0IHN0cmluZyB1c2VyKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlcklkIiwgb3V0IHN0cmluZyB1c2VySWQpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyTmFtZSIsIG91dCBzdHJpbmcgdXNlck5hbWUpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJyYXdJbnB1dCIsIG91dCBzdHJpbmcgcmF3SW5wdXQpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJjb21tYW5kIiwgb3V0IHN0cmluZyBjb21tYW5kKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBMaXN0PENvbW1hbmREYXRhPiBhbGxDb21tYW5kcyA9IENQSC5HZXRDb21tYW5kcygpOw0KICAgICAgICBzdHJpbmcganNvbiA9IENQSC5HZXRHbG9iYWxWYXI8c3RyaW5nPigidGF3bWFlX01PRF9UT09MU19DdXN0b21fQ29tbWFuZHMiLCB0cnVlKSA/PyAiW10iOw0KICAgICAgICB2YXIgYXJyID0gSkFycmF5LlBhcnNlKGpzb24pOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGludCBnbG9iYWxDZCA9IDAsIHVzZXJDZCA9IDA7DQogICAgICAgIGJvb2wgbW9kT25seSA9IGZhbHNlLCB2aXBPbmx5ID0gZmFsc2UsIHN1Yk9ubHkgPSBmYWxzZTsNCiAgICAgICAgYm9vbCBjb3VudGVyRWRpdE1vZHNPbmx5ID0gZmFsc2UsIGNvdW50ZXJFZGl0Vmlwc09ubHkgPSBmYWxzZSwgY291bnRlckVkaXRTdWJzT25seSA9IGZhbHNlOw0KICAgICAgICB2YXIgZ20gPSBSZWdleC5NYXRjaChyYXdJbnB1dCwgQCI8XHMqR2xvYmFsQ29vbGRvd25ccyo6XHMqKFxkKylccyo+IiwgUmVnZXhPcHRpb25zLklnbm9yZUNhc2UpOw0KICAgICAgICBpZiAoZ20uU3VjY2VzcykNCiAgICAgICAgew0KICAgICAgICAgICAgZ2xvYmFsQ2QgPSBpbnQuUGFyc2UoZ20uR3JvdXBzWzFdLlZhbHVlKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIlBhcnNlZCBHbG9iYWxDb29sZG93bjoge2dsb2JhbENkfSIpOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIHVtID0gUmVnZXguTWF0Y2gocmF3SW5wdXQsIEAiPFxzKlVzZXJDb29sZG93blxzKjpccyooXGQrKVxzKj4iLCBSZWdleE9wdGlvbnMuSWdub3JlQ2FzZSk7DQogICAgICAgIGlmICh1bS5TdWNjZXNzKQ0KICAgICAgICB7DQogICAgICAgICAgICB1c2VyQ2QgPSBpbnQuUGFyc2UodW0uR3JvdXBzWzFdLlZhbHVlKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIlBhcnNlZCBVc2VyQ29vbGRvd246IHt1c2VyQ2R9Iik7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgY2VtID0gUmVnZXguTWF0Y2gocmF3SW5wdXQsIEAiPFxzKmNvdW50ZXJFZGl0TW9kc09ubHlccyo6XHMqdHJ1ZVxzKj4iLCBSZWdleE9wdGlvbnMuSWdub3JlQ2FzZSk7DQogICAgICAgIGlmIChjZW0uU3VjY2VzcykNCiAgICAgICAgew0KICAgICAgICAgICAgY291bnRlckVkaXRNb2RzT25seSA9IHRydWU7DQogICAgICAgICAgICBQb3N0VG9Mb2coIlBhcnNlZCBjb3VudGVyRWRpdE1vZHNPbmx5OiBUcnVlIik7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgY2V2ID0gUmVnZXguTWF0Y2gocmF3SW5wdXQsIEAiPFxzKmNvdW50ZXJFZGl0Vmlwc09ubHlccyo6XHMqdHJ1ZVxzKj4iLCBSZWdleE9wdGlvbnMuSWdub3JlQ2FzZSk7DQogICAgICAgIGlmIChjZXYuU3VjY2VzcykNCiAgICAgICAgew0KICAgICAgICAgICAgY291bnRlckVkaXRWaXBzT25seSA9IHRydWU7DQogICAgICAgICAgICBQb3N0VG9Mb2coIlBhcnNlZCBjb3VudGVyRWRpdFZpcHNPbmx5OiBUcnVlIik7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgY2VzID0gUmVnZXguTWF0Y2gocmF3SW5wdXQsIEAiPFxzKmNvdW50ZXJFZGl0U3Vic09ubHlccyo6XHMqdHJ1ZVxzKj4iLCBSZWdleE9wdGlvbnMuSWdub3JlQ2FzZSk7DQogICAgICAgIGlmIChjZXMuU3VjY2VzcykNCiAgICAgICAgew0KICAgICAgICAgICAgY291bnRlckVkaXRTdWJzT25seSA9IHRydWU7DQogICAgICAgICAgICBQb3N0VG9Mb2coIlBhcnNlZCBjb3VudGVyRWRpdFN1YnNPbmx5OiBUcnVlIik7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgbW0gPSBSZWdleC5NYXRjaChyYXdJbnB1dCwgQCI8XHMqbW9kT25seVxzKjpccyp0cnVlXHMqPiIsIFJlZ2V4T3B0aW9ucy5JZ25vcmVDYXNlKTsNCiAgICAgICAgaWYgKG1tLlN1Y2Nlc3MpDQogICAgICAgIHsNCiAgICAgICAgICAgIG1vZE9ubHkgPSB0cnVlOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJQYXJzZWQgbW9kT25seTogVHJ1ZSIpOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIHZtID0gUmVnZXguTWF0Y2gocmF3SW5wdXQsIEAiPFxzKnZpcE9ubHlccyo6XHMqdHJ1ZVxzKj4iLCBSZWdleE9wdGlvbnMuSWdub3JlQ2FzZSk7DQogICAgICAgIGlmICh2bS5TdWNjZXNzKQ0KICAgICAgICB7DQogICAgICAgICAgICB2aXBPbmx5ID0gdHJ1ZTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiUGFyc2VkIHZpcE9ubHk6IFRydWUiKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciBzbSA9IFJlZ2V4Lk1hdGNoKHJhd0lucHV0LCBAIjxccypzdWJPbmx5XHMqOlxzKnRydWVccyo+IiwgUmVnZXhPcHRpb25zLklnbm9yZUNhc2UpOw0KICAgICAgICBpZiAoc20uU3VjY2VzcykNCiAgICAgICAgew0KICAgICAgICAgICAgc3ViT25seSA9IHRydWU7DQogICAgICAgICAgICBQb3N0VG9Mb2coIlBhcnNlZCBzdWJPbmx5OiBUcnVlIik7DQogICAgICAgIH0NCg0KICAgICAgICBzdHJpbmcgY2xlYW5lZCA9IFJlZ2V4LlJlcGxhY2UocmF3SW5wdXQsIEAiPFxzKihHbG9iYWxDb29sZG93bnxVc2VyQ29vbGRvd258Q291bnRlcnxjb3VudGVyRWRpdE1vZHNPbmx5fGNvdW50ZXJFZGl0Vmlwc09ubHl8Y291bnRlckVkaXRTdWJzT25seXxtb2RPbmx5fHZpcE9ubHl8c3ViT25seSlccyo6XHMqW14+XSs+IiwgIiIpLlRyaW0oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgcGFydHMgPSBjbGVhbmVkLlNwbGl0KG5ld1tdIHsgJyAnIH0sIDIpOw0KICAgICAgICBzdHJpbmcgY29tbWFuZE5hbWUgPSBwYXJ0cy5MZW5ndGggPiAwID8gcGFydHNbMF0gOiAiIjsNCiAgICAgICAgc3RyaW5nIGNvbW1hbmRUZXh0ID0gcGFydHMuTGVuZ3RoID4gMSA/IHBhcnRzWzFdIDogIiI7DQogICAgICAgIFBvc3RUb0xvZygkIkNvbW1hbmROYW1lPSd7Y29tbWFuZE5hbWV9JywgQ29tbWFuZFRleHQ9J3tjb21tYW5kVGV4dH0nIik7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFyYXdJbnB1dC5TdGFydHNXaXRoKCIhIikpDQogICAgICAgIHsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkNvbW1hbmQgZGlkbid0IHN0YXJ0IHdpdGggZXhjbGFtYXRpb24gbWFyazoge3Jhd0lucHV0fSIpOw0KICAgICAgICAgICAgQ1BILlNlbmRNZXNzYWdlKG1lc3NhZ2VDdXN0b21Db21tYW5kRXhNYXJrLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVjb21tYW5kTmFtZSUiLCByYXdJbnB1dCkpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoYWxsQ29tbWFuZHMuQW55KGNtZCA9PiBjbWQuQ29tbWFuZHMgIT0gbnVsbCAmJiBjbWQuQ29tbWFuZHMuQ29udGFpbnMoY29tbWFuZE5hbWUsIFN0cmluZ0NvbXBhcmVyLk9yZGluYWxJZ25vcmVDYXNlKSkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIid7Y29tbWFuZE5hbWV9JyBpcyBhbHJlYWR5IGEgcmVndWxhciBjb21tYW5kLiIpOw0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZUN1c3RvbUNvbW1hbmRzQWxyZWFkeUFSZWd1bGFyQ29tbWFuZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlY29tbWFuZE5hbWUlIiwgY29tbWFuZE5hbWUuVG9Mb3dlcigpKSk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgZXhpc3RpbmcgPSBhcnIuRmlyc3RPckRlZmF1bHQobyA9PiBvWyJjb21tYW5kTmFtZSJdPy5Ub1N0cmluZygpLkVxdWFscyhjb21tYW5kTmFtZSwgU3RyaW5nQ29tcGFyaXNvbi5PcmRpbmFsSWdub3JlQ2FzZSkgPT0gdHJ1ZSk7DQogICAgICAgIGlmIChleGlzdGluZyAhPSBudWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCIne2NvbW1hbmROYW1lfScgYWxyZWFkeSBleGlzdHMgYXMgY3VzdG9tIGNvbW1hbmQiKTsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VDdXN0b21Db21tYW5kc0FscmVhZHlBQ3VzdG9tQ29tbWFuZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlY29tbWFuZE5hbWUlIiwgY29tbWFuZE5hbWUuVG9Mb3dlcigpKSk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShjb21tYW5kVGV4dCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiTm8gY29tbWFuZCB0ZXh0IHByb3ZpZGVkLiIpOw0KICAgICAgICAgICAgQ1BILlNlbmRNZXNzYWdlKG1lc3NhZ2VDdXN0b21Db21tYW5kc05vVGV4dC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlY29tbWFuZCUiLCBjb21tYW5kKSk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciBlbnRyeSA9IG5ldyBKT2JqZWN0DQogICAgICAgIHsNCiAgICAgICAgICAgIFsiY29tbWFuZE5hbWUiXSA9IGNvbW1hbmROYW1lLA0KICAgICAgICAgICAgWyJjb21tYW5kVmFsdWUiXSA9IGNvbW1hbmRUZXh0LA0KICAgICAgICAgICAgWyJjb21tYW5kR2xvYmFsQ29vbGRvd24iXSA9IGdsb2JhbENkLA0KICAgICAgICAgICAgWyJjb21tYW5kVXNlckNvb2xkb3duIl0gPSB1c2VyQ2QsDQogICAgICAgICAgICBbImlzQ291bnRlciJdID0gdHJ1ZSwNCiAgICAgICAgICAgIFsiY291bnQiXSA9IDAsDQogICAgICAgICAgICBbIm1vZE9ubHkiXSA9IG1vZE9ubHksDQogICAgICAgICAgICBbInZpcE9ubHkiXSA9IHZpcE9ubHksDQogICAgICAgICAgICBbInN1Yk9ubHkiXSA9IHN1Yk9ubHksDQogICAgICAgICAgICBbImNvdW50ZXJFZGl0TW9kc09ubHkiXSA9IGNvdW50ZXJFZGl0TW9kc09ubHksDQogICAgICAgICAgICBbImNvdW50ZXJFZGl0Vmlwc09ubHkiXSA9IGNvdW50ZXJFZGl0Vmlwc09ubHksDQogICAgICAgICAgICBbImNvdW50ZXJFZGl0U3Vic09ubHkiXSA9IGNvdW50ZXJFZGl0U3Vic09ubHkNCiAgICAgICAgfTsNCiAgICAgICAgYXJyLkFkZChlbnRyeSk7DQogICAgICAgIENQSC5TZXRHbG9iYWxWYXIoInRhd21hZV9NT0RfVE9PTFNfQ3VzdG9tX0NvbW1hbmRzIiwgYXJyLlRvU3RyaW5nKEZvcm1hdHRpbmcuTm9uZSksIHRydWUpOw0KICAgICAgICBQb3N0VG9Mb2coIkFkZGVkIG5ldyBjdXN0b20gY29tbWFuZDoiKTsNCiAgICAgICAgUG9zdFRvTG9nKGVudHJ5LlRvU3RyaW5nKEZvcm1hdHRpbmcuSW5kZW50ZWQpKTsNCiAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZUN1c3RvbUNvbW1hbmRBZGRlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlY29tbWFuZE5hbWUlIiwgY29tbWFuZE5hbWUuVG9Mb3dlcigpKS5SZXBsYWNlKCIlY29tbWFuZFRleHQlIiwgY29tbWFuZFRleHQpKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgRWRpdEN1c3RvbUNvbW1hbmQoKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJJZCIsIG91dCBzdHJpbmcgdXNlcklkKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlck5hbWUiLCBvdXQgc3RyaW5nIHVzZXJOYW1lKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygicmF3SW5wdXQiLCBvdXQgc3RyaW5nIHJhd0lucHV0KTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygiY29tbWFuZCIsIG91dCBzdHJpbmcgY29tbWFuZCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgTGlzdDxDb21tYW5kRGF0YT4gYWxsQ29tbWFuZHMgPSBDUEguR2V0Q29tbWFuZHMoKTsNCiAgICAgICAgc3RyaW5nIGpzb24gPSBDUEguR2V0R2xvYmFsVmFyPHN0cmluZz4oInRhd21hZV9NT0RfVE9PTFNfQ3VzdG9tX0NvbW1hbmRzIiwgdHJ1ZSkgPz8gIltdIjsNCiAgICAgICAgdmFyIGFyciA9IEpBcnJheS5QYXJzZShqc29uKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpbnQgZ2xvYmFsQ2QgPSAwLCB1c2VyQ2QgPSAwOw0KICAgICAgICBib29sIG1vZE9ubHkgPSBmYWxzZSwgdmlwT25seSA9IGZhbHNlLCBzdWJPbmx5ID0gZmFsc2U7DQogICAgICAgIGJvb2wgY291bnRlckVkaXRNb2RzT25seSA9IGZhbHNlLCBjb3VudGVyRWRpdFZpcHNPbmx5ID0gZmFsc2UsIGNvdW50ZXJFZGl0U3Vic09ubHkgPSBmYWxzZTsNCiAgICAgICAgdmFyIGdtID0gUmVnZXguTWF0Y2gocmF3SW5wdXQsIEAiPFxzKkdsb2JhbENvb2xkb3duXHMqOlxzKihcZCspXHMqPiIsIFJlZ2V4T3B0aW9ucy5JZ25vcmVDYXNlKTsNCiAgICAgICAgaWYgKGdtLlN1Y2Nlc3MpDQogICAgICAgIHsNCiAgICAgICAgICAgIGdsb2JhbENkID0gaW50LlBhcnNlKGdtLkdyb3Vwc1sxXS5WYWx1ZSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJQYXJzZWQgR2xvYmFsQ29vbGRvd246IHtnbG9iYWxDZH0iKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciB1bSA9IFJlZ2V4Lk1hdGNoKHJhd0lucHV0LCBAIjxccypVc2VyQ29vbGRvd25ccyo6XHMqKFxkKylccyo+IiwgUmVnZXhPcHRpb25zLklnbm9yZUNhc2UpOw0KICAgICAgICBpZiAodW0uU3VjY2VzcykNCiAgICAgICAgew0KICAgICAgICAgICAgdXNlckNkID0gaW50LlBhcnNlKHVtLkdyb3Vwc1sxXS5WYWx1ZSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJQYXJzZWQgVXNlckNvb2xkb3duOiB7dXNlckNkfSIpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKFJlZ2V4LklzTWF0Y2gocmF3SW5wdXQsIEAiPFxzKmNvdW50ZXJFZGl0TW9kc09ubHlccyo6XHMqdHJ1ZVxzKj4iLCBSZWdleE9wdGlvbnMuSWdub3JlQ2FzZSkpDQogICAgICAgIHsNCiAgICAgICAgICAgIGNvdW50ZXJFZGl0TW9kc09ubHkgPSB0cnVlOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJQYXJzZWQgY291bnRlckVkaXRNb2RzT25seTogVHJ1ZSIpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKFJlZ2V4LklzTWF0Y2gocmF3SW5wdXQsIEAiPFxzKmNvdW50ZXJFZGl0Vmlwc09ubHlccyo6XHMqdHJ1ZVxzKj4iLCBSZWdleE9wdGlvbnMuSWdub3JlQ2FzZSkpDQogICAgICAgIHsNCiAgICAgICAgICAgIGNvdW50ZXJFZGl0Vmlwc09ubHkgPSB0cnVlOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJQYXJzZWQgY291bnRlckVkaXRWaXBzT25seTogVHJ1ZSIpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKFJlZ2V4LklzTWF0Y2gocmF3SW5wdXQsIEAiPFxzKmNvdW50ZXJFZGl0U3Vic09ubHlccyo6XHMqdHJ1ZVxzKj4iLCBSZWdleE9wdGlvbnMuSWdub3JlQ2FzZSkpDQogICAgICAgIHsNCiAgICAgICAgICAgIGNvdW50ZXJFZGl0U3Vic09ubHkgPSB0cnVlOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJQYXJzZWQgY291bnRlckVkaXRTdWJzT25seTogVHJ1ZSIpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKFJlZ2V4LklzTWF0Y2gocmF3SW5wdXQsIEAiPFxzKm1vZE9ubHlccyo6XHMqdHJ1ZVxzKj4iLCBSZWdleE9wdGlvbnMuSWdub3JlQ2FzZSkpDQogICAgICAgIHsNCiAgICAgICAgICAgIG1vZE9ubHkgPSB0cnVlOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJQYXJzZWQgbW9kT25seTogVHJ1ZSIpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKFJlZ2V4LklzTWF0Y2gocmF3SW5wdXQsIEAiPFxzKnZpcE9ubHlccyo6XHMqdHJ1ZVxzKj4iLCBSZWdleE9wdGlvbnMuSWdub3JlQ2FzZSkpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZpcE9ubHkgPSB0cnVlOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJQYXJzZWQgdmlwT25seTogVHJ1ZSIpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKFJlZ2V4LklzTWF0Y2gocmF3SW5wdXQsIEAiPFxzKnN1Yk9ubHlccyo6XHMqdHJ1ZVxzKj4iLCBSZWdleE9wdGlvbnMuSWdub3JlQ2FzZSkpDQogICAgICAgIHsNCiAgICAgICAgICAgIHN1Yk9ubHkgPSB0cnVlOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJQYXJzZWQgc3ViT25seTogVHJ1ZSIpOw0KICAgICAgICB9DQoNCiAgICAgICAgc3RyaW5nIGNsZWFuZWQgPSBSZWdleC5SZXBsYWNlKHJhd0lucHV0LCBAIjxccyooR2xvYmFsQ29vbGRvd258VXNlckNvb2xkb3dufENvdW50ZXJ8Y291bnRlckVkaXRNb2RzT25seXxjb3VudGVyRWRpdFZpcHNPbmx5fGNvdW50ZXJFZGl0U3Vic09ubHl8bW9kT25seXx2aXBPbmx5fHN1Yk9ubHkpXHMqOlxzKltePl0rPiIsICIiLCBSZWdleE9wdGlvbnMuSWdub3JlQ2FzZSkuVHJpbSgpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciBwYXJ0cyA9IGNsZWFuZWQuU3BsaXQobmV3W10geyAnICcgfSwgMik7DQogICAgICAgIHN0cmluZyBjb21tYW5kTmFtZSA9IHBhcnRzLkxlbmd0aCA+IDAgPyBwYXJ0c1swXSA6ICIiOw0KICAgICAgICBzdHJpbmcgY29tbWFuZFRleHQgPSBwYXJ0cy5MZW5ndGggPiAxID8gcGFydHNbMV0gOiAiIjsNCiAgICAgICAgUG9zdFRvTG9nKCQiQ29tbWFuZE5hbWU9J3tjb21tYW5kTmFtZX0nLCBDb21tYW5kVGV4dD0ne2NvbW1hbmRUZXh0fSciKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgZW50cnkgPSBhcnIuRmlyc3RPckRlZmF1bHQobyA9PiBvWyJjb21tYW5kTmFtZSJdPy5Ub1N0cmluZygpLkVxdWFscyhjb21tYW5kTmFtZSwgU3RyaW5nQ29tcGFyaXNvbi5PcmRpbmFsSWdub3JlQ2FzZSkgPT0gdHJ1ZSk7DQogICAgICAgIGlmIChlbnRyeSA9PSBudWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQ3VzdG9tQ29tbWFuZE5vdEFDdXN0b21Db21tYW5kLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVjb21tYW5kTmFtZSUiLCBjb21tYW5kTmFtZS5Ub0xvd2VyKCkpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIid7Y29tbWFuZE5hbWV9JyBpcyBub3QgYSBjdXN0b20gY29tbWFuZC4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KGNvbW1hbmRUZXh0KSkNCiAgICAgICAgew0KICAgICAgICAgICAgUG9zdFRvTG9nKCJObyBjb21tYW5kIHRleHQgcHJvdmlkZWQgZm9yIGVkaXQuIik7DQogICAgICAgICAgICBDUEguU2VuZE1lc3NhZ2UobWVzc2FnZUN1c3RvbUNvbW1hbmRzTm9UZXh0LlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVjb21tYW5kJSIsIGNvbW1hbmQpKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgZW50cnlbImNvbW1hbmRWYWx1ZSJdID0gY29tbWFuZFRleHQ7DQogICAgICAgIGVudHJ5WyJjb21tYW5kR2xvYmFsQ29vbGRvd24iXSA9IGdsb2JhbENkOw0KICAgICAgICBlbnRyeVsiY29tbWFuZFVzZXJDb29sZG93biJdID0gdXNlckNkOw0KICAgICAgICBlbnRyeVsiaXNDb3VudGVyIl0gPSB0cnVlOw0KICAgICAgICBpZiAoZW50cnlbImNvdW50Il0gPT0gbnVsbCkNCiAgICAgICAgICAgIGVudHJ5WyJjb3VudCJdID0gMDsNCiAgICAgICAgZW50cnlbIm1vZE9ubHkiXSA9IG1vZE9ubHk7DQogICAgICAgIGVudHJ5WyJ2aXBPbmx5Il0gPSB2aXBPbmx5Ow0KICAgICAgICBlbnRyeVsic3ViT25seSJdID0gc3ViT25seTsNCiAgICAgICAgZW50cnlbImNvdW50ZXJFZGl0TW9kc09ubHkiXSA9IGNvdW50ZXJFZGl0TW9kc09ubHk7DQogICAgICAgIGVudHJ5WyJjb3VudGVyRWRpdFZpcHNPbmx5Il0gPSBjb3VudGVyRWRpdFZpcHNPbmx5Ow0KICAgICAgICBlbnRyeVsiY291bnRlckVkaXRTdWJzT25seSJdID0gY291bnRlckVkaXRTdWJzT25seTsNCiAgICAgICAgQ1BILlNldEdsb2JhbFZhcigidGF3bWFlX01PRF9UT09MU19DdXN0b21fQ29tbWFuZHMiLCBhcnIuVG9TdHJpbmcoRm9ybWF0dGluZy5Ob25lKSwgdHJ1ZSk7DQogICAgICAgIFBvc3RUb0xvZygiRWRpdGVkIGN1c3RvbSBjb21tYW5kOiIpOw0KICAgICAgICBQb3N0VG9Mb2coZW50cnkuVG9TdHJpbmcoRm9ybWF0dGluZy5JbmRlbnRlZCkpOw0KICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQ3VzdG9tQ29tbWFuZEVkaXRlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlY29tbWFuZE5hbWUlIiwgY29tbWFuZE5hbWUuVG9Mb3dlcigpKS5SZXBsYWNlKCIlY29tbWFuZFRleHQlIiwgY29tbWFuZFRleHQpKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBib29sIFJlbW92ZUN1c3RvbUNvbW1hbmQoKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVNoYXJlZENoYXRDaGVjaygpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VySWQiLCBvdXQgc3RyaW5nIHVzZXJJZCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJOYW1lIiwgb3V0IHN0cmluZyB1c2VyTmFtZSk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInJhd0lucHV0Iiwgb3V0IHN0cmluZyByYXdJbnB1dCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImNvbW1hbmQiLCBvdXQgc3RyaW5nIGNvbW1hbmQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyBjb21tYW5kTmFtZSA9IChyYXdJbnB1dCA/PyAiIikuVHJpbSgpLlNwbGl0KCcgJylbMF07DQogICAgICAgIFBvc3RUb0xvZygkIkF0dGVtcHRpbmcgdG8gcmVtb3ZlIGN1c3RvbSBjb21tYW5kICd7Y29tbWFuZE5hbWV9JyIpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyBqc29uID0gQ1BILkdldEdsb2JhbFZhcjxzdHJpbmc+KCJ0YXdtYWVfTU9EX1RPT0xTX0N1c3RvbV9Db21tYW5kcyIsIHRydWUpID8/ICJbXSI7DQogICAgICAgIHZhciBhcnIgPSBKQXJyYXkuUGFyc2UoanNvbik7DQogICAgICAgIHZhciBlbnRyeSA9IGFyci5GaXJzdE9yRGVmYXVsdChvID0+IG9bImNvbW1hbmROYW1lIl0/LlRvU3RyaW5nKCkuRXF1YWxzKGNvbW1hbmROYW1lLCBTdHJpbmdDb21wYXJpc29uLk9yZGluYWxJZ25vcmVDYXNlKSA9PSB0cnVlKTsNCiAgICAgICAgaWYgKGVudHJ5ID09IG51bGwpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VDdXN0b21Db21tYW5kTm90QUN1c3RvbUNvbW1hbmQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJWNvbW1hbmROYW1lJSIsIGNvbW1hbmROYW1lKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCIne2NvbW1hbmROYW1lfScgaXMgbm90IGEgY3VzdG9tIGNvbW1hbmQuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGFyci5SZW1vdmUoZW50cnkpOw0KICAgICAgICBDUEguU2V0R2xvYmFsVmFyKCJ0YXdtYWVfTU9EX1RPT0xTX0N1c3RvbV9Db21tYW5kcyIsIGFyci5Ub1N0cmluZyhGb3JtYXR0aW5nLk5vbmUpLCB0cnVlKTsNCiAgICAgICAgUG9zdFRvTG9nKCQiUmVtb3ZlZCBjdXN0b20gY29tbWFuZCAne2NvbW1hbmROYW1lfScuIik7DQogICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VDdXN0b21Db21tYW5kUmVtb3ZlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlY29tbWFuZE5hbWUlIiwgY29tbWFuZE5hbWUpKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgR2V0QWxsQ3VzdG9tQ29tbWFuZHMoKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJJZCIsIG91dCBzdHJpbmcgdXNlcklkKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlck5hbWUiLCBvdXQgc3RyaW5nIHVzZXJOYW1lKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygicmF3SW5wdXQiLCBvdXQgc3RyaW5nIHJhd0lucHV0KTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygiY29tbWFuZCIsIG91dCBzdHJpbmcgY29tbWFuZCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImlzTW9kZXJhdG9yIiwgb3V0IGJvb2wgaXNNb2RlcmF0b3IpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJpc1ZpcCIsIG91dCBib29sIGlzVmlwKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygiaXNTdWJzY3JpYmVkIiwgb3V0IGJvb2wgaXNTdWJzY3JpYmVkKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBzdHJpbmcganNvbiA9IENQSC5HZXRHbG9iYWxWYXI8c3RyaW5nPigidGF3bWFlX01PRF9UT09MU19DdXN0b21fQ29tbWFuZHMiLCB0cnVlKSA/PyAiW10iOw0KICAgICAgICB2YXIgYXJyID0gSkFycmF5LlBhcnNlKGpzb24pOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciBlbnRyaWVzID0gYXJyLkNhc3Q8Sk9iamVjdD4oKTsNCiAgICAgICAgaWYgKGN1c3RvbUNvbW1hbmRzR2V0UGVybWl0dGVkT25seSAmJiAhaXNNb2RlcmF0b3IpDQogICAgICAgIHsNCiAgICAgICAgICAgIGVudHJpZXMgPSBlbnRyaWVzLldoZXJlKG8gPT4NCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBib29sIG1vZE9ubHkgPSBvWyJtb2RPbmx5Il0/LlRvT2JqZWN0PGJvb2w+KCkgPz8gZmFsc2U7DQogICAgICAgICAgICAgICAgYm9vbCB2aXBPbmx5ID0gb1sidmlwT25seSJdPy5Ub09iamVjdDxib29sPigpID8/IGZhbHNlOw0KICAgICAgICAgICAgICAgIGJvb2wgc3ViT25seSA9IG9bInN1Yk9ubHkiXT8uVG9PYmplY3Q8Ym9vbD4oKSA/PyBmYWxzZTsNCiAgICAgICAgICAgICAgICBib29sIGhhc09ubHkgPSBtb2RPbmx5IHx8IHZpcE9ubHkgfHwgc3ViT25seTsNCiAgICAgICAgICAgICAgICBib29sIHBlcm1pdHRlZCA9ICFoYXNPbmx5IHx8IChtb2RPbmx5ICYmIGlzTW9kZXJhdG9yKSB8fCAodmlwT25seSAmJiBpc1ZpcCkgfHwgKHN1Yk9ubHkgJiYgaXNTdWJzY3JpYmVkKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gcGVybWl0dGVkOw0KICAgICAgICAgICAgfSkuVG9MaXN0KCk7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgbmFtZXMgPSBlbnRyaWVzLlNlbGVjdChvID0+IG9bImNvbW1hbmROYW1lIl0/LlRvU3RyaW5nKCkpLldoZXJlKG4gPT4gIXN0cmluZy5Jc051bGxPckVtcHR5KG4pKS5Ub0xpc3QoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIW5hbWVzLkFueSgpKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQ3VzdG9tQ29tbWFuZHNOb0NvbW1hbmRzLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiTm8gY29tbWFuZHMgdG8gZGlzcGxheS4iKTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBzdHJpbmcgam9pbmVkID0gc3RyaW5nLkpvaW4oIiwgIiwgbmFtZXMpOw0KICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQ3VzdG9tQ29tbWFuZHNHZXRDb21tYW5kc1ByZWZpeC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKSArICIgIiArIGpvaW5lZCk7DQogICAgICAgIFBvc3RUb0xvZygkIlJlcGxpZWQgd2l0aCBjb21tYW5kczoge2pvaW5lZH0iKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgU2V0Q2hhbm5lbFRpdGxlKCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVNoYXJlZENoYXRDaGVjaygpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBHZXRCcm9hZGNhc3RlckFuZEJvdCgpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VySWQiLCBvdXQgc3RyaW5nIHVzZXJJZCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJOYW1lIiwgb3V0IHN0cmluZyB1c2VyTmFtZSk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInJhd0lucHV0Iiwgb3V0IHN0cmluZyByYXdJbnB1dCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImNvbW1hbmQiLCBvdXQgc3RyaW5nIGNvbW1hbmQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciBleEluZm8gPSBDUEguVHdpdGNoR2V0RXh0ZW5kZWRVc2VySW5mb0J5SWQoYnJvYWRjYXN0ZXJVc2VySWQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShyYXdJbnB1dCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgcGxlYXNlIGVudGVyIGEgdGl0bGUgdG8gY2hhbmdlIHRvOiAne2NvbW1hbmR9IFtOZXcgVGl0bGVdJyIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCJyYXdJbnB1dCBpcyBlbXB0eS4iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKHJhd0lucHV0Lkxlbmd0aCA+IDE0MCkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCB0aGUgbmV3IHRpdGxlIG11c3QgYmUgYXQgbW9zdCAxNDAgY2hhcmFjdGVycy4gWW91cnMgaGFzIHtyYXdJbnB1dC5MZW5ndGh9IGNoYXJhY3RlcnMuIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJOZXcgdGl0bGUgdG9vIGxvbmcgKHtyYXdJbnB1dC5MZW5ndGh9IGNoYXJzKToge3Jhd0lucHV0fSIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoQ1BILlNldENoYW5uZWxUaXRsZShyYXdJbnB1dCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VDaGFubmVsVGl0bGVDaGFuZ2VkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVuZXdUaXRsZSUiLCByYXdJbnB1dCkuUmVwbGFjZSgiJW9sZFRpdGxlJSIsIGV4SW5mby5DaGFubmVsVGl0bGUpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIlRpdGxlIGNoYW5nZWQgZnJvbSAne2V4SW5mby5DaGFubmVsVGl0bGV9JyB0byAne3Jhd0lucHV0fSciKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgZmFpbGVkIHRvIGNoYW5nZSB0aGUgdGl0bGUuIENoZWNrIGl0IGZvciBwb3NzaWJsZSBiYW5uZWQga2V5d29yZHMgYW5kIHRyeSBhZ2Fpbi4iKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkZhaWxlZCB0byBjaGFuZ2UgdGl0bGU6IHtyYXdJbnB1dH0iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgU2V0Q2hhbm5lbEdhbWUoKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEdldEJyb2FkY2FzdGVyQW5kQm90KCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJJZCIsIG91dCBzdHJpbmcgdXNlcklkKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlck5hbWUiLCBvdXQgc3RyaW5nIHVzZXJOYW1lKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygicmF3SW5wdXQiLCBvdXQgc3RyaW5nIHJhd0lucHV0KTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygiY29tbWFuZCIsIG91dCBzdHJpbmcgY29tbWFuZCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIGV4SW5mbyA9IENQSC5Ud2l0Y2hHZXRFeHRlbmRlZFVzZXJJbmZvQnlJZChicm9hZGNhc3RlclVzZXJJZCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KHJhd0lucHV0KSkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCBwbGVhc2UgZW50ZXIgYSBnYW1lL2NhdGVnb3J5IHRvIGNoYW5nZSB0bzogJ3tjb21tYW5kfSBbR2FtZS9DYXRlZ29yeV0nIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coInJhd0lucHV0IGlzIGVtcHR5LiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgZ2FtZUluZm8gPSBDUEguU2V0Q2hhbm5lbEdhbWUocmF3SW5wdXQpOw0KICAgICAgICBpZiAoZ2FtZUluZm8gIT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKGV4SW5mby5HYW1lICE9IGdhbWVJbmZvLk5hbWUpDQogICAgICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZUNoYW5uZWxHYW1lQ2hhbmdlZC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlbmV3R2FtZSUiLCBnYW1lSW5mby5OYW1lKS5SZXBsYWNlKCIlb2xkR2FtZSUiLCBleEluZm8uR2FtZSkpOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VDaGFubmVsR2FtZUFscmVhZHlTZXQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJW5ld0dhbWUlIiwgZ2FtZUluZm8uTmFtZSkuUmVwbGFjZSgiJW9sZEdhbWUlIiwgZXhJbmZvLkdhbWUpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkdhbWUgY2hhbmdlZCBmcm9tICd7ZXhJbmZvLkdhbWV9JyB0byAne2dhbWVJbmZvLk5hbWV9JyAvLyBJbnB1dDoge3Jhd0lucHV0fSIpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgUG9zdFRvTG9nKCJHYW1lIGluZm8gaXMgbnVsbCwgYXR0ZW1wdGluZyBJR0RCIGZhbGxiYWNrIHNlYXJjaC4uLiIpOw0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgdmFyIGlnZGJSZXN1bHQgPSBHZXRJR0RCR2FtZUluZm8ocmF3SW5wdXQpLkdldEF3YWl0ZXIoKS5HZXRSZXN1bHQoKTsNCiAgICAgICAgICAgIHN0cmluZyBpZ2RiR2FtZUlkID0gaWdkYlJlc3VsdC5pZDsNCiAgICAgICAgICAgIHN0cmluZyBpZ2RiR2FtZU5hbWUgPSBpZ2RiUmVzdWx0Lm5hbWU7DQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkoaWdkYkdhbWVJZCkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCBmYWlsZWQgdG8gY2hhbmdlIHRoZSBnYW1lL2NhdGVnb3J5LiBDaGVjayB0aGUgc3BlbGxpbmcgYW5kIHRyeSBhZ2Fpbi4iKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQgdG8gZmluZCBJR0RCIGdhbWUgZm9yIGlucHV0OiB7cmF3SW5wdXR9Iik7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkZvdW5kIElHREIgZ2FtZToge2lnZGJHYW1lTmFtZX0gKHtpZ2RiR2FtZUlkfSkiKTsNCiAgICAgICAgICAgICAgICBpZiAoQ1BILlNldENoYW5uZWxHYW1lQnlJZChpZ2RiR2FtZUlkKSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmIChleEluZm8uR2FtZSAhPSBpZ2RiR2FtZU5hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQ2hhbm5lbEdhbWVDaGFuZ2VkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVuZXdHYW1lJSIsIGlnZGJHYW1lTmFtZSkuUmVwbGFjZSgiJW9sZEdhbWUlIiwgZXhJbmZvLkdhbWUpKTsNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZUNoYW5uZWxHYW1lQWxyZWFkeVNldC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlbmV3R2FtZSUiLCBpZ2RiR2FtZU5hbWUpLlJlcGxhY2UoIiVvbGRHYW1lJSIsIGV4SW5mby5HYW1lKSk7DQogICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkdhbWUgY2hhbmdlZCBmcm9tICd7ZXhJbmZvLkdhbWV9JyB0byAne2lnZGJHYW1lTmFtZX0nIC8vIElucHV0OiB7cmF3SW5wdXR9Iik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgZmFpbGVkIHRvIGNoYW5nZSB0aGUgZ2FtZS9jYXRlZ29yeS4iKTsNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiRmFpbGVkIHRvIHNldCBnYW1lIGJ5IElEIChJRDp7aWdkYkdhbWVJZH0sIE5hbWU6e2lnZGJHYW1lTmFtZX0pIGZvciBpbnB1dDoge3Jhd0lucHV0fSIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBBZGRDaGFubmVsVGFnKCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVNoYXJlZENoYXRDaGVjaygpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBHZXRCcm9hZGNhc3RlckFuZEJvdCgpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VySWQiLCBvdXQgc3RyaW5nIHVzZXJJZCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJOYW1lIiwgb3V0IHN0cmluZyB1c2VyTmFtZSk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInJhd0lucHV0Iiwgb3V0IHN0cmluZyByYXdJbnB1dCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImNvbW1hbmQiLCBvdXQgc3RyaW5nIGNvbW1hbmQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciBleEluZm8gPSBDUEguVHdpdGNoR2V0RXh0ZW5kZWRVc2VySW5mb0J5SWQoYnJvYWRjYXN0ZXJVc2VySWQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChleEluZm8uVGFncy5Db3VudCA9PSAxMCkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZUNoYW5uZWxNYXhUYWdzLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiVHJpZWQgdG8gYWRkIDExdGggY2hhbm5lbCB0YWcuIFRhZ3M6Iik7DQogICAgICAgICAgICBmb3JlYWNoIChzdHJpbmcgdGFnIGluIGV4SW5mby5UYWdzKQ0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZyh0YWcpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkocmF3SW5wdXQpKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdCgkIkB7dXNlcn0sIHBsZWFzZSBlbnRlciBhIHRhZyB0byBhZGQ6ICd7Y29tbWFuZH0gW1RhZ10nIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coInJhd0lucHV0IGlzIGVtcHR5LiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAocmF3SW5wdXQuQ29udGFpbnMoIiAiKSkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCB0YWdzIG1heSBub3QgY29udGFpbiBzcGFjZXMuIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJUYWcgY29udGFpbnMgd2hpdGVzcGFjZToge3Jhd0lucHV0fSIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVJlZ2V4LklzTWF0Y2gocmF3SW5wdXQsIEAiXlthLXpBLVowLTldKyQiKSkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCB0YWdzIG1heSBvbmx5IGNvbnRhaW4gbGV0dGVycyBhbmQgbnVtYmVycyAobm8gc3BlY2lhbCBjaGFyYWN0ZXJzKS4iKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIlRhZyBjb250YWlucyBzcGVjaWFsIGNoYXJhY3RlcnM6IHtyYXdJbnB1dH0iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKHJhd0lucHV0Lkxlbmd0aCA+IDI1KQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdCgkIkB7dXNlcn0sIHRoZSB0YWcgbXVzdCBiZSBhdCBtb3N0IDI1IGNoYXJhY3RlcnMuIFlvdXJzIGhhcyB7cmF3SW5wdXQuTGVuZ3RofSBjaGFyYWN0ZXJzLiIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiTmV3IHRhZyB0b28gbG9uZyAoe3Jhd0lucHV0Lkxlbmd0aH0gY2hhcnMpOiB7cmF3SW5wdXR9Iik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChDUEguVHdpdGNoQWRkQ2hhbm5lbFRhZyhyYXdJbnB1dCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIExpc3Q8c3RyaW5nPiBuZXdUYWdMaXN0ID0gZXhJbmZvLlRhZ3M7DQogICAgICAgICAgICBuZXdUYWdMaXN0LkFkZChyYXdJbnB1dCk7DQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQ2hhbm5lbFRhZ0FkZGVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVhZGRlZFRhZyUiLCByYXdJbnB1dCkuUmVwbGFjZSgiJW9sZFRhZ0xpc3QlIiwgc3RyaW5nLkpvaW4oIiwgIiwgZXhJbmZvLlRhZ3MgPz8gbmV3IExpc3Q8c3RyaW5nPigpKSkuUmVwbGFjZSgiJW5ld1RhZ0xpc3QlIiwgc3RyaW5nLkpvaW4oIiwgIiwgbmV3VGFnTGlzdCkpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIlN1Y2Nlc3NmdWxseSBhZGRlZCB0YWc6ICd7cmF3SW5wdXR9JyIpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCBmYWlsZWQgdG8gYWRkIHRoZSB0YWcuIFRhZ3MgY2FuJ3QgY29udGFpbiBzcGVjaWFsIGNoYXJhY3RlcnMuIEFsc28gY2hlY2sgZm9yIHBvc3NpYmxlIGJhbm5lZCBrZXl3b3Jkcy4iKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkZhaWxlZCB0byBhZGQgdGFnOiB7cmF3SW5wdXR9Iik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBib29sIFJlbW92ZUNoYW5uZWxUYWcoKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEdldEJyb2FkY2FzdGVyQW5kQm90KCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInJhd0lucHV0Iiwgb3V0IHN0cmluZyByYXdJbnB1dCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImNvbW1hbmQiLCBvdXQgc3RyaW5nIGNvbW1hbmQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciBleEluZm8gPSBDUEguVHdpdGNoR2V0RXh0ZW5kZWRVc2VySW5mb0J5SWQoYnJvYWRjYXN0ZXJVc2VySWQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShyYXdJbnB1dCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgcGxlYXNlIGVudGVyIGEgdGFnIHRvIHJlbW92ZTogJ3tjb21tYW5kfSBbVGFnXSciKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiRW1wdHkgcmF3SW5wdXQiKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKGV4SW5mby5UYWdzLkNvdW50ID09IDApDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VDaGFubmVsTm9UYWdzLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiQ2hhbm5lbCBoYXMgbm8gdGFncyBzZXQiKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgc3RyaW5nIHRhZ1RvUmVtb3ZlID0gZXhJbmZvLlRhZ3MuRmlyc3RPckRlZmF1bHQodCA9PiB0LkVxdWFscyhyYXdJbnB1dCwgU3RyaW5nQ29tcGFyaXNvbi5PcmRpbmFsSWdub3JlQ2FzZSkpOw0KICAgICAgICBpZiAodGFnVG9SZW1vdmUgPT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZUNoYW5uZWxUYWdOb3RJbkxpc3QuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXJlbW92ZWRUYWclIiwgcmF3SW5wdXQpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIlRhZyAne3Jhd0lucHV0fScgbm90IGluIHRoZSB0YWcgbGlzdC4gVGFnczoiKTsNCiAgICAgICAgICAgIGZvcmVhY2ggKHN0cmluZyB0YWcgaW4gZXhJbmZvLlRhZ3MpDQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKHRhZyk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChDUEguVHdpdGNoUmVtb3ZlQ2hhbm5lbFRhZyh0YWdUb1JlbW92ZSkpDQogICAgICAgIHsNCiAgICAgICAgICAgIExpc3Q8c3RyaW5nPiBuZXdUYWdMaXN0ID0gZXhJbmZvLlRhZ3M7DQogICAgICAgICAgICBuZXdUYWdMaXN0LlJlbW92ZSh0YWdUb1JlbW92ZSk7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQ2hhbm5lbFRhZ1JlbW92ZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXJlbW92ZWRUYWclIiwgdGFnVG9SZW1vdmUpLlJlcGxhY2UoIiVvbGRUYWdMaXN0JSIsIHN0cmluZy5Kb2luKCIsICIsIGV4SW5mby5UYWdzID8/IG5ldyBMaXN0PHN0cmluZz4oKSkpLlJlcGxhY2UoIiVuZXdUYWdMaXN0JSIsIHN0cmluZy5Kb2luKCIsICIsIG5ld1RhZ0xpc3QpKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJTdWNjZXNzZnVsbHkgcmVtb3ZlZCB0YWc6ICd7dGFnVG9SZW1vdmV9JyIpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJAe3VzZXJ9LCBmYWlsZWQgdG8gcmVtb3ZlIHRoZSB0YWcuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBib29sIFRyYW5zbGF0ZUNoYXRNZXNzYWdlKCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVNoYXJlZENoYXRDaGVjaygpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyByZXBseVVzZXIgPSBzdHJpbmcuRW1wdHk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInJhd0lucHV0Iiwgb3V0IHN0cmluZyByYXdJbnB1dCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImlzUmVwbHkiLCBvdXQgYm9vbCBpc1JlcGx5KTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygiY29tbWFuZCIsIG91dCBzdHJpbmcgY29tbWFuZCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKGlzUmVwbHkpDQogICAgICAgIHsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoInJlcGx5Lm1zZ0JvZHkiLCBvdXQgc3RyaW5nIHJlcGx5TXNnQm9keSk7DQogICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJyZXBseS51c2VyTmFtZSIsIG91dCByZXBseVVzZXIpOw0KICAgICAgICAgICAgcmF3SW5wdXQgPSByZXBseU1zZ0JvZHk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJNZXNzYWdlIHRvIHRyYW5zbGF0ZSBpcyBhIHJlcGx5OiB7cmF3SW5wdXR9Iik7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShyYXdJbnB1dCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgcGxlYXNlIGVudGVyIGEgbWVzc2FnZSB0byB0cmFuc2xhdGUgICgne2NvbW1hbmR9IFtUZXh0XScpIG9yIHJlcGx5IHRvIGEgbWVzc2FnZSB3aXRoIGp1c3QgJ3tjb21tYW5kfScuIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coIkVtcHR5IHJhd0lucHV0Iik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyB0cmFuc2xhdGlvbiA9IFRyYW5zbGF0ZShyYXdJbnB1dCwgR2V0VGFyZ2V0TGFuZ3VhZ2UoKSk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKGlzUmVwbHkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQie3JlcGx5VXNlcn06IFwiIiArIHRyYW5zbGF0aW9uICsgIlwiIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCInIHt1c2VyfScgdHJhbnNsYXRlZCBtZXNzYWdlIGZyb20gJ3tyZXBseVVzZXJ9Jzoge3Jhd0lucHV0fSAtPiB7dHJhbnNsYXRpb259Iik7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdCgkIkB7dXNlcn06IFwiIiArIHRyYW5zbGF0aW9uICsgIlwiIik7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCInIHt1c2VyfScgdHJhbnNsYXRlZCBtZXNzYWdlOiB7cmF3SW5wdXR9ICAtPiB7dHJhbnNsYXRpb259Iik7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBUaW1lb3V0VXNlcigpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEZldGNoU2V0dGluZ3MoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFTaGFyZWRDaGF0Q2hlY2soKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgR2V0QnJvYWRjYXN0ZXJBbmRCb3QoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJOYW1lIiwgb3V0IHN0cmluZyB1c2VyTmFtZSk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJJZCIsIG91dCBzdHJpbmcgdXNlcklkKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygicmF3SW5wdXQiLCBvdXQgc3RyaW5nIHJhd0lucHV0KTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygiaW5wdXQwIiwgb3V0IHN0cmluZyBpbnB1dDApOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJpbnB1dDEiLCBvdXQgc3RyaW5nIGlucHV0MSk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoImZyb21Nb25pdG9yaW5nRG9jayIsIG91dCBib29sIGZyb21Nb25pdG9yaW5nRG9jayk7DQogICAgICAgIGlmIChmcm9tTW9uaXRvcmluZ0RvY2spDQogICAgICAgIHsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoImR1cmF0aW9uIiwgb3V0IGludCBfZHVyYXRpb24pOw0KICAgICAgICAgICAgQ1BILlR3aXRjaFRpbWVvdXRVc2VyKHVzZXJOYW1lLCBfZHVyYXRpb24sICJTdHJlYW1lci5Cb3QgVGltZW91dCIsIGhhc0JvdCk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJUaW1lZCBvdXQgdXNlciAne3VzZXJ9JyAoJ3t1c2VyTmFtZX0nKSBmcm9tIG1vbml0b3JpbmcgZGVjayBmb3Ige19kdXJhdGlvbn1zIik7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGludCBkdXJhdGlvbiA9IDYwOw0KICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KGlucHV0MSkpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBtID0gUmVnZXguTWF0Y2goaW5wdXQxLlRyaW0oKSwgQCJeKFxkKylccyooZCg/OmF5fGF5cyk/fGgoPzpyfHJzfG91cnxvdXJzKT98bSg/OmlufGluc3xpbnV0ZXxpbnV0ZXMpP3xzKD86ZWN8ZWNzfGVjb25kfGVjb25kcyk/KT8kIiwgUmVnZXhPcHRpb25zLklnbm9yZUNhc2UpOw0KICAgICAgICAgICAgaWYgKG0uU3VjY2VzcykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpbnQgdmFsID0gaW50LlBhcnNlKG0uR3JvdXBzWzFdLlZhbHVlKTsNCiAgICAgICAgICAgICAgICBzdHJpbmcgdW5pdCA9IG0uR3JvdXBzWzJdLlN1Y2Nlc3MgPyBtLkdyb3Vwc1syXS5WYWx1ZS5Ub0xvd2VyKCkgOiBzdHJpbmcuRW1wdHk7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiUGFyc2VkIHZhbHVlPXt2YWx9LCB1bml0PSd7dW5pdH0nIik7DQogICAgICAgICAgICAgICAgc3dpdGNoICh1bml0KQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAiZCI6DQogICAgICAgICAgICAgICAgICAgIGNhc2UgImRheSI6DQogICAgICAgICAgICAgICAgICAgIGNhc2UgImRheXMiOg0KICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb24gPSB2YWwgKiA4NjQwMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICBjYXNlICJoIjoNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAiaHIiOg0KICAgICAgICAgICAgICAgICAgICBjYXNlICJocnMiOg0KICAgICAgICAgICAgICAgICAgICBjYXNlICJob3VyIjoNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAiaG91cnMiOg0KICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb24gPSB2YWwgKiAzNjAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgIm0iOg0KICAgICAgICAgICAgICAgICAgICBjYXNlICJtaW4iOg0KICAgICAgICAgICAgICAgICAgICBjYXNlICJtaW5zIjoNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAibWludXRlIjoNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAibWludXRlcyI6DQogICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IHZhbCAqIDYwOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IHZhbDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkImR1cmF0aW9uPXtkdXJhdGlvbn0gc2Vjb25kcyIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkZhaWxlZCB0byBwYXJzZSBpbnB1dDE9J3tpbnB1dDF9JywgdXNpbmcgZGVmYXVsdCBkdXJhdGlvbj17ZHVyYXRpb259Iik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoZHVyYXRpb24gPCAxKQ0KICAgICAgICB7DQogICAgICAgICAgICBQb3N0VG9Mb2coIkR1cmF0aW9uIGxlc3MgdGhhbiAxLCBzZXR0aW5nIHRvIDEgc2Vjb25kIik7DQogICAgICAgICAgICBkdXJhdGlvbiA9IDE7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJjb21tYW5kIiwgb3V0IHN0cmluZyBjb21tYW5kKTsNCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KGNvbW1hbmQpKQ0KICAgICAgICAgICAgY29tbWFuZCA9ICIhY29tbWFuZCI7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShpbnB1dDApKQ0KICAgICAgICB7DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQ29tbWFuZE5vVXNlclByb3ZpZGVkLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVjb21tYW5kJSIsIGNvbW1hbmQpKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIid7dXNlcn0nIHRyaWVkIHRvIHRpbWVvdXQgd2l0aG91dCBzcGVjaWZ5aW5nIGEgdGFyZ2V0Iik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpbnB1dDAgPSBpbnB1dDAuUmVwbGFjZSgiQCIsICIiKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgc3RyaW5nIGxvY2FsaXplZCA9IEdldExvY2FsaXplZE5hbWUoaW5wdXQwKTsNCiAgICAgICAgaWYgKGxvY2FsaXplZCAhPSBudWxsKQ0KICAgICAgICAgICAgaW5wdXQwID0gbG9jYWxpemVkOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IENQSC5Ud2l0Y2hHZXRVc2VySW5mb0J5TG9naW4oaW5wdXQwKTsNCiAgICAgICAgaWYgKHRhcmdldEluZm8gPT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVVzZXJEb2VzTm90RXhpc3QuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXRhcmdldFVzZXIiLCBpbnB1dDApKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIid7dXNlcn0nIHRyaWVkIHRvIHRpbWVvdXQgYSBub24tZXhpc3RpbmcgdXNlcjoge2lucHV0MH0iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICh1c2VySWQgPT0gYnJvYWRjYXN0ZXJVc2VySWQpDQogICAgICAgIHsNCiAgICAgICAgICAgIENQSC5Ud2l0Y2hUaW1lb3V0VXNlcih0YXJnZXRJbmZvLlVzZXJMb2dpbiwgZHVyYXRpb24sICJTdHJlYW1lci5ib3QgQ29tbWFuZCBUaW1lb3V0IiwgZmFsc2UpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiJ3t0YXJnZXRJbmZvLlVzZXJOYW1lfScgdGltZWQgb3V0IGJ5IGJyb2FkY2FzdGVyICd7dXNlcn0nIik7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICh0YXJnZXRJbmZvLklzTW9kZXJhdG9yKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoSXNTdXBlck1vZCh0YXJnZXRJbmZvLlVzZXJOYW1lLCB0YXJnZXRJbmZvLlVzZXJJZCkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVRpbWVvdXRDYW50VGltZW91dFN1cGVybW9kcy5SZXBsYWNlKCIldXNlciUiLCB1c2VyKSk7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiQ2Fubm90IHRpbWVvdXQgc3VwZXIgbW9kZXJhdG9yICd7dGFyZ2V0SW5mby5Vc2VyTmFtZX0nIik7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoIUlzU3VwZXJNb2QodXNlciwgdXNlcklkKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlVGltZW91dFN1cGVybW9kc09ubHkuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikpOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIid7dXNlcn0nIGlzIG5vdCBzdXBlciBtb2QgYW5kIGNhbm5vdCB0aW1lb3V0IG1vZGVyYXRvciAne3RhcmdldEluZm8uVXNlck5hbWV9JyIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgQ1BILlR3aXRjaFRpbWVvdXRVc2VyKHRhcmdldEluZm8uVXNlckxvZ2luLCBkdXJhdGlvbiwgIlN0cmVhbWVyLmJvdCBDb21tYW5kIFRpbWVvdXQiLCBmYWxzZSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJNb2RlcmF0b3IgJ3t0YXJnZXRJbmZvLlVzZXJOYW1lfScgdGltZWQgb3V0IGJ5IHN1cGVyIG1vZCAne3VzZXJ9JyIpOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCg0KICAgICAgICBDUEguVHdpdGNoVGltZW91dFVzZXIodGFyZ2V0SW5mby5Vc2VyTG9naW4sIGR1cmF0aW9uLCAiU3RyZWFtZXIuYm90IENvbW1hbmQgVGltZW91dCIsIGhhc0JvdCk7DQogICAgICAgIFBvc3RUb0xvZygkIlVzZXIgJ3t0YXJnZXRJbmZvLlVzZXJOYW1lfScgdGltZWQgb3V0IGJ5ICd7dXNlcn0nIik7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBib29sIEJhblVzZXIoKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghQ2hlY2tTZXR0aW5nc0dsb2JhbCgpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEdldEJyb2FkY2FzdGVyQW5kQm90KCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyTmFtZSIsIG91dCBzdHJpbmcgdXNlck5hbWUpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VySWQiLCBvdXQgc3RyaW5nIHVzZXJJZCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInJhd0lucHV0Iiwgb3V0IHN0cmluZyByYXdJbnB1dCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImlucHV0MCIsIG91dCBzdHJpbmcgaW5wdXQwKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygiZnJvbU1vbml0b3JpbmdEb2NrIiwgb3V0IGJvb2wgZnJvbU1vbml0b3JpbmdEb2NrKTsNCiAgICAgICAgaWYgKGZyb21Nb25pdG9yaW5nRG9jaykNCiAgICAgICAgew0KICAgICAgICAgICAgQ1BILlR3aXRjaEJhblVzZXIodXNlck5hbWUsICJTdHJlYW1lci5Cb3QgQmFuIiwgaGFzQm90KTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkJhbm5lZCB1c2VyICd7dXNlcn0nICgne3VzZXJOYW1lfScpIGZyb20gbW9uaXRvcmluZyBkZWNrIik7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoImNvbW1hbmQiLCBvdXQgc3RyaW5nIGNvbW1hbmQpOw0KICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkoY29tbWFuZCkpDQogICAgICAgICAgICBjb21tYW5kID0gIiFjb21tYW5kIjsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KGlucHV0MCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VDb21tYW5kTm9Vc2VyUHJvdmlkZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJWNvbW1hbmQlIiwgY29tbWFuZCkpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgdHJpZWQgdG8gYmFuIHdpdGhvdXQgc3BlY2lmeWluZyBhIHRhcmdldCIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaW5wdXQwID0gaW5wdXQwLlJlcGxhY2UoIkAiLCAiIik7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyBsb2NhbGl6ZWQgPSBHZXRMb2NhbGl6ZWROYW1lKGlucHV0MCk7DQogICAgICAgIGlmIChsb2NhbGl6ZWQgIT0gbnVsbCkNCiAgICAgICAgICAgIGlucHV0MCA9IGxvY2FsaXplZDsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIHRhcmdldEluZm8gPSBDUEguVHdpdGNoR2V0VXNlckluZm9CeUxvZ2luKGlucHV0MCk7DQogICAgICAgIGlmICh0YXJnZXRJbmZvID09IG51bGwpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VVc2VyRG9lc05vdEV4aXN0LlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiV0YXJnZXRVc2VyIiwgaW5wdXQwKSk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCIne3VzZXJ9JyB0cmllZCB0byBiYW4gYSBub24tZXhpc3RpbmcgdXNlcjoge2lucHV0MH0iKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICh1c2VySWQgPT0gYnJvYWRjYXN0ZXJVc2VySWQpDQogICAgICAgIHsNCiAgICAgICAgICAgIENQSC5Ud2l0Y2hCYW5Vc2VyKHRhcmdldEluZm8uVXNlckxvZ2luLCAiU3RyZWFtZXIuYm90IENvbW1hbmQgQmFuIiwgZmFsc2UpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiJ3t0YXJnZXRJbmZvLlVzZXJOYW1lfScgYmFubmVkIGJ5IGJyb2FkY2FzdGVyICd7dXNlcn0nIik7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICh0YXJnZXRJbmZvLklzTW9kZXJhdG9yKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoSXNTdXBlck1vZCh0YXJnZXRJbmZvLlVzZXJOYW1lLCB0YXJnZXRJbmZvLlVzZXJJZCkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZUJhbkNhbnRCYW5TdXBlcm1vZHMuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikpOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkNhbm5vdCBiYW4gc3VwZXIgbW9kZXJhdG9yICd7dGFyZ2V0SW5mby5Vc2VyTmFtZX0nIik7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoIUlzU3VwZXJNb2QodXNlciwgdXNlcklkKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQmFuU3VwZXJtb2RzT25seS5SZXBsYWNlKCIldXNlciUiLCB1c2VyKSk7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgaXMgbm90IHN1cGVyIG1vZCBhbmQgY2Fubm90IGJhbiBtb2RlcmF0b3IgJ3t0YXJnZXRJbmZvLlVzZXJOYW1lfSciKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIENQSC5Ud2l0Y2hCYW5Vc2VyKHRhcmdldEluZm8uVXNlckxvZ2luLCAiU3RyZWFtZXIuYm90IENvbW1hbmQgQmFuIiwgZmFsc2UpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiTW9kZXJhdG9yICd7dGFyZ2V0SW5mby5Vc2VyTmFtZX0nIGJhbm5lZCBieSBzdXBlciBtb2QgJ3t1c2VyfSciKTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgQ1BILlR3aXRjaEJhblVzZXIodGFyZ2V0SW5mby5Vc2VyTG9naW4sICJTdHJlYW1lci5ib3QgQ29tbWFuZCBCYW4iLCBoYXNCb3QpOw0KICAgICAgICBQb3N0VG9Mb2coJCJVc2VyICd7dGFyZ2V0SW5mby5Vc2VyTmFtZX0nIGJhbm5lZCBieSAne3VzZXJ9JyIpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgc3RhdGljIGJvb2wgX2Vtb3RlTW9kZSA9IGZhbHNlOw0KICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBfZm9sbG93ZXJNb2RlID0gZmFsc2U7DQogICAgcHVibGljIHN0YXRpYyBpbnQ/IF9mb2xsb3dlck1vZGVEdXJhdGlvbiA9IG51bGw7DQogICAgcHVibGljIHN0YXRpYyBib29sIF9zbG93TW9kZSA9IGZhbHNlOw0KICAgIHB1YmxpYyBzdGF0aWMgaW50PyBfc2xvd01vZGVXYWl0VGltZSA9IG51bGw7DQogICAgcHVibGljIHN0YXRpYyBib29sIF9zdWJzY3JpYmVyTW9kZSA9IGZhbHNlOw0KICAgIHB1YmxpYyBib29sIFRvZ2dsZUhhdGVSYWlkUHJvdGVjdGlvbigpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIUNoZWNrU2V0dGluZ3NHbG9iYWwoKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEZldGNoU2V0dGluZ3MoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFTaGFyZWRDaGF0Q2hlY2soKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEdldEJyb2FkY2FzdGVyQW5kQm90KCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBib29sIGhhdGVSYWlkUHJvdGVjdGlvbkVuYWJsZWQgPSBDUEguR2V0R2xvYmFsVmFyPGJvb2w+KCJ0YXdtYWVfTU9EX1RPT0xTX2hhdGVSYWlkUHJvdGVjdGlvbkVuYWJsZWQiLCB0cnVlKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghaGF0ZVJhaWRQcm90ZWN0aW9uRW5hYmxlZCkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyKGVtb3RlTW9kZSwgZm9sbG93ZXJNb2RlLCBmb2xsb3dlck1vZGVEdXJhdGlvbiwgbm9uTW9kQ2hhdERlbGF5LCBub25Nb2RDaGF0RGVsYXlEdXJhdGlvbiwgc2xvd01vZGUsIHNsb3dNb2RlV2FpdFRpbWUsIHN1YnNjcmliZXJNb2RlLCB1bmlxdWVDaGF0TW9kZSkgPSBHZXRDaGF0U2V0dGluZ3MoYnJvYWRjYXN0ZXJVc2VySWQpLkdldEF3YWl0ZXIoKS5HZXRSZXN1bHQoKTsNCiAgICAgICAgICAgIF9lbW90ZU1vZGUgPSBlbW90ZU1vZGU7DQogICAgICAgICAgICBfZm9sbG93ZXJNb2RlID0gZm9sbG93ZXJNb2RlOw0KICAgICAgICAgICAgX2ZvbGxvd2VyTW9kZUR1cmF0aW9uID0gZm9sbG93ZXJNb2RlRHVyYXRpb247DQogICAgICAgICAgICBfc2xvd01vZGUgPSBzbG93TW9kZTsNCiAgICAgICAgICAgIF9zbG93TW9kZVdhaXRUaW1lID0gc2xvd01vZGVXYWl0VGltZTsNCiAgICAgICAgICAgIF9zdWJzY3JpYmVyTW9kZSA9IHN1YnNjcmliZXJNb2RlOw0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBpZiAoaGF0ZVJhaWRDbGVhckNoYXQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgQ1BILlR3aXRjaENsZWFyQ2hhdE1lc3NhZ2VzKGhhc0JvdCk7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCJDaGF0IGNsZWFyZWQuIik7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgaWYgKGhhdGVSYWlkRm9sbG93ZXJPbmx5TW9kZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoZm9sbG93ZXJNb2RlKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCJBbHJlYWR5IGluIGZvbGxvd2VyIG1vZGUuIENoZWNraW5nIGR1cmF0aW9uLi4uIik7DQogICAgICAgICAgICAgICAgICAgIGlmIChmb2xsb3dlck1vZGVEdXJhdGlvbiAhPSBoYXRlUmFpZEZvbGxvd2VyT25seU1vZGVEdXJhdGlvbikNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgQ1BILlR3aXRjaEZvbGxvd01vZGUoZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICAgICAgQ1BILldhaXQoMTAwMCk7DQogICAgICAgICAgICAgICAgICAgICAgICBDUEguVHdpdGNoRm9sbG93TW9kZSh0cnVlLCBoYXRlUmFpZEZvbGxvd2VyT25seU1vZGVEdXJhdGlvbik7DQogICAgICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJDaGFuZ2luZyBkdXJhdGlvbjoge2ZvbGxvd2VyTW9kZUR1cmF0aW9ufW1pbiAtPiB7aGF0ZVJhaWRGb2xsb3dlck9ubHlNb2RlRHVyYXRpb259bWluIik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiS2VlcGluZyBzYW1lIGR1cmF0aW9uOiB7Zm9sbG93ZXJNb2RlRHVyYXRpb259bWluIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIENQSC5Ud2l0Y2hGb2xsb3dNb2RlKHRydWUsIGhhdGVSYWlkRm9sbG93ZXJPbmx5TW9kZUR1cmF0aW9uKTsNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiRW5hYmxpbmcgZm9sbG93ZXItb25seSBtb2RlLiBEdXJhdGlvbjoge2hhdGVSYWlkRm9sbG93ZXJPbmx5TW9kZUR1cmF0aW9ufW1pbiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBpZiAoaGF0ZVJhaWRFbW90ZU9ubHlNb2RlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChlbW90ZU1vZGUpDQogICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygiQWxyZWFkeSBpbiBlbW90ZS1vbmx5IG1vZGUuIik7DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgQ1BILlR3aXRjaEVtb3RlT25seSh0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCJFbmFibGluZyBlbW90ZS1vbmx5IG1vZGUuIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIGlmIChoYXRlUmFpZFN1Yk9ubHlNb2RlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpYmVyTW9kZSkNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCJBbHJlYWR5IGluIHN1YnNjcmliZXIgbW9kZS4iKTsNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBDUEguVHdpdGNoU3Vic2NyaWJlck9ubHkodHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygiRW5hYmxpbmcgc3Vic2NyaWJlci1vbmx5IG1vZGUuIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIGlmIChoYXRlUmFpZFNsb3dNb2RlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChzbG93TW9kZSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygiQWxyZWFkeSBpbiBzbG93IG1vZGUuIENoZWNraW5nIHdhaXQgdGltZS4uLiIpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoc2xvd01vZGVXYWl0VGltZSAhPSBoYXRlUmFpZFNsb3dNb2RlVGltZSkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgQ1BILlR3aXRjaFNsb3dNb2RlKGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIENQSC5XYWl0KDEwMDApOw0KICAgICAgICAgICAgICAgICAgICAgICAgQ1BILlR3aXRjaFNsb3dNb2RlKHRydWUsIGhhdGVSYWlkU2xvd01vZGVUaW1lKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkNoYW5naW5nIHdhaXQgdGltZToge3Nsb3dNb2RlV2FpdFRpbWV9cyAtPiB7aGF0ZVJhaWRTbG93TW9kZVRpbWV9cyIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIktlZXBpbmcgc2FtZSB3YWl0IHRpbWU6IHtzbG93TW9kZVdhaXRUaW1lfXMiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgQ1BILlR3aXRjaFNsb3dNb2RlKHRydWUsIGhhdGVSYWlkU2xvd01vZGVUaW1lKTsNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiRW5hYmxpbmcgc2xvdyBtb2RlLiBXYWl0IHRpbWU6IHtoYXRlUmFpZFNsb3dNb2RlVGltZX1zIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIGlmIChoYXRlUmFpZENsZWFyVFRTKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkNsZWFyaW5nIFRUUyBRdWV1ZS4iKTsNCiAgICAgICAgICAgICAgICBDUEguQnJvYWRjYXN0VWRwKDY2NjksICJ7XCJjb21tYW5kXCI6XCJzdG9wXCJ9Iik7DQogICAgICAgICAgICAgICAgQ1BILkJyb2FkY2FzdFVkcCg2NjY5LCAie1wiY29tbWFuZFwiOlwicGF1c2VcIn0iKTsNCiAgICAgICAgICAgICAgICBDUEguQnJvYWRjYXN0VWRwKDY2NjksICJ7XCJjb21tYW5kXCI6XCJjbGVhclwifSIpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIGlmIChoYXRlUmFpZERpc2FibGVBbGxCcm93c2VyU291cmNlcykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBEaXNhYmxlQWxsQnJvd3NlclNvdXJjZXMoKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIGZvcmVhY2ggKHN0cmluZyBhY3Rpb24gaW4gaGF0ZVJhaWRBY3Rpb25zKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChhY3Rpb24gPT0gIjwgQ2hvb3NlIEFuIEFjdGlvbiA+IiB8fCBzdHJpbmcuSXNOdWxsT3JFbXB0eShhY3Rpb24pKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICBDUEguRGlzYWJsZUFjdGlvbihhY3Rpb24pOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkRpc2FibGVkIGFjdGlvbjogJ3thY3Rpb259JyIpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgZm9yZWFjaCAoc3RyaW5nIHF1ZXVlIGluIGhhdGVSYWlkUXVldWVzKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChxdWV1ZSA9PSAiPCBDaG9vc2UgQSBRdWV1ZSA+IiB8fCBzdHJpbmcuSXNOdWxsT3JFbXB0eShxdWV1ZSkpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIENQSC5QYXVzZUFjdGlvblF1ZXVlKHF1ZXVlKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJQYXVzaW5nIHF1ZXVlOiAne3F1ZXVlfSciKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIGlmIChoYXRlUmFpZFBhdXNlQWxsUmV3YXJkcykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBMaXN0PFR3aXRjaFJld2FyZD4gcmV3YXJkRGF0YSA9IENQSC5Ud2l0Y2hHZXRSZXdhcmRzKCk7DQogICAgICAgICAgICAgICAgaWYgKHJld2FyZERhdGEgIT0gbnVsbCAmJiByZXdhcmREYXRhLkNvdW50ICE9IDApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpbnQgcmV3YXJkc1BhdXNlZCA9IDA7DQogICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciByZXdhcmQgaW4gcmV3YXJkRGF0YSkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXdhcmQuSXNPdXJzKQ0KICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkZhaWxlZCB0byBwYXVzZSB0aGUgcmV3YXJkICd7cmV3YXJkLlRpdGxlfScgYmVjYXVzZSBpdCdzIG5vdCBvd25lZCBieSBTdHJlYW1lci5ib3QiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgQ1BILlBhdXNlUmV3YXJkKHJld2FyZC5JZCk7DQogICAgICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJQYXVzZWQgY2hhbm5lbCByZXdhcmQ6ICd7cmV3YXJkLlRpdGxlfSciKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJld2FyZHNQYXVzZWQrKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIlBhdXNlZCB7cmV3YXJkc1BhdXNlZH0ve3Jld2FyZERhdGEuQ291bnR9IGNoYW5uZWwgcmV3YXJkcy4iKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgQ1BILlNldEdsb2JhbFZhcigidGF3bWFlX01PRF9UT09MU19oYXRlUmFpZFByb3RlY3Rpb25FbmFibGVkIiwgdHJ1ZSwgdHJ1ZSk7DQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VIYXRlUmFpZFByb3RlY3Rpb25FbmFibGVkKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgaWYgKF9lbW90ZU1vZGUpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgQ1BILlR3aXRjaEVtb3RlT25seSh0cnVlKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coIlJlc3RvcmVkIGVtb3RlLW9ubHkgbW9kZS4iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBDUEguVHdpdGNoRW1vdGVPbmx5KGZhbHNlKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coIkRpc2FibGVkIGVtb3RlLW9ubHkgbW9kZS4iKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBpZiAoX2ZvbGxvd2VyTW9kZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBDUEguVHdpdGNoRm9sbG93TW9kZShmYWxzZSk7DQogICAgICAgICAgICAgICAgQ1BILldhaXQoMTAwMCk7DQogICAgICAgICAgICAgICAgQ1BILlR3aXRjaEZvbGxvd01vZGUodHJ1ZSwgX2ZvbGxvd2VyTW9kZUR1cmF0aW9uLlZhbHVlKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJSZXN0b3JlZCBmb2xsb3dlci1vbmx5IG1vZGUuIER1cmF0aW9uOiB7X2ZvbGxvd2VyTW9kZUR1cmF0aW9ufW1pbiIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIENQSC5Ud2l0Y2hGb2xsb3dNb2RlKGZhbHNlKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coIkRpc2FibGVkIGZvbGxvd2VyLW9ubHkgbW9kZS4iKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBpZiAoX3N1YnNjcmliZXJNb2RlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIENQSC5Ud2l0Y2hTdWJzY3JpYmVyT25seSh0cnVlKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coIlJlc3RvcmVkIHN1YnNjcmliZXItb25seSBtb2RlLiIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIENQSC5Ud2l0Y2hTdWJzY3JpYmVyT25seShmYWxzZSk7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCJEaXNhYmxlZCBzdWJzY3JpYmVyLW9ubHkgbW9kZS4iKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBpZiAoX3Nsb3dNb2RlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIENQSC5Ud2l0Y2hTbG93TW9kZShmYWxzZSk7DQogICAgICAgICAgICAgICAgQ1BILldhaXQoMTAwMCk7DQogICAgICAgICAgICAgICAgQ1BILlR3aXRjaFNsb3dNb2RlKHRydWUsIF9zbG93TW9kZVdhaXRUaW1lLlZhbHVlKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJSZXN0b3JlZCBzbG93IG1vZGUuIFdhaXQgdGltZToge19zbG93TW9kZVdhaXRUaW1lfXMiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBDUEguVHdpdGNoU2xvd01vZGUoZmFsc2UpOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygiRGlzYWJsZWQgc2xvdyBtb2RlLiIpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgZm9yZWFjaCAoc3RyaW5nIHF1ZXVlIGluIGhhdGVSYWlkUXVldWVzKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChxdWV1ZSA9PSAiPCBDaG9vc2UgQSBRdWV1ZSA+IiB8fCBzdHJpbmcuSXNOdWxsT3JFbXB0eShxdWV1ZSkpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIENQSC5SZXN1bWVBY3Rpb25RdWV1ZShxdWV1ZSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiUmVzdW1pbmcgcXVldWU6ICd7cXVldWV9JyIpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgZm9yZWFjaCAoc3RyaW5nIGFjdGlvbiBpbiBoYXRlUmFpZEFjdGlvbnMpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PSAiPCBDaG9vc2UgQW4gQWN0aW9uID4iIHx8IHN0cmluZy5Jc051bGxPckVtcHR5KGFjdGlvbikpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIENQSC5FbmFibGVBY3Rpb24oYWN0aW9uKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJSZS1lbmFibGVkIGFjdGlvbjogJ3thY3Rpb259JyIpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgaWYgKGhhdGVSYWlkUGF1c2VBbGxSZXdhcmRzKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIExpc3Q8VHdpdGNoUmV3YXJkPiByZXdhcmREYXRhID0gQ1BILlR3aXRjaEdldFJld2FyZHMoKTsNCiAgICAgICAgICAgICAgICBpZiAocmV3YXJkRGF0YSAhPSBudWxsICYmIHJld2FyZERhdGEuQ291bnQgIT0gMCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGludCByZXdhcmRzVW5wYXVzZWQgPSAwOw0KICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcmV3YXJkIGluIHJld2FyZERhdGEpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmV3YXJkLklzT3VycykNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQgdG8gdW5wYXVzZSB0aGUgcmV3YXJkICd7cmV3YXJkLlRpdGxlfScgYmVjYXVzZSBpdCdzIG5vdCBvd25lZCBieSBTdHJlYW1lci5ib3QiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgQ1BILlVuUGF1c2VSZXdhcmQocmV3YXJkLklkKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIlVucGF1c2VkIGNoYW5uZWwgcmV3YXJkOiAne3Jld2FyZC5UaXRsZX0nIik7DQogICAgICAgICAgICAgICAgICAgICAgICByZXdhcmRzVW5wYXVzZWQrKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIlVucGF1c2VkIHtyZXdhcmRzVW5wYXVzZWR9L3tyZXdhcmREYXRhLkNvdW50fSBjaGFubmVsIHJld2FyZHMuIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgaWYgKGhhdGVSYWlkQ2xlYXJUVFMpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgQ1BILkJyb2FkY2FzdFVkcCg2NjY5LCAie1wiY29tbWFuZFwiOlwicmVzdW1lXCJ9Iik7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiUmVzdW1pbmcgVFRTIik7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBpZiAoaGF0ZVJhaWREaXNhYmxlQWxsQnJvd3NlclNvdXJjZXMpDQogICAgICAgICAgICAgICAgRW5hYmxlQWxsQnJvd3NlclNvdXJjZXMoKTsNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBfZW1vdGVNb2RlID0gZmFsc2U7DQogICAgICAgICAgICBfZm9sbG93ZXJNb2RlID0gZmFsc2U7DQogICAgICAgICAgICBfZm9sbG93ZXJNb2RlRHVyYXRpb24gPSBudWxsOw0KICAgICAgICAgICAgX3Nsb3dNb2RlID0gZmFsc2U7DQogICAgICAgICAgICBfc2xvd01vZGVXYWl0VGltZSA9IG51bGw7DQogICAgICAgICAgICBfc3Vic2NyaWJlck1vZGUgPSBmYWxzZTsNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgQ1BILlNldEdsb2JhbFZhcigidGF3bWFlX01PRF9UT09MU19oYXRlUmFpZFByb3RlY3Rpb25FbmFibGVkIiwgZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlSGF0ZVJhaWRQcm90ZWN0aW9uRGlzYWJsZWQpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBib29sIFNob3V0b3V0VXNlcigpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEZldGNoU2V0dGluZ3MoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFTaGFyZWRDaGF0Q2hlY2soKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInJhd0lucHV0Iiwgb3V0IHN0cmluZyByYXdJbnB1dCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImlzUmVwbHkiLCBvdXQgYm9vbCBpc1JlcGx5KTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJjb21tYW5kIiwgb3V0IHN0cmluZyBjb21tYW5kKTsNCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KGNvbW1hbmQpKQ0KICAgICAgICAgICAgY29tbWFuZCA9ICIhY29tbWFuZCI7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShyYXdJbnB1dCkgJiYgIWlzUmVwbHkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VDb21tYW5kTm9Vc2VyUHJvdmlkZWQuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJWNvbW1hbmQlIiwgY29tbWFuZCkpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgdHJpZWQgdG8gc2hvdXRvdXQgYSB1c2VyIHdpdGhvdXQgYW55IGlucHV0LiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFpc1JlcGx5KQ0KICAgICAgICB7DQogICAgICAgICAgICByYXdJbnB1dCA9IHJhd0lucHV0LlJlcGxhY2UoIkAiLCAiIik7DQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgc3RyaW5nIGxvY2FsaXplZCA9IEdldExvY2FsaXplZE5hbWUocmF3SW5wdXQpOw0KICAgICAgICAgICAgaWYgKGxvY2FsaXplZCAhPSBudWxsKQ0KICAgICAgICAgICAgICAgIHJhd0lucHV0ID0gbG9jYWxpemVkOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgQ1BILlRyeUdldEFyZygicmVwbHkuVXNlckxvZ2luIiwgb3V0IHN0cmluZyByZXBseVVzZXJOYW1lKTsNCiAgICAgICAgICAgIHJhd0lucHV0ID0gcmVwbHlVc2VyTmFtZTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIlNob3V0b3V0IGlzIHJlcGx5IHRvICd7cmVwbHlVc2VyTmFtZX0nIik7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgdXNlckluZm8gPSBDUEguVHdpdGNoR2V0RXh0ZW5kZWRVc2VySW5mb0J5TG9naW4ocmF3SW5wdXQpOw0KICAgICAgICBpZiAodXNlckluZm8gPT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQobWVzc2FnZVVzZXJEb2VzTm90RXhpc3QuUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXRhcmdldFVzZXIiLCByYXdJbnB1dCkpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgdHJpZWQgdG8gc2hvdXRvdXQgYSBub24tZXhpc3RpbmcgdXNlcjoge3Jhd0lucHV0fSIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKHNob3V0b3V0U2VuZFR3aXRjaFNob3V0b3V0KQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoQ1BILlR3aXRjaFNlbmRTaG91dG91dEJ5SWQodXNlckluZm8uVXNlcklkKSkNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJTZW50IGludGVybmFsIHNob3V0b3V0IHRvIHt1c2VySW5mby5Vc2VyTmFtZX0iKTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQgdG8gc2VuZCBpbnRlcm5hbCBzaG91dG91dCB0byB7dXNlckluZm8uVXNlck5hbWV9LCBsaWtlbHkgb24gY29vbGRvd24gb3IgY2hhbm5lbCBpcyBub3QgbGl2ZS4iKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VTaG91dG91dC5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIldGFyZ2V0VXNlciUiLCB1c2VySW5mby5Vc2VyTmFtZSkuUmVwbGFjZSgiJXRhcmdldFVzZXJOYW1lJSIsIHVzZXJJbmZvLlVzZXJMb2dpbikuUmVwbGFjZSgiJWdhbWUlIiwgdXNlckluZm8uR2FtZSkuUmVwbGFjZSgiJXRpdGxlJSIsIHVzZXJJbmZvLkNoYW5uZWxUaXRsZSkuUmVwbGFjZSgiJXRhZ3MlIiwgc3RyaW5nLkpvaW4oIiwgIiwgdXNlckluZm8uVGFncykpKTsNCiAgICAgICAgUG9zdFRvTG9nKCQiU2VudCBjaGF0IHNob3V0b3V0IHRvIHt1c2VySW5mby5Vc2VyTmFtZX0iKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgU2tpcFRUUygpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEluaXRMb2coKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEZldGNoU2V0dGluZ3MoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFTaGFyZWRDaGF0Q2hlY2soKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInJhd0lucHV0Iiwgb3V0IHN0cmluZyByYXdJbnB1dCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5Ccm9hZGNhc3RVZHAoNjY2OSwgIntcImNvbW1hbmRcIjpcInN0b3BcIn0iKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgUG9zdFRvTG9nKCJTa2lwcGluZyBUVFMuIik7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBib29sIFJhaWRNZXNzYWdlKCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVNoYXJlZENoYXRDaGVjaygpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBHZXRCcm9hZGNhc3RlckFuZEJvdCgpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VySWQiLCBvdXQgc3RyaW5nIHVzZXJJZCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJOYW1lIiwgb3V0IHN0cmluZyB1c2VyTmFtZSk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInJhd0lucHV0Iiwgb3V0IHN0cmluZyByYXdJbnB1dCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImNvbW1hbmQiLCBvdXQgc3RyaW5nIGNvbW1hbmQpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGludCBfaSA9IDA7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKHNvUG9zdFN1YlJhaWRNZXNzYWdlKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoc29Qb3N0U3ViUmFpZE1lc3NhZ2VBc0Jyb2FkY2FzdGVyKQ0KICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0QXNCcm9hZGNhc3RlcihtZXNzYWdlU29PdXRnb2luZ1JhaWRNZXNzYWdlU3Vicy5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlYnJvYWRjYXN0ZXJOYW1lQWxsQ2FwcyUiLCBicm9hZGNhc3RlclVzZXIuVG9VcHBlcigpLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWUlIiwgYnJvYWRjYXN0ZXJVc2VyKSkpOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VTb091dGdvaW5nUmFpZE1lc3NhZ2VTdWJzLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWVBbGxDYXBzJSIsIGJyb2FkY2FzdGVyVXNlci5Ub1VwcGVyKCkuUmVwbGFjZSgiJWJyb2FkY2FzdGVyTmFtZSUiLCBicm9hZGNhc3RlclVzZXIpKSk7DQogICAgICAgICAgICBfaSsrOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoc29Qb3N0Tm9uU3ViUmFpZE1lc3NhZ2UpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VTb091dGdvaW5nUmFpZE1lc3NhZ2VOb25TdWJzLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWVBbGxDYXBzJSIsIGJyb2FkY2FzdGVyVXNlci5Ub1VwcGVyKCkuUmVwbGFjZSgiJWJyb2FkY2FzdGVyTmFtZSUiLCBicm9hZGNhc3RlclVzZXIpKSk7DQogICAgICAgICAgICBfaSsrOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoX2kgPT0gMCkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoIltNT0QgVE9PTFNdIEVycm9yOiBObyByYWlkIG1lc3NhZ2VzIGF2YWlsYWJsZSwgYmVjYXVzZSB0aGV5J3JlIGRpc2FibGVkIGluIHRoZSBTZXR0aW5ncyBVSS4iKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiQWJvcnRpbmcsIGJlY2F1c2UgcmFpZCBtZXNzYWdlcyBhcmUgYm90aCBkaXNhYmxlZCIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBQb3N0VG9Mb2coJCJQb3N0ZWQgcmFpZCBtZXNzYWdlczoiKTsNCiAgICAgICAgUG9zdFRvTG9nKG1lc3NhZ2VTb091dGdvaW5nUmFpZE1lc3NhZ2VTdWJzLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWVBbGxDYXBzJSIsIGJyb2FkY2FzdGVyVXNlci5Ub1VwcGVyKCkuUmVwbGFjZSgiJWJyb2FkY2FzdGVyTmFtZSUiLCBicm9hZGNhc3RlclVzZXIpKSk7DQogICAgICAgIFBvc3RUb0xvZyhtZXNzYWdlU29PdXRnb2luZ1JhaWRNZXNzYWdlTm9uU3Vicy5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlYnJvYWRjYXN0ZXJOYW1lQWxsQ2FwcyUiLCBicm9hZGNhc3RlclVzZXIuVG9VcHBlcigpLlJlcGxhY2UoIiVicm9hZGNhc3Rlck5hbWUlIiwgYnJvYWRjYXN0ZXJVc2VyKSkpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBib29sIEdldE1vZENvbW1hbmRzKCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFDaGVja1NldHRpbmdzR2xvYmFsKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVNoYXJlZENoYXRDaGVjaygpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBHZXRCcm9hZGNhc3RlckFuZEJvdCgpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VySWQiLCBvdXQgc3RyaW5nIHVzZXJJZCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJOYW1lIiwgb3V0IHN0cmluZyB1c2VyTmFtZSk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgUmVwbHlUb0NoYXQoImh0dHBzOi8vdGF3bWFlLnh5ei91dGlsaXR5L21vZC10b29scyNjb21tYW5kcyIpOw0KICAgICAgICBQb3N0VG9Mb2coIlBvc3RlZCBtb2QgY29tbWFuZCBsaW5rIHRvIGNoYXQuIik7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgR2V0QmV0dGVyVGFyZ2V0SW5mbygpDQogICAgew0KICAgICAgICBHZXRFeHRlbnNpb25JbmZvKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgSW5pdExvZygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmICghQ2hlY2tTZXR0aW5nc0dsb2JhbCgpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEZldGNoU2V0dGluZ3MoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFTaGFyZWRDaGF0Q2hlY2soKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgR2V0QnJvYWRjYXN0ZXJBbmRCb3QoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyIiwgb3V0IHN0cmluZyB1c2VyKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygicmF3SW5wdXQiLCBvdXQgc3RyaW5nIHJhd0lucHV0KTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShyYXdJbnB1dCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIENQSC5TZXRBcmd1bWVudCgiYWRkVGFyZ2V0UmVzdWx0IiwgZmFsc2UpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiRmFpbGVkIHRvIGZldGNoIHVzZXIgZm9yIGVtcHR5IGlucHV0LiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgcmF3SW5wdXQgPSByYXdJbnB1dC5SZXBsYWNlKCJAIiwgIiIpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBzdHJpbmcgbG9jYWxpemVkID0gR2V0TG9jYWxpemVkTmFtZShyYXdJbnB1dCk7DQogICAgICAgIGlmIChsb2NhbGl6ZWQgIT0gbnVsbCkNCiAgICAgICAgICAgIHJhd0lucHV0ID0gbG9jYWxpemVkOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgZXhVc2VySW5mbyA9IENQSC5Ud2l0Y2hHZXRFeHRlbmRlZFVzZXJJbmZvQnlMb2dpbihyYXdJbnB1dCk7DQogICAgICAgIGlmIChleFVzZXJJbmZvID09IG51bGwpDQogICAgICAgIHsNCiAgICAgICAgICAgIENQSC5TZXRBcmd1bWVudCgiYWRkVGFyZ2V0UmVzdWx0IiwgZmFsc2UpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiRmFpbGVkIHRvIGZldGNoIHVzZXIgZm9yIGlucHV0OiB7cmF3SW5wdXR9Iik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBDUEguU2V0QXJndW1lbnQoInRhcmdldFVzZXIiLCBleFVzZXJJbmZvLlVzZXJOYW1lKTsNCiAgICAgICAgICAgIENQSC5TZXRBcmd1bWVudCgidGFyZ2V0VXNlck5hbWUiLCBleFVzZXJJbmZvLlVzZXJMb2dpbik7DQogICAgICAgICAgICBDUEguU2V0QXJndW1lbnQoInRhcmdldFVzZXJJZCIsIGV4VXNlckluZm8uVXNlcklkKTsNCiAgICAgICAgICAgIENQSC5TZXRBcmd1bWVudCgidGFyZ2V0RGVzY3JpcHRpb24iLCBleFVzZXJJbmZvLkRlc2NyaXB0aW9uKTsNCiAgICAgICAgICAgIENQSC5TZXRBcmd1bWVudCgidGFyZ2V0VXNlclByb2ZpbGVJbWFnZVVybCIsIGV4VXNlckluZm8uUHJvZmlsZUltYWdlVXJsKTsNCiAgICAgICAgICAgIENQSC5TZXRBcmd1bWVudCgidGFyZ2V0VXNlclR5cGUiLCBleFVzZXJJbmZvLlVzZXJUeXBlKTsNCiAgICAgICAgICAgIENQSC5TZXRBcmd1bWVudCgidGFyZ2V0SXNQYXJ0bmVyIiwgZXhVc2VySW5mby5Jc1BhcnRuZXIpOw0KICAgICAgICAgICAgQ1BILlNldEFyZ3VtZW50KCJ0YXJnZXRJc0FmZmlsaWF0ZSIsIGV4VXNlckluZm8uSXNBZmZpbGlhdGUpOw0KICAgICAgICAgICAgQ1BILlNldEFyZ3VtZW50KCJ0YXJnZXRJc0ZvbGxvd2luZyIsIGV4VXNlckluZm8uSXNGb2xsb3dpbmcpOw0KICAgICAgICAgICAgQ1BILlNldEFyZ3VtZW50KCJ0YXJnZXRJc1N1YnNjcmliZWQiLCBleFVzZXJJbmZvLklzU3Vic2NyaWJlZCk7DQogICAgICAgICAgICBDUEguU2V0QXJndW1lbnQoInRhcmdldFN1YnNjcmlwdGlvblRpZXIiLCBleFVzZXJJbmZvLlN1YnNjcmlwdGlvblRpZXIpOw0KICAgICAgICAgICAgQ1BILlNldEFyZ3VtZW50KCJ0YXJnZXRJc01vZGVyYXRvciIsIGV4VXNlckluZm8uSXNNb2RlcmF0b3IpOw0KICAgICAgICAgICAgQ1BILlNldEFyZ3VtZW50KCJ0YXJnZXRJc1ZpcCIsIGV4VXNlckluZm8uSXNWaXApOw0KICAgICAgICAgICAgQ1BILlNldEFyZ3VtZW50KCJ0YXJnZXRMYXN0QWN0aXZlIiwgZXhVc2VySW5mby5MYXN0QWN0aXZlKTsNCiAgICAgICAgICAgIENQSC5TZXRBcmd1bWVudCgidGFyZ2V0UHJldmlvdXNBY3RpdmUiLCBleFVzZXJJbmZvLlByZXZpb3VzQWN0aXZlKTsNCiAgICAgICAgICAgIENQSC5TZXRBcmd1bWVudCgiY3JlYXRlZEF0IiwgZXhVc2VySW5mby5DcmVhdGVkQXQpOw0KICAgICAgICAgICAgQ1BILlNldEFyZ3VtZW50KCJhY2NvdW50QWdlIiwgZXhVc2VySW5mby5BY2NvdW50QWdlKTsNCiAgICAgICAgICAgIENQSC5TZXRBcmd1bWVudCgiZ2FtZSIsIGV4VXNlckluZm8uR2FtZSk7DQogICAgICAgICAgICBDUEguU2V0QXJndW1lbnQoImdhbWVJZCIsIGV4VXNlckluZm8uR2FtZUlkKTsNCiAgICAgICAgICAgIENQSC5TZXRBcmd1bWVudCgidGFyZ2V0Q2hhbm5lbFRpdGxlIiwgZXhVc2VySW5mby5DaGFubmVsVGl0bGUpOw0KICAgICAgICAgICAgQ1BILlNldEFyZ3VtZW50KCJ0YWdzIiwgZXhVc2VySW5mby5UYWdzKTsNCiAgICAgICAgICAgIENQSC5TZXRBcmd1bWVudCgidGFnQ291bnQiLCBleFVzZXJJbmZvLlRhZ3MuQ291bnQpOw0KICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBleFVzZXJJbmZvLlRhZ3MuQ291bnQ7IGkrKykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBDUEguU2V0QXJndW1lbnQoJCJ0YWd7aX0iLCBleFVzZXJJbmZvLlRhZ3NbaV0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBDUEguU2V0QXJndW1lbnQoImFkZFRhcmdldFJlc3VsdCIsIHRydWUpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiU3VjY2Vzc2Z1bGx5IHByb3ZpZGVkIHVzZXIgZGF0YSBmb3IgJ3tleFVzZXJJbmZvLlVzZXJOYW1lfScgKCd7ZXhVc2VySW5mby5Vc2VyTG9naW59JykiKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gVFdJVENIIEFQSSBDQUxMUzogDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHJpdmF0ZSBhc3luYyBUYXNrPGludD4gUmVtb3ZlTGF0ZXN0Rm9sbG93ZXJzVGFzayhzdHJpbmcgYnJvYWRjYXN0ZXJJZCwgaW50IG1pbnV0ZXMpDQogICAgew0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyB0b2tlbiA9IENQSC5Ud2l0Y2hPQXV0aFRva2VuOw0KICAgICAgICBzdHJpbmcgY2xpZW50SWQgPSBDUEguVHdpdGNoQ2xpZW50SWQ7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGNsaWVudC5EZWZhdWx0UmVxdWVzdEhlYWRlcnMuQ2xlYXIoKTsNCiAgICAgICAgc3RyaW5nIGJhc2VVcmwgPSAkImh0dHBzOi8vYXBpLnR3aXRjaC50di9oZWxpeC9jaGFubmVscy9mb2xsb3dlcnM/YnJvYWRjYXN0ZXJfaWQ9e2Jyb2FkY2FzdGVySWR9JmZpcnN0PTEwMCI7DQogICAgICAgIHN0cmluZyBuZXh0UGFnZUN1cnNvciA9IG51bGw7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIERhdGVUaW1lIG5vd1V0YyA9IERhdGVUaW1lLlV0Y05vdzsNCiAgICAgICAgaW50IGNvdW50ID0gMDsNCiAgICAgICAgZG8NCiAgICAgICAgew0KICAgICAgICAgICAgc3RyaW5nIHVybCA9IGJhc2VVcmwgKyAobmV4dFBhZ2VDdXJzb3IgIT0gbnVsbCA/ICQiJmFmdGVyPXtuZXh0UGFnZUN1cnNvcn0iIDogIiIpOw0KICAgICAgICAgICAgdmFyIHJlcXVlc3RNZXNzYWdlID0gbmV3IEh0dHBSZXF1ZXN0TWVzc2FnZShIdHRwTWV0aG9kLkdldCwgdXJsKTsNCiAgICAgICAgICAgIHJlcXVlc3RNZXNzYWdlLkhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IG5ldyBBdXRoZW50aWNhdGlvbkhlYWRlclZhbHVlKCJCZWFyZXIiLCB0b2tlbik7DQogICAgICAgICAgICByZXF1ZXN0TWVzc2FnZS5IZWFkZXJzLkFkZCgiQ2xpZW50LUlkIiwgY2xpZW50SWQpOw0KICAgICAgICAgICAgSHR0cFJlc3BvbnNlTWVzc2FnZSByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5TZW5kQXN5bmMocmVxdWVzdE1lc3NhZ2UpOw0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIGlmICghcmVzcG9uc2UuSXNTdWNjZXNzU3RhdHVzQ29kZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBzdHJpbmcgZXJyb3JSZXNwb25zZUJvZHkgPSBhd2FpdCByZXNwb25zZS5Db250ZW50LlJlYWRBc1N0cmluZ0FzeW5jKCk7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiRmFpbGVkIHRvIHJldHJpZXZlIGZvbGxvd2Vycy4gU3RhdHVzOiB7cmVzcG9uc2UuU3RhdHVzQ29kZX0sIFJlc3BvbnNlOiB7ZXJyb3JSZXNwb25zZUJvZHl9Iik7DQogICAgICAgICAgICAgICAgcmV0dXJuIC0xOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBzdHJpbmcgcGFnZVJlc3BvbnNlQm9keSA9IGF3YWl0IHJlc3BvbnNlLkNvbnRlbnQuUmVhZEFzU3RyaW5nQXN5bmMoKTsNCiAgICAgICAgICAgIHZhciBqc29uUmVzcG9uc2UgPSBKT2JqZWN0LlBhcnNlKHBhZ2VSZXNwb25zZUJvZHkpOw0KICAgICAgICAgICAgdmFyIGZvbGxvd2VycyA9IGpzb25SZXNwb25zZVsiZGF0YSJdOw0KICAgICAgICAgICAgbmV4dFBhZ2VDdXJzb3IgPSBqc29uUmVzcG9uc2VbInBhZ2luYXRpb24iXT9bImN1cnNvciJdPy5WYWx1ZTxzdHJpbmc+KCk7DQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgaWYgKGZvbGxvd2VycyAhPSBudWxsKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBmb2xsb3dlciBpbiBmb2xsb3dlcnMpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBEYXRlVGltZSBmb2xsb3dlZEF0VXRjID0gZm9sbG93ZXJbImZvbGxvd2VkX2F0Il0uVmFsdWU8RGF0ZVRpbWU+KCk7DQogICAgICAgICAgICAgICAgICAgIGlmICgobm93VXRjIC0gZm9sbG93ZWRBdFV0YykuVG90YWxNaW51dGVzIDw9IG1pbnV0ZXMpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyB1c2VyTG9naW4gPSBmb2xsb3dlclsidXNlcl9sb2dpbiJdLlZhbHVlPHN0cmluZz4oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChDUEguVHdpdGNoQmxvY2tVc2VyKHVzZXJMb2dpbikpDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiUmVtb3ZlZCBmb2xsb3dlcjoge3VzZXJMb2dpbn0iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkZhaWxlZCB0byByZW1vdmUgZm9sbG93ZXI6IHt1c2VyTG9naW59Iik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCJGb2xsb3dlcnMgd2VyZSBudWxsIik7DQogICAgICAgICAgICAgICAgcmV0dXJuIC0xOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHdoaWxlICghc3RyaW5nLklzTnVsbE9yRW1wdHkobmV4dFBhZ2VDdXJzb3IpKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKGNvdW50ID4gMCkNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJTdWNjZXNzZnVsbHkgcmVtb3ZlZCB7Y291bnR9IGZvbGxvd2VycyB0aGF0IGhhdmUgZm9sbG93ZWQgd2l0aGluIHRoZSBsYXN0IHttaW51dGVzfSBtaW51dGVzLiIpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiU3VjY2Vzc2Z1bGx5IHJlbW92ZWQge2NvdW50fSBmb2xsb3dlcnMgdGhhdCBoYXZlIGZvbGxvd2VkIHdpdGhpbiB0aGUgbGFzdCB7bWludXRlc30gbWludXRlcyIpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgUmVwbHlUb0NoYXQoJCJEaWQgbm90IHJlbW92ZSBhbnkgZm9sbG93ZXJzIGJlY2F1c2Ugbm8gb25lIGZvbGxvd2VkIHdpdGhpbiB0aGUgbGFzdCB7bWludXRlc30gbWludXRlcy4iKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkRpZCBub3QgcmVtb3ZlIGFueSBmb2xsb3dlcnMgYmVjYXVzZSBubyBvbmUgZm9sbG93ZWQgd2l0aGluIHRoZSBsYXN0IHttaW51dGVzfSBtaW51dGVzLiIpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGNvdW50Ow0KICAgIH0NCg0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBhc3luYyBUYXNrPEpPYmplY3Q+IEdldEFjdGl2ZVBvbGwoc3RyaW5nIGJyb2FkY2FzdGVySWQpDQogICAgew0KICAgICAgICBJbml0TG9nKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyB0b2tlbiA9IENQSC5Ud2l0Y2hPQXV0aFRva2VuOw0KICAgICAgICBzdHJpbmcgY2xpZW50SWQgPSBDUEguVHdpdGNoQ2xpZW50SWQ7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGNsaWVudC5EZWZhdWx0UmVxdWVzdEhlYWRlcnMuQ2xlYXIoKTsNCiAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgSHR0cFJlcXVlc3RNZXNzYWdlKEh0dHBNZXRob2QuR2V0LCAkImh0dHBzOi8vYXBpLnR3aXRjaC50di9oZWxpeC9wb2xscz9icm9hZGNhc3Rlcl9pZD17YnJvYWRjYXN0ZXJJZH0mZmlyc3Q9MjAiKTsNCiAgICAgICAgcmVxdWVzdC5IZWFkZXJzLkF1dGhvcml6YXRpb24gPSBuZXcgQXV0aGVudGljYXRpb25IZWFkZXJWYWx1ZSgiQmVhcmVyIiwgdG9rZW4pOw0KICAgICAgICByZXF1ZXN0LkhlYWRlcnMuQWRkKCJDbGllbnQtSWQiLCBjbGllbnRJZCk7DQogICAgICAgIEh0dHBSZXNwb25zZU1lc3NhZ2UgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuU2VuZEFzeW5jKHJlcXVlc3QpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIXJlc3BvbnNlLklzU3VjY2Vzc1N0YXR1c0NvZGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkZhaWxlZCB0byByZXRyaWV2ZSBwb2xscy4gU3RhdHVzOiB7cmVzcG9uc2UuU3RhdHVzQ29kZX0iKTsNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgUG9zdFRvTG9nKCJTdWNjZXNzZnVsbHkgcmV0cmlldmVkIHBvbGxzIik7DQogICAgICAgIHN0cmluZyBib2R5ID0gYXdhaXQgcmVzcG9uc2UuQ29udGVudC5SZWFkQXNTdHJpbmdBc3luYygpOw0KICAgICAgICB2YXIganNvbiA9IEpPYmplY3QuUGFyc2UoYm9keSk7DQogICAgICAgIHZhciBkYXRhID0gKEpBcnJheSlqc29uWyJkYXRhIl07DQogICAgICAgIHZhciBhY3RpdmUgPSBkYXRhLkZpcnN0T3JEZWZhdWx0KHAgPT4gcFsic3RhdHVzIl0uVmFsdWU8c3RyaW5nPigpID09ICJBQ1RJVkUiKTsNCiAgICAgICAgaWYgKGFjdGl2ZSA9PSBudWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICBQb3N0VG9Mb2coIk5vIGFjdGl2ZSBwb2xsIGZvdW5kIik7DQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfQ0KDQogICAgICAgIFBvc3RUb0xvZygkIkFjdGl2ZSBwb2xsIGZvdW5kOiB7YWN0aXZlWyJ0aXRsZSJdLlZhbHVlPHN0cmluZz4oKX0gKHthY3RpdmVbImlkIl0uVmFsdWU8c3RyaW5nPigpfSkiKTsNCiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBKT2JqZWN0DQogICAgICAgIHsNCiAgICAgICAgICAgIFsiaWQiXSA9IGFjdGl2ZVsiaWQiXSwNCiAgICAgICAgICAgIFsidGl0bGUiXSA9IGFjdGl2ZVsidGl0bGUiXSwNCiAgICAgICAgICAgIFsiZHVyYXRpb24iXSA9IGFjdGl2ZVsiZHVyYXRpb24iXSwNCiAgICAgICAgICAgIFsiY2hvaWNlcyJdID0gbmV3IEpBcnJheShhY3RpdmVbImNob2ljZXMiXS5TZWxlY3QoYyA9PiBuZXcgSk9iamVjdCB7IFsiaWQiXSA9IGNbImlkIl0sIFsidGl0bGUiXSA9IGNbInRpdGxlIl0sIFsidm90ZXMiXSA9IGNbInZvdGVzIl0gfSkpDQogICAgICAgIH07DQogICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGFzeW5jIFRhc2s8Sk9iamVjdD4gR2V0QWN0aXZlUHJlZGljdGlvbihzdHJpbmcgYnJvYWRjYXN0ZXJJZCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgSW5pdExvZygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBzdHJpbmcgdG9rZW4gPSBDUEguVHdpdGNoT0F1dGhUb2tlbjsNCiAgICAgICAgc3RyaW5nIGNsaWVudElkID0gQ1BILlR3aXRjaENsaWVudElkOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBjbGllbnQuRGVmYXVsdFJlcXVlc3RIZWFkZXJzLkNsZWFyKCk7DQogICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IEh0dHBSZXF1ZXN0TWVzc2FnZShIdHRwTWV0aG9kLkdldCwgJCJodHRwczovL2FwaS50d2l0Y2gudHYvaGVsaXgvcHJlZGljdGlvbnM/YnJvYWRjYXN0ZXJfaWQ9e2Jyb2FkY2FzdGVySWR9JmZpcnN0PTIwIik7DQogICAgICAgIHJlcXVlc3QuSGVhZGVycy5BdXRob3JpemF0aW9uID0gbmV3IEF1dGhlbnRpY2F0aW9uSGVhZGVyVmFsdWUoIkJlYXJlciIsIHRva2VuKTsNCiAgICAgICAgcmVxdWVzdC5IZWFkZXJzLkFkZCgiQ2xpZW50LUlkIiwgY2xpZW50SWQpOw0KICAgICAgICBIdHRwUmVzcG9uc2VNZXNzYWdlIHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LlNlbmRBc3luYyhyZXF1ZXN0KTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKCFyZXNwb25zZS5Jc1N1Y2Nlc3NTdGF0dXNDb2RlKQ0KICAgICAgICB7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQgdG8gcmV0cmlldmUgcHJlZGljdGlvbnMuIFN0YXR1czoge3Jlc3BvbnNlLlN0YXR1c0NvZGV9Iik7DQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIFBvc3RUb0xvZygiU3VjY2Vzc2Z1bGx5IHJldHJpZXZlZCBwcmVkaWN0aW9ucyIpOw0KICAgICAgICBzdHJpbmcgYm9keSA9IGF3YWl0IHJlc3BvbnNlLkNvbnRlbnQuUmVhZEFzU3RyaW5nQXN5bmMoKTsNCiAgICAgICAgdmFyIGpzb24gPSBKT2JqZWN0LlBhcnNlKGJvZHkpOw0KICAgICAgICB2YXIgZGF0YSA9IChKQXJyYXkpanNvblsiZGF0YSJdOw0KICAgICAgICB2YXIgYWN0aXZlID0gZGF0YS5GaXJzdE9yRGVmYXVsdChwID0+DQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBzdGF0dXMgPSBwWyJzdGF0dXMiXS5WYWx1ZTxzdHJpbmc+KCk7DQogICAgICAgICAgICByZXR1cm4gc3RhdHVzID09ICJBQ1RJVkUiIHx8IHN0YXR1cyA9PSAiTE9DS0VEIjsNCiAgICAgICAgfSk7DQogICAgICAgIGlmIChhY3RpdmUgPT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgUG9zdFRvTG9nKCJObyBhY3RpdmUgcHJlZGljdGlvbiBmb3VuZCIpOw0KICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBQb3N0VG9Mb2coJCJBY3RpdmUgcHJlZGljdGlvbiBmb3VuZDoge2FjdGl2ZVsidGl0bGUiXS5WYWx1ZTxzdHJpbmc+KCl9ICh7YWN0aXZlWyJpZCJdLlZhbHVlPHN0cmluZz4oKX0pIC8vIFN0YXR1czoge2FjdGl2ZVsic3RhdHVzIl0uVmFsdWU8c3RyaW5nPigpfSIpOw0KICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEpPYmplY3QNCiAgICAgICAgew0KICAgICAgICAgICAgWyJpZCJdID0gYWN0aXZlWyJpZCJdLA0KICAgICAgICAgICAgWyJ0aXRsZSJdID0gYWN0aXZlWyJ0aXRsZSJdLA0KICAgICAgICAgICAgWyJ3aW5uaW5nX291dGNvbWVfaWQiXSA9IGFjdGl2ZVsid2lubmluZ19vdXRjb21lX2lkIl0sDQogICAgICAgICAgICBbInByZWRpY3Rpb25fd2luZG93Il0gPSBhY3RpdmVbInByZWRpY3Rpb25fd2luZG93Il0sDQogICAgICAgICAgICBbInN0YXR1cyJdID0gYWN0aXZlWyJzdGF0dXMiXSwNCiAgICAgICAgICAgIFsib3V0Y29tZXMiXSA9IG5ldyBKQXJyYXkoYWN0aXZlWyJvdXRjb21lcyJdLlNlbGVjdChvID0+IG5ldyBKT2JqZWN0IHsgWyJpZCJdID0gb1siaWQiXSwgWyJ0aXRsZSJdID0gb1sidGl0bGUiXSwgWyJ1c2VycyJdID0gb1sidXNlcnMiXSwgWyJjaGFubmVsX3BvaW50cyJdID0gb1siY2hhbm5lbF9wb2ludHMiXSB9KSkNCiAgICAgICAgfTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwcml2YXRlIGFzeW5jIFRhc2s8KHN0cmluZyBpZCwgc3RyaW5nIG5hbWUpPiBHZXRJR0RCR2FtZUluZm8oc3RyaW5nIHJhd0lucHV0KQ0KICAgIHsNCiAgICAgICAgc3RyaW5nIGFjY2Vzc1Rva2VuID0gQ1BILlR3aXRjaE9BdXRoVG9rZW47DQogICAgICAgIHN0cmluZyBjbGllbnRJZCA9IENQSC5Ud2l0Y2hDbGllbnRJZDsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIHVybCA9ICQiaHR0cHM6Ly9hcGkudHdpdGNoLnR2L2hlbGl4L3NlYXJjaC9jYXRlZ29yaWVzP3F1ZXJ5PXtVcmkuRXNjYXBlRGF0YVN0cmluZyhyYXdJbnB1dCl9JmZpcnN0PTEwMCI7DQogICAgICAgIGNsaWVudC5EZWZhdWx0UmVxdWVzdEhlYWRlcnMuQ2xlYXIoKTsNCiAgICAgICAgY2xpZW50LkRlZmF1bHRSZXF1ZXN0SGVhZGVycy5BZGQoIkNsaWVudC1JRCIsIGNsaWVudElkKTsNCiAgICAgICAgY2xpZW50LkRlZmF1bHRSZXF1ZXN0SGVhZGVycy5BZGQoIkF1dGhvcml6YXRpb24iLCAkIkJlYXJlciB7YWNjZXNzVG9rZW59Iik7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5HZXRBc3luYyh1cmwpOw0KICAgICAgICByZXNwb25zZS5FbnN1cmVTdWNjZXNzU3RhdHVzQ29kZSgpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgcmVzcG9uc2VCb2R5ID0gYXdhaXQgcmVzcG9uc2UuQ29udGVudC5SZWFkQXNTdHJpbmdBc3luYygpOw0KICAgICAgICB2YXIganNvblJvb3QgPSBKT2JqZWN0LlBhcnNlKHJlc3BvbnNlQm9keSk7DQogICAgICAgIHZhciBkYXRhQXJyYXkgPSAoSkFycmF5KWpzb25Sb290WyJkYXRhIl07DQogICAgICAgIGlmIChkYXRhQXJyYXkgPT0gbnVsbCB8fCBkYXRhQXJyYXkuQ291bnQgPT0gMCkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIChudWxsLCBudWxsKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHN0cmluZyBxdWVyeSA9IHJhd0lucHV0LlRyaW0oKTsNCiAgICAgICAgc3RyaW5nIHF1ZXJ5TG93ZXIgPSBxdWVyeS5Ub0xvd2VySW52YXJpYW50KCk7DQogICAgICAgIEpPYmplY3QgYmVzdE1hdGNoID0gbnVsbDsNCiAgICAgICAgaW50IGJlc3REaXN0YW5jZSA9IGludC5NYXhWYWx1ZTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaW50IExldmVuc2h0ZWluRGlzdGFuY2Uoc3RyaW5nIGEsIHN0cmluZyBiKQ0KICAgICAgICB7DQogICAgICAgICAgICBpbnQgbGVuQSA9IGEuTGVuZ3RoOw0KICAgICAgICAgICAgaW50IGxlbkIgPSBiLkxlbmd0aDsNCiAgICAgICAgICAgIGludFssIF0gZCA9IG5ldyBpbnRbbGVuQSArIDEsIGxlbkIgKyAxXTsNCiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDw9IGxlbkE7IGkrKykNCiAgICAgICAgICAgICAgICBkW2ksIDBdID0gaTsNCiAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDw9IGxlbkI7IGorKykNCiAgICAgICAgICAgICAgICBkWzAsIGpdID0gajsNCiAgICAgICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDw9IGxlbkE7IGkrKykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMTsgaiA8PSBsZW5COyBqKyspDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpbnQgY29zdCA9IChhW2kgLSAxXSA9PSBiW2ogLSAxXSkgPyAwIDogMTsNCiAgICAgICAgICAgICAgICAgICAgZFtpLCBqXSA9IE1hdGguTWluKE1hdGguTWluKGRbaSAtIDEsIGpdICsgMSwgZFtpLCBqIC0gMV0gKyAxKSwgZFtpIC0gMSwgaiAtIDFdICsgY29zdCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gZFtsZW5BLCBsZW5CXTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZvcmVhY2ggKHZhciBpdGVtIGluIGRhdGFBcnJheSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGdhbWVPYmogPSAoSk9iamVjdClpdGVtOw0KICAgICAgICAgICAgc3RyaW5nIG5hbWUgPSBnYW1lT2JqWyJuYW1lIl0/LlRvU3RyaW5nKCk7DQogICAgICAgICAgICBzdHJpbmcgaWQgPSBnYW1lT2JqWyJpZCJdPy5Ub1N0cmluZygpOw0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShuYW1lKSB8fCBzdHJpbmcuSXNOdWxsT3JFbXB0eShpZCkpDQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgc3RyaW5nIG5hbWVMb3dlciA9IG5hbWUuVG9Mb3dlckludmFyaWFudCgpOw0KICAgICAgICAgICAgaWYgKG5hbWVMb3dlciA9PSBxdWVyeUxvd2VyKQ0KICAgICAgICAgICAgICAgIHJldHVybiAoaWQsIG5hbWUpOw0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIGludCBkaXN0ID0gTGV2ZW5zaHRlaW5EaXN0YW5jZShxdWVyeUxvd2VyLCBuYW1lTG93ZXIpOw0KICAgICAgICAgICAgaWYgKGRpc3QgPCBiZXN0RGlzdGFuY2UpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgYmVzdERpc3RhbmNlID0gZGlzdDsNCiAgICAgICAgICAgICAgICBiZXN0TWF0Y2ggPSBnYW1lT2JqOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGJlc3RNYXRjaCAhPSBudWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICBzdHJpbmcgYmVzdElkID0gYmVzdE1hdGNoWyJpZCJdPy5Ub1N0cmluZygpOw0KICAgICAgICAgICAgc3RyaW5nIGJlc3ROYW1lID0gYmVzdE1hdGNoWyJuYW1lIl0/LlRvU3RyaW5nKCk7DQogICAgICAgICAgICByZXR1cm4gKGJlc3RJZCwgYmVzdE5hbWUpOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIGZpcnN0ID0gKEpPYmplY3QpZGF0YUFycmF5WzBdOw0KICAgICAgICByZXR1cm4gKGZpcnN0WyJpZCJdPy5Ub1N0cmluZygpLCBmaXJzdFsibmFtZSJdPy5Ub1N0cmluZygpKTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYXN5bmMgVGFzazwoYm9vbCBlbW90ZU1vZGUsIGJvb2wgZm9sbG93ZXJNb2RlLCBpbnQ/IGZvbGxvd2VyTW9kZUR1cmF0aW9uLCBib29sIG5vbk1vZGVyYXRvckNoYXREZWxheSwgaW50PyBub25Nb2RlcmF0b3JDaGF0RGVsYXlEdXJhdGlvbiwgYm9vbCBzbG93TW9kZSwgaW50PyBzbG93TW9kZVdhaXRUaW1lLCBib29sIHN1YnNjcmliZXJNb2RlLCBib29sIHVuaXF1ZUNoYXRNb2RlKT4gR2V0Q2hhdFNldHRpbmdzKHN0cmluZyBicm9hZGNhc3RlcklkKQ0KICAgIHsNCiAgICAgICAgSW5pdExvZygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBzdHJpbmcgdG9rZW4gPSBDUEguVHdpdGNoT0F1dGhUb2tlbjsNCiAgICAgICAgc3RyaW5nIGNsaWVudElkID0gQ1BILlR3aXRjaENsaWVudElkOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBjbGllbnQuRGVmYXVsdFJlcXVlc3RIZWFkZXJzLkNsZWFyKCk7DQogICAgICAgIHZhciB1cmwgPSAkImh0dHBzOi8vYXBpLnR3aXRjaC50di9oZWxpeC9jaGF0L3NldHRpbmdzP2Jyb2FkY2FzdGVyX2lkPXticm9hZGNhc3RlcklkfSI7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IEh0dHBSZXF1ZXN0TWVzc2FnZShIdHRwTWV0aG9kLkdldCwgdXJsKTsNCiAgICAgICAgcmVxdWVzdC5IZWFkZXJzLkF1dGhvcml6YXRpb24gPSBuZXcgQXV0aGVudGljYXRpb25IZWFkZXJWYWx1ZSgiQmVhcmVyIiwgdG9rZW4pOw0KICAgICAgICByZXF1ZXN0LkhlYWRlcnMuQWRkKCJDbGllbnQtSWQiLCBjbGllbnRJZCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEh0dHBSZXNwb25zZU1lc3NhZ2UgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuU2VuZEFzeW5jKHJlcXVlc3QpOw0KICAgICAgICBpZiAoIXJlc3BvbnNlLklzU3VjY2Vzc1N0YXR1c0NvZGUpDQogICAgICAgICAgICByZXR1cm4gKGZhbHNlLCBmYWxzZSwgbnVsbCwgZmFsc2UsIG51bGwsIGZhbHNlLCBudWxsLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIganNvbiA9IEpPYmplY3QuUGFyc2UoYXdhaXQgcmVzcG9uc2UuQ29udGVudC5SZWFkQXNTdHJpbmdBc3luYygpKTsNCiAgICAgICAgdmFyIHMgPSAoSk9iamVjdCkoKEpBcnJheSlqc29uWyJkYXRhIl0pP1swXTsNCiAgICAgICAgaWYgKHMgPT0gbnVsbCkNCiAgICAgICAgICAgIHJldHVybiAoZmFsc2UsIGZhbHNlLCBudWxsLCBmYWxzZSwgbnVsbCwgZmFsc2UsIG51bGwsIGZhbHNlLCBmYWxzZSk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGJvb2wgZW1vdGVNb2RlID0gc1siZW1vdGVfbW9kZSJdLlZhbHVlPGJvb2w+KCk7DQogICAgICAgIGJvb2wgZm9sbG93ZXJNb2RlID0gc1siZm9sbG93ZXJfbW9kZSJdLlZhbHVlPGJvb2w+KCk7DQogICAgICAgIGludD8gZm9sbG93ZXJNb2RlRHVyYXRpb24gPSBzWyJmb2xsb3dlcl9tb2RlX2R1cmF0aW9uIl0/LlZhbHVlPGludD8+KCk7DQogICAgICAgIGJvb2wgbm9uTW9kZXJhdG9yQ2hhdERlbGF5ID0gc1sibm9uX21vZGVyYXRvcl9jaGF0X2RlbGF5Il0/LlZhbHVlPGJvb2w+KCkgPz8gZmFsc2U7DQogICAgICAgIGludD8gbm9uTW9kZXJhdG9yQ2hhdERlbGF5RHVyYXRpb24gPSBzWyJub25fbW9kZXJhdG9yX2NoYXRfZGVsYXlfZHVyYXRpb24iXT8uVmFsdWU8aW50Pz4oKTsNCiAgICAgICAgYm9vbCBzbG93TW9kZSA9IHNbInNsb3dfbW9kZSJdLlZhbHVlPGJvb2w+KCk7DQogICAgICAgIGludD8gc2xvd01vZGVXYWl0VGltZSA9IHNbInNsb3dfbW9kZV93YWl0X3RpbWUiXT8uVmFsdWU8aW50Pz4oKTsNCiAgICAgICAgYm9vbCBzdWJzY3JpYmVyTW9kZSA9IHNbInN1YnNjcmliZXJfbW9kZSJdLlZhbHVlPGJvb2w+KCk7DQogICAgICAgIGJvb2wgdW5pcXVlQ2hhdE1vZGUgPSBzWyJ1bmlxdWVfY2hhdF9tb2RlIl0uVmFsdWU8Ym9vbD4oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgUG9zdFRvTG9nKCQiRmV0Y2hlZCBDaGF0IFNldHRpbmdzIC0gRW1vdGUgTW9kZToge2Vtb3RlTW9kZX0sIEZvbGxvd2VyIE1vZGU6IHtmb2xsb3dlck1vZGV9LCBGb2xsb3dlciBNb2RlIER1cmF0aW9uOiB7Zm9sbG93ZXJNb2RlRHVyYXRpb259LCBOb24tTW9kZXJhdG9yIENoYXQgRGVsYXk6IHtub25Nb2RlcmF0b3JDaGF0RGVsYXl9LCBOb24tTW9kZXJhdG9yIENoYXQgRGVsYXkgRHVyYXRpb246IHtub25Nb2RlcmF0b3JDaGF0RGVsYXlEdXJhdGlvbn0sIFNsb3cgTW9kZToge3Nsb3dNb2RlfSwgU2xvdyBNb2RlIFdhaXQgVGltZToge3Nsb3dNb2RlV2FpdFRpbWV9LCBTdWJzY3JpYmVyIE1vZGU6IHtzdWJzY3JpYmVyTW9kZX0sIFVuaXF1ZSBDaGF0IE1vZGU6IHt1bmlxdWVDaGF0TW9kZX0iKTsNCiAgICAgICAgcmV0dXJuIChlbW90ZU1vZGUsIGZvbGxvd2VyTW9kZSwgZm9sbG93ZXJNb2RlRHVyYXRpb24sIG5vbk1vZGVyYXRvckNoYXREZWxheSwgbm9uTW9kZXJhdG9yQ2hhdERlbGF5RHVyYXRpb24sIHNsb3dNb2RlLCBzbG93TW9kZVdhaXRUaW1lLCBzdWJzY3JpYmVyTW9kZSwgdW5pcXVlQ2hhdE1vZGUpOw0KICAgIH0NCg0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBhc3luYyBUYXNrPChib29sIHNub296ZVN1Y2Nlc3MsIGludCBuZXh0QWRNaW51dGVzLCBpbnQgc25vb3plQ291bnQsIGludCBtaW51dGVzVW50aWxSZWZyZXNoKT4gU25vb3plTmV4dEFkKCkNCiAgICB7DQogICAgICAgIHN0cmluZyB0b2tlbiA9IENQSC5Ud2l0Y2hPQXV0aFRva2VuOw0KICAgICAgICBzdHJpbmcgY2xpZW50SWQgPSBDUEguVHdpdGNoQ2xpZW50SWQ7DQogICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IEh0dHBSZXF1ZXN0TWVzc2FnZShIdHRwTWV0aG9kLlBvc3QsICQiaHR0cHM6Ly9hcGkudHdpdGNoLnR2L2hlbGl4L2NoYW5uZWxzL2Fkcy9zY2hlZHVsZS9zbm9vemU/YnJvYWRjYXN0ZXJfaWQ9e2Jyb2FkY2FzdGVyVXNlcklkfSIpOw0KICAgICAgICByZXF1ZXN0LkhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IG5ldyBBdXRoZW50aWNhdGlvbkhlYWRlclZhbHVlKCJCZWFyZXIiLCB0b2tlbik7DQogICAgICAgIHJlcXVlc3QuSGVhZGVycy5BZGQoIkNsaWVudC1JZCIsIGNsaWVudElkKTsNCiAgICAgICAgSHR0cFJlc3BvbnNlTWVzc2FnZSByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5TZW5kQXN5bmMocmVxdWVzdCk7DQogICAgICAgIGlmICghcmVzcG9uc2UuSXNTdWNjZXNzU3RhdHVzQ29kZSkNCiAgICAgICAgew0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiRmFpbGVkIHRvIHNub296ZSBuZXh0IGFkIChTdGF0dXM6IHtyZXNwb25zZS5TdGF0dXNDb2RlfSkuIik7DQogICAgICAgICAgICByZXR1cm4gKGZhbHNlLCAwLCAwLCAwKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHN0cmluZyBib2R5ID0gYXdhaXQgcmVzcG9uc2UuQ29udGVudC5SZWFkQXNTdHJpbmdBc3luYygpOw0KICAgICAgICBKT2JqZWN0IGpzb24gPSBKT2JqZWN0LlBhcnNlKGJvZHkpOw0KICAgICAgICBKQXJyYXkgZGF0YSA9IChKQXJyYXkpanNvblsiZGF0YSJdOw0KICAgICAgICBpZiAoZGF0YSA9PSBudWxsIHx8IGRhdGEuQ291bnQgPT0gMCkNCiAgICAgICAgew0KICAgICAgICAgICAgUG9zdFRvTG9nKCJObyBhZCBzY2hlZHVsZSBkYXRhIHJldHVybmVkLiIpOw0KICAgICAgICAgICAgcmV0dXJuIChmYWxzZSwgMCwgMCwgMCk7DQogICAgICAgIH0NCg0KICAgICAgICBKT2JqZWN0IHNub296ZUluZm8gPSAoSk9iamVjdClkYXRhWzBdOw0KICAgICAgICBpbnQgc25vb3plQ291bnQgPSBzbm9vemVJbmZvWyJzbm9vemVfY291bnQiXS5WYWx1ZTxpbnQ+KCk7DQogICAgICAgIHN0cmluZyBzbm9vemVSZWZyZXNoQXQgPSBzbm9vemVJbmZvWyJzbm9vemVfcmVmcmVzaF9hdCJdLlZhbHVlPHN0cmluZz4oKTsNCiAgICAgICAgc3RyaW5nIG5leHRBZEF0ID0gc25vb3plSW5mb1sibmV4dF9hZF9hdCJdLlZhbHVlPHN0cmluZz4oKTsNCiAgICAgICAgdmFyIHJlZnJlc2hUaW1lVXRjID0gRGF0ZVRpbWVPZmZzZXQuUGFyc2Uoc25vb3plUmVmcmVzaEF0KTsNCiAgICAgICAgdmFyIGxvY2FsUmVmcmVzaCA9IHJlZnJlc2hUaW1lVXRjLlRvTG9jYWxUaW1lKCk7DQogICAgICAgIHZhciBub3dMb2NhbCA9IERhdGVUaW1lT2Zmc2V0Lk5vdzsNCiAgICAgICAgaW50IG1pbnV0ZXNVbnRpbFJlZnJlc2ggPSAoaW50KU1hdGguUm91bmQoKGxvY2FsUmVmcmVzaCAtIG5vd0xvY2FsKS5Ub3RhbE1pbnV0ZXMpOw0KICAgICAgICB2YXIgbmV4dEFkVGltZVV0YyA9IERhdGVUaW1lT2Zmc2V0LlBhcnNlKG5leHRBZEF0KTsNCiAgICAgICAgdmFyIG5vd1V0YyA9IERhdGVUaW1lT2Zmc2V0LlV0Y05vdzsNCiAgICAgICAgaW50IG5leHRBZE1pbnV0ZXMgPSAoaW50KU1hdGguUm91bmQoKG5leHRBZFRpbWVVdGMgLSBub3dVdGMpLlRvdGFsTWludXRlcyk7DQogICAgICAgIFBvc3RUb0xvZygkIlNub296ZWQgbmV4dCBhZC4gTmV4dCBhZCBpbiB+e25leHRBZE1pbnV0ZXN9IG1pbiwgc25vb3plcyBsZWZ0OiB7c25vb3plQ291bnR9LCByZWZyZXNoIGluIH57bWludXRlc1VudGlsUmVmcmVzaH0gbWluLiIpOw0KICAgICAgICByZXR1cm4gKHRydWUsIG5leHRBZE1pbnV0ZXMsIHNub296ZUNvdW50LCBtaW51dGVzVW50aWxSZWZyZXNoKTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgY2xhc3MgRm9sbG93ZXJJbmZvDQogICAgew0KICAgICAgICBwdWJsaWMgc3RyaW5nIFVzZXJOYW1lIHsgZ2V0OyBzZXQ7IH0NCiAgICAgICAgcHVibGljIHN0cmluZyBVc2VyTG9naW4geyBnZXQ7IHNldDsgfQ0KICAgICAgICBwdWJsaWMgc3RyaW5nIFVzZXJJZCB7IGdldDsgc2V0OyB9DQogICAgICAgIHB1YmxpYyBEYXRlVGltZU9mZnNldCBGb2xsb3dlZEF0TG9jYWwgeyBnZXQ7IHNldDsgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyBhc3luYyBUYXNrPExpc3Q8Rm9sbG93ZXJJbmZvPj4gR2V0Rm9sbG93ZXJMaXN0KCkNCiAgICB7DQogICAgICAgIEdldEJyb2FkY2FzdGVyQW5kQm90KCk7DQogICAgICAgIHN0cmluZyB0b2tlbiA9IENQSC5Ud2l0Y2hPQXV0aFRva2VuOw0KICAgICAgICBzdHJpbmcgY2xpZW50SWQgPSBDUEguVHdpdGNoQ2xpZW50SWQ7DQogICAgICAgIHZhciBmb2xsb3dlcnMgPSBuZXcgTGlzdDxGb2xsb3dlckluZm8+KCk7DQogICAgICAgIHN0cmluZyBjdXJzb3IgPSBudWxsOw0KICAgICAgICBkbw0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgdXJsID0gJCJodHRwczovL2FwaS50d2l0Y2gudHYvaGVsaXgvY2hhbm5lbHMvZm9sbG93ZXJzP2Jyb2FkY2FzdGVyX2lkPXticm9hZGNhc3RlclVzZXJJZH0mZmlyc3Q9MTAwIiArIChjdXJzb3IgIT0gbnVsbCA/ICQiJmFmdGVyPXtjdXJzb3J9IiA6ICIiKTsNCiAgICAgICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IEh0dHBSZXF1ZXN0TWVzc2FnZShIdHRwTWV0aG9kLkdldCwgdXJsKTsNCiAgICAgICAgICAgIHJlcXVlc3QuSGVhZGVycy5BdXRob3JpemF0aW9uID0gbmV3IEF1dGhlbnRpY2F0aW9uSGVhZGVyVmFsdWUoIkJlYXJlciIsIHRva2VuKTsNCiAgICAgICAgICAgIHJlcXVlc3QuSGVhZGVycy5BZGQoIkNsaWVudC1JZCIsIGNsaWVudElkKTsNCiAgICAgICAgICAgIEh0dHBSZXNwb25zZU1lc3NhZ2UgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuU2VuZEFzeW5jKHJlcXVlc3QpOw0KICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5Jc1N1Y2Nlc3NTdGF0dXNDb2RlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHN0cmluZyBlcnJvckJvZHkgPSBhd2FpdCByZXNwb25zZS5Db250ZW50LlJlYWRBc1N0cmluZ0FzeW5jKCk7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiRmFpbGVkIHRvIGZldGNoIGZvbGxvd2VycyAoU3RhdHVzOiB7cmVzcG9uc2UuU3RhdHVzQ29kZX0pLiBSZXNwb25zZToge2Vycm9yQm9keX0iKTsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgc3RyaW5nIGJvZHkgPSBhd2FpdCByZXNwb25zZS5Db250ZW50LlJlYWRBc1N0cmluZ0FzeW5jKCk7DQogICAgICAgICAgICBKT2JqZWN0IGpzb24gPSBKT2JqZWN0LlBhcnNlKGJvZHkpOw0KICAgICAgICAgICAgSkFycmF5IGRhdGEgPSAoSkFycmF5KWpzb25bImRhdGEiXTsNCiAgICAgICAgICAgIGZvcmVhY2ggKEpPYmplY3QgaXRlbSBpbiBkYXRhKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHN0cmluZyByYXcgPSBpdGVtWyJmb2xsb3dlZF9hdCJdLlZhbHVlPHN0cmluZz4oKTsNCiAgICAgICAgICAgICAgICBEYXRlVGltZU9mZnNldCBkdG87DQogICAgICAgICAgICAgICAgaWYgKCFEYXRlVGltZU9mZnNldC5UcnlQYXJzZShyYXcsIEN1bHR1cmVJbmZvLkludmFyaWFudEN1bHR1cmUsIERhdGVUaW1lU3R5bGVzLlJvdW5kdHJpcEtpbmQsIG91dCBkdG8pKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFEYXRlVGltZU9mZnNldC5UcnlQYXJzZUV4YWN0KHJhdywgIk1NL2RkL3l5eXkgSEg6bW06c3MiLCBDdWx0dXJlSW5mby5JbnZhcmlhbnRDdWx0dXJlLCBEYXRlVGltZVN0eWxlcy5Bc3N1bWVMb2NhbCwgb3V0IGR0bykpDQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBmb2xsb3dlcnMuQWRkKG5ldyBGb2xsb3dlckluZm8geyBVc2VyTmFtZSA9IGl0ZW1bInVzZXJfbmFtZSJdLlZhbHVlPHN0cmluZz4oKSwgVXNlckxvZ2luID0gaXRlbVsidXNlcl9sb2dpbiJdLlZhbHVlPHN0cmluZz4oKSwgVXNlcklkID0gaXRlbVsidXNlcl9pZCJdLlZhbHVlPHN0cmluZz4oKSwgRm9sbG93ZWRBdExvY2FsID0gZHRvLlRvTG9jYWxUaW1lKCkgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGN1cnNvciA9IGpzb25bInBhZ2luYXRpb24iXT9bImN1cnNvciJdPy5WYWx1ZTxzdHJpbmc+KCk7DQogICAgICAgIH0NCiAgICAgICAgd2hpbGUgKCFzdHJpbmcuSXNOdWxsT3JFbXB0eShjdXJzb3IpKTsNCiAgICAgICAgUG9zdFRvTG9nKCQiVG90YWwgZm9sbG93ZXJzIGZldGNoZWQ6IHtmb2xsb3dlcnMuQ291bnR9Iik7DQogICAgICAgIHJldHVybiBmb2xsb3dlcnM7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHJpdmF0ZSBhc3luYyBUYXNrPExpc3Q8c3RyaW5nPj4gR2V0QnJvYWRjYXN0ZXJGb2xsb3dzKCkNCiAgICB7DQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICBzdHJpbmcgdG9rZW4gPSBDUEguVHdpdGNoT0F1dGhUb2tlbjsNCiAgICAgICAgICAgIHN0cmluZyBjbGllbnRJZCA9IENQSC5Ud2l0Y2hDbGllbnRJZDsNCiAgICAgICAgICAgIHN0cmluZyB1cmwgPSAkImh0dHBzOi8vYXBpLnR3aXRjaC50di9oZWxpeC9zdHJlYW1zL2ZvbGxvd2VkP3VzZXJfaWQ9e2Jyb2FkY2FzdGVyVXNlcklkfSI7DQogICAgICAgICAgICBjbGllbnQuRGVmYXVsdFJlcXVlc3RIZWFkZXJzLkNsZWFyKCk7DQogICAgICAgICAgICBjbGllbnQuRGVmYXVsdFJlcXVlc3RIZWFkZXJzLkF1dGhvcml6YXRpb24gPSBuZXcgQXV0aGVudGljYXRpb25IZWFkZXJWYWx1ZSgiQmVhcmVyIiwgdG9rZW4pOw0KICAgICAgICAgICAgY2xpZW50LkRlZmF1bHRSZXF1ZXN0SGVhZGVycy5BZGQoIkNsaWVudC1JZCIsIGNsaWVudElkKTsNCiAgICAgICAgICAgIEh0dHBSZXNwb25zZU1lc3NhZ2UgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuR2V0QXN5bmModXJsKTsNCiAgICAgICAgICAgIGlmIChyZXNwb25zZS5Jc1N1Y2Nlc3NTdGF0dXNDb2RlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHN0cmluZyBqc29uUmVzcG9uc2UgPSBhd2FpdCByZXNwb25zZS5Db250ZW50LlJlYWRBc1N0cmluZ0FzeW5jKCk7DQogICAgICAgICAgICAgICAgSk9iamVjdCBkYXRhID0gSk9iamVjdC5QYXJzZShqc29uUmVzcG9uc2UpOw0KICAgICAgICAgICAgICAgIEpBcnJheSBzdHJlYW1zID0gKEpBcnJheSlkYXRhWyJkYXRhIl07DQogICAgICAgICAgICAgICAgTGlzdDxzdHJpbmc+IHVzZXJOYW1lTGlzdCA9IG5ldyBMaXN0PHN0cmluZz4oKTsNCiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgc3RyZWFtIGluIHN0cmVhbXMpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBzdHJpbmcgdXNlck5hbWUgPSBzdHJlYW1bInVzZXJfbG9naW4iXS5Ub1N0cmluZygpOw0KICAgICAgICAgICAgICAgICAgICB1c2VyTmFtZUxpc3QuQWRkKHVzZXJOYW1lKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICByZXR1cm4gdXNlck5hbWVMaXN0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkVycm9yOiB7cmVzcG9uc2UuU3RhdHVzQ29kZX0iKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExpc3Q8c3RyaW5nPigpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpDQogICAgICAgIHsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkV4Y2VwdGlvbjoge2V4Lk1lc3NhZ2V9Iik7DQogICAgICAgICAgICByZXR1cm4gbmV3IExpc3Q8c3RyaW5nPigpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGFzeW5jIFRhc2s8KGJvb2wgbWF4UGVyU3RyZWFtRW5hYmxlZCwgaW50IG1heFBlclN0cmVhbSwgYm9vbCBtYXhQZXJVc2VyUGVyU3RyZWFtRW5hYmxlZCwgaW50IG1heFBlclVzZXJQZXJTdHJlYW0sIGJvb2wgZ2xvYmFsQ29vbGRvd25FbmFibGVkLCBpbnQgZ2xvYmFsQ29vbGRvd25TZWNvbmRzKT4gR2V0QWRkaXRpb25hbFJld2FyZEluZm8oc3RyaW5nIGJyb2FkY2FzdGVySWQsIHN0cmluZyByZXdhcmROYW1lLCBzdHJpbmcgcmV3YXJkSWQpDQogICAgew0KICAgICAgICBzdHJpbmcgdG9rZW4gPSBDUEguVHdpdGNoT0F1dGhUb2tlbjsNCiAgICAgICAgc3RyaW5nIGNsaWVudElkID0gQ1BILlR3aXRjaENsaWVudElkOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGNsaWVudC5EZWZhdWx0UmVxdWVzdEhlYWRlcnMuQ2xlYXIoKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgdXJsID0gJCJodHRwczovL2FwaS50d2l0Y2gudHYvaGVsaXgvY2hhbm5lbF9wb2ludHMvY3VzdG9tX3Jld2FyZHM/YnJvYWRjYXN0ZXJfaWQ9e2Jyb2FkY2FzdGVySWR9JmlkPXtyZXdhcmRJZH0iOw0KICAgICAgICB2YXIgcmVxdWVzdCA9IG5ldyBIdHRwUmVxdWVzdE1lc3NhZ2UoSHR0cE1ldGhvZC5HZXQsIG5ldyBVcmkodXJsKSk7DQogICAgICAgIHJlcXVlc3QuSGVhZGVycy5BdXRob3JpemF0aW9uID0gbmV3IEF1dGhlbnRpY2F0aW9uSGVhZGVyVmFsdWUoIkJlYXJlciIsIHRva2VuKTsNCiAgICAgICAgcmVxdWVzdC5IZWFkZXJzLkFkZCgiQ2xpZW50LUlkIiwgY2xpZW50SWQpOw0KICAgICAgICBIdHRwUmVzcG9uc2VNZXNzYWdlIHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LlNlbmRBc3luYyhyZXF1ZXN0KTsNCiAgICAgICAgaWYgKCFyZXNwb25zZS5Jc1N1Y2Nlc3NTdGF0dXNDb2RlKQ0KICAgICAgICB7DQogICAgICAgICAgICBzdHJpbmcgYm9keSA9IGF3YWl0IHJlc3BvbnNlLkNvbnRlbnQuUmVhZEFzU3RyaW5nQXN5bmMoKTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkNhbGwgZmFpbGVkOiB7cmVzcG9uc2UuU3RhdHVzQ29kZX0sIFJlc3BvbnNlOiB7Ym9keX0iKTsNCiAgICAgICAgICAgIHJldHVybiAoZmFsc2UsIDAsIGZhbHNlLCAwLCBmYWxzZSwgMCk7DQogICAgICAgIH0NCg0KICAgICAgICBzdHJpbmcgcmVzcG9uc2VCb2R5ID0gYXdhaXQgcmVzcG9uc2UuQ29udGVudC5SZWFkQXNTdHJpbmdBc3luYygpOw0KICAgICAgICB2YXIganNvbiA9IEpPYmplY3QuUGFyc2UocmVzcG9uc2VCb2R5KTsNCiAgICAgICAgdmFyIGRhdGEgPSAoSkFycmF5KWpzb25bImRhdGEiXTsNCiAgICAgICAgaWYgKGRhdGEgPT0gbnVsbCB8fCBkYXRhLkNvdW50ID09IDApDQogICAgICAgIHsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiTm8gcmV3YXJkcyBmb3VuZC4iKTsNCiAgICAgICAgICAgIHJldHVybiAoZmFsc2UsIDAsIGZhbHNlLCAwLCBmYWxzZSwgMCk7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgciA9IChKT2JqZWN0KWRhdGFbMF07DQogICAgICAgIHZhciBtcHMgPSAoSk9iamVjdClyWyJtYXhfcGVyX3N0cmVhbV9zZXR0aW5nIl07DQogICAgICAgIGJvb2wgbWF4UGVyU3RyZWFtRW5hYmxlZCA9IG1wcz9bImlzX2VuYWJsZWQiXT8uVmFsdWU8Ym9vbD4oKSA/PyBmYWxzZTsNCiAgICAgICAgaW50IG1heFBlclN0cmVhbSA9IG1wcz9bIm1heF9wZXJfc3RyZWFtIl0/LlZhbHVlPGludD8+KCkgPz8gMDsNCiAgICAgICAgdmFyIG1wdXBzID0gKEpPYmplY3QpclsibWF4X3Blcl91c2VyX3Blcl9zdHJlYW1fc2V0dGluZyJdOw0KICAgICAgICBib29sIG1heFBlclVzZXJQZXJTdHJlYW1FbmFibGVkID0gbXB1cHM/WyJpc19lbmFibGVkIl0/LlZhbHVlPGJvb2w+KCkgPz8gZmFsc2U7DQogICAgICAgIGludCBtYXhQZXJVc2VyUGVyU3RyZWFtID0gbXB1cHM/WyJtYXhfcGVyX3VzZXJfcGVyX3N0cmVhbSJdPy5WYWx1ZTxpbnQ/PigpID8/IDA7DQogICAgICAgIHZhciBnY3MgPSAoSk9iamVjdClyWyJnbG9iYWxfY29vbGRvd25fc2V0dGluZyJdOw0KICAgICAgICBib29sIGdsb2JhbENvb2xkb3duRW5hYmxlZCA9IGdjcz9bImlzX2VuYWJsZWQiXT8uVmFsdWU8Ym9vbD4oKSA/PyBmYWxzZTsNCiAgICAgICAgaW50IGdsb2JhbENvb2xkb3duU2Vjb25kcyA9IGdjcz9bImdsb2JhbF9jb29sZG93bl9zZWNvbmRzIl0/LlZhbHVlPGludD8+KCkgPz8gMDsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBQb3N0VG9Mb2coJCJSZXRyaWV2ZWQgc2V0dGluZ3MgZm9yIHJld2FyZCB7cmV3YXJkTmFtZX06IG1heFBlclN0cmVhbUVuYWJsZWQ9e21heFBlclN0cmVhbUVuYWJsZWR9LCBtYXhQZXJTdHJlYW09e21heFBlclN0cmVhbX07IG1heFBlclVzZXJQZXJTdHJlYW1FbmFibGVkPXttYXhQZXJVc2VyUGVyU3RyZWFtRW5hYmxlZH0sIG1heFBlclVzZXJQZXJTdHJlYW09e21heFBlclVzZXJQZXJTdHJlYW19OyBnbG9iYWxDb29sZG93bkVuYWJsZWQ9e2dsb2JhbENvb2xkb3duRW5hYmxlZH0sIGdsb2JhbENvb2xkb3duU2Vjb25kcz17Z2xvYmFsQ29vbGRvd25TZWNvbmRzfSIpOw0KICAgICAgICByZXR1cm4gKG1heFBlclN0cmVhbUVuYWJsZWQsIG1heFBlclN0cmVhbSwgbWF4UGVyVXNlclBlclN0cmVhbUVuYWJsZWQsIG1heFBlclVzZXJQZXJTdHJlYW0sIGdsb2JhbENvb2xkb3duRW5hYmxlZCwgZ2xvYmFsQ29vbGRvd25TZWNvbmRzKTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYXN5bmMgVGFzazxib29sPiBVcGRhdGVSZXdhcmRHbG9iYWxDb29sZG93bihzdHJpbmcgYnJvYWRjYXN0ZXJJZCwgc3RyaW5nIHJld2FyZElkLCBib29sIGVuYWJsZSwgaW50PyBjb29sZG93blNlY29uZHMpDQogICAgew0KICAgICAgICBzdHJpbmcgdG9rZW4gPSBDUEguVHdpdGNoT0F1dGhUb2tlbjsNCiAgICAgICAgc3RyaW5nIGNsaWVudElkID0gQ1BILlR3aXRjaENsaWVudElkOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBjbGllbnQuRGVmYXVsdFJlcXVlc3RIZWFkZXJzLkNsZWFyKCk7DQogICAgICAgIHN0cmluZyB1cmwgPSAkImh0dHBzOi8vYXBpLnR3aXRjaC50di9oZWxpeC9jaGFubmVsX3BvaW50cy9jdXN0b21fcmV3YXJkcz9icm9hZGNhc3Rlcl9pZD17YnJvYWRjYXN0ZXJJZH0maWQ9e3Jld2FyZElkfSI7DQogICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IEh0dHBSZXF1ZXN0TWVzc2FnZShuZXcgSHR0cE1ldGhvZCgiUEFUQ0giKSwgbmV3IFVyaSh1cmwpKTsNCiAgICAgICAgcmVxdWVzdC5IZWFkZXJzLkF1dGhvcml6YXRpb24gPSBuZXcgQXV0aGVudGljYXRpb25IZWFkZXJWYWx1ZSgiQmVhcmVyIiwgdG9rZW4pOw0KICAgICAgICByZXF1ZXN0LkhlYWRlcnMuQWRkKCJDbGllbnQtSWQiLCBjbGllbnRJZCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciBib2R5ID0gbmV3IEpPYmplY3QNCiAgICAgICAgew0KICAgICAgICAgICAgWyJpc19nbG9iYWxfY29vbGRvd25fZW5hYmxlZCJdID0gZW5hYmxlDQogICAgICAgIH07DQogICAgICAgIGlmIChlbmFibGUgJiYgY29vbGRvd25TZWNvbmRzLkhhc1ZhbHVlKQ0KICAgICAgICAgICAgYm9keVsiZ2xvYmFsX2Nvb2xkb3duX3NlY29uZHMiXSA9IGNvb2xkb3duU2Vjb25kcy5WYWx1ZTsNCiAgICAgICAgcmVxdWVzdC5Db250ZW50ID0gbmV3IFN0cmluZ0NvbnRlbnQoYm9keS5Ub1N0cmluZygpLCBFbmNvZGluZy5VVEY4LCAiYXBwbGljYXRpb24vanNvbiIpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBIdHRwUmVzcG9uc2VNZXNzYWdlIHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LlNlbmRBc3luYyhyZXF1ZXN0KTsNCiAgICAgICAgaWYgKCFyZXNwb25zZS5Jc1N1Y2Nlc3NTdGF0dXNDb2RlKQ0KICAgICAgICB7DQogICAgICAgICAgICBzdHJpbmcgZXJyb3JCb2R5ID0gYXdhaXQgcmVzcG9uc2UuQ29udGVudC5SZWFkQXNTdHJpbmdBc3luYygpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiRmFpbGVkLiBTdGF0dXM6IHtyZXNwb25zZS5TdGF0dXNDb2RlfSwgUmVzcG9uc2U6IHtlcnJvckJvZHl9Iik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwcml2YXRlIGFzeW5jIFRhc2s8Ym9vbD4gVXBkYXRlUmV3YXJkTWF4UGVyU3RyZWFtKHN0cmluZyBicm9hZGNhc3RlcklkLCBzdHJpbmcgcmV3YXJkSWQsIGJvb2wgZW5hYmxlLCBpbnQ/IG1heFBlclN0cmVhbSkNCiAgICB7DQogICAgICAgIHN0cmluZyB0b2tlbiA9IENQSC5Ud2l0Y2hPQXV0aFRva2VuOw0KICAgICAgICBzdHJpbmcgY2xpZW50SWQgPSBDUEguVHdpdGNoQ2xpZW50SWQ7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgY2xpZW50LkRlZmF1bHRSZXF1ZXN0SGVhZGVycy5DbGVhcigpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyB1cmwgPSAkImh0dHBzOi8vYXBpLnR3aXRjaC50di9oZWxpeC9jaGFubmVsX3BvaW50cy9jdXN0b21fcmV3YXJkcz9icm9hZGNhc3Rlcl9pZD17YnJvYWRjYXN0ZXJJZH0maWQ9e3Jld2FyZElkfSI7DQogICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IEh0dHBSZXF1ZXN0TWVzc2FnZShuZXcgSHR0cE1ldGhvZCgiUEFUQ0giKSwgbmV3IFVyaSh1cmwpKTsNCiAgICAgICAgcmVxdWVzdC5IZWFkZXJzLkF1dGhvcml6YXRpb24gPSBuZXcgQXV0aGVudGljYXRpb25IZWFkZXJWYWx1ZSgiQmVhcmVyIiwgdG9rZW4pOw0KICAgICAgICByZXF1ZXN0LkhlYWRlcnMuQWRkKCJDbGllbnQtSWQiLCBjbGllbnRJZCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIGJvZHkgPSBuZXcgSk9iamVjdA0KICAgICAgICB7DQogICAgICAgICAgICBbImlzX21heF9wZXJfc3RyZWFtX2VuYWJsZWQiXSA9IGVuYWJsZQ0KICAgICAgICB9Ow0KICAgICAgICBpZiAoZW5hYmxlICYmIG1heFBlclN0cmVhbS5IYXNWYWx1ZSkNCiAgICAgICAgICAgIGJvZHlbIm1heF9wZXJfc3RyZWFtIl0gPSBtYXhQZXJTdHJlYW0uVmFsdWU7DQogICAgICAgIHJlcXVlc3QuQ29udGVudCA9IG5ldyBTdHJpbmdDb250ZW50KGJvZHkuVG9TdHJpbmcoKSwgRW5jb2RpbmcuVVRGOCwgImFwcGxpY2F0aW9uL2pzb24iKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBIdHRwUmVzcG9uc2VNZXNzYWdlIHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LlNlbmRBc3luYyhyZXF1ZXN0KTsNCiAgICAgICAgaWYgKCFyZXNwb25zZS5Jc1N1Y2Nlc3NTdGF0dXNDb2RlKQ0KICAgICAgICB7DQogICAgICAgICAgICBzdHJpbmcgZXJyb3JCb2R5ID0gYXdhaXQgcmVzcG9uc2UuQ29udGVudC5SZWFkQXNTdHJpbmdBc3luYygpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiRmFpbGVkOiB7cmVzcG9uc2UuU3RhdHVzQ29kZX0sIFJlc3BvbnNlOiB7ZXJyb3JCb2R5fSIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHJpdmF0ZSBhc3luYyBUYXNrPGJvb2w+IFVwZGF0ZVJld2FyZE1heFBlclVzZXJQZXJTdHJlYW0oc3RyaW5nIGJyb2FkY2FzdGVySWQsIHN0cmluZyByZXdhcmRJZCwgYm9vbCBlbmFibGUsIGludD8gbWF4UGVyVXNlclBlclN0cmVhbSkNCiAgICB7DQogICAgICAgIHN0cmluZyB0b2tlbiA9IENQSC5Ud2l0Y2hPQXV0aFRva2VuOw0KICAgICAgICBzdHJpbmcgY2xpZW50SWQgPSBDUEguVHdpdGNoQ2xpZW50SWQ7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgY2xpZW50LkRlZmF1bHRSZXF1ZXN0SGVhZGVycy5DbGVhcigpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHN0cmluZyB1cmwgPSAkImh0dHBzOi8vYXBpLnR3aXRjaC50di9oZWxpeC9jaGFubmVsX3BvaW50cy9jdXN0b21fcmV3YXJkcz9icm9hZGNhc3Rlcl9pZD17YnJvYWRjYXN0ZXJJZH0maWQ9e3Jld2FyZElkfSI7DQogICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IEh0dHBSZXF1ZXN0TWVzc2FnZShuZXcgSHR0cE1ldGhvZCgiUEFUQ0giKSwgbmV3IFVyaSh1cmwpKTsNCiAgICAgICAgcmVxdWVzdC5IZWFkZXJzLkF1dGhvcml6YXRpb24gPSBuZXcgQXV0aGVudGljYXRpb25IZWFkZXJWYWx1ZSgiQmVhcmVyIiwgdG9rZW4pOw0KICAgICAgICByZXF1ZXN0LkhlYWRlcnMuQWRkKCJDbGllbnQtSWQiLCBjbGllbnRJZCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdmFyIGJvZHkgPSBuZXcgSk9iamVjdA0KICAgICAgICB7DQogICAgICAgICAgICBbImlzX21heF9wZXJfdXNlcl9wZXJfc3RyZWFtX2VuYWJsZWQiXSA9IGVuYWJsZQ0KICAgICAgICB9Ow0KICAgICAgICBpZiAoZW5hYmxlICYmIG1heFBlclVzZXJQZXJTdHJlYW0uSGFzVmFsdWUpDQogICAgICAgICAgICBib2R5WyJtYXhfcGVyX3VzZXJfcGVyX3N0cmVhbSJdID0gbWF4UGVyVXNlclBlclN0cmVhbS5WYWx1ZTsNCiAgICAgICAgcmVxdWVzdC5Db250ZW50ID0gbmV3IFN0cmluZ0NvbnRlbnQoYm9keS5Ub1N0cmluZygpLCBFbmNvZGluZy5VVEY4LCAiYXBwbGljYXRpb24vanNvbiIpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIEh0dHBSZXNwb25zZU1lc3NhZ2UgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuU2VuZEFzeW5jKHJlcXVlc3QpOw0KICAgICAgICBpZiAoIXJlc3BvbnNlLklzU3VjY2Vzc1N0YXR1c0NvZGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIHN0cmluZyBlcnJvckJvZHkgPSBhd2FpdCByZXNwb25zZS5Db250ZW50LlJlYWRBc1N0cmluZ0FzeW5jKCk7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQ6IHtyZXNwb25zZS5TdGF0dXNDb2RlfSwgUmVzcG9uc2U6IHtlcnJvckJvZHl9Iik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwcml2YXRlIGFzeW5jIFRhc2s8KGJvb2wgaXNGb2xsb3dpbmcsIERhdGVUaW1lIGZvbGxvd2VkQXQpPiBHZXRGb2xsb3dJbmZvKHN0cmluZyB1c2VySWQpDQogICAgew0KICAgICAgICBzdHJpbmcgdG9rZW4gPSBDUEguVHdpdGNoT0F1dGhUb2tlbjsNCiAgICAgICAgc3RyaW5nIGNsaWVudElkID0gQ1BILlR3aXRjaENsaWVudElkOw0KICAgICAgICBjbGllbnQuRGVmYXVsdFJlcXVlc3RIZWFkZXJzLkNsZWFyKCk7DQogICAgICAgIGNsaWVudC5EZWZhdWx0UmVxdWVzdEhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IG5ldyBBdXRoZW50aWNhdGlvbkhlYWRlclZhbHVlKCJCZWFyZXIiLCB0b2tlbik7DQogICAgICAgIGNsaWVudC5EZWZhdWx0UmVxdWVzdEhlYWRlcnMuQWRkKCJDbGllbnQtSWQiLCBjbGllbnRJZCk7DQogICAgICAgIHZhciByZXF1ZXN0VXJpID0gJCJodHRwczovL2FwaS50d2l0Y2gudHYvaGVsaXgvY2hhbm5lbHMvZm9sbG93ZXJzP2Jyb2FkY2FzdGVyX2lkPXticm9hZGNhc3RlclVzZXJJZH0mdXNlcl9pZD17dXNlcklkfSI7DQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICBIdHRwUmVzcG9uc2VNZXNzYWdlIHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LkdldEFzeW5jKHJlcXVlc3RVcmkpOw0KICAgICAgICAgICAgaWYgKHJlc3BvbnNlLklzU3VjY2Vzc1N0YXR1c0NvZGUpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgc3RyaW5nIGpzb25SZXNwb25zZSA9IGF3YWl0IHJlc3BvbnNlLkNvbnRlbnQuUmVhZEFzU3RyaW5nQXN5bmMoKTsNCiAgICAgICAgICAgICAgICBKT2JqZWN0IGpzb24gPSBKT2JqZWN0LlBhcnNlKGpzb25SZXNwb25zZSk7DQogICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBqc29uWyJkYXRhIl07DQogICAgICAgICAgICAgICAgaWYgKGRhdGEgIT0gbnVsbCAmJiBkYXRhLkhhc1ZhbHVlcykNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhciBmb2xsb3dlciA9IGRhdGFbMF07DQogICAgICAgICAgICAgICAgICAgIHN0cmluZyBmb2xsb3dlZEF0U3RyaW5nID0gZm9sbG93ZXJbImZvbGxvd2VkX2F0Il0/LlRvU3RyaW5nKCk7DQogICAgICAgICAgICAgICAgICAgIHN0cmluZyBmb2xsb3dlclVzZXJOYW1lID0gZm9sbG93ZXJbInVzZXJfbmFtZSJdPy5Ub1N0cmluZygpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KGZvbGxvd2VkQXRTdHJpbmcpKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBEYXRlVGltZSBmb2xsb3dlZEF0ID0gRGF0ZVRpbWUuUGFyc2UoZm9sbG93ZWRBdFN0cmluZyk7DQogICAgICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJVc2VyICd7Zm9sbG93ZXJVc2VyTmFtZX0nIGZvbGxvd2VkIGF0IHtmb2xsb3dlZEF0U3RyaW5nfS4iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAodHJ1ZSwgZm9sbG93ZWRBdCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiVXNlciAne2ZvbGxvd2VyVXNlck5hbWV9JyBkb2VzIG5vdCBmb2xsb3cgdGhlIGNoYW5uZWwuIik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgcmV0dXJuIChmYWxzZSwgRGF0ZVRpbWUuTWluVmFsdWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkdldEZvbGxvd0luZm8gRmFpbGVkIFJlc3BvbnNlOiB7cmVzcG9uc2UuU3RhdHVzQ29kZX0iKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gKGZhbHNlLCBEYXRlVGltZS5NaW5WYWx1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBleCkNCiAgICAgICAgew0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiR2V0Rm9sbG93SW5mbyBFeGNlcHRpb246IHtleC5NZXNzYWdlfSIpOw0KICAgICAgICAgICAgcmV0dXJuIChmYWxzZSwgRGF0ZVRpbWUuTWluVmFsdWUpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGFzeW5jIFRhc2s8KGJvb2wgaXNCYW5uZWQsIGJvb2wgaXNUaW1lZE91dCwgRGF0ZVRpbWU/IGNyZWF0ZWRBdCwgRGF0ZVRpbWU/IGV4cGlyZXNBdCwgc3RyaW5nIHJlYXNvbik+IEdldFR3aXRjaFVzZXJCYW5JbmZvKHN0cmluZyB1c2VySWQpDQogICAgew0KICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZSh1c2VySWQpKQ0KICAgICAgICB7DQogICAgICAgICAgICBQb3N0VG9Mb2coIkkgZm9yZ290IHRvIHBhc3MgYSB1c2VyIGlkPyEiKTsNCiAgICAgICAgICAgIHJldHVybiAoZmFsc2UsIGZhbHNlLCBudWxsLCBudWxsLCBudWxsKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHN0cmluZyB0b2tlbiA9IENQSC5Ud2l0Y2hPQXV0aFRva2VuOw0KICAgICAgICBzdHJpbmcgY2xpZW50SWQgPSBDUEguVHdpdGNoQ2xpZW50SWQ7DQogICAgICAgIHZhciB1cmwgPSAkImh0dHBzOi8vYXBpLnR3aXRjaC50di9oZWxpeC9tb2RlcmF0aW9uL2Jhbm5lZD9icm9hZGNhc3Rlcl9pZD17YnJvYWRjYXN0ZXJVc2VySWR9JnVzZXJfaWQ9e3VzZXJJZH0iOw0KICAgICAgICB1c2luZyB2YXIgcmVxdWVzdCA9IG5ldyBIdHRwUmVxdWVzdE1lc3NhZ2UoSHR0cE1ldGhvZC5HZXQsIHVybCk7DQogICAgICAgIHJlcXVlc3QuSGVhZGVycy5BdXRob3JpemF0aW9uID0gbmV3IEF1dGhlbnRpY2F0aW9uSGVhZGVyVmFsdWUoIkJlYXJlciIsIHRva2VuKTsNCiAgICAgICAgcmVxdWVzdC5IZWFkZXJzLkFkZCgiQ2xpZW50LUlkIiwgY2xpZW50SWQpOw0KICAgICAgICBIdHRwUmVzcG9uc2VNZXNzYWdlIHJlc3BvbnNlOw0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuU2VuZEFzeW5jKHJlcXVlc3QpOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpDQogICAgICAgIHsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkZhaWxlZCB0byBjaGVjayBiYW4gc3RhdHVzIGZvciAne3VzZXJJZH0nIChSZXF1ZXN0IGVycm9yOiB7ZXguTWVzc2FnZX0pLiIpOw0KICAgICAgICAgICAgcmV0dXJuIChmYWxzZSwgZmFsc2UsIG51bGwsIG51bGwsIG51bGwpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCFyZXNwb25zZS5Jc1N1Y2Nlc3NTdGF0dXNDb2RlKQ0KICAgICAgICB7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJGYWlsZWQgdG8gY2hlY2sgYmFuIHN0YXR1cyBmb3IgJ3t1c2VySWR9JyAoU3RhdHVzOiB7cmVzcG9uc2UuU3RhdHVzQ29kZX0pLiIpOw0KICAgICAgICAgICAgcmV0dXJuIChmYWxzZSwgZmFsc2UsIG51bGwsIG51bGwsIG51bGwpOw0KICAgICAgICB9DQoNCiAgICAgICAgc3RyaW5nIGJvZHkgPSBhd2FpdCByZXNwb25zZS5Db250ZW50LlJlYWRBc1N0cmluZ0FzeW5jKCk7DQogICAgICAgIFBvc3RUb0xvZygkIlJhdyBiYW4gcmVzcG9uc2UgZm9yIHt1c2VySWR9OiB7Ym9keX0iKTsNCiAgICAgICAgdmFyIGpzb24gPSBKT2JqZWN0LlBhcnNlKGJvZHkpOw0KICAgICAgICB2YXIgZGF0YSA9IGpzb25bImRhdGEiXSBhcyBKQXJyYXk7DQogICAgICAgIGlmIChkYXRhID09IG51bGwgfHwgZGF0YS5Db3VudCA9PSAwKQ0KICAgICAgICB7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJObyBiYW4gaW5mbyBmb3VuZCBmb3IgdXNlciB7dXNlcklkfS4iKTsNCiAgICAgICAgICAgIHJldHVybiAoZmFsc2UsIGZhbHNlLCBudWxsLCBudWxsLCBudWxsKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciBlbnRyeSA9IChKT2JqZWN0KWRhdGFbMF07DQogICAgICAgIGlmIChlbnRyeSA9PSBudWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJCYW4gZGF0YSB3YXMgZW1wdHkgZm9yIHt1c2VySWR9LiIpOw0KICAgICAgICAgICAgcmV0dXJuIChmYWxzZSwgZmFsc2UsIG51bGwsIG51bGwsIG51bGwpOw0KICAgICAgICB9DQoNCiAgICAgICAgYm9vbCBpc0Jhbm5lZCA9IGZhbHNlOw0KICAgICAgICBib29sIGlzVGltZWRPdXQgPSBmYWxzZTsNCiAgICAgICAgRGF0ZVRpbWU/IGNyZWF0ZWRBdCA9IG51bGw7DQogICAgICAgIHZhciBjcmVhdGVkU3RyID0gKHN0cmluZz8gKWVudHJ5WyJjcmVhdGVkX2F0Il07DQogICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkoY3JlYXRlZFN0cikgJiYgRGF0ZVRpbWVPZmZzZXQuVHJ5UGFyc2UoY3JlYXRlZFN0ciwgU3lzdGVtLkdsb2JhbGl6YXRpb24uQ3VsdHVyZUluZm8uSW52YXJpYW50Q3VsdHVyZSwgU3lzdGVtLkdsb2JhbGl6YXRpb24uRGF0ZVRpbWVTdHlsZXMuQXNzdW1lVW5pdmVyc2FsIHwgU3lzdGVtLkdsb2JhbGl6YXRpb24uRGF0ZVRpbWVTdHlsZXMuQWRqdXN0VG9Vbml2ZXJzYWwsIG91dCB2YXIgY3JlYXRlZER0bykpDQogICAgICAgICAgICBjcmVhdGVkQXQgPSBjcmVhdGVkRHRvLlV0Y0RhdGVUaW1lOw0KICAgICAgICBzdHJpbmcgcmVhc29uID0gKHN0cmluZz8gKWVudHJ5WyJyZWFzb24iXTsNCiAgICAgICAgRGF0ZVRpbWU/IGV4cGlyZXNBdCA9IG51bGw7DQogICAgICAgIHZhciBleHBpcmVzU3RyID0gKHN0cmluZz8gKWVudHJ5WyJleHBpcmVzX2F0Il07DQogICAgICAgIFBvc3RUb0xvZygkImV4cGlyZXNfYXQgcmF3IGZvciB7dXNlcklkfTogJ3tleHBpcmVzU3RyfSciKTsNCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KGV4cGlyZXNTdHIpKQ0KICAgICAgICB7DQogICAgICAgICAgICBpc0Jhbm5lZCA9IHRydWU7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJVc2VyIHt1c2VySWR9IGlzIHBlcm1hbmVudGx5IGJhbm5lZCBzaW5jZSB7Y3JlYXRlZEF0OnV9IChSZWFzb246IHtyZWFzb24gPz8gIm5vbmUifSkuIik7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAoRGF0ZVRpbWVPZmZzZXQuVHJ5UGFyc2UoZXhwaXJlc1N0ciwgU3lzdGVtLkdsb2JhbGl6YXRpb24uQ3VsdHVyZUluZm8uSW52YXJpYW50Q3VsdHVyZSwgU3lzdGVtLkdsb2JhbGl6YXRpb24uRGF0ZVRpbWVTdHlsZXMuQXNzdW1lVW5pdmVyc2FsIHwgU3lzdGVtLkdsb2JhbGl6YXRpb24uRGF0ZVRpbWVTdHlsZXMuQWRqdXN0VG9Vbml2ZXJzYWwsIG91dCB2YXIgZXhwaXJlc0R0bykpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlzVGltZWRPdXQgPSB0cnVlOw0KICAgICAgICAgICAgZXhwaXJlc0F0ID0gZXhwaXJlc0R0by5VdGNEYXRlVGltZTsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIlVzZXIge3VzZXJJZH0gaXMgdGltZWQgb3V0IHVudGlsIHtleHBpcmVzQXQ6dX0gKFJlYXNvbjoge3JlYXNvbiA/PyAibm9uZSJ9KS4iKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkNvdWxkIG5vdCBwYXJzZSBleHBpcmVzX2F0IGZvciB7dXNlcklkfTogJ3tleHBpcmVzU3RyfSciKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAoaXNCYW5uZWQsIGlzVGltZWRPdXQsIGNyZWF0ZWRBdCwgZXhwaXJlc0F0LCByZWFzb24pOw0KICAgIH0NCg0KICAgIC8vIE1JU0MNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgc3RyaW5nIFRyYW5zbGF0ZShzdHJpbmcgdGV4dCwgc3RyaW5nIHRhcmdldExhbmd1YWdlKQ0KICAgIHsNCiAgICAgICAgdmFyIHVybCA9ICQiaHR0cHM6Ly90cmFuc2xhdGUuZ29vZ2xlYXBpcy5jb20vdHJhbnNsYXRlX2Evc2luZ2xlP2NsaWVudD1ndHgmc2w9YXV0byZ0bD17dGFyZ2V0TGFuZ3VhZ2V9JmR0PXQmcT17SHR0cFV0aWxpdHkuVXJsRW5jb2RlKHRleHQpfSI7DQogICAgICAgIHZhciByZXN1bHQgPSB3ZWJDbGllbnQuRG93bmxvYWRTdHJpbmcodXJsKTsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIEpBcnJheSBqc29uQXJyYXkgPSBKQXJyYXkuUGFyc2UocmVzdWx0KTsNCiAgICAgICAgICAgIHN0cmluZyB0cmFuc2xhdGVkVGV4dCA9ICIiOw0KICAgICAgICAgICAgZm9yZWFjaCAodmFyIHNlbnRlbmNlQXJyYXkgaW4ganNvbkFycmF5WzBdKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRyYW5zbGF0ZWRUZXh0ICs9IHNlbnRlbmNlQXJyYXlbMF0uVG9TdHJpbmcoKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmV0dXJuIHRyYW5zbGF0ZWRUZXh0Ow0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpDQogICAgICAgIHsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIlRyYW5zbGF0aW9uIGVycm9yOiAiICsgZXguTWVzc2FnZSk7DQogICAgICAgICAgICByZXR1cm4gIkZhaWxlZCB0byB0cmFuc2xhdGUuIjsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHByaXZhdGUgc3RhdGljIGludCBfY29ubmVjdGlvbiA9IC0xOw0KICAgIHByaXZhdGUgaW50IEdldENvbm5lY3RlZE9CU0luZGV4KCkNCiAgICB7DQogICAgICAgIGlmIChfY29ubmVjdGlvbiA+PSAwKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoQ1BILk9ic0lzQ29ubmVjdGVkKF9jb25uZWN0aW9uKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJQcmV2aW91cyBPQlMgaW5kZXgge19jb25uZWN0aW9ufSBzdGlsbCBjb25uZWN0ZWQuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuIF9jb25uZWN0aW9uOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBQb3N0VG9Mb2coJCJQcmV2aW91cyBPQlMgaW5kZXgge19jb25uZWN0aW9ufSBsb3N0OyBjaGVja2luZyBhZ2Fpbi4uLiIpOw0KICAgICAgICAgICAgX2Nvbm5lY3Rpb24gPSAtMTsNCiAgICAgICAgfQ0KDQogICAgICAgIFBvc3RUb0xvZygiQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIE9CUyBjb25uZWN0aW9ucy4uLiIpOw0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8PSAxMDsgaSsrKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoQ1BILk9ic0lzQ29ubmVjdGVkKGkpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIk9CUyBpbmRleCB7aX0gaXMgY29ubmVjdGVkLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBfY29ubmVjdGlvbiA9IGk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBQb3N0VG9Mb2coIk5vIGV4aXN0aW5nIGNvbm5lY3Rpb25zIGZvdW5kOyBhdHRlbXB0aW5nIHRvIGNvbm5lY3QuLi4iKTsNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPD0gMTA7IGkrKykNCiAgICAgICAgew0KICAgICAgICAgICAgQ1BILk9ic0Nvbm5lY3QoaSk7DQogICAgICAgICAgICBDUEguV2FpdCgyNTApOw0KICAgICAgICAgICAgaWYgKENQSC5PYnNJc0Nvbm5lY3RlZChpKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJPQlMgaW5kZXgge2l9IHN1Y2Nlc3NmdWxseSBjb25uZWN0ZWQgYWZ0ZXIgcmV0cnkuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuIF9jb25uZWN0aW9uID0gaTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIFBvc3RUb0xvZygiTm8gT0JTIGNvbm5lY3Rpb24gZm91bmQgYWZ0ZXIgcmV0cmllcy4iKTsNCiAgICAgICAgcmV0dXJuIF9jb25uZWN0aW9uOw0KICAgIH0NCg0KICAgIHByaXZhdGUgYm9vbCBJc1N1cGVyTW9kKHN0cmluZyB1c2VyLCBzdHJpbmcgdXNlcklkKQ0KICAgIHsNCiAgICAgICAgUG9zdFRvTG9nKCQiQ2hlY2tpbmcgaWYgdXNlciAne3VzZXJ9JyBpcyBhIHN1cGVyIG1vZGVyYXRvci4uLiIpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBHZXRCcm9hZGNhc3RlckFuZEJvdCgpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAodXNlcklkID09IGJyb2FkY2FzdGVyVXNlcklkKQ0KICAgICAgICB7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCJVc2VyICd7dXNlcn0nIGlzIGJyb2FkY2FzdGVyIik7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZvcmVhY2ggKHZhciBlbnRyeSBpbiBzdXBlck1vZGVyYXRvcnNMaXN0KQ0KICAgICAgICB7DQogICAgICAgICAgICBpbnQgc3RhcnQgPSBlbnRyeS5MYXN0SW5kZXhPZignKCcpOw0KICAgICAgICAgICAgaW50IGVuZCA9IGVudHJ5Lkxhc3RJbmRleE9mKCcpJyk7DQogICAgICAgICAgICBpZiAoc3RhcnQgPj0gMCAmJiBlbmQgPiBzdGFydCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBzdHJpbmcgaWQgPSBlbnRyeS5TdWJzdHJpbmcoc3RhcnQgKyAxLCBlbmQgLSBzdGFydCAtIDEpOw0KICAgICAgICAgICAgICAgIGlmIChpZC5FcXVhbHModXNlcklkLCBTdHJpbmdDb21wYXJpc29uLk9yZGluYWxJZ25vcmVDYXNlKSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIlN1cGVyIG1vZGVyYXRvciBtYXRjaCBmb3VuZCBmb3IgdXNlciAne3VzZXJ9Jzoge2VudHJ5fSIpOw0KICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coIlN1cGVyIG1vZGVyYXRvciBsaXN0OiIpOw0KICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgX2VudHJ5IGluIHN1cGVyTW9kZXJhdG9yc0xpc3QpDQogICAgICAgICAgICAgICAgICAgICAgICBQb3N0VG9Mb2coX2VudHJ5KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgUG9zdFRvTG9nKCQiTm8gc3VwZXIgbW9kZXJhdG9yIG1hdGNoIGZvciB1c2VyICd7dXNlcn0nOyB1c2VySWQ6IHt1c2VySWR9Iik7DQogICAgICAgIFBvc3RUb0xvZygiU3VwZXIgbW9kZXJhdG9yIGxpc3Q6Iik7DQogICAgICAgIGZvcmVhY2ggKHZhciBlbnRyeSBpbiBzdXBlck1vZGVyYXRvcnNMaXN0KQ0KICAgICAgICAgICAgUG9zdFRvTG9nKGVudHJ5KTsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIHByaXZhdGUgYm9vbCBTaGFyZWRDaGF0Q2hlY2soKQ0KICAgIHsNCiAgICAgICAgaWYgKENQSC5UcnlHZXRBcmcoImlzSW5TaGFyZWRDaGF0Iiwgb3V0IGJvb2wgaXNJblNoYXJlZENoYXQpKQ0KICAgICAgICB7DQogICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJpc0Zyb21TaGFyZWRDaGF0R3Vlc3QiLCBvdXQgYm9vbCBpc0Zyb21TaGFyZWRDaGF0R3Vlc3QpOw0KICAgICAgICAgICAgaWYgKGlzRnJvbVNoYXJlZENoYXRHdWVzdCAmJiBpZ25vcmVTaGFyZWRDaGF0KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkFjdGlvbiBoYXBwZW5lZCBpbiBzaGFyZWQgZ3Vlc3QgY2hhdCB3aXRoIGlnbm9yaW5nIHNoYXJlZCBjaGF0IHNldCB0byBUcnVlLiBBYm9ydGluZy4iKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChpc0Zyb21TaGFyZWRDaGF0R3Vlc3QgJiYgIWlnbm9yZVNoYXJlZENoYXQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiQWN0aW9uIGhhcHBlbmVkIGluIHNoYXJlZCBndWVzdCBjaGF0IHdpdGggaWdub3Jpbmcgc2hhcmVkIGNoYXQgc2V0IHRvIEZhbHNlLiBDb250aW51ZWluZy4uLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgcHVibGljIHN0cmluZyBHZXRMb2NhbGl6ZWROYW1lKHN0cmluZyB1c2VyKQ0KICAgIHsNCiAgICAgICAgdmFyIGxvY2FsaXplZE5hbWVzTWFwID0gQ1BILkdldEdsb2JhbFZhcjxEaWN0aW9uYXJ5PHN0cmluZywgc3RyaW5nPj4oInRhd21hZV9NT0RfVE9PTFNfTG9jYWxpemVkX05hbWVzX01hcCIsIHRydWUpID8/IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgc3RyaW5nPigpOw0KICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KHVzZXIpICYmIGxvY2FsaXplZE5hbWVzTWFwLlRyeUdldFZhbHVlKHVzZXIsIG91dCB2YXIgdXNlck5hbWUpKQ0KICAgICAgICB7DQogICAgICAgICAgICBQb3N0VG9Mb2coJCIne3VzZXJ9JyBpcyBpbiBsb2NhbGl6ZWQgbWFwIGFzICd7dXNlck5hbWV9JyIpOw0KICAgICAgICAgICAgcmV0dXJuIHVzZXJOYW1lOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiJ3t1c2VyfScgaXMgbm90IGluIGxvY2FsaXplZCBtYXAiKTsNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIERhdGVUaW1lIFRvTG9jYWxUaW1lKERhdGVUaW1lIHV0Y0RhdGVUaW1lKQ0KICAgIHsNCiAgICAgICAgaWYgKHV0Y0RhdGVUaW1lLktpbmQgIT0gRGF0ZVRpbWVLaW5kLlV0YykNCiAgICAgICAgICAgIHV0Y0RhdGVUaW1lID0gRGF0ZVRpbWUuU3BlY2lmeUtpbmQodXRjRGF0ZVRpbWUsIERhdGVUaW1lS2luZC5VdGMpOw0KICAgICAgICByZXR1cm4gVGltZVpvbmVJbmZvLkNvbnZlcnRUaW1lRnJvbVV0Yyh1dGNEYXRlVGltZSwgVGltZVpvbmVJbmZvLkxvY2FsKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgc3RyaW5nIEdldFRhcmdldExhbmd1YWdlKCkNCiAgICB7DQogICAgICAgIHN0cmluZyBsYW5ndWFnZSA9ICJlbiI7DQogICAgICAgIHN3aXRjaCAodGFyZ2V0TGFuZ3VhZ2UpDQogICAgICAgIHsNCiAgICAgICAgICAgIGNhc2UgIkVuZ2xpc2giOg0KICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gImVuIjsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgIkdlcm1hbiAoRGV1dHNjaCkiOg0KICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gImRlIjsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgIkZyZW5jaCAoRnJhbsOnYWlzKSI6DQogICAgICAgICAgICAgICAgbGFuZ3VhZ2UgPSAiZnIiOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiU3BhbmlzaCAoRXNwYcOxb2wpIjoNCiAgICAgICAgICAgICAgICBsYW5ndWFnZSA9ICJlcyI7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICJQb2xpc2ggKFBvbHNraSkiOg0KICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gInBsIjsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgIlBvcnR1Z3Vlc2UgKFBvcnR1Z3XDqnMpIjoNCiAgICAgICAgICAgICAgICBsYW5ndWFnZSA9ICJwdCI7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICJBZnJpa2FhbnMgKEFmcmlrYWFucykiOg0KICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gImFmIjsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgIkFyYWJpYyAo2KfZhNi52LHYqNmK2KkpIjoNCiAgICAgICAgICAgICAgICBsYW5ndWFnZSA9ICJhciI7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICJCZW5nYWxpICjgpqzgpr7gpoLgprLgpr4pIjoNCiAgICAgICAgICAgICAgICBsYW5ndWFnZSA9ICJibiI7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICJCb3NuaWFuIChCb3NhbnNraSkiOg0KICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gImJzIjsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgIkJ1bGdhcmlhbiAo0JHRitC70LPQsNGA0YHQutC4KSI6DQogICAgICAgICAgICAgICAgbGFuZ3VhZ2UgPSAiYmciOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiQ2F0YWxhbiAoQ2F0YWzDoCkiOg0KICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gImNhIjsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgIkNoaW5lc2UgKOS4reaWhykiOg0KICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gInpoIjsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgIkNyb2F0aWFuIChIcnZhdHNraSkiOg0KICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gImhyIjsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgIkN6ZWNoICjEjGXFoXRpbmEpIjoNCiAgICAgICAgICAgICAgICBsYW5ndWFnZSA9ICJjcyI7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICJEYW5pc2ggKERhbnNrKSI6DQogICAgICAgICAgICAgICAgbGFuZ3VhZ2UgPSAiZGEiOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiRHV0Y2ggKE5lZGVybGFuZHMpIjoNCiAgICAgICAgICAgICAgICBsYW5ndWFnZSA9ICJubCI7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICJFc3RvbmlhbiAoRWVzdGkpIjoNCiAgICAgICAgICAgICAgICBsYW5ndWFnZSA9ICJldCI7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICJGaW5uaXNoIChTdW9taSkiOg0KICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gImZpIjsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgIkhlYnJldyAo16LXkdeo15nXqikiOg0KICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gImhlIjsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgIkhpbmRpICjgpLngpL/gpKjgpY3gpKbgpYApIjoNCiAgICAgICAgICAgICAgICBsYW5ndWFnZSA9ICJoaSI7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICJIdW5nYXJpYW4gKE1hZ3lhcikiOg0KICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gImh1IjsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgIkljZWxhbmRpYyAow41zbGVuc2thKSI6DQogICAgICAgICAgICAgICAgbGFuZ3VhZ2UgPSAiaXMiOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiSW5kb25lc2lhbiAoQmFoYXNhIEluZG9uZXNpYSkiOg0KICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gImlkIjsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgIkl0YWxpYW4gKEl0YWxpYW5vKSI6DQogICAgICAgICAgICAgICAgbGFuZ3VhZ2UgPSAiaXQiOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiSmFwYW5lc2UgKOaXpeacrOiqnikiOg0KICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gImphIjsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgIktvcmVhbiAo7ZWc6rWt7Ja0KSI6DQogICAgICAgICAgICAgICAgbGFuZ3VhZ2UgPSAia28iOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiTGF0dmlhbiAoTGF0dmllxaF1KSI6DQogICAgICAgICAgICAgICAgbGFuZ3VhZ2UgPSAibHYiOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiTGl0aHVhbmlhbiAoTGlldHV2acWzKSI6DQogICAgICAgICAgICAgICAgbGFuZ3VhZ2UgPSAibHQiOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiTWFsYXkgKEJhaGFzYSBNZWxheXUpIjoNCiAgICAgICAgICAgICAgICBsYW5ndWFnZSA9ICJtcyI7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICJOb3J3ZWdpYW4gKE5vcnNrKSI6DQogICAgICAgICAgICAgICAgbGFuZ3VhZ2UgPSAibm8iOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiUm9tYW5pYW4gKFJvbcOibsSDKSI6DQogICAgICAgICAgICAgICAgbGFuZ3VhZ2UgPSAicm8iOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiUnVzc2lhbiAo0KDRg9GB0YHQutC40LkpIjoNCiAgICAgICAgICAgICAgICBsYW5ndWFnZSA9ICJydSI7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICJTZXJiaWFuICjQodGA0L/RgdC60LgpIjoNCiAgICAgICAgICAgICAgICBsYW5ndWFnZSA9ICJzciI7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICJTbG92YWsgKFNsb3ZlbsSNaW5hKSI6DQogICAgICAgICAgICAgICAgbGFuZ3VhZ2UgPSAic2siOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiU2xvdmVuaWFuIChTbG92ZW7FocSNaW5hKSI6DQogICAgICAgICAgICAgICAgbGFuZ3VhZ2UgPSAic2wiOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiU3dlZGlzaCAoU3ZlbnNrYSkiOg0KICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gInN2IjsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgIlRoYWkgKOC5hOC4l+C4oikiOg0KICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gInRoIjsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgIlR1cmtpc2ggKFTDvHJrw6dlKSI6DQogICAgICAgICAgICAgICAgbGFuZ3VhZ2UgPSAidHIiOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiVWtyYWluaWFuICjQo9C60YDQsNGX0L3RgdGM0LrQsCkiOg0KICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gInVrIjsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgIlVyZHUgKNin2LHYr9mIKSI6DQogICAgICAgICAgICAgICAgbGFuZ3VhZ2UgPSAidXIiOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiVmlldG5hbWVzZSAoVGnhur9uZyBWaeG7h3QpIjoNCiAgICAgICAgICAgICAgICBsYW5ndWFnZSA9ICJ2aSI7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gImVuIjsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBsYW5ndWFnZTsNCiAgICB9DQoNCiAgICBwcml2YXRlIHN0YXRpYyBEaWN0aW9uYXJ5PHN0cmluZywgTGlzdDxzdHJpbmc+PiBicm93c2VyU291cmNlc0J5U2NlbmUgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIExpc3Q8c3RyaW5nPj4oKTsNCiAgICBwcml2YXRlIHZvaWQgRGlzYWJsZUFsbEJyb3dzZXJTb3VyY2VzKCkNCiAgICB7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaW50IGNvbm5lY3Rpb24gPSBHZXRDb25uZWN0ZWRPQlNJbmRleCgpOw0KICAgICAgICBpZiAoY29ubmVjdGlvbiA8IDApDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgc3RyaW5nIHNjZW5lTGlzdFJlc3BvbnNlID0gQ1BILk9ic1NlbmRSYXcoIkdldFNjZW5lTGlzdCIsICJ7fSIsIGNvbm5lY3Rpb24pOw0KICAgICAgICBKT2JqZWN0IHNjZW5lTGlzdE9iajsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIHNjZW5lTGlzdE9iaiA9IEpPYmplY3QuUGFyc2Uoc2NlbmVMaXN0UmVzcG9uc2UpOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoDQogICAgICAgIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIEpBcnJheSBzY2VuZXMgPSBzY2VuZUxpc3RPYmpbInNjZW5lcyJdIGFzIEpBcnJheTsNCiAgICAgICAgaWYgKHNjZW5lcyA9PSBudWxsKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICBmb3JlYWNoICh2YXIgc2NlbmUgaW4gc2NlbmVzKQ0KICAgICAgICB7DQogICAgICAgICAgICBzdHJpbmcgc2NlbmVOYW1lID0gc2NlbmVbInNjZW5lTmFtZSJdPy5Ub1N0cmluZygpOw0KICAgICAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KHNjZW5lTmFtZSkpDQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICBicm93c2VyU291cmNlc0J5U2NlbmVbc2NlbmVOYW1lXSA9IG5ldyBMaXN0PHN0cmluZz4oKTsNCiAgICAgICAgICAgIHN0cmluZyBzY2VuZUl0ZW1zUmVzcG9uc2UgPSBDUEguT2JzU2VuZFJhdygiR2V0U2NlbmVJdGVtTGlzdCIsIEpzb25Db252ZXJ0LlNlcmlhbGl6ZU9iamVjdChuZXcgeyBzY2VuZU5hbWUgfSksIGNvbm5lY3Rpb24pOw0KICAgICAgICAgICAgSk9iamVjdCBzY2VuZUl0ZW1zT2JqOw0KICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgc2NlbmVJdGVtc09iaiA9IEpPYmplY3QuUGFyc2Uoc2NlbmVJdGVtc1Jlc3BvbnNlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIEpBcnJheSBzY2VuZUl0ZW1zID0gc2NlbmVJdGVtc09ialsic2NlbmVJdGVtcyJdIGFzIEpBcnJheTsNCiAgICAgICAgICAgIGlmIChzY2VuZUl0ZW1zID09IG51bGwpDQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICBmb3JlYWNoICh2YXIgaXRlbSBpbiBzY2VuZUl0ZW1zKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGJvb2wgaXNHcm91cCA9IGl0ZW1bImlzR3JvdXAiXT8uVHlwZSA9PSBKVG9rZW5UeXBlLkJvb2xlYW4gJiYgaXRlbVsiaXNHcm91cCJdLlRvT2JqZWN0PGJvb2w+KCk7DQogICAgICAgICAgICAgICAgYm9vbCBlbmFibGVkID0gaXRlbVsic2NlbmVJdGVtRW5hYmxlZCJdPy5UeXBlID09IEpUb2tlblR5cGUuQm9vbGVhbiAmJiBpdGVtWyJzY2VuZUl0ZW1FbmFibGVkIl0uVG9PYmplY3Q8Ym9vbD4oKTsNCiAgICAgICAgICAgICAgICBzdHJpbmcgaW5wdXRLaW5kID0gaXRlbVsiaW5wdXRLaW5kIl0/LlRvU3RyaW5nKCk7DQogICAgICAgICAgICAgICAgc3RyaW5nIHNvdXJjZU5hbWUgPSBpdGVtWyJzb3VyY2VOYW1lIl0/LlRvU3RyaW5nKCk7DQogICAgICAgICAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KHNvdXJjZU5hbWUpKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICBpZiAoaW5wdXRLaW5kID09ICJicm93c2VyX3NvdXJjZSIpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpZiAoZW5hYmxlZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXJTb3VyY2VzQnlTY2VuZVtzY2VuZU5hbWVdLkFkZChzb3VyY2VOYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiU2tpcHBpbmcgYnJvd3NlciBzb3VyY2U6ICd7c291cmNlTmFtZX0nIGluIHNjZW5lICd7c2NlbmVOYW1lfScgYmVjYXVzZSBhbHJlYWR5IGRpc2FibGVkLiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0dyb3VwKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgc3RyaW5nIGdyb3VwUmVzcG9uc2UgPSBDUEguT2JzU2VuZFJhdygiR2V0R3JvdXBTY2VuZUl0ZW1MaXN0IiwgSnNvbkNvbnZlcnQuU2VyaWFsaXplT2JqZWN0KG5ldyB7IHNjZW5lTmFtZSA9IHNvdXJjZU5hbWUgfSksIGNvbm5lY3Rpb24pOw0KICAgICAgICAgICAgICAgICAgICBKT2JqZWN0IGdyb3VwT2JqOw0KICAgICAgICAgICAgICAgICAgICB0cnkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBPYmogPSBKT2JqZWN0LlBhcnNlKGdyb3VwUmVzcG9uc2UpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNhdGNoDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgSkFycmF5IGdyb3VwSXRlbXMgPSBncm91cE9ialsic2NlbmVJdGVtcyJdIGFzIEpBcnJheTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGdyb3VwSXRlbXMgPT0gbnVsbCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZ0l0ZW0gaW4gZ3JvdXBJdGVtcykNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgYm9vbCBnRW5hYmxlZCA9IGdJdGVtWyJzY2VuZUl0ZW1FbmFibGVkIl0/LlR5cGUgPT0gSlRva2VuVHlwZS5Cb29sZWFuICYmIGdJdGVtWyJzY2VuZUl0ZW1FbmFibGVkIl0uVG9PYmplY3Q8Ym9vbD4oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyBnSW5wdXRLaW5kID0gZ0l0ZW1bImlucHV0S2luZCJdPy5Ub1N0cmluZygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nIGdTb3VyY2VOYW1lID0gZ0l0ZW1bInNvdXJjZU5hbWUiXT8uVG9TdHJpbmcoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShnU291cmNlTmFtZSkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ0lucHV0S2luZCA9PSAiYnJvd3Nlcl9zb3VyY2UiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnRW5hYmxlZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlclNvdXJjZXNCeVNjZW5lW3NjZW5lTmFtZV0uQWRkKGdTb3VyY2VOYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIlNraXBwaW5nIGJyb3dzZXIgc291cmNlOiAne2dTb3VyY2VOYW1lfScgaW4gc2NlbmUgJ3tzY2VuZU5hbWV9JyBiZWNhdXNlIGFscmVhZHkgZGlzYWJsZWQuIik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGZvcmVhY2ggKHZhciBrdnAgaW4gYnJvd3NlclNvdXJjZXNCeVNjZW5lKQ0KICAgICAgICB7DQogICAgICAgICAgICBzdHJpbmcgc2NlbmVOYW1lID0ga3ZwLktleTsNCiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzcmMgaW4ga3ZwLlZhbHVlLkRpc3RpbmN0KCkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KHNjZW5lTmFtZSkgfHwgc3RyaW5nLklzTnVsbE9yRW1wdHkoc3JjKSkNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgQ1BILk9ic0hpZGVTb3VyY2Uoc2NlbmVOYW1lLCBzcmMsIGNvbm5lY3Rpb24pOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkhpZGluZyBicm93c2VyIHNvdXJjZTogJ3tzcmN9JyBpbiBzY2VuZSAne3NjZW5lTmFtZX0nIik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwcml2YXRlIHZvaWQgRW5hYmxlQWxsQnJvd3NlclNvdXJjZXMoKQ0KICAgIHsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpbnQgY29ubmVjdGlvbiA9IEdldENvbm5lY3RlZE9CU0luZGV4KCk7DQogICAgICAgIGlmIChjb25uZWN0aW9uIDwgMCkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBmb3JlYWNoICh2YXIga3ZwIGluIGJyb3dzZXJTb3VyY2VzQnlTY2VuZSkNCiAgICAgICAgew0KICAgICAgICAgICAgc3RyaW5nIHNjZW5lTmFtZSA9IGt2cC5LZXk7DQogICAgICAgICAgICBmb3JlYWNoICh2YXIgc3JjIGluIGt2cC5WYWx1ZS5EaXN0aW5jdCgpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShzY2VuZU5hbWUpIHx8IHN0cmluZy5Jc051bGxPckVtcHR5KHNyYykpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIENQSC5PYnNTaG93U291cmNlKHNjZW5lTmFtZSwgc3JjLCBjb25uZWN0aW9uKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJTaG93aW5nIGJyb3dzZXIgc291cmNlOiAne3NyY30nIGluIHNjZW5lICd7c2NlbmVOYW1lfSciKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHByaXZhdGUgdm9pZCBHZXRCcm9hZGNhc3RlckFuZEJvdCgpDQogICAgew0KICAgICAgICBpZiAoYnJvYWRjYXN0ZXJVc2VyID09IG51bGwpDQogICAgICAgIHsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiRmV0Y2hpbmcgYnJvYWRjYXN0ZXIgYW5kIGJvdCBpbmZvLi4uIik7DQogICAgICAgICAgICB2YXIgYnJvYWRjYXN0ZXJJbmZvID0gQ1BILlR3aXRjaEdldEJyb2FkY2FzdGVyKCk7DQogICAgICAgICAgICBpZiAoYnJvYWRjYXN0ZXJJbmZvICE9IG51bGwpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgYnJvYWRjYXN0ZXJVc2VyID0gYnJvYWRjYXN0ZXJJbmZvLlVzZXJOYW1lOw0KICAgICAgICAgICAgICAgIGJyb2FkY2FzdGVyVXNlck5hbWUgPSBicm9hZGNhc3RlckluZm8uVXNlckxvZ2luOw0KICAgICAgICAgICAgICAgIGJyb2FkY2FzdGVyVXNlcklkID0gYnJvYWRjYXN0ZXJJbmZvLlVzZXJJZDsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJCcm9hZGNhc3RlciBmZXRjaGVkOiB7YnJvYWRjYXN0ZXJVc2VyfSAoe2Jyb2FkY2FzdGVyVXNlck5hbWV9KSIpOw0KICAgICAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgIHZhciBib3RJbmZvID0gQ1BILlR3aXRjaEdldEJvdCgpOw0KICAgICAgICAgICAgICAgIGlmIChib3RJbmZvICE9IG51bGwpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBib3RVc2VyID0gYm90SW5mby5Vc2VyTmFtZTsNCiAgICAgICAgICAgICAgICAgICAgYm90VXNlck5hbWUgPSBib3RJbmZvLlVzZXJMb2dpbjsNCiAgICAgICAgICAgICAgICAgICAgYm90VXNlcklkID0gYm90SW5mby5Vc2VySWQ7DQogICAgICAgICAgICAgICAgICAgIGhhc0JvdCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkJvdCBmZXRjaGVkOiB7Ym90VXNlcn0gKHtib3RVc2VyTmFtZX0pIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCJObyBib3QgY29ubmVjdGVkLiIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygiRmFpbGVkIHRvIGZldGNoIGJyb2FkY2FzdGVyLiIpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgV2ViQ2xpZW50IHdlYkNsaWVudCA9IG5ldyBXZWJDbGllbnQNCiAgICB7DQogICAgICAgIEVuY29kaW5nID0gU3lzdGVtLlRleHQuRW5jb2RpbmcuVVRGOA0KICAgIH07DQogICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgSHR0cENsaWVudCBjbGllbnQgPSBuZXcgSHR0cENsaWVudA0KICAgIHsNCiAgICAgICAgVGltZW91dCA9IFRpbWVTcGFuLkZyb21TZWNvbmRzKDY5KQ0KICAgIH07DQogICAgcHJpdmF0ZSBzdGF0aWMgYm9vbCB0b2FzdFNlbnQgPSBmYWxzZTsNCiAgICBwcml2YXRlIGJvb2wgQ2hlY2tTZXR0aW5nc0dsb2JhbCgpDQogICAgew0KICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkoQ1BILkdldEdsb2JhbFZhcjxzdHJpbmc+KCQidGF3bWFlX1NldHRpbmdzX3tleHRlbnNpb25OYW1lfSIsIHRydWUpKSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKCF0b2FzdFNlbnQpDQogICAgICAgICAgICAgICAgU2VuZFRvYXN0KCJQbGVhc2UgaW5pdGlhdGUgdGhlIFNldHRpbmdzIFVJIGZpcnN0IGFuZCBoaXQgJ1NhdmUnIGJlZm9yZSB1c2luZyBhbnkgYWN0aW9ucy4iKTsNCiAgICAgICAgICAgIHRvYXN0U2VudCA9IHRydWU7DQogICAgICAgICAgICBQb3N0VG9Mb2coIlNraXBwaW5nLCBiZWNhdXNlIHRoZSBTZXR0aW5ncyBVSSBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQgeWV0LiIpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIHByaXZhdGUgdm9pZCBHZXRFeHRlbnNpb25JbmZvKCkNCiAgICB7DQogICAgICAgIGlmIChleHRlbnNpb25OYW1lID09IG51bGwgfHwgZXh0ZW5zaW9uVmVyc2lvbiA9PSBudWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICBDUEguRXhlY3V0ZU1ldGhvZCgiTU9EIFRPT0xTIFZlcnNpb24gQ2hlY2siLCAiRXhlY3V0ZSIpOw0KICAgICAgICAgICAgQ1BILlRyeUdldEFyZygiZXh0ZW5zaW9uTmFtZSIsIG91dCBleHRlbnNpb25OYW1lKTsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoImV4dGVuc2lvblZlcnNpb24iLCBvdXQgZXh0ZW5zaW9uVmVyc2lvbik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwcml2YXRlIHZvaWQgUG9zdFRvTG9nKHN0cmluZyBsb2csIFtDYWxsZXJNZW1iZXJOYW1lXSBzdHJpbmcgbWV0aG9kTmFtZSA9IG51bGwpDQogICAgew0KICAgICAgICBDUEguTG9nSW5mbygkIlt7ZXh0ZW5zaW9uTmFtZX0gdi57ZXh0ZW5zaW9uVmVyc2lvbn1dIFt7bWV0aG9kTmFtZX1dIHtsb2d9Iik7DQogICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lkIEluaXRMb2coW0NhbGxlck1lbWJlck5hbWVdIHN0cmluZyBtZXRob2ROYW1lID0gbnVsbCkNCiAgICB7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJyYXdJbnB1dCIsIG91dCBzdHJpbmcgcmF3SW5wdXQpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ0cmlnZ2VyTmFtZSIsIG91dCBzdHJpbmcgdHJpZ2dlck5hbWUpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJhY3Rpb25OYW1lIiwgb3V0IHN0cmluZyBhY3Rpb25OYW1lKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygiY29tbWFuZCIsIG91dCBzdHJpbmcgY29tbWFuZCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImNvbW1hbmRUeXBlIiwgb3V0IHN0cmluZyBjb21tYW5kVHlwZSk7DQogICAgICAgIEV2ZW50VHlwZSBfZXZlbnQgPSBDUEguR2V0RXZlbnRUeXBlKCk7DQogICAgICAgIENQSC5Mb2dJbmZvKCQiW3tleHRlbnNpb25OYW1lfSB2LntleHRlbnNpb25WZXJzaW9ufV0gW3ttZXRob2ROYW1lfV0gSU5JVElBTElaSU5HLi4uIEFjdGlvbjogJ3thY3Rpb25OYW1lfScgLy8gVHJpZ2dlcjogJ3t0cmlnZ2VyTmFtZX0nIC8vIEV2ZW50VHlwZTogJ3tfZXZlbnR9JyAvLyBDb21tYW5kPzogJ3tjb21tYW5kfScgLy8gQ29tbWFuZFR5cGU/OiAne2NvbW1hbmRUeXBlfScgLy8gVXNlcj86ICd7dXNlcn0nIC8vIElucHV0PzogJ3tyYXdJbnB1dH0nIik7DQogICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lkIFJlcGx5VG9DaGF0KHN0cmluZyB0ZXh0KQ0KICAgIHsNCiAgICAgICAgaWYgKENQSC5UcnlHZXRBcmcoIm5vTWVzc2FnZSIsIG91dCBib29sIG5vTWVzc2FnZSkpDQogICAgICAgICAgICBQb3N0VG9Mb2coJCJub01lc3NhZ2UgYXJnIHByZXNlbnQ6IHtub01lc3NhZ2V9Iik7DQogICAgICAgIGlmICh0ZXh0ICE9ICItIiAmJiAhbm9NZXNzYWdlKQ0KICAgICAgICB7DQogICAgICAgICAgICBpbnQgbWF4TGVuZ3RoID0gNDgwOw0KICAgICAgICAgICAgQ1BILlRyeUdldEFyZygibXNnSWQiLCBvdXQgc3RyaW5nIHJlcGx5SWQpOw0KICAgICAgICAgICAgQ1BILlRyeUdldEFyZygiY29tbWFuZFR5cGUiLCBvdXQgc3RyaW5nIGNvbW1hbmRUeXBlKTsNCiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdGV4dC5MZW5ndGg7IGkgKz0gbWF4TGVuZ3RoKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHN0cmluZyBtZXNzYWdlUGFydCA9IHRleHQuU3Vic3RyaW5nKGksIE1hdGguTWluKG1heExlbmd0aCwgdGV4dC5MZW5ndGggLSBpKSk7DQogICAgICAgICAgICAgICAgaWYgKCFzdHJpbmcuSXNOdWxsT3JFbXB0eShjb21tYW5kVHlwZSkgJiYgY29tbWFuZFR5cGUuVG9Mb3dlcigpLkNvbnRhaW5zKCJ3aGlzcGVyIikpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyTmFtZSIsIG91dCBzdHJpbmcgdXNlck5hbWUpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIUNQSC5TZW5kV2hpc3Blcih1c2VyTmFtZSwgbWVzc2FnZVBhcnQsIGhhc0JvdCkpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQ1BILlNlbmRXaGlzcGVyKHVzZXJOYW1lLCBtZXNzYWdlUGFydCwgIWhhc0JvdCkpDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KHJlcGx5SWQpICYmIHBvc3RNZXNzYWdlc0FzUmVwbGllcykNCiAgICAgICAgICAgICAgICAgICAgQ1BILlR3aXRjaFJlcGx5VG9NZXNzYWdlKG1lc3NhZ2VQYXJ0LCByZXBseUlkKTsNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIENQSC5TZW5kTWVzc2FnZShtZXNzYWdlUGFydCk7DQogICAgICAgICAgICAgICAgQ1BILldhaXQoMTUwKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHByaXZhdGUgdm9pZCBSZXBseVRvQ2hhdEFzQnJvYWRjYXN0ZXIoc3RyaW5nIHRleHQpDQogICAgew0KICAgICAgICBpZiAoQ1BILlRyeUdldEFyZygibm9NZXNzYWdlIiwgb3V0IGJvb2wgbm9NZXNzYWdlKSkNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIm5vTWVzc2FnZSBhcmcgcHJlc2VudDoge25vTWVzc2FnZX0iKTsNCiAgICAgICAgaWYgKHRleHQgIT0gIi0iICYmICFub01lc3NhZ2UpDQogICAgICAgIHsNCiAgICAgICAgICAgIGludCBtYXhMZW5ndGggPSA0ODA7DQogICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJtc2dJZCIsIG91dCBzdHJpbmcgcmVwbHlJZCk7DQogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHRleHQuTGVuZ3RoOyBpICs9IG1heExlbmd0aCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBzdHJpbmcgbWVzc2FnZVBhcnQgPSB0ZXh0LlN1YnN0cmluZyhpLCBNYXRoLk1pbihtYXhMZW5ndGgsIHRleHQuTGVuZ3RoIC0gaSkpOw0KICAgICAgICAgICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkocmVwbHlJZCkgJiYgcG9zdE1lc3NhZ2VzQXNSZXBsaWVzKQ0KICAgICAgICAgICAgICAgICAgICBDUEguVHdpdGNoUmVwbHlUb01lc3NhZ2UobWVzc2FnZVBhcnQsIHJlcGx5SWQsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIENQSC5TZW5kTWVzc2FnZShtZXNzYWdlUGFydCwgZmFsc2UpOw0KICAgICAgICAgICAgICAgIENQSC5XYWl0KDE1MCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBTZW5kVG9hc3Qoc3RyaW5nIHRleHQpDQogICAgew0KICAgICAgICBDUEguU2hvd1RvYXN0Tm90aWZpY2F0aW9uKGV4dGVuc2lvbk5hbWUsIHRleHQsICJIZWxwIGF0OiB0YXdtYWUueHl6L2Rpc2NvcmQiLCAiaHR0cHM6Ly9naXRodWIuY29tL3Rhd21hZS90YXdtYWUvYmxvYi9tYWluL2Fzc2V0cy9wYWdlLWRlc2lnbi90b2FzdC1sb2dvLnBuZz9yYXc9dHJ1ZSIpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIGV4dGVuc2lvbk5hbWUgPSBudWxsOw0KICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIGV4dGVuc2lvblZlcnNpb24gPSBudWxsOw0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBicm9hZGNhc3RlclVzZXIgPSBudWxsOw0KICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIGJyb2FkY2FzdGVyVXNlck5hbWUgPSBudWxsOw0KICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIGJyb2FkY2FzdGVyVXNlcklkID0gbnVsbDsNCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBib3RVc2VyID0gbnVsbDsNCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBib3RVc2VyTmFtZSA9IG51bGw7DQogICAgcHVibGljIHN0YXRpYyBzdHJpbmcgYm90VXNlcklkID0gbnVsbDsNCiAgICBwdWJsaWMgc3RhdGljIGJvb2wgaGFzQm90ID0gZmFsc2U7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHByaXZhdGUgVGF3bWFlVUkuVGF3bWFlIHVpOw0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBwb3N0TWVzc2FnZXNBc1JlcGxpZXMgPSBmYWxzZTsNCiAgICBwdWJsaWMgYm9vbCBpZ25vcmVTaGFyZWRDaGF0ID0gdHJ1ZTsNCiAgICBwdWJsaWMgYm9vbCB0b2dnbGVFbW90ZU9ubHlPblN0cmVhbVN0YXJ0QW5kRW5kID0gZmFsc2U7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlQnJvYWRjYXN0ZXJPbmx5ID0gIlNvcnJ5IEAldXNlciUsIG9ubHkgJWJyb2FkY2FzdGVyTmFtZSUgaXMgYWxsb3dlZCB0byBwZXJmb3JtIHRoYXQgYWN0aW9uLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlVXNlckRvZXNOb3RFeGlzdCA9ICJAJXVzZXIlLCB0aGUgdXNlciAnJXRhcmdldFVzZXIlJyBkb2VzIG5vdCBleGlzdC4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZUFmZmlsaWF0ZWRSZXF1aXJlZCA9ICJUaGlzIGFjdGlvbiByZXF1aXJlcyBAJWJyb2FkY2FzdGVyTmFtZSUgdG8gYmUgZWl0aGVyIGFmZmlsaWF0ZWQgb3IgcGFydG5lcmVkIDooIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VDb21tYW5kTm9Vc2VyUHJvdmlkZWQgPSAiQCV1c2VyJSwgcGxlYXNlIHByb3ZpZGUgYSB1c2VybmFtZS4gRXhhbXBsZTogJyVjb21tYW5kJSB0YXdtYWUnIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VTdXBlck1vZGVyYXRvcnNPbmx5ID0gIkAldXNlciUsIG9ubHkgc3VwZXIgbW9kZXJhdG9ycyBhbmQgJWJyb2FkY2FzdGVyTmFtZSUgYXJlIGFsbG93ZWQgdG8gcGVyZm9ybSB0aGF0IGFjdGlvbi4iOw0KICAgIHB1YmxpYyBIYXNoU2V0PHN0cmluZz4gc3VwZXJNb2RlcmF0b3JzTGlzdCA9IG5ldyBIYXNoU2V0PHN0cmluZz4NCiAgICB7DQogICAgfTsNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgdXJsQmxvY2tMaW5rcyA9IHRydWU7DQogICAgcHVibGljIGludCBwZXJtaXREdXJhdGlvbiA9IDEyMDsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VVcmxBZGRlZFRvV2hpdGVsaXN0ID0gIicldXJsJScgaGFzIGJlZW4gYWRkZWQgdG8gdGhlIHdoaXRlbGlzdC4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVVybFJlbW92ZWRGcm9tV2hpdGVsaXN0ID0gIicldXJsJScgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSB3aGl0ZWxpc3QuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VVcmxBbHJlYWR5T25XaGl0ZWxpc3QgPSAiQCV1c2VyJSwgJyV1cmwlJyBpcyBhbHJlYWR5IHdoaXRlbGlzdGVkLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlVXJsTm90T25XaGl0ZWxpc3QgPSAiQCV1c2VyJSwgJyV1cmwlJyBpcyBub3Qgb24gdGhlIHdoaXRlbGlzdC4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVVybEdldFdoaXRlbGlzdCA9ICJAJXVzZXIlLCBsaW5rcyBmcm9tIHRoZXNlIHdlYnNpdGVzIGNhbiBiZSBwb3N0ZWQgdG8gY2hhdDogJXVybFdoaXRlbGlzdCUiOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVVybE5vV2hpdGVsaXN0ID0gIkAldXNlciUsIHRoZXIgYXJlIGN1cnJlbnRseSBubyBsaW5rcyBvbiB0aGUgd2hpdGVsaXN0LiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlVG9nZ2xlVXJsRW5hYmxlZCA9ICJVUkwgZmlsdGVyIGhhcyBiZWVuIGVuYWJsZWQuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VUb2dnbGVVcmxEaXNhYmxlZCA9ICJVUkwgZmlsdGVyIGhhcyBiZWVuIGRpc2FibGVkLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlUGVybWl0U3VjY2VzcyA9ICJAJXRhcmdldFVzZXIlLCB5b3UgY2FuIG5vdyBwb3N0IGxpbmtzIHRvIGNoYXQgZm9yIHRoZSBuZXh0ICVwZXJtaXREdXJhdGlvbiUgc2Vjb25kcy4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVVybFVzZXJBZGRlZFRvV2hpdGVsaXN0ID0gIkAldGFyZ2V0VXNlciUgaGFzIGJlZW4gYWRkZWQgdG8gdGhlIFVSTCB3aGl0ZWxpc3QgYW5kIGNhbiBub3cgcG9zdCBsaW5rcy4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVVybFVzZXJBbHJlYWR5T25XaGl0ZWxpc3QgPSAiQCV0YXJnZXRVc2VyJSBpcyBhbHJlYWR5IG9uIHRoZSBVUkwgd2hpdGVsaXN0LiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlVXJsVXNlclJlbW92ZWRGcm9tV2hpdGVsaXN0ID0gIkAldGFyZ2V0VXNlciUgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSBVUkwgd2hpdGVsaXN0LiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlVXJsVXNlck5vdE9uV2hpdGVsaXN0ID0gIkAldGFyZ2V0VXNlciUgaXMgbm90IG9uIHRoZSBVUkwgd2hpdGVsaXN0LiI7DQogICAgcHVibGljIEhhc2hTZXQ8c3RyaW5nPiB1cmxXaGl0ZWxpc3RlZFVSTHMgPSBuZXcgSGFzaFNldDxzdHJpbmc+DQogICAgew0KICAgIH07DQogICAgcHVibGljIEhhc2hTZXQ8c3RyaW5nPiB1cmxXaGl0ZWxpc3RlZFVzZXJzID0gbmV3IEhhc2hTZXQ8c3RyaW5nPg0KICAgIHsNCiAgICB9Ow0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgYm9vbCBmaWx0ZXJCbGFja2xpc3RlZFdvcmRzID0gZmFsc2U7DQogICAgcHVibGljIGJvb2wgYXNjaWlQcm90ZWN0aW9uID0gZmFsc2U7DQogICAgcHVibGljIGJvb2wgY2Fwc1Byb3RlY3Rpb24gPSBmYWxzZTsNCiAgICBwdWJsaWMgYm9vbCBlbW90ZVByb3RlY3Rpb24gPSBmYWxzZTsNCiAgICBwdWJsaWMgaW50IHRpbWVvdXREdXJhdGlvbiA9IDMwOw0KICAgIHB1YmxpYyBpbnQgY2Fwc1Byb3RlY3Rpb25Db3VudCA9IDEwOw0KICAgIHB1YmxpYyBpbnQgZW1vdGVQcm90ZWN0aW9uQ291bnQgPSAxMDsNCiAgICBwdWJsaWMgSGFzaFNldDxzdHJpbmc+IGJsYWNrbGlzdGVkV29yZHNMaXN0ID0gbmV3IEhhc2hTZXQ8c3RyaW5nPg0KICAgIHsNCiAgICB9Ow0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZUJsYWNrbGlzdEFkZGVkID0gIldvcmQgZnVsbHkgYWRkZWQgdG8gdGhlIGJsYWNrbGlzdC4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZUJsYWNrbGlzdFJlbW92ZWQgPSAiV29yZCBmdWxseSByZW1vdmVkIGZyb20gdGhlIGJsYWNrbGlzdC4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZUJsYWNrbGlzdEFscmVhZHlBZGRlZCA9ICJAJXVzZXIlLCB0aGF0IHdvcmQgaXMgYWxyZWFkeSBibGFja2xpc3RlZC4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZUJsYWNrbGlzdE5vdExpc3RlZCA9ICJAJXVzZXIlLCB0aGF0IHdvcmQgaXMgbm90IG9uIHRoZSBibGFja2xpc3QuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VUb2dnbGVCbGFja2xpc3RlZFdvcmRzRW5hYmxlZCA9ICJCbGFja2xpc3RlZCB3b3JkcyBmaWx0ZXIgaGFzIGJlZW4gZW5hYmxlZC4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVRvZ2dsZUJsYWNrbGlzdGVkV29yZHNEaXNhYmxlZCA9ICJCbGFja2xpc3RlZCB3b3JkcyBmaWx0ZXIgaGFzIGJlZW4gZGlzYWJsZWQuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VUb2dnbGVDYXBzRW5hYmxlZCA9ICJDYXBzIHByb3RlY3Rpb24gaGFzIGJlZW4gZW5hYmxlZC4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVRvZ2dsZUNhcHNEaXNhYmxlZCA9ICJDYXBzIHByb3RlY3Rpb24gaGFzIGJlZW4gZGlzYWJsZWQuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VUb2dnbGVFbW90ZXNFbmFibGVkID0gIkVtb3RlIHByb3RlY3Rpb24gaGFzIGJlZW4gZW5hYmxlZC4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVRvZ2dsZUVtb3Rlc0Rpc2FibGVkID0gIkVtb3RlIHByb3RlY3Rpb24gaGFzIGJlZW4gZGlzYWJsZWQuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VUb2dnbGVBc2NpaUVuYWJsZWQgPSAiQVNDSUkgcHJvdGVjdGlvbiBoYXMgYmVlbiBlbmFibGVkLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlVG9nZ2xlQXNjaWlEaXNhYmxlZCA9ICJBU0NJSSBwcm90ZWN0aW9uIGhhcyBiZWVuIGRpc2FibGVkLiI7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBpbnQgZGVmYXVsdFBvbGxEdXJhdGlvbiA9IDEyMDsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VQb2xsQ3JlYXRlZCA9ICJUaGUgcG9sbCAnJXBvbGxUaXRsZSUnIGhhcyBiZWVuIGNyZWF0ZWQuIFlvdSBoYXZlICVwb2xsRHVyYXRpb24lcyB0aW1lIHRvIHZvdGUgZm9yIHRoZSBvcHRpb25zOiAlcG9sbE9wdGlvbnMlIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VBbHJlYWR5QWN0aXZlUG9sbCA9ICJDYW4ndCBjcmVhdGUgYSBwb2xsLCBiZWNhdXNlIHRoZSBwb2xsICclcG9sbFRpdGxlJScgaXMgc3RpbGwgYWN0aXZlLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlUG9sbEVuZGVkID0gIlRoZSBwb2xsICclcG9sbFRpdGxlJScgaGFzIGJlZW4gZW5kZWQuICclcG9sbFdpbm5pbmdPcHRpb24lJyBoYXMgd29uIHdpdGggJXBvbGxXaW5uaW5nT3B0aW9uVm90ZXMlIHZvdGVzISI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlUG9sbEVuZGVkVGllZCA9ICJUaGUgcG9sbCAnJXBvbGxUaXRsZSUnIGhhcyBiZWVuIGVuZGVkLiBUaGVyZSdzIGEgdGllIGJldHdlZW4gJXBvbGxXaW5uaW5nT3B0aW9ucyUgd2l0aCAlcG9sbFdpbm5pbmdPcHRpb25Wb3RlcyUgdm90ZXMgZWFjaC4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZU5vQWN0aXZlUG9sbCA9ICJUaGVyZSdzIGN1cnJlbnRseSBubyBhY3RpdmUgcG9sbC4iOw0KICAgIHB1YmxpYyBpbnQgZGVmYXVsdFByZWRpY3Rpb25EdXJhdGlvbiA9IDE4MDsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VQcmVkaWN0aW9uQ3JlYXRlZCA9ICJUaGUgcHJlZGljdGlvbiAnJXByZWRpY3Rpb25UaXRsZSUnIGhhcyBiZWVuIGNyZWF0ZWQuIFlvdSBoYXZlICVwcmVkaWN0aW9uRHVyYXRpb24lcyB0aW1lIHRvIHZvdGUgZm9yIHRoZSBvcHRpb25zOiAlcHJlZGljdGlvbk9wdGlvbnMlIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VBbHJlYWR5QWN0aXZlUHJlZGljdGlvbiA9ICJDYW4ndCBjcmVhdGUgYSBwcmVkaWN0aW9uLCBiZWNhdXNlIHRoZSBwcmVkaWN0aW9uICclcHJlZGljdGlvblRpdGxlJScgaXMgc3RpbGwgYWN0aXZlLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlTm9BY3RpdmVQcmVkaWN0aW9uID0gIlRoZXJlJ3MgY3VycmVudGx5IG5vIGFjdGl2ZSBwcmVkaWN0aW9uLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlUHJlZGljdGlvbkVuZGVkID0gIlRoZSBwcmVkaWN0aW9uICclcHJlZGljdGlvblRpdGxlJScgaGFzIGJlZW4gZW5kZWQuICclcHJlZGljdGlvbldpbm5pbmdPcHRpb24lJyB3YXMgdGhlIGNvcnJlY3Qgb3V0Y29tZS4gJXByZWRpY3Rpb25Ub3RhbFBvaW50cyUgY2hhbm5lbCBwb2ludHMgYXJlIGJlaW5nIGRpc3RyaWJ1dGVkIGFjY3Jvc3MgdGhlIHdpbm5lcnMuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VQcmVkaWN0aW9uTG9ja2VkID0gIlRoZSBwcmVkaWN0aW9uICclcHJlZGljdGlvblRpdGxlJScgaGFzIGJlZW4gbG9ja2VkLiAlcHJlZGljdGlvblRvdGFsVXNlcnMlIGhhdmUgcHV0IHRoZWlyIGJldHMgaW4gcGxhY2UuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VQcmVkaWN0aW9uQWxyZWFkeUxvY2tlZCA9ICJUaGUgcHJlZGljdGlvbiAnJXByZWRpY3Rpb25UaXRsZSUnIGlzIGFscmVhZHkgbG9ja2VkLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlUHJlZGljdGlvbkNhbmNlbGxlZCA9ICJUaGUgcHJlZGljdGlvbiAnJXByZWRpY3Rpb25UaXRsZSUnIGhhcyBiZWVuIGNhbmNlbGxlZC4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVByZWRpY3Rpb25Ob3RMb2NrZWQgPSAiQCV1c2VyJSwgdGhlIHByZWRpY3Rpb24gJyVwcmVkaWN0aW9uVGl0bGUlJyBtdXN0IGJlIGxvY2tlZCBiZWZvcmUgaXQgY2FuIGJlIHJlc29sdmVkLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlUHJlZGljdGlvbkludmFsaWRPcHRpb24gPSAiQCV1c2VyJSwgdGhhdCBvcHRpb24gaXMgbm90IHZhbGlkLiBFaXRoZXIgdXNlIHRoZSBleGFjdCBvcHRpb24gdGl0bGUgb3IgdGhlIG51bWJlciBvZiB0aGUgb3B0aW9uLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlUHJlZGljdGlvblJlc29sdmVkID0gIlRoZSBwcmVkaWN0aW9uICclcHJlZGljdGlvblRpdGxlJScgaGFzIGJlZW4gcmVzb2x2ZWQuICclcHJlZGljdGlvbldpbm5pbmdPcHRpb24lJyB3b24gd2l0aCAlcHJlZGljdGlvbldpbm5pbmdPcHRpb25Wb3RlcyUgdm90ZXMhICVwcmVkaWN0aW9uVG90YWxQb2ludHMlIGNoYW5uZWwgcG9pbnRzIGFyZSBiZWluZyBkaXN0cmlidXRlZCBhY3Jvc3MgdGhlIHdpbm5lcnMuIjsNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgb2JzU2NlbmVzU2luZ2xlTWVzc2FnZSA9IGZhbHNlOw0KICAgIHB1YmxpYyBib29sIG9ic1NjZW5lc1doaXNwZXJNZXNzYWdlID0gZmFsc2U7DQogICAgcHVibGljIGJvb2wgb2JzU2NlbmVzU3VwZXJNb2RzT25seSA9IGZhbHNlOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZU9ic05vdENvbm5lY3RlZCA9ICJUaGlzIGFjdGlvbiByZXF1aXJlcyBPQlMgdG8gYmUgY29ubmVjdGVkIHRvIFN0cmVhbWVyLmJvdC4gT0JTIGlzIGN1cnJlbnRseSBub3QgY29ubmVjdGVkLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlT2JzTm9TY2VuZU5hbWUgPSAiQCV1c2VyJSwgcGxlYXNlIHByb3ZpZGUgYSBzY2VuZSBuYW1lIG9yIHRoZSBpbmRleCBudW1iZXIgb2YgdGhlIHNjZW5lLiBFeGFtcGxlOiAnJWNvbW1hbmQlIDAnIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VPYnNOb1N1Y2hTY2VuZSA9ICJAJXVzZXIlLCB0aGUgc2NlbmUgJyV0YXJnZXRTY2VuZSUnIGRvZXNuJ3QgZXhpc3QuIENoZWNrIGZvciB0aGUgZXhhY3QgbmFtZSBvciB1c2UgdGhlIGluZGV4IG51bWJlci4gWW91IGNhbiBzZWUgYWxsIGF2YWlsYWJsZSBzY2VuZXMgd2l0aCAnIWdldFNjZW5lcyciOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZU9ic1NjZW5lQWxyZWFkeU9uID0gIkAldXNlciUsIHRoZSBzY2VuZSAnJXRhcmdldFNjZW5lJScgaXMgYWxyZWFkeSBvbi4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZU9ic1NjZW5lQ2hhbmdlZCA9ICJTY2VuZSBjaGFuZ2VkIHN1Y2Nlc3NmdWxseTogJyVvbGRTY2VuZSUnIOKGkiAnJXRhcmdldFNjZW5lJSciOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZU9ic0FsbEFwcGxpY2F0aW9uQXVkaW9DYXB0dXJlU291cmNlc1JlZnJlc2hlZCA9ICJTdWNjZXNzZnVsbHkgcmVmcmVzaGVkICVzb3VyY2VDb3VudCUgQXBwbGljYXRpb24gQXVkaW8gQ2FwdHVyZSBTb3VyY2VzLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlT2JzQWxsQnJvd3NlclNvdXJjZXNSZWZyZXNoZWQgPSAiU3VjY2Vzc2Z1bGx5IHJlZnJlc2hlZCAlc291cmNlQ291bnQlIEJyb3dzZXIgU291cmNlcy4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZU9ic1N0cmVhbUVuZGVkID0gIiV1c2VyJSBoYXMgZW5kZWQgdGhlIHN0cmVhbS4iOw0KICAgIHB1YmxpYyBzdHJpbmdbXSBvYnNFeGNsdWRlZFNjZW5lTGlzdCA9DQogICAgew0KICAgICAgICAiPCBDaG9vc2UgQSBTY2VuZSA+Ig0KICAgIH07DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBib29sIGNoYW5uZWxSZXdhcmRzU3VwZXJNb2RzT25seSA9IGZhbHNlOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVJld2FyZHNBbGxFbmFibGVkID0gIkAldXNlciUsIGFsbCByZXdhcmRzIGhhdmUgYmVlbiBlbmFibGVkICgldG90YWxDb3VudCUpLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlUmV3YXJkc0FsbERpc2FibGVkID0gIkAldXNlciUsIGFsbCByZXdhcmRzIGhhdmUgYmVlbiBkaXNhYmxlZCAoJXRvdGFsQ291bnQlKS4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVJld2FyZHNHcm91cEVuYWJsZWQgPSAiQCV1c2VyJSwgcmV3YXJkIGdyb3VwICclZ3JvdXBOYW1lJScgaGFzIGJlZW4gZW5hYmxlZC4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVJld2FyZHNHcm91cERpc2FibGVkID0gIkAldXNlciUsIHJld2FyZCBncm91cCAnJWdyb3VwTmFtZSUnIGhhcyBiZWVuIGRpc2FibGVkLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlUmV3YXJkc1NpbmdsZUVuYWJsZWQgPSAiQCV1c2VyJSwgcmV3YXJkICclcmV3YXJkTmFtZSUnIGhhcyBiZWVuIGVuYWJsZWQuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VSZXdhcmRzU2luZ2xlRGlzYWJsZWQgPSAiQCV1c2VyJSwgcmV3YXJkICclcmV3YXJkTmFtZSUnIGhhcyBiZWVuIGRpc2FibGVkLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlUmV3YXJkc0FsbFBhdXNlZCA9ICJAJXVzZXIlLCBhbGwgcmV3YXJkcyBoYXZlIGJlZW4gcGF1c2VkICgldG90YWxDb3VudCUpLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlUmV3YXJkc0FsbFVucGF1c2VkID0gIkAldXNlciUsIGFsbCByZXdhcmRzIGhhdmUgYmVlbiB1bnBhdXNlZCAoJXRvdGFsQ291bnQlKS4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVJld2FyZHNHcm91cFBhdXNlZCA9ICJAJXVzZXIlLCByZXdhcmQgZ3JvdXAgJyVncm91cE5hbWUlJyBoYXMgYmVlbiBwYXVzZWQuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VSZXdhcmRzR3JvdXBVbnBhdXNlZCA9ICJAJXVzZXIlLCByZXdhcmQgZ3JvdXAgJyVncm91cE5hbWUlJyBoYXMgYmVlbiB1bnBhdXNlZC4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVJld2FyZHNTaW5nbGVQYXVzZWQgPSAiQCV1c2VyJSwgcmV3YXJkICclcmV3YXJkTmFtZSUnIGhhcyBiZWVuIHBhdXNlZC4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVJld2FyZHNTaW5nbGVVbnBhdXNlZCA9ICJAJXVzZXIlLCByZXdhcmQgJyVyZXdhcmROYW1lJScgaGFzIGJlZW4gdW5wYXVzZWQuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VSZXdhcmRzTm9TdWNoR3JvdXAgPSAiQCV1c2VyJSwgbm8gcmV3YXJkIGdyb3VwIG5hbWVkICclZ3JvdXBOYW1lJScuIFVzZSAnJWNvbW1hbmQlIDxncm91cD4nLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlUmV3YXJkc05vU3VjaFJld2FyZCA9ICJAJXVzZXIlLCBubyByZXdhcmQgbmFtZWQgJyVyZXdhcmROYW1lJScuIFVzZSAnJWNvbW1hbmQlIDxyZXdhcmQ+Jy4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVJld2FyZHNQcm9tcHRDaGFuZ2VkID0gIkAldXNlciUsIHByb21wdCBmb3IgJyVyZXdhcmROYW1lJScgY2hhbmdlZCB0byBcIiVuZXdQcm9tcHQlXCIuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VSZXdhcmRzVGl0bGVDaGFuZ2VkID0gIkAldXNlciUsIHRpdGxlIG9mICclcmV3YXJkTmFtZSUnIGNoYW5nZWQgZnJvbSBcIiVvbGRUaXRsZSVcIiB0byBcIiVuZXdUaXRsZSVcIi4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVJld2FyZHNDb3N0Q2hhbmdlZCA9ICJAJXVzZXIlLCBjb3N0IG9mICclcmV3YXJkTmFtZSUnIHVwZGF0ZWQgZnJvbSAlb2xkQ29zdCUgdG8gJW5ld0Nvc3QlLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlUmV3YXJkc05vdE93bmVkID0gIkAldXNlciUsIHJld2FyZCAnJXJld2FyZE5hbWUlJyBpcyBub3Qgb3duZWQgYnkgU3RyZWFtZXIuYm90IjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VSZXdhcmRzTWF4UGVyU3RyZWFtRW5hYmxlZCA9ICJAJXVzZXIlLCByZXdhcmQgJyVyZXdhcmROYW1lJScgaGFzIGJlZW4gc2V0IHRvIG1heC4gJW1heFBlclN0cmVhbUNvdW50JSByZWRlbXB0aW9ucy4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVJld2FyZHNNYXhQZXJTdHJlYW1EaXNhYmxlZCA9ICJAJXVzZXIlLCByZXdhcmQgJyVyZXdhcmROYW1lJScgaGFzIG5vIG1vcmUgbWF4LiBwZXIgc3RyZWFtIGxpbWl0LiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlUmV3YXJkc01heFBlclN0cmVhbVBlclVzZXJFbmFibGVkID0gIkAldXNlciUsIHJld2FyZCAnJXJld2FyZE5hbWUlJyBoYXMgYmVlbiBzZXQgdG8gbWF4LiAlbWF4UGVyU3RyZWFtUGVyVXNlckNvdW50JSByZWRlbXB0aW9ucyBwZXIgdXNlci4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVJld2FyZHNNYXhQZXJTdHJlYW1QZXJVc2VyRGlzYWJsZWQgPSAiQCV1c2VyJSwgcmV3YXJkICclcmV3YXJkTmFtZSUnIGhhcyBubyBtb3JlIG1heC4gcGVyIHN0cmVhbSBwZXIgdXNlciBsaW1pdC4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVJld2FyZHNHbG9iYWxDb29sZG93bkVuYWJsZWQgPSAiQCV1c2VyJSwgcmV3YXJkICclcmV3YXJkTmFtZSUnIG5vdyBoYXMgYSBjb29sZG93biBvZiAlbmV3Q29vbGRvd24lIHNlY29uZHMuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VSZXdhcmRzR2xvYmFsQ29vbGRvd25EaXNhYmxlZCA9ICJAJXVzZXIlLCByZXdhcmQgJyVyZXdhcmROYW1lJScgaGFzIG5vIG1vcmUgZ2xvYmFsIGNvb2xkb3duLiI7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBib29sIGN1c3RvbUNvbW1hbmRzR2V0UGVybWl0dGVkT25seSA9IHRydWU7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlQ3VzdG9tQ29tbWFuZEFkZGVkID0gIlRoZSBjb21tYW5kICclY29tbWFuZE5hbWUlJyBoYXMgYmVlbiBhZGRlZC4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZUN1c3RvbUNvbW1hbmRFZGl0ZWQgPSAiVGhlIGNvbW1hbmQgJyVjb21tYW5kTmFtZSUnIGhhcyBiZWVuIGVkaXRlZC4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZUN1c3RvbUNvbW1hbmRSZW1vdmVkID0gIlRoZSBjb21tYW5kICclY29tbWFuZE5hbWUlJyBoYXMgYmVlbiByZW1vdmVkLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlQ3VzdG9tQ29tbWFuZHNBbHJlYWR5QVJlZ3VsYXJDb21tYW5kID0gIiclY29tbWFuZE5hbWUlJyBpcyBhbHJlYWR5IGEgcmVndWxhciBjb21tYW5kIG9mIHlvdXJzLiBQbGVhc2UgY2hvb3NlIGEgdW5pcXVlIG5hbWUuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VDdXN0b21Db21tYW5kc0FscmVhZHlBQ3VzdG9tQ29tbWFuZCA9ICInJWNvbW1hbmROYW1lJScgaXMgYWxyZWFkeSBhIGN1c3RvbSBjb21tYW5kIG9mIHlvdXJzLiBFaXRoZXIgZWRpdCBpdCBvciB1c2UgYW5vdGhlciB1bmlxdWUgbmFtZS4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZUN1c3RvbUNvbW1hbmRzTm9UZXh0ID0gIkAldXNlciUsIHBsZWFzZSBlbnRlciBhIHRleHQgZm9yIHRoZSBjb21tYW5kLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlQ3VzdG9tQ29tbWFuZE5vdEFDdXN0b21Db21tYW5kID0gIkAldXNlciUsICclY29tbWFuZE5hbWUlJyBpcyBub3QgYSBjdXN0b20gY29tbWFuZC4gRWl0aGVyIGNoZWNrIHRoZSBzcGVsbGluZyBvciBjcmVhdGUgYSBuZXcgb25lLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlQ3VzdG9tQ29tbWFuZHNHZXRDb21tYW5kc1ByZWZpeCA9ICJBdmFpbGFibGUgY3VzdG9tIGNvbW1hbmRzOiAiOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZUN1c3RvbUNvbW1hbmRzTm9Db21tYW5kcyA9ICJObyBjdXN0b20gY29tbWFuZHMgYXZhaWxhYmxlLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlQ3VzdG9tQ29tbWFuZEV4TWFyayA9ICJAJXVzZXIlLCBjdXN0b20gY29tbWFuZHMgbmVlZCB0byBzdGFydCB3aXRoIGFuIGV4Y2xhbWF0aW9uIG1hcmssIHRyeSAnJWNvbW1hbmROYW1lJScgaW5zdGVhZC4iOw0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VDaGFubmVsVGl0bGVDaGFuZ2VkID0gIlRoZSB0aXRsZSBoYXMgYmVlbiBjaGFuZ2VkIHRvICclbmV3VGl0bGUlJy4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZUNoYW5uZWxHYW1lQ2hhbmdlZCA9ICJUaGUgZ2FtZSBoYXMgYmVlbiBjaGFuZ2VkIHRvICclbmV3R2FtZSUnIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VDaGFubmVsR2FtZUFscmVhZHlTZXQgPSAiQCV1c2VyJSwgdGhlIGdhbWUgaXMgYWxyZWFkeSBzZXQgdG8gJyVuZXdHYW1lJScuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VDaGFubmVsQ2F0ZWdvcnlDaGFuZ2VkID0gIlRoZSBjYXRlZ29yeSBoYXMgYmVlbiBjaGFuZ2VkIHRvICclbmV3R2FtZSUnIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VDaGFubmVsVGFnQWRkZWQgPSAiU3VjY2Vzc2Z1bGx5IGFkZGVkIHRoZSB0YWcgJyVhZGRlZFRhZyUnIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VDaGFubmVsVGFnUmVtb3ZlZCA9ICJTdWNjZXNzZnVsbHkgcmVtb3ZlZCB0aGUgdGFnICclcmVtb3ZlZFRhZyUnIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VDaGFubmVsTm9UYWdzID0gIkAldXNlciUsIGNoYW5uZWwgaGFzIG5vIHRhZ3Mgc2V0LiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlQ2hhbm5lbE1heFRhZ3MgPSAiQCV1c2VyJSwgdGhlIGNoYW5uZWwgYWxyZWFkeSByZWFjaGVkIHRoZSBtYXhpbXVtIG9mIDEwIHRhZ3MuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VDaGFubmVsVGFnTm90SW5MaXN0ID0gIkAldXNlciUsIHRoZSB0YWcgJyVyZW1vdmVkVGFnJScgaXMgbm90IGluIHRoZSBjaGFubmVsJ3MgdGFnIGxpc3QuIENoZWNrIHRoZSBzcGVsbGluZyBhbmQgdHJ5IGFnYWluLiI7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBzdHJpbmcgdGFyZ2V0TGFuZ3VhZ2UgPSAiRW5nbGlzaCI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlVGltZW91dFN1cGVybW9kc09ubHkgPSAiQCV1c2VyJSwgb25seSBzdXBlciBtb2RlcmF0b3JzIGNhbiB0aW1lb3V0IG90aGVyIG1vZGVyYXRvcnMuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VUaW1lb3V0Q2FudFRpbWVvdXRTdXBlcm1vZHMgPSAiQCV1c2VyJSwgc3VwZXIgbW9kZXJhdG9ycyBjYW4ndCBiZSB0aW1lZCBvdXQuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VCYW5TdXBlcm1vZHNPbmx5ID0gIkAldXNlciUsIG9ubHkgc3VwZXIgbW9kZXJhdG9ycyBjYW4gYmFuIG90aGVyIG1vZGVyYXRvcnMuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VCYW5DYW50QmFuU3VwZXJtb2RzID0gIkAldXNlciUsIHN1cGVyIG1vZGVyYXRvcnMgY2FuJ3QgYmUgYmFubmVkLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlQWRzUnVuID0gIlN0YXJ0aW5nIGEgJWFkTGVuZ3RoJXMgYWQgYnJlYWshIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VQcmVyb2xsRnJlZVRpbWUgPSAiUHJlLXJvbGwgYWRzIGFyZSBkaXNhYmxlZCBmb3IgJXByZXJvbGxGcmVlVGltZU1pbnV0ZXMlIG1pbnV0ZXMuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VQcmVyb2xsRnJlZVRpbWVaZXJvID0gIkFkcyBhcmUgY3VycmVudGx5IG5vdCBwcmUtcm9sbCBmcmVlLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlU25vb3plQWRzU3VjY2VzcyA9ICJBZHMgc3VjY2Vzc2Z1bGx5IHNub296ZWQuIFRoZSBuZXh0IGFkIG5vdyBzdGFydHMgaW4gJW5leHRBZE1pbnV0ZXMlIG1pbnV0ZXMuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VTbm9vemVBZHNGYWlsID0gIkZhaWxlZCB0byBzbm9vemUgYWRzLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlU25vb3plQWRzRmFpbENvdW50WmVybyA9ICJGYWlsZWQgdG8gc25vb3plIGFkcywgYmVjYXVzZSBubyBtb3JlIHNub296ZXMgd2VyZSBsZWZ0LiI7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHB1YmxpYyBib29sIGhhdGVSYWlkQ2xlYXJDaGF0ID0gdHJ1ZTsNCiAgICBwdWJsaWMgYm9vbCBoYXRlUmFpZEZvbGxvd2VyT25seU1vZGUgPSB0cnVlOw0KICAgIHB1YmxpYyBpbnQgaGF0ZVJhaWRGb2xsb3dlck9ubHlNb2RlRHVyYXRpb24gPSA0ODsNCiAgICBwdWJsaWMgYm9vbCBoYXRlUmFpZFN1Yk9ubHlNb2RlID0gZmFsc2U7DQogICAgcHVibGljIGJvb2wgaGF0ZVJhaWRFbW90ZU9ubHlNb2RlID0gZmFsc2U7DQogICAgcHVibGljIGJvb2wgaGF0ZVJhaWRTbG93TW9kZSA9IHRydWU7DQogICAgcHVibGljIGludCBoYXRlUmFpZFNsb3dNb2RlVGltZSA9IDEwOw0KICAgIHB1YmxpYyBib29sIGhhdGVSYWlkUGF1c2VBbGxSZXdhcmRzID0gdHJ1ZTsNCiAgICBwdWJsaWMgYm9vbCBoYXRlUmFpZENsZWFyVFRTID0gdHJ1ZTsNCiAgICBwdWJsaWMgYm9vbCBoYXRlUmFpZERpc2FibGVBbGxCcm93c2VyU291cmNlcyA9IHRydWU7DQogICAgcHVibGljIHN0cmluZ1tdIGhhdGVSYWlkQWN0aW9ucyA9DQogICAgew0KICAgICAgICAiPCBDaG9vc2UgQW4gQWN0aW9uID4iDQogICAgfTsNCiAgICBwdWJsaWMgc3RyaW5nW10gaGF0ZVJhaWRRdWV1ZXMgPQ0KICAgIHsNCiAgICAgICAgIjwgQ2hvb3NlIEEgUXVldWUgPiINCiAgICB9Ow0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZUhhdGVSYWlkUHJvdGVjdGlvbkVuYWJsZWQgPSAiSGF0ZSBSYWlkIFByb3RlY3Rpb24gZW5hYmxlZCA6KSI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlSGF0ZVJhaWRQcm90ZWN0aW9uRGlzYWJsZWQgPSAiSGF0ZSBSYWlkIFByb3RlY3Rpb24gZGlzYWJsZWQuIjsNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgc2hvdXRvdXRTZW5kVHdpdGNoU2hvdXRvdXQgPSB0cnVlOw0KICAgIHB1YmxpYyBib29sIHNvQXV0b1Nob3V0b3V0T25SYWlkID0gdHJ1ZTsNCiAgICBwdWJsaWMgYm9vbCBzb09ubHlGb2xsb3dlZCA9IHRydWU7DQogICAgcHVibGljIGludCBzb01pblZpZXdlcnMgPSAwOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVNob3V0b3V0ID0gIkNoZWNrIG91dCAldGFyZ2V0VXNlciUgYXQgaHR0cHM6Ly90d2l0Y2gudHYvJXRhcmdldFVzZXJOYW1lJSBhbmQgc2hvdyBzb21lIGxvdmUgPDMgVGhleSB3ZXJlIHJlY2VudGx5IHBsYXlpbmcgJyVnYW1lJScuIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VPdXRnb2luZ1JhaWQgPSAiV2UgYXJlIHJhaWRpbmcgb3ZlciB0byAldGFyZ2V0VXNlciUgYXQgaHR0cHM6Ly90d2l0Y2gudHYvJXRhcmdldFVzZXJOYW1lJSDigJMgdGhleeKAmXJlIHBsYXlpbmcgJyVnYW1lJScgKOKAnCV0aXRsZSXigJ0pLiBNYWtlIHN1cmUgdG8gY29weSBvdXIgcmFpZCBtZXNzYWdlIGFuZCBzaG93IHNvbWUgbG92ZSA8MyI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlU29PdXRnb2luZ1JhaWRNZXNzYWdlU3VicyA9ICLinKggJWJyb2FkY2FzdGVyTmFtZUFsbENhcHMlIFJBSUQg4pyoICVicm9hZGNhc3Rlck5hbWVBbGxDYXBzJSBSQUlEIOKcqCAlYnJvYWRjYXN0ZXJOYW1lQWxsQ2FwcyUgUkFJRCDinKgiOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZVNvT3V0Z29pbmdSYWlkTWVzc2FnZU5vblN1YnMgPSAi4pyoICVicm9hZGNhc3Rlck5hbWVBbGxDYXBzJSBSQUlEIOKcqCAlYnJvYWRjYXN0ZXJOYW1lQWxsQ2FwcyUgUkFJRCDinKggJWJyb2FkY2FzdGVyTmFtZUFsbENhcHMlIFJBSUQg4pyoIjsNCiAgICBwdWJsaWMgc3RyaW5nIG1lc3NhZ2VJbmNvbWluZ1JhaWQgPSAiJXRhcmdldFVzZXIlIGlzIHJhaWRpbmcgdXMgd2l0aCAldmlld2VycyUgcGVlcHMhIFRoZXkgd2VyZSByZWNlbnRseSBzZWVuIHBsYXlpbmcgJyVnYW1lJScsIGRlZmluaXRlbHkgZ28gY2hlY2sgdGhlbSBvdXQgYW5kIGxlYXZlIGEgZm9sbG93IGF0IGh0dHBzOi8vdHdpdGNoLnR2LyV0YXJnZXRVc2VyTmFtZSUiOw0KICAgIHB1YmxpYyBib29sIHNvUG9zdFN1YlJhaWRNZXNzYWdlQXNCcm9hZGNhc3RlciA9IHRydWU7DQogICAgcHVibGljIGJvb2wgc29Qb3N0Tm9uU3ViUmFpZE1lc3NhZ2UgPSB0cnVlOw0KICAgIHB1YmxpYyBib29sIHNvUG9zdFN1YlJhaWRNZXNzYWdlID0gdHJ1ZTsNCiAgICBwdWJsaWMgYm9vbCBzb0F1dG9Tbm9vemVBZHMgPSB0cnVlOw0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwcml2YXRlIHZvaWQgRmV0Y2hTZXR0aW5ncygpDQogICAgew0KICAgICAgICB1aSA9IG5ldyBUYXdtYWUoQ1BILCBleHRlbnNpb25OYW1lLCBleHRlbnNpb25WZXJzaW9uLCBmYWxzZSk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHBvc3RNZXNzYWdlc0FzUmVwbGllcyA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX3Bvc3RNZXNzYWdlc0FzUmVwbGllcyIpID8/IHBvc3RNZXNzYWdlc0FzUmVwbGllczsNCiAgICAgICAgaWdub3JlU2hhcmVkQ2hhdCA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX2lnbm9yZVNoYXJlZENoYXQiKSA/PyBpZ25vcmVTaGFyZWRDaGF0Ow0KICAgICAgICB0b2dnbGVFbW90ZU9ubHlPblN0cmVhbVN0YXJ0QW5kRW5kID0gdWkuR2V0VmFsdWU8Ym9vbD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfdG9nZ2xlRW1vdGVPbmx5T25TdHJlYW1TdGFydEFuZEVuZCIpID8/IHRvZ2dsZUVtb3RlT25seU9uU3RyZWFtU3RhcnRBbmRFbmQ7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIG1lc3NhZ2VCcm9hZGNhc3Rlck9ubHkgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VCcm9hZGNhc3Rlck9ubHkiKSA/PyBtZXNzYWdlQnJvYWRjYXN0ZXJPbmx5Ow0KICAgICAgICBtZXNzYWdlVXNlckRvZXNOb3RFeGlzdCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVVzZXJEb2VzTm90RXhpc3QiKSA/PyBtZXNzYWdlVXNlckRvZXNOb3RFeGlzdDsNCiAgICAgICAgbWVzc2FnZUNvbW1hbmROb1VzZXJQcm92aWRlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZUNvbW1hbmROb1VzZXJQcm92aWRlZCIpID8/IG1lc3NhZ2VDb21tYW5kTm9Vc2VyUHJvdmlkZWQ7DQogICAgICAgIG1lc3NhZ2VBZmZpbGlhdGVkUmVxdWlyZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VBZmZpbGlhdGVkUmVxdWlyZWQiKSA/PyBtZXNzYWdlQWZmaWxpYXRlZFJlcXVpcmVkOw0KICAgICAgICBtZXNzYWdlT2JzTm90Q29ubmVjdGVkID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlT2JzTm90Q29ubmVjdGVkIikgPz8gbWVzc2FnZU9ic05vdENvbm5lY3RlZDsNCiAgICAgICAgbWVzc2FnZVN1cGVyTW9kZXJhdG9yc09ubHkgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VTdXBlck1vZGVyYXRvcnNPbmx5IikgPz8gbWVzc2FnZVN1cGVyTW9kZXJhdG9yc09ubHk7DQogICAgICAgIHN0cmluZyBzTSA9IHVpLkdldFZhbHVlPHN0cmluZz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19zdXBlck1vZGVyYXRvcnMiKTsNCiAgICAgICAgaWYgKCFzdHJpbmcuSXNOdWxsT3JFbXB0eShzTSkpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBsaXN0ID0gSnNvbkNvbnZlcnQuRGVzZXJpYWxpemVPYmplY3Q8TGlzdDxzdHJpbmc+PihzTSk/LldoZXJlKHggPT4gIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoeCkpLlRvTGlzdCgpOw0KICAgICAgICAgICAgaWYgKGxpc3QgIT0gbnVsbCAmJiBsaXN0LkNvdW50ID4gMCkNCiAgICAgICAgICAgICAgICBzdXBlck1vZGVyYXRvcnNMaXN0ID0gbmV3IEhhc2hTZXQ8c3RyaW5nPihsaXN0LCBTdHJpbmdDb21wYXJlci5PcmRpbmFsSWdub3JlQ2FzZSk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB1cmxCbG9ja0xpbmtzID0gdWkuR2V0VmFsdWU8Ym9vbD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfdXJsQmxvY2tMaW5rcyIpID8/IHVybEJsb2NrTGlua3M7DQogICAgICAgIHBlcm1pdER1cmF0aW9uID0gdWkuR2V0VmFsdWU8aW50Pz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc191cmxQZXJtaXREdXJhdGlvbiIpID8/IHBlcm1pdER1cmF0aW9uOw0KICAgICAgICBtZXNzYWdlVXJsQWRkZWRUb1doaXRlbGlzdCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVVybEFkZGVkVG9XaGl0ZWxpc3QiKSA/PyBtZXNzYWdlVXJsQWRkZWRUb1doaXRlbGlzdDsNCiAgICAgICAgbWVzc2FnZVVybFJlbW92ZWRGcm9tV2hpdGVsaXN0ID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlVXJsUmVtb3ZlZEZyb21XaGl0ZWxpc3QiKSA/PyBtZXNzYWdlVXJsUmVtb3ZlZEZyb21XaGl0ZWxpc3Q7DQogICAgICAgIG1lc3NhZ2VVcmxBbHJlYWR5T25XaGl0ZWxpc3QgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VVcmxBbHJlYWR5T25XaGl0ZWxpc3QiKSA/PyBtZXNzYWdlVXJsQWxyZWFkeU9uV2hpdGVsaXN0Ow0KICAgICAgICBtZXNzYWdlVXJsTm90T25XaGl0ZWxpc3QgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VVcmxOb3RPbldoaXRlbGlzdCIpID8/IG1lc3NhZ2VVcmxOb3RPbldoaXRlbGlzdDsNCiAgICAgICAgbWVzc2FnZVVybEdldFdoaXRlbGlzdCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVVybEdldFdoaXRlbGlzdCIpID8/IG1lc3NhZ2VVcmxHZXRXaGl0ZWxpc3Q7DQogICAgICAgIG1lc3NhZ2VVcmxOb1doaXRlbGlzdCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVVybE5vV2hpdGVsaXN0IikgPz8gbWVzc2FnZVVybE5vV2hpdGVsaXN0Ow0KICAgICAgICBtZXNzYWdlVG9nZ2xlVXJsRW5hYmxlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVRvZ2dsZVVybEVuYWJsZWQiKSA/PyBtZXNzYWdlVG9nZ2xlVXJsRW5hYmxlZDsNCiAgICAgICAgbWVzc2FnZVRvZ2dsZVVybERpc2FibGVkID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlVG9nZ2xlVXJsRGlzYWJsZWQiKSA/PyBtZXNzYWdlVG9nZ2xlVXJsRGlzYWJsZWQ7DQogICAgICAgIG1lc3NhZ2VQZXJtaXRTdWNjZXNzID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlUGVybWl0U3VjY2VzcyIpID8/IG1lc3NhZ2VQZXJtaXRTdWNjZXNzOw0KICAgICAgICBtZXNzYWdlVXJsVXNlckFkZGVkVG9XaGl0ZWxpc3QgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VVcmxVc2VyQWRkZWRUb1doaXRlbGlzdCIpID8/IG1lc3NhZ2VVcmxVc2VyQWRkZWRUb1doaXRlbGlzdDsNCiAgICAgICAgbWVzc2FnZVVybFVzZXJBbHJlYWR5T25XaGl0ZWxpc3QgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VVcmxVc2VyQWxyZWFkeU9uV2hpdGVsaXN0IikgPz8gbWVzc2FnZVVybFVzZXJBbHJlYWR5T25XaGl0ZWxpc3Q7DQogICAgICAgIG1lc3NhZ2VVcmxVc2VyUmVtb3ZlZEZyb21XaGl0ZWxpc3QgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VVcmxVc2VyUmVtb3ZlZEZyb21XaGl0ZWxpc3QiKSA/PyBtZXNzYWdlVXJsVXNlclJlbW92ZWRGcm9tV2hpdGVsaXN0Ow0KICAgICAgICBtZXNzYWdlVXJsVXNlck5vdE9uV2hpdGVsaXN0ID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlVXJsVXNlck5vdE9uV2hpdGVsaXN0IikgPz8gbWVzc2FnZVVybFVzZXJOb3RPbldoaXRlbGlzdDsNCiAgICAgICAgc3RyaW5nIHMxID0gdWkuR2V0VmFsdWU8c3RyaW5nPihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX3VybFdoaXRlbGlzdGVkVVJMcyIpOw0KICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KHMxKSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGxpc3QgPSBKc29uQ29udmVydC5EZXNlcmlhbGl6ZU9iamVjdDxMaXN0PHN0cmluZz4+KHMxKT8uV2hlcmUoeCA9PiAhc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZSh4KSkuVG9MaXN0KCk7DQogICAgICAgICAgICBpZiAobGlzdCAhPSBudWxsICYmIGxpc3QuQ291bnQgPiAwKQ0KICAgICAgICAgICAgICAgIHVybFdoaXRlbGlzdGVkVVJMcyA9IG5ldyBIYXNoU2V0PHN0cmluZz4obGlzdCwgU3RyaW5nQ29tcGFyZXIuT3JkaW5hbElnbm9yZUNhc2UpOw0KICAgICAgICB9DQoNCiAgICAgICAgc3RyaW5nIHM1ID0gdWkuR2V0VmFsdWU8c3RyaW5nPihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX3VybFVzZXJXaGl0ZWxpc3QiKTsNCiAgICAgICAgaWYgKCFzdHJpbmcuSXNOdWxsT3JFbXB0eShzNSkpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBsaXN0ID0gSnNvbkNvbnZlcnQuRGVzZXJpYWxpemVPYmplY3Q8TGlzdDxzdHJpbmc+PihzNSk/LldoZXJlKHggPT4gIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoeCkpLlRvTGlzdCgpOw0KICAgICAgICAgICAgaWYgKGxpc3QgaXMgeyBDb3VudDogPiAwIH0pDQogICAgICAgICAgICAgICAgdXJsV2hpdGVsaXN0ZWRVc2VycyA9IG5ldyBIYXNoU2V0PHN0cmluZz4obGlzdCwgU3RyaW5nQ29tcGFyZXIuT3JkaW5hbElnbm9yZUNhc2UpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgZmlsdGVyQmxhY2tsaXN0ZWRXb3JkcyA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX2ZpbHRlckJsYWNrbGlzdGVkV29yZHMiKSA/PyBmaWx0ZXJCbGFja2xpc3RlZFdvcmRzOw0KICAgICAgICBhc2NpaVByb3RlY3Rpb24gPSB1aS5HZXRWYWx1ZTxib29sPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19ibGFja2xpc3RlZFdvcmRzQXNjaWlQcm90ZWN0aW9uIikgPz8gYXNjaWlQcm90ZWN0aW9uOw0KICAgICAgICBzdHJpbmcgczIgPSB1aS5HZXRWYWx1ZTxzdHJpbmc+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfYmxhY2tsaXN0ZWRXb3Jkc0NhcHNQcm90ZWN0aW9uIik7DQogICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkoczIpKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgajIgPSBKT2JqZWN0LlBhcnNlKHMyKTsNCiAgICAgICAgICAgIGNhcHNQcm90ZWN0aW9uID0gajJbImVuYWJsZWQiXT8uVmFsdWU8Ym9vbD4oKSA/PyBjYXBzUHJvdGVjdGlvbjsNCiAgICAgICAgICAgIGNhcHNQcm90ZWN0aW9uQ291bnQgPSAoaW50KU1hdGguUm91bmQoajJbInZhbHVlIl0/LlZhbHVlPGRvdWJsZT4oKSA/PyBjYXBzUHJvdGVjdGlvbkNvdW50KTsNCiAgICAgICAgfQ0KDQogICAgICAgIHN0cmluZyBzMyA9IHVpLkdldFZhbHVlPHN0cmluZz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19ibGFja2xpc3RlZFdvcmRzRW1vdGVQcm90ZWN0aW9uIik7DQogICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkoczMpKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgajMgPSBKT2JqZWN0LlBhcnNlKHMzKTsNCiAgICAgICAgICAgIGVtb3RlUHJvdGVjdGlvbiA9IGozWyJlbmFibGVkIl0/LlZhbHVlPGJvb2w+KCkgPz8gZW1vdGVQcm90ZWN0aW9uOw0KICAgICAgICAgICAgZW1vdGVQcm90ZWN0aW9uQ291bnQgPSAoaW50KU1hdGguUm91bmQoajNbInZhbHVlIl0/LlZhbHVlPGRvdWJsZT4oKSA/PyBlbW90ZVByb3RlY3Rpb25Db3VudCk7DQogICAgICAgIH0NCg0KICAgICAgICBzdHJpbmcgczQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfYmxhY2tsaXN0ZWRXb3Jkc0xpc3QiKTsNCiAgICAgICAgaWYgKCFzdHJpbmcuSXNOdWxsT3JFbXB0eShzNCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBsaXN0ID0gSnNvbkNvbnZlcnQuRGVzZXJpYWxpemVPYmplY3Q8TGlzdDxzdHJpbmc+PihzNCk7DQogICAgICAgICAgICBibGFja2xpc3RlZFdvcmRzTGlzdCA9IG5ldyBIYXNoU2V0PHN0cmluZz4obGlzdCwgU3RyaW5nQ29tcGFyZXIuT3JkaW5hbElnbm9yZUNhc2UpOw0KICAgICAgICB9DQoNCiAgICAgICAgbWVzc2FnZUJsYWNrbGlzdEFkZGVkID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlQmxhY2tsaXN0QWRkZWQiKSA/PyBtZXNzYWdlQmxhY2tsaXN0QWRkZWQ7DQogICAgICAgIG1lc3NhZ2VCbGFja2xpc3RSZW1vdmVkID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlQmxhY2tsaXN0UmVtb3ZlZCIpID8/IG1lc3NhZ2VCbGFja2xpc3RSZW1vdmVkOw0KICAgICAgICBtZXNzYWdlQmxhY2tsaXN0QWxyZWFkeUFkZGVkID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlQmxhY2tsaXN0QWxyZWFkeUFkZGVkIikgPz8gbWVzc2FnZUJsYWNrbGlzdEFscmVhZHlBZGRlZDsNCiAgICAgICAgbWVzc2FnZUJsYWNrbGlzdE5vdExpc3RlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZUJsYWNrbGlzdE5vdExpc3RlZCIpID8/IG1lc3NhZ2VCbGFja2xpc3ROb3RMaXN0ZWQ7DQogICAgICAgIG1lc3NhZ2VUb2dnbGVCbGFja2xpc3RlZFdvcmRzRW5hYmxlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVRvZ2dsZUJsYWNrbGlzdGVkV29yZHNFbmFibGVkIikgPz8gbWVzc2FnZVRvZ2dsZUJsYWNrbGlzdGVkV29yZHNFbmFibGVkOw0KICAgICAgICBtZXNzYWdlVG9nZ2xlQmxhY2tsaXN0ZWRXb3Jkc0Rpc2FibGVkID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlVG9nZ2xlQmxhY2tsaXN0ZWRXb3Jkc0Rpc2FibGVkIikgPz8gbWVzc2FnZVRvZ2dsZUJsYWNrbGlzdGVkV29yZHNEaXNhYmxlZDsNCiAgICAgICAgbWVzc2FnZVRvZ2dsZUNhcHNFbmFibGVkID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlVG9nZ2xlQ2Fwc0VuYWJsZWQiKSA/PyBtZXNzYWdlVG9nZ2xlQ2Fwc0VuYWJsZWQ7DQogICAgICAgIG1lc3NhZ2VUb2dnbGVDYXBzRGlzYWJsZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VUb2dnbGVDYXBzRGlzYWJsZWQiKSA/PyBtZXNzYWdlVG9nZ2xlQ2Fwc0Rpc2FibGVkOw0KICAgICAgICBtZXNzYWdlVG9nZ2xlRW1vdGVzRW5hYmxlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVRvZ2dsZUVtb3Rlc0VuYWJsZWQiKSA/PyBtZXNzYWdlVG9nZ2xlRW1vdGVzRW5hYmxlZDsNCiAgICAgICAgbWVzc2FnZVRvZ2dsZUVtb3Rlc0Rpc2FibGVkID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlVG9nZ2xlRW1vdGVzRGlzYWJsZWQiKSA/PyBtZXNzYWdlVG9nZ2xlRW1vdGVzRGlzYWJsZWQ7DQogICAgICAgIG1lc3NhZ2VUb2dnbGVBc2NpaUVuYWJsZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VUb2dnbGVBc2NpaUVuYWJsZWQiKSA/PyBtZXNzYWdlVG9nZ2xlQXNjaWlFbmFibGVkOw0KICAgICAgICBtZXNzYWdlVG9nZ2xlQXNjaWlEaXNhYmxlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVRvZ2dsZUFzY2lpRGlzYWJsZWQiKSA/PyBtZXNzYWdlVG9nZ2xlQXNjaWlEaXNhYmxlZDsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgZGVmYXVsdFBvbGxEdXJhdGlvbiA9IHVpLkdldFZhbHVlPGludD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfZGVmYXVsdFBvbGxEdXJhdGlvbiIpID8/IGRlZmF1bHRQb2xsRHVyYXRpb247DQogICAgICAgIG1lc3NhZ2VQb2xsQ3JlYXRlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVBvbGxDcmVhdGVkIikgPz8gbWVzc2FnZVBvbGxDcmVhdGVkOw0KICAgICAgICBtZXNzYWdlQWxyZWFkeUFjdGl2ZVBvbGwgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VBbHJlYWR5QWN0aXZlUG9sbCIpID8/IG1lc3NhZ2VBbHJlYWR5QWN0aXZlUG9sbDsNCiAgICAgICAgbWVzc2FnZVBvbGxFbmRlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVBvbGxFbmRlZCIpID8/IG1lc3NhZ2VQb2xsRW5kZWQ7DQogICAgICAgIG1lc3NhZ2VQb2xsRW5kZWRUaWVkID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlUG9sbEVuZGVkVGllZCIpID8/IG1lc3NhZ2VQb2xsRW5kZWRUaWVkOw0KICAgICAgICBtZXNzYWdlTm9BY3RpdmVQb2xsID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlTm9BY3RpdmVQb2xsIikgPz8gbWVzc2FnZU5vQWN0aXZlUG9sbDsNCiAgICAgICAgZGVmYXVsdFByZWRpY3Rpb25EdXJhdGlvbiA9IHVpLkdldFZhbHVlPGludD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfZGVmYXVsdFByZWRpY3Rpb25EdXJhdGlvbiIpID8/IGRlZmF1bHRQcmVkaWN0aW9uRHVyYXRpb247DQogICAgICAgIG1lc3NhZ2VQcmVkaWN0aW9uQ3JlYXRlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVByZWRpY3Rpb25sQ3JlYXRlZCIpID8/IG1lc3NhZ2VQcmVkaWN0aW9uQ3JlYXRlZDsNCiAgICAgICAgbWVzc2FnZUFscmVhZHlBY3RpdmVQcmVkaWN0aW9uID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlQWxyZWFkeUFjdGl2ZVByZWRpY3Rpb24iKSA/PyBtZXNzYWdlQWxyZWFkeUFjdGl2ZVByZWRpY3Rpb247DQogICAgICAgIG1lc3NhZ2VOb0FjdGl2ZVByZWRpY3Rpb24gPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VOb0FjdGl2ZVByZWRpY3Rpb24iKSA/PyBtZXNzYWdlTm9BY3RpdmVQcmVkaWN0aW9uOw0KICAgICAgICBtZXNzYWdlUHJlZGljdGlvbkVuZGVkID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlUHJlZGljdGlvbkVuZGVkIikgPz8gbWVzc2FnZVByZWRpY3Rpb25FbmRlZDsNCiAgICAgICAgbWVzc2FnZVByZWRpY3Rpb25Mb2NrZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VQcmVkaWN0aW9uTG9ja2VkIikgPz8gbWVzc2FnZVByZWRpY3Rpb25Mb2NrZWQ7DQogICAgICAgIG1lc3NhZ2VQcmVkaWN0aW9uQWxyZWFkeUxvY2tlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVByZWRpY3Rpb25BbHJlYWR5TG9ja2VkIikgPz8gbWVzc2FnZVByZWRpY3Rpb25BbHJlYWR5TG9ja2VkOw0KICAgICAgICBtZXNzYWdlUHJlZGljdGlvbkNhbmNlbGxlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVByZWRpY3Rpb25DYW5jZWxsZWQiKSA/PyBtZXNzYWdlUHJlZGljdGlvbkNhbmNlbGxlZDsNCiAgICAgICAgbWVzc2FnZVByZWRpY3Rpb25Ob3RMb2NrZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VQcmVkaWN0aW9uTm90TG9ja2VkIikgPz8gbWVzc2FnZVByZWRpY3Rpb25Ob3RMb2NrZWQ7DQogICAgICAgIG1lc3NhZ2VQcmVkaWN0aW9uSW52YWxpZE9wdGlvbiA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVByZWRpY3Rpb25JbnZhbGlkT3B0aW9uIikgPz8gbWVzc2FnZVByZWRpY3Rpb25JbnZhbGlkT3B0aW9uOw0KICAgICAgICBtZXNzYWdlUHJlZGljdGlvblJlc29sdmVkID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlUHJlZGljdGlvblJlc29sdmVkIikgPz8gbWVzc2FnZVByZWRpY3Rpb25SZXNvbHZlZDsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgb2JzU2NlbmVzU2luZ2xlTWVzc2FnZSA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX29ic1NjZW5lc1NpbmdsZU1lc3NhZ2UiKSA/PyBvYnNTY2VuZXNTaW5nbGVNZXNzYWdlOw0KICAgICAgICBvYnNTY2VuZXNXaGlzcGVyTWVzc2FnZSA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX29ic1NjZW5lc1doaXNwZXJNZXNzYWdlIikgPz8gb2JzU2NlbmVzV2hpc3Blck1lc3NhZ2U7DQogICAgICAgIG9ic1NjZW5lc1N1cGVyTW9kc09ubHkgPSB1aS5HZXRWYWx1ZTxib29sPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19vYnNTY2VuZXNTdXBlck1vZHNPbmx5IikgPz8gb2JzU2NlbmVzU3VwZXJNb2RzT25seTsNCiAgICAgICAgbWVzc2FnZU9ic05vU2NlbmVOYW1lID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlT2JzTm9TY2VuZU5hbWUiKSA/PyBtZXNzYWdlT2JzTm9TY2VuZU5hbWU7DQogICAgICAgIG1lc3NhZ2VPYnNOb1N1Y2hTY2VuZSA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZU9ic05vU3VjaFNjZW5lIikgPz8gbWVzc2FnZU9ic05vU3VjaFNjZW5lOw0KICAgICAgICBtZXNzYWdlT2JzU2NlbmVBbHJlYWR5T24gPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VPYnNTY2VuZUFscmVhZHlPbiIpID8/IG1lc3NhZ2VPYnNTY2VuZUFscmVhZHlPbjsNCiAgICAgICAgbWVzc2FnZU9ic1NjZW5lQ2hhbmdlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZU9ic1NjZW5lQ2hhbmdlZCIpID8/IG1lc3NhZ2VPYnNTY2VuZUNoYW5nZWQ7DQogICAgICAgIG1lc3NhZ2VPYnNBbGxBcHBsaWNhdGlvbkF1ZGlvQ2FwdHVyZVNvdXJjZXNSZWZyZXNoZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VPYnNBbGxBcHBsaWNhdGlvbkF1ZGlvQ2FwdHVyZVNvdXJjZXNSZWZyZXNoZWQiKSA/PyBtZXNzYWdlT2JzQWxsQXBwbGljYXRpb25BdWRpb0NhcHR1cmVTb3VyY2VzUmVmcmVzaGVkOw0KICAgICAgICBtZXNzYWdlT2JzQWxsQnJvd3NlclNvdXJjZXNSZWZyZXNoZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VPYnNBbGxCcm93c2VyU291cmNlc1JlZnJlc2hlZCIpID8/IG1lc3NhZ2VPYnNBbGxCcm93c2VyU291cmNlc1JlZnJlc2hlZDsNCiAgICAgICAgbWVzc2FnZU9ic1N0cmVhbUVuZGVkID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlT2JzU3RyZWFtRW5kZWQiKSA/PyBtZXNzYWdlT2JzU3RyZWFtRW5kZWQ7DQogICAgICAgIC8vPT09DQogICAgICAgIHN0cmluZyByYXdfb2JzRXhjbHVkZWRTY2VuZUxpc3QgPSB1aS5HZXRWYWx1ZTxzdHJpbmc+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfb2JzRXhjbHVkZWRTY2VuZUxpc3QiKTsNCiAgICAgICAgaWYgKCFzdHJpbmcuSXNOdWxsT3JFbXB0eShyYXdfb2JzRXhjbHVkZWRTY2VuZUxpc3QpKQ0KICAgICAgICAgICAgb2JzRXhjbHVkZWRTY2VuZUxpc3QgPSBKQXJyYXkuUGFyc2UocmF3X29ic0V4Y2x1ZGVkU2NlbmVMaXN0KS5Ub09iamVjdDxzdHJpbmdbXT4oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgY2hhbm5lbFJld2FyZHNTdXBlck1vZHNPbmx5ID0gdWkuR2V0VmFsdWU8Ym9vbD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfY2hhbm5lbFJld2FyZHNTdXBlck1vZHNPbmx5IikgPz8gY2hhbm5lbFJld2FyZHNTdXBlck1vZHNPbmx5Ow0KICAgICAgICBtZXNzYWdlUmV3YXJkc0FsbEVuYWJsZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzQWxsRW5hYmxlZCIpID8/IG1lc3NhZ2VSZXdhcmRzQWxsRW5hYmxlZDsNCiAgICAgICAgbWVzc2FnZVJld2FyZHNBbGxEaXNhYmxlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVJld2FyZHNBbGxEaXNhYmxlZCIpID8/IG1lc3NhZ2VSZXdhcmRzQWxsRGlzYWJsZWQ7DQogICAgICAgIG1lc3NhZ2VSZXdhcmRzR3JvdXBFbmFibGVkID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlUmV3YXJkc0dyb3VwRW5hYmxlZCIpID8/IG1lc3NhZ2VSZXdhcmRzR3JvdXBFbmFibGVkOw0KICAgICAgICBtZXNzYWdlUmV3YXJkc0dyb3VwRGlzYWJsZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzR3JvdXBEaXNhYmxlZCIpID8/IG1lc3NhZ2VSZXdhcmRzR3JvdXBEaXNhYmxlZDsNCiAgICAgICAgbWVzc2FnZVJld2FyZHNTaW5nbGVFbmFibGVkID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlUmV3YXJkc1NpbmdsZUVuYWJsZWQiKSA/PyBtZXNzYWdlUmV3YXJkc1NpbmdsZUVuYWJsZWQ7DQogICAgICAgIG1lc3NhZ2VSZXdhcmRzU2luZ2xlRGlzYWJsZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzU2luZ2xlRGlzYWJsZWQiKSA/PyBtZXNzYWdlUmV3YXJkc1NpbmdsZURpc2FibGVkOw0KICAgICAgICBtZXNzYWdlUmV3YXJkc0FsbFBhdXNlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVJld2FyZHNBbGxQYXVzZWQiKSA/PyBtZXNzYWdlUmV3YXJkc0FsbFBhdXNlZDsNCiAgICAgICAgbWVzc2FnZVJld2FyZHNBbGxVbnBhdXNlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVJld2FyZHNBbGxVbnBhdXNlZCIpID8/IG1lc3NhZ2VSZXdhcmRzQWxsVW5wYXVzZWQ7DQogICAgICAgIG1lc3NhZ2VSZXdhcmRzR3JvdXBQYXVzZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzR3JvdXBQYXVzZWQiKSA/PyBtZXNzYWdlUmV3YXJkc0dyb3VwUGF1c2VkOw0KICAgICAgICBtZXNzYWdlUmV3YXJkc0dyb3VwVW5wYXVzZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzR3JvdXBVbnBhdXNlZCIpID8/IG1lc3NhZ2VSZXdhcmRzR3JvdXBVbnBhdXNlZDsNCiAgICAgICAgbWVzc2FnZVJld2FyZHNTaW5nbGVQYXVzZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzU2luZ2xlUGF1c2VkIikgPz8gbWVzc2FnZVJld2FyZHNTaW5nbGVQYXVzZWQ7DQogICAgICAgIG1lc3NhZ2VSZXdhcmRzU2luZ2xlVW5wYXVzZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzU2luZ2xlVW5wYXVzZWQiKSA/PyBtZXNzYWdlUmV3YXJkc1NpbmdsZVVucGF1c2VkOw0KICAgICAgICBtZXNzYWdlUmV3YXJkc05vU3VjaEdyb3VwID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlUmV3YXJkc05vU3VjaEdyb3VwIikgPz8gbWVzc2FnZVJld2FyZHNOb1N1Y2hHcm91cDsNCiAgICAgICAgbWVzc2FnZVJld2FyZHNOb1N1Y2hSZXdhcmQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzTm9TdWNoUmV3YXJkIikgPz8gbWVzc2FnZVJld2FyZHNOb1N1Y2hSZXdhcmQ7DQogICAgICAgIG1lc3NhZ2VSZXdhcmRzUHJvbXB0Q2hhbmdlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVJld2FyZHNQcm9tcHRDaGFuZ2VkIikgPz8gbWVzc2FnZVJld2FyZHNQcm9tcHRDaGFuZ2VkOw0KICAgICAgICBtZXNzYWdlUmV3YXJkc1RpdGxlQ2hhbmdlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVJld2FyZHNUaXRsZUNoYW5nZWQiKSA/PyBtZXNzYWdlUmV3YXJkc1RpdGxlQ2hhbmdlZDsNCiAgICAgICAgbWVzc2FnZVJld2FyZHNDb3N0Q2hhbmdlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVJld2FyZHNDb3N0Q2hhbmdlZCIpID8/IG1lc3NhZ2VSZXdhcmRzQ29zdENoYW5nZWQ7DQogICAgICAgIG1lc3NhZ2VSZXdhcmRzTm90T3duZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzTm90T3duZWQiKSA/PyBtZXNzYWdlUmV3YXJkc05vdE93bmVkOw0KICAgICAgICBtZXNzYWdlUmV3YXJkc01heFBlclN0cmVhbUVuYWJsZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzTWF4UGVyU3RyZWFtRW5hYmxlZCIpID8/IG1lc3NhZ2VSZXdhcmRzTWF4UGVyU3RyZWFtRW5hYmxlZDsNCiAgICAgICAgbWVzc2FnZVJld2FyZHNNYXhQZXJTdHJlYW1EaXNhYmxlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVJld2FyZHNNYXhQZXJTdHJlYW1EaXNhYmxlZCIpID8/IG1lc3NhZ2VSZXdhcmRzTWF4UGVyU3RyZWFtRGlzYWJsZWQ7DQogICAgICAgIG1lc3NhZ2VSZXdhcmRzTWF4UGVyU3RyZWFtUGVyVXNlckVuYWJsZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzTWF4UGVyU3RyZWFtUGVyVXNlckVuYWJsZWQiKSA/PyBtZXNzYWdlUmV3YXJkc01heFBlclN0cmVhbVBlclVzZXJFbmFibGVkOw0KICAgICAgICBtZXNzYWdlUmV3YXJkc01heFBlclN0cmVhbVBlclVzZXJEaXNhYmxlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVJld2FyZHNNYXhQZXJTdHJlYW1QZXJVc2VyRGlzYWJsZWQiKSA/PyBtZXNzYWdlUmV3YXJkc01heFBlclN0cmVhbVBlclVzZXJEaXNhYmxlZDsNCiAgICAgICAgbWVzc2FnZVJld2FyZHNHbG9iYWxDb29sZG93bkVuYWJsZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VSZXdhcmRzR2xvYmFsQ29vbGRvd25FbmFibGVkIikgPz8gbWVzc2FnZVJld2FyZHNHbG9iYWxDb29sZG93bkVuYWJsZWQ7DQogICAgICAgIG1lc3NhZ2VSZXdhcmRzR2xvYmFsQ29vbGRvd25EaXNhYmxlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVJld2FyZHNHbG9iYWxDb29sZG93bkRpc2FibGVkIikgPz8gbWVzc2FnZVJld2FyZHNHbG9iYWxDb29sZG93bkRpc2FibGVkOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBjdXN0b21Db21tYW5kc0dldFBlcm1pdHRlZE9ubHkgPSB1aS5HZXRWYWx1ZTxib29sPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19jdXN0b21Db21tYW5kc0dldFBlcm1pdHRlZE9ubHkiKSA/PyBjdXN0b21Db21tYW5kc0dldFBlcm1pdHRlZE9ubHk7DQogICAgICAgIG1lc3NhZ2VDdXN0b21Db21tYW5kQWRkZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VDdXN0b21Db21tYW5kQWRkZWQiKSA/PyBtZXNzYWdlQ3VzdG9tQ29tbWFuZEFkZGVkOw0KICAgICAgICBtZXNzYWdlQ3VzdG9tQ29tbWFuZEV4TWFyayA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZUN1c3RvbUNvbW1hbmRFeE1hcmsiKSA/PyBtZXNzYWdlQ3VzdG9tQ29tbWFuZEV4TWFyazsNCiAgICAgICAgbWVzc2FnZUN1c3RvbUNvbW1hbmRFZGl0ZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VDdXN0b21Db21tYW5kRWRpdGVkIikgPz8gbWVzc2FnZUN1c3RvbUNvbW1hbmRFZGl0ZWQ7DQogICAgICAgIG1lc3NhZ2VDdXN0b21Db21tYW5kUmVtb3ZlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZUN1c3RvbUNvbW1hbmRSZW1vdmVkIikgPz8gbWVzc2FnZUN1c3RvbUNvbW1hbmRSZW1vdmVkOw0KICAgICAgICBtZXNzYWdlQ3VzdG9tQ29tbWFuZHNBbHJlYWR5QVJlZ3VsYXJDb21tYW5kID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlQ3VzdG9tQ29tbWFuZHNBbHJlYWR5QVJlZ3VsYXJDb21tYW5kIikgPz8gbWVzc2FnZUN1c3RvbUNvbW1hbmRzQWxyZWFkeUFSZWd1bGFyQ29tbWFuZDsNCiAgICAgICAgbWVzc2FnZUN1c3RvbUNvbW1hbmRzQWxyZWFkeUFDdXN0b21Db21tYW5kID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlQ3VzdG9tQ29tbWFuZHNBbHJlYWR5QUN1c3RvbUNvbW1hbmQiKSA/PyBtZXNzYWdlQ3VzdG9tQ29tbWFuZHNBbHJlYWR5QUN1c3RvbUNvbW1hbmQ7DQogICAgICAgIG1lc3NhZ2VDdXN0b21Db21tYW5kc05vVGV4dCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZUN1c3RvbUNvbW1hbmRzTm9UZXh0IikgPz8gbWVzc2FnZUN1c3RvbUNvbW1hbmRzTm9UZXh0Ow0KICAgICAgICBtZXNzYWdlQ3VzdG9tQ29tbWFuZE5vdEFDdXN0b21Db21tYW5kID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlQ3VzdG9tQ29tbWFuZE5vdEFDdXN0b21Db21tYW5kIikgPz8gbWVzc2FnZUN1c3RvbUNvbW1hbmROb3RBQ3VzdG9tQ29tbWFuZDsNCiAgICAgICAgbWVzc2FnZUN1c3RvbUNvbW1hbmRzR2V0Q29tbWFuZHNQcmVmaXggPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VDdXN0b21Db21tYW5kc0dldENvbW1hbmRzUHJlZml4IikgPz8gbWVzc2FnZUN1c3RvbUNvbW1hbmRzR2V0Q29tbWFuZHNQcmVmaXg7DQogICAgICAgIG1lc3NhZ2VDdXN0b21Db21tYW5kc05vQ29tbWFuZHMgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VDdXN0b21Db21tYW5kc05vQ29tbWFuZHMiKSA/PyBtZXNzYWdlQ3VzdG9tQ29tbWFuZHNOb0NvbW1hbmRzOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBtZXNzYWdlQ2hhbm5lbFRpdGxlQ2hhbmdlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZUNoYW5uZWxUaXRsZUNoYW5nZWQiKSA/PyBtZXNzYWdlQ2hhbm5lbFRpdGxlQ2hhbmdlZDsNCiAgICAgICAgbWVzc2FnZUNoYW5uZWxHYW1lQ2hhbmdlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZUNoYW5uZWxHYW1lQ2hhbmdlZCIpID8/IG1lc3NhZ2VDaGFubmVsR2FtZUNoYW5nZWQ7DQogICAgICAgIG1lc3NhZ2VDaGFubmVsR2FtZUFscmVhZHlTZXQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VDaGFubmVsR2FtZUFscmVhZHlTZXQiKSA/PyBtZXNzYWdlQ2hhbm5lbEdhbWVBbHJlYWR5U2V0Ow0KICAgICAgICBtZXNzYWdlQ2hhbm5lbENhdGVnb3J5Q2hhbmdlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZUNoYW5uZWxDYXRlZ29yeUNoYW5nZWQiKSA/PyBtZXNzYWdlQ2hhbm5lbENhdGVnb3J5Q2hhbmdlZDsNCiAgICAgICAgbWVzc2FnZUNoYW5uZWxUYWdBZGRlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZUNoYW5uZWxUYWdBZGRlZCIpID8/IG1lc3NhZ2VDaGFubmVsVGFnQWRkZWQ7DQogICAgICAgIG1lc3NhZ2VDaGFubmVsVGFnUmVtb3ZlZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZUNoYW5uZWxUYWdSZW1vdmVkIikgPz8gbWVzc2FnZUNoYW5uZWxUYWdSZW1vdmVkOw0KICAgICAgICBtZXNzYWdlQ2hhbm5lbE5vVGFncyA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZUNoYW5uZWxOb1RhZ3MiKSA/PyBtZXNzYWdlQ2hhbm5lbE5vVGFnczsNCiAgICAgICAgbWVzc2FnZUNoYW5uZWxNYXhUYWdzID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlQ2hhbm5lbE1heFRhZ3MiKSA/PyBtZXNzYWdlQ2hhbm5lbE1heFRhZ3M7DQogICAgICAgIG1lc3NhZ2VDaGFubmVsVGFnTm90SW5MaXN0ID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlQ2hhbm5lbFRhZ05vdEluTGlzdCIpID8/IG1lc3NhZ2VDaGFubmVsVGFnTm90SW5MaXN0Ow0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB0YXJnZXRMYW5ndWFnZSA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfdGFyZ2V0TGFuZ3VhZ2UiKSA/PyB0YXJnZXRMYW5ndWFnZTsNCiAgICAgICAgbWVzc2FnZVRpbWVvdXRTdXBlcm1vZHNPbmx5ID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlVGltZW91dFN1cGVybW9kc09ubHkiKSA/PyBtZXNzYWdlVGltZW91dFN1cGVybW9kc09ubHk7DQogICAgICAgIG1lc3NhZ2VUaW1lb3V0Q2FudFRpbWVvdXRTdXBlcm1vZHMgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VUaW1lb3V0Q2FudFRpbWVvdXRTdXBlcm1vZHMiKSA/PyBtZXNzYWdlVGltZW91dENhbnRUaW1lb3V0U3VwZXJtb2RzOw0KICAgICAgICBtZXNzYWdlQmFuU3VwZXJtb2RzT25seSA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZUJhblN1cGVybW9kc09ubHkiKSA/PyBtZXNzYWdlQmFuU3VwZXJtb2RzT25seTsNCiAgICAgICAgbWVzc2FnZUJhbkNhbnRCYW5TdXBlcm1vZHMgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VCYW5DYW50QmFuU3VwZXJtb2RzIikgPz8gbWVzc2FnZUJhbkNhbnRCYW5TdXBlcm1vZHM7DQogICAgICAgIG1lc3NhZ2VBZHNSdW4gPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VBZHNSdW4iKSA/PyBtZXNzYWdlQWRzUnVuOw0KICAgICAgICBtZXNzYWdlUHJlcm9sbEZyZWVUaW1lID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlUHJlcm9sbEZyZWVUaW1lIikgPz8gbWVzc2FnZVByZXJvbGxGcmVlVGltZTsNCiAgICAgICAgbWVzc2FnZVByZXJvbGxGcmVlVGltZVplcm8gPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VQcmVyb2xsRnJlZVRpbWVaZXJvIikgPz8gbWVzc2FnZVByZXJvbGxGcmVlVGltZVplcm87DQogICAgICAgIG1lc3NhZ2VTbm9vemVBZHNTdWNjZXNzID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlU25vb3plQWRzU3VjY2VzcyIpID8/IG1lc3NhZ2VTbm9vemVBZHNTdWNjZXNzOw0KICAgICAgICBtZXNzYWdlU25vb3plQWRzRmFpbCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVNub296ZUFkc0ZhaWwiKSA/PyBtZXNzYWdlU25vb3plQWRzRmFpbDsNCiAgICAgICAgbWVzc2FnZVNub296ZUFkc0ZhaWxDb3VudFplcm8gPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VTbm9vemVBZHNGYWlsQ291bnRaZXJvIikgPz8gbWVzc2FnZVNub296ZUFkc0ZhaWxDb3VudFplcm87DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGhhdGVSYWlkQ2xlYXJDaGF0ID0gdWkuR2V0VmFsdWU8Ym9vbD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfaGF0ZVJhaWRDbGVhckNoYXQiKSA/PyBoYXRlUmFpZENsZWFyQ2hhdDsNCiAgICAgICAgaGF0ZVJhaWRTdWJPbmx5TW9kZSA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX2hhdGVSYWlkU3ViT25seU1vZGUiKSA/PyBoYXRlUmFpZFN1Yk9ubHlNb2RlOw0KICAgICAgICBoYXRlUmFpZEVtb3RlT25seU1vZGUgPSB1aS5HZXRWYWx1ZTxib29sPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19oYXRlUmFpZEVtb3RlT25seU1vZGUiKSA/PyBoYXRlUmFpZEVtb3RlT25seU1vZGU7DQogICAgICAgIGhhdGVSYWlkUGF1c2VBbGxSZXdhcmRzID0gdWkuR2V0VmFsdWU8Ym9vbD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfaGF0ZVJhaWRQYXVzZUFsbFJld2FyZHMiKSA/PyBoYXRlUmFpZFBhdXNlQWxsUmV3YXJkczsNCiAgICAgICAgaGF0ZVJhaWRDbGVhclRUUyA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX2hhdGVSYWlkQ2xlYXJUVFMiKSA/PyBoYXRlUmFpZENsZWFyVFRTOw0KICAgICAgICBoYXRlUmFpZERpc2FibGVBbGxCcm93c2VyU291cmNlcyA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX2hhdGVSYWlkRGlzYWJsZUFsbEJyb3dzZXJTb3VyY2VzIikgPz8gaGF0ZVJhaWREaXNhYmxlQWxsQnJvd3NlclNvdXJjZXM7DQogICAgICAgIC8vPT09DQogICAgICAgIHN0cmluZyByYXdfaGF0ZVJhaWRBY3Rpb25zID0gdWkuR2V0VmFsdWU8c3RyaW5nPihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX2hhdGVSYWlkQWN0aW9ucyIpOw0KICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KHJhd19oYXRlUmFpZEFjdGlvbnMpKQ0KICAgICAgICAgICAgaGF0ZVJhaWRBY3Rpb25zID0gSkFycmF5LlBhcnNlKHJhd19oYXRlUmFpZEFjdGlvbnMpLlRvT2JqZWN0PHN0cmluZ1tdPigpOw0KICAgICAgICAvLz09PQ0KICAgICAgICBzdHJpbmcgcmF3X2hhdGVSYWlkUXVldWVzID0gdWkuR2V0VmFsdWU8c3RyaW5nPihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX2hhdGVSYWlkUXVldWVzIik7DQogICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkocmF3X2hhdGVSYWlkUXVldWVzKSkNCiAgICAgICAgICAgIGhhdGVSYWlkUXVldWVzID0gSkFycmF5LlBhcnNlKHJhd19oYXRlUmFpZFF1ZXVlcykuVG9PYmplY3Q8c3RyaW5nW10+KCk7DQogICAgICAgIC8vPT09DQogICAgICAgIG1lc3NhZ2VIYXRlUmFpZFByb3RlY3Rpb25FbmFibGVkID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlSGF0ZVJhaWRQcm90ZWN0aW9uRW5hYmxlZCIpID8/IG1lc3NhZ2VIYXRlUmFpZFByb3RlY3Rpb25FbmFibGVkOw0KICAgICAgICBtZXNzYWdlSGF0ZVJhaWRQcm90ZWN0aW9uRGlzYWJsZWQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VIYXRlUmFpZFByb3RlY3Rpb25EaXNhYmxlZCIpID8/IG1lc3NhZ2VIYXRlUmFpZFByb3RlY3Rpb25EaXNhYmxlZDsNCiAgICAgICAgLy89PT0NCiAgICAgICAgdmFyIGpfaFIxID0gSk9iamVjdC5QYXJzZSh1aS5HZXRWYWx1ZTxzdHJpbmc+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfaGF0ZVJhaWRTbG93TW9kZU9ubHkiKSk7DQogICAgICAgIGhhdGVSYWlkU2xvd01vZGUgPSBqX2hSMVsiZW5hYmxlZCJdPy5WYWx1ZTxib29sPigpID8/IHRydWU7DQogICAgICAgIGhhdGVSYWlkU2xvd01vZGVUaW1lID0gKGludClNYXRoLlJvdW5kKGpfaFIxWyJ2YWx1ZSJdPy5WYWx1ZTxkb3VibGU+KCkgPz8gMTApOw0KICAgICAgICAvLz09PQ0KICAgICAgICB2YXIgal9oUjIgPSBKT2JqZWN0LlBhcnNlKHVpLkdldFZhbHVlPHN0cmluZz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19oYXRlUmFpZEZvbGxvd2VyTW9kZU9ubHkiKSk7DQogICAgICAgIGhhdGVSYWlkRm9sbG93ZXJPbmx5TW9kZSA9IGpfaFIyWyJlbmFibGVkIl0/LlZhbHVlPGJvb2w+KCkgPz8gdHJ1ZTsNCiAgICAgICAgaGF0ZVJhaWRGb2xsb3dlck9ubHlNb2RlRHVyYXRpb24gPSAoaW50KU1hdGguUm91bmQoal9oUjJbInZhbHVlIl0/LlZhbHVlPGRvdWJsZT4oKSA/PyA0OCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHNob3V0b3V0U2VuZFR3aXRjaFNob3V0b3V0ID0gdWkuR2V0VmFsdWU8Ym9vbD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfc2hvdXRvdXRTZW5kVHdpdGNoU2hvdXRvdXQiKSA/PyBzaG91dG91dFNlbmRUd2l0Y2hTaG91dG91dDsNCiAgICAgICAgc29BdXRvU2hvdXRvdXRPblJhaWQgPSB1aS5HZXRWYWx1ZTxib29sPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19zb0F1dG9TaG91dG91dE9uUmFpZCIpID8/IHNvQXV0b1Nob3V0b3V0T25SYWlkOw0KICAgICAgICBzb09ubHlGb2xsb3dlZCA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX3NvT25seUZvbGxvd2VkIikgPz8gc29Pbmx5Rm9sbG93ZWQ7DQogICAgICAgIHNvTWluVmlld2VycyA9IHVpLkdldFZhbHVlPGludD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfc29NaW5WaWV3ZXJzIikgPz8gc29NaW5WaWV3ZXJzOw0KICAgICAgICBtZXNzYWdlU2hvdXRvdXQgPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VTaG91dG91dCIpID8/IG1lc3NhZ2VTaG91dG91dDsNCiAgICAgICAgbWVzc2FnZU91dGdvaW5nUmFpZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZU91dGdvaW5nUmFpZCIpID8/IG1lc3NhZ2VPdXRnb2luZ1JhaWQ7DQogICAgICAgIG1lc3NhZ2VTb091dGdvaW5nUmFpZE1lc3NhZ2VTdWJzID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlU29PdXRnb2luZ1JhaWRNZXNzYWdlU3VicyIpID8/IG1lc3NhZ2VTb091dGdvaW5nUmFpZE1lc3NhZ2VTdWJzOw0KICAgICAgICBtZXNzYWdlU29PdXRnb2luZ1JhaWRNZXNzYWdlTm9uU3VicyA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZVNvT3V0Z29pbmdSYWlkTWVzc2FnZU5vblN1YnMiKSA/PyBtZXNzYWdlU29PdXRnb2luZ1JhaWRNZXNzYWdlTm9uU3ViczsNCiAgICAgICAgbWVzc2FnZUluY29taW5nUmFpZCA9IHVpLkdldFZhbHVlPHN0cmluZz8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfbWVzc2FnZUluY29taW5nUmFpZCIpID8/IG1lc3NhZ2VJbmNvbWluZ1JhaWQ7DQogICAgICAgIHNvUG9zdFN1YlJhaWRNZXNzYWdlID0gdWkuR2V0VmFsdWU8Ym9vbD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfc29Qb3N0U3ViUmFpZE1lc3NhZ2UiKSA/PyBzb1Bvc3RTdWJSYWlkTWVzc2FnZTsNCiAgICAgICAgc29Qb3N0Tm9uU3ViUmFpZE1lc3NhZ2UgPSB1aS5HZXRWYWx1ZTxib29sPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19zb1Bvc3ROb25TdWJSYWlkTWVzc2FnZSIpID8/IHNvUG9zdE5vblN1YlJhaWRNZXNzYWdlOw0KICAgICAgICBzb1Bvc3RTdWJSYWlkTWVzc2FnZUFzQnJvYWRjYXN0ZXIgPSB1aS5HZXRWYWx1ZTxib29sPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19zb1Bvc3RTdWJSYWlkTWVzc2FnZUFzQnJvYWRjYXN0ZXIiKSA/PyBzb1Bvc3RTdWJSYWlkTWVzc2FnZUFzQnJvYWRjYXN0ZXI7DQogICAgICAgIHNvQXV0b1Nub296ZUFkcyA9IHVpLkdldFZhbHVlPGJvb2w/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX3NvQXV0b1Nub296ZUFkcyIpID8/IHNvQXV0b1Nub296ZUFkczsNCiAgICB9DQp9",
                                "precompile": false,
                                "delayStart": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "weight": 0.0,
                                "type": 99999,
                                "parentId": "59b411bf-68f8-4432-aefc-c5c947b6c081",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "59b411bf-68f8-4432-aefc-c5c947b6c081",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    }
                ],
                "collapsedGroups": []
            },
            {
                "id": "9b270d05-1ed3-486c-b66e-db7d28ab15d6",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 3 - Remove URL From Whitelist",
                "group": "MOD TOOLS - URL Filter",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "a2de7814-7a04-4943-89e1-55e742e118b1",
                        "id": "19508e01-4c67-45e2-9573-4e2aa58094ec",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!removeURL [URL]",
                        "color": "#80FFFF",
                        "id": "703b6e97-4ace-4ac6-ba99-312f7f918493",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "d2d857f9-7497-4f39-b3a1-9195d2da7cf1",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "dedb0c63-2ca0-4621-ba34-6532afb0aba6",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "RemoveURLFromWhitelist",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "7819b0fa-fd43-4633-bdce-720a4fa6ad17",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "dedb0c63-2ca0-4621-ba34-6532afb0aba6",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "dedb0c63-2ca0-4621-ba34-6532afb0aba6",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "dedb0c63-2ca0-4621-ba34-6532afb0aba6"
                ]
            },
            {
                "id": "bc7c8972-ce75-46b3-994f-7e8039b8cc32",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 4 - Get Whitelisted URLs",
                "group": "MOD TOOLS - URL Filter",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "ff744a11-2e56-40de-a889-c82c1beedf6b",
                        "id": "8d72aab0-ce66-4139-8205-d4cb82f28fad",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!whitelistedURLs",
                        "color": "#80FFFF",
                        "id": "89a18807-c041-4ec3-8c30-04dafc56dedb",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "4e472da7-91e7-4898-aaec-999a44dfd4a9",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "c3a7242b-e03a-4867-ba67-88f67a5f9c00",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "GetWhitelistedURLs",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "fb7c672f-41c5-4c56-a53d-783d55c87101",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "c3a7242b-e03a-4867-ba67-88f67a5f9c00",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "c3a7242b-e03a-4867-ba67-88f67a5f9c00",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "c3a7242b-e03a-4867-ba67-88f67a5f9c00"
                ]
            },
            {
                "id": "67148426-c705-4e7a-8718-f543e0945dd1",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 4 - Remove Latest Followers",
                "group": "MOD TOOLS - Bot & Hate Raid Protection",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "c54fdd81-1722-4e5b-8d22-3f83c9133bde",
                        "id": "38f0cf78-68a0-4e2f-a538-d392cd2e716c",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!removeLatestFollowers [Time In Minutes]",
                        "color": "#80FFFF",
                        "id": "9576b235-6620-48cc-8cc1-c6e9748263ff",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "47596cf2-057b-4dcf-bdf1-c686fd124a18",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "31d1935b-2908-4329-9d83-c2059235c073",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "RemoveLatestFollowers",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "4294f02f-2466-4bc8-b493-5e8dfaf9d721",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "31d1935b-2908-4329-9d83-c2059235c073",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "31d1935b-2908-4329-9d83-c2059235c073",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "31d1935b-2908-4329-9d83-c2059235c073"
                ]
            },
            {
                "id": "b12485b7-1f2b-40e6-aaff-e4ae8f253951",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 1 - Add Blacklisted Word",
                "group": "MOD TOOLS - Spam Filter",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "62d18ad6-12e0-4af5-bf77-de8ceca223ed",
                        "id": "3a4a29d4-48df-4207-8450-5c7412206cc9",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!banWord [Word]",
                        "color": "#80FFFF",
                        "id": "9c5e860c-8b74-44f8-8c51-70de15c0be08",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "23bdd34b-48a2-4900-b8c5-8f59cbf552ca",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "fc762cc9-1edd-4d9c-9e11-0b29773f26f7",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "AddBlacklistedWord",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "41d23872-38b5-4f98-a508-b97324291fb4",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "fc762cc9-1edd-4d9c-9e11-0b29773f26f7",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "fc762cc9-1edd-4d9c-9e11-0b29773f26f7",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "fc762cc9-1edd-4d9c-9e11-0b29773f26f7"
                ]
            },
            {
                "id": "a6c324ae-d749-4e61-8a5c-7d84658cf25e",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 2 - Remove Blacklisted Word",
                "group": "MOD TOOLS - Spam Filter",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "f28744c1-53ca-4ef7-aae2-039294938d01",
                        "id": "fd4a68ff-98ae-4425-8339-8da6c743d15b",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!unbanWord [Word]",
                        "color": "#80FFFF",
                        "id": "08e0f57c-c035-4475-8483-aa167730b97f",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "31eedeff-df45-4055-b4b4-81db9df240d8",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "ad2cbe4c-b2d9-4cdb-bce8-24801e1115c6",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "RemoveBlacklistedWord",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "ffa0b77b-4749-4ccc-a0b2-2386aa6531de",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "ad2cbe4c-b2d9-4cdb-bce8-24801e1115c6",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "ad2cbe4c-b2d9-4cdb-bce8-24801e1115c6",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "ad2cbe4c-b2d9-4cdb-bce8-24801e1115c6"
                ]
            },
            {
                "id": "cf505d64-c266-4b3f-9d2c-4f278f887a7f",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 4 - Toggle Caps Protection",
                "group": "MOD TOOLS - Spam Filter",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "2de7c2c8-0624-4cc3-8a5e-344c2a9a724b",
                        "id": "7384d594-7221-42cd-9e15-b5423c18f6c6",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!toggleCapsProtection",
                        "color": "#80FFFF",
                        "id": "bb0bd56c-df70-4144-b73e-ca68371d8935",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "ed89d0fc-caf3-46ac-8f00-c3fe2c1ef5ef",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "105ae729-2f4f-489f-b14d-6fcad4541851",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "ToggleCapsProtection",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "5378688e-ba8d-43cf-9713-bf9bcade5fc1",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "105ae729-2f4f-489f-b14d-6fcad4541851",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "105ae729-2f4f-489f-b14d-6fcad4541851",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "105ae729-2f4f-489f-b14d-6fcad4541851"
                ]
            },
            {
                "id": "43a1acd0-0952-4a15-94b4-64c1397abbd7",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 5 - Toggle Emote Protection",
                "group": "MOD TOOLS - Spam Filter",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "1c97593f-c072-4899-9432-a6c75048180d",
                        "id": "538318cb-4796-4d8e-8676-12aebc6ff739",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!toggleEmoteProtection",
                        "color": "#80FFFF",
                        "id": "f96c4f6c-e2d3-4c30-ab3d-086fc9ddc674",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "a61794e5-bcab-4d36-8128-d126ec657095",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "46f3b87e-ec02-46de-9d7f-b7fae56020ed",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "ToggleEmoteProtection",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "0fd160d6-2a83-4896-a760-bab8fbc34337",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "46f3b87e-ec02-46de-9d7f-b7fae56020ed",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "46f3b87e-ec02-46de-9d7f-b7fae56020ed",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "46f3b87e-ec02-46de-9d7f-b7fae56020ed"
                ]
            },
            {
                "id": "f21ad235-cbb6-447c-b151-550d4fdf4cb1",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 6 - Toggle ASCII Protection",
                "group": "MOD TOOLS - Spam Filter",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "f9fac1f9-95b9-414e-a4ab-7ce16c87399b",
                        "id": "79753bc2-3b2a-47c2-9199-1548f0983b0b",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!toggleAsciiProtection",
                        "color": "#80FFFF",
                        "id": "a972a8cc-927d-4906-97cc-0bd069c2cbd7",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "b914f950-17a0-4f12-a1a7-d8e04fe6809b",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "6d6f3dde-7c5b-4866-84c5-ae3059aa32e5",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "ToggleAsciiProtection",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "f72c426d-10cf-4294-8679-90f57e85c630",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "6d6f3dde-7c5b-4866-84c5-ae3059aa32e5",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "6d6f3dde-7c5b-4866-84c5-ae3059aa32e5",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "6d6f3dde-7c5b-4866-84c5-ae3059aa32e5"
                ]
            },
            {
                "id": "fb3fe16d-21a1-4d0e-9845-581505b6141d",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 3 - Toggle Blacklisted Words Filter",
                "group": "MOD TOOLS - Spam Filter",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "b1fa5754-50f3-43ed-9432-1b150a781421",
                        "id": "a87832c5-799c-496d-83b0-b4f349d9fe07",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!toggleBlacklistedWordsFilter",
                        "color": "#80FFFF",
                        "id": "93162f4c-a04e-47c7-b981-b10d28ff451e",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "cadf9ede-a410-44da-83ae-3bafcf70fadf",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "5772067c-d3af-432a-bc91-fb0f5adc3345",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "ToggleBlacklistedWordsFilter",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "6b6208c1-3cb0-40c5-b953-87512e451e0f",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "5772067c-d3af-432a-bc91-fb0f5adc3345",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "5772067c-d3af-432a-bc91-fb0f5adc3345",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "5772067c-d3af-432a-bc91-fb0f5adc3345"
                ]
            },
            {
                "id": "aefcdef0-2f88-4887-8a90-dc99d60b9989",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 1 - Toggle URL Filter",
                "group": "MOD TOOLS - URL Filter",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "9b310e87-1f60-4a39-8c03-8f1c2958bf3d",
                        "id": "ad14fedb-7512-45ab-99ee-e4bfb34cd7c5",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!toggleURLFilter",
                        "color": "#80FFFF",
                        "id": "f1369ac6-aada-4801-a3a1-12e173a20e97",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "9f80df90-5bf5-4ca4-95dd-0419dcbee18d",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "41baeade-2a5d-4e6a-8a2f-331887f1732e",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "ToggleURLFilter",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "3ff92cd2-4433-4ccd-abf8-fe3a08b57685",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "41baeade-2a5d-4e6a-8a2f-331887f1732e",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "41baeade-2a5d-4e6a-8a2f-331887f1732e",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "41baeade-2a5d-4e6a-8a2f-331887f1732e"
                ]
            },
            {
                "id": "28c0bb75-c1e2-4f3b-8f6c-1d237bdaf28a",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 5 - Permit User",
                "group": "MOD TOOLS - URL Filter",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "cc428224-b3ef-4d62-897f-9af1ef3faadb",
                        "id": "230097f4-645e-4784-8ac0-8bdad7d7cce2",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!permit [Username]",
                        "color": "#80FFFF",
                        "id": "3a99d56f-92d0-4651-8f80-7f578281929e",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "d56a679a-6799-4036-ac2e-ee749f94c493",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "69223686-e640-4779-89fb-a09cbdb497a8",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "PermitUserToPostLinks",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "5fecc8be-eb21-4b03-9971-670ce204e3a6",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "69223686-e640-4779-89fb-a09cbdb497a8",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "69223686-e640-4779-89fb-a09cbdb497a8",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "69223686-e640-4779-89fb-a09cbdb497a8"
                ]
            },
            {
                "id": "bc91fb9a-f8e7-4fcd-a790-906cd6d92b2e",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 6 - Add User To Whitelist",
                "group": "MOD TOOLS - URL Filter",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "490dc961-db21-46dc-b60c-2aa266b01219",
                        "id": "b41bbcbb-a642-4006-9784-645a6e251fbd",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!urlAddUser [Username]",
                        "color": "#80FFFF",
                        "id": "7a8a32a7-de11-47dc-b56e-eeb2513042df",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "8d0e2a94-49b1-4190-8a56-d53e1d58a65e",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "ecb5931d-48ab-4e78-84a2-29a08e3116ff",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "AddUserToURLWhitelist",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "f1aaa039-2d53-4fc8-a623-af7285e66a3c",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "ecb5931d-48ab-4e78-84a2-29a08e3116ff",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "ecb5931d-48ab-4e78-84a2-29a08e3116ff",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "ecb5931d-48ab-4e78-84a2-29a08e3116ff"
                ]
            },
            {
                "id": "e0072a15-06d7-4351-b40f-1d9548112d86",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 7 - Remove User From Whitelist",
                "group": "MOD TOOLS - URL Filter",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "c16284b2-2c24-4c6c-a15b-caddbe9b1b56",
                        "id": "be2c8c5b-95a3-4a57-9975-42460e2570f2",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!urlRemoveUser [Username]",
                        "color": "#80FFFF",
                        "id": "3b2f8f60-1d1c-43d7-a5ba-3286afd35a67",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "b8ff9d99-6f51-43a0-a481-c37c89407f9d",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "d2d026eb-ec89-4127-97cd-70969a6203b6",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "RemoveUserFromURLWhitelist",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "bc600893-ea40-4897-b5cd-764bdf495951",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "d2d026eb-ec89-4127-97cd-70969a6203b6",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "d2d026eb-ec89-4127-97cd-70969a6203b6",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "d2d026eb-ec89-4127-97cd-70969a6203b6"
                ]
            },
            {
                "id": "3201e885-9966-481c-8a3d-a0b399b70494",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 1 - Create Poll",
                "group": "MOD TOOLS - Polls & Predictions",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "16f567a8-f439-472e-b3a3-e153fb070b38",
                        "id": "952725f9-af81-4641-90db-bb249db173c9",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!createPoll [Title] | [Duration] | [Option1] | [Option2] ...",
                        "color": "#80FFFF",
                        "id": "1d0ea639-e33a-4b6d-9478-cdbcc34dfb82",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "value": "Each entry is separated by a pipe symbol: |",
                        "color": "#80FFFF",
                        "id": "3da8f495-4e3a-4811-b12b-0dde95c123f4",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "5d8af5a4-14ed-4e19-9c29-0bd8190545c2",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "e9b55b11-9d2d-41d7-a1fa-7fbc9c4b68d8",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "CreatePoll",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "030cf56f-b1dd-4d67-ae13-b9d24bc314d3",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "e9b55b11-9d2d-41d7-a1fa-7fbc9c4b68d8",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "e9b55b11-9d2d-41d7-a1fa-7fbc9c4b68d8",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 2
                    }
                ],
                "collapsedGroups": [
                    "e9b55b11-9d2d-41d7-a1fa-7fbc9c4b68d8"
                ]
            },
            {
                "id": "234ec629-675b-46f2-902a-ddcc709214e0",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 3 - Create Prediction",
                "group": "MOD TOOLS - Polls & Predictions",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "6a78bd24-cf74-41d5-bf76-7debacb2aec1",
                        "id": "c8d66678-8433-43c4-9d09-43ea0ed9ebee",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!createPrediction [Title] | [Duration] | [Option1] | [Option2] ...",
                        "color": "#80FFFF",
                        "id": "460ad195-a665-4c28-9b50-4c80c0bdc21a",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "value": "Each entry is separated by a pipe symbol: |",
                        "color": "#80FFFF",
                        "id": "aaffcb92-0074-4c33-91bb-13553be4a2f7",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "3543bb35-d470-46e9-89f3-4d2631e42020",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "e1bcf379-24c6-47c9-a554-a466336e94d6",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "CreatePrediction",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "27f51558-4824-4a92-9d38-27a739180348",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "e1bcf379-24c6-47c9-a554-a466336e94d6",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "e1bcf379-24c6-47c9-a554-a466336e94d6",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 2
                    }
                ],
                "collapsedGroups": [
                    "e1bcf379-24c6-47c9-a554-a466336e94d6"
                ]
            },
            {
                "id": "a45bc735-341a-47fb-8214-f5d6b8bc662c",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 2 - End Poll",
                "group": "MOD TOOLS - Polls & Predictions",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "c749223e-5260-4047-bb84-1994fea473c0",
                        "id": "19e7fbc1-35ae-41ac-806f-d518d3560131",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!endPoll",
                        "color": "#80FFFF",
                        "id": "ceada348-ee7e-4e5f-90b4-1f4d3f2a3389",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "1d671a73-aff2-48b3-87f8-e602a5ec8ab8",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "292dbb90-eda5-43bd-84da-7f36cd306c3c",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "EndPoll",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "bb22a60c-c324-498c-b9fa-00e516bb7163",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "292dbb90-eda5-43bd-84da-7f36cd306c3c",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "292dbb90-eda5-43bd-84da-7f36cd306c3c",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "292dbb90-eda5-43bd-84da-7f36cd306c3c"
                ]
            },
            {
                "id": "3c1fdcb2-912b-4c4a-baae-827ab067327a",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 4 - Lock Prediction",
                "group": "MOD TOOLS - Polls & Predictions",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "bc1a2f37-b586-4d51-be5e-57ec9e5720cc",
                        "id": "050b6644-a8fc-461a-8c4a-f0e7e14948f4",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!lockPrediction",
                        "color": "#80FFFF",
                        "id": "94e71d05-e206-4ac0-aa6e-785746c78ccf",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "e983a1b1-0c3b-4c83-b991-98755036bc53",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "780666de-a4c7-4e1e-b4f7-caf9d6d1141d",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "LockPrediction",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "1c6f490a-0208-4cb1-943e-e170fe9032c6",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "780666de-a4c7-4e1e-b4f7-caf9d6d1141d",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "780666de-a4c7-4e1e-b4f7-caf9d6d1141d",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "780666de-a4c7-4e1e-b4f7-caf9d6d1141d"
                ]
            },
            {
                "id": "5a7e8732-8694-4fe9-941b-e1e4086cde87",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 5 - Resolve Prediction",
                "group": "MOD TOOLS - Polls & Predictions",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "4ed063c2-6bb1-4ef7-911a-b36a55446aed",
                        "id": "aca34bdc-4e54-4b14-aabd-b2b4cd38d249",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!resolvePrediction [Option Title OR Option Number]",
                        "color": "#80FFFF",
                        "id": "5bf22cd4-0822-425a-a5d8-3de76aa33334",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "8d4200f2-4750-474c-a00e-d85c82acef4a",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "93061d3f-0892-4241-a4dd-3a630055710a",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "ResolvePrediction",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "08478dab-aeae-4d01-b097-40f18167829e",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "93061d3f-0892-4241-a4dd-3a630055710a",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "93061d3f-0892-4241-a4dd-3a630055710a",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "93061d3f-0892-4241-a4dd-3a630055710a"
                ]
            },
            {
                "id": "1ab98e4c-ac22-4462-864d-a1d2d7769fcf",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 6 - Cancel Prediction",
                "group": "MOD TOOLS - Polls & Predictions",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "c5fd847a-2a8d-4c41-b5c8-55da2617797c",
                        "id": "2dced421-b674-4d97-b890-d1f2f507b4da",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!cancelPrediction",
                        "color": "#80FFFF",
                        "id": "871d9a30-9c8a-4f29-8803-4af81c3793bf",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "7c71c411-86e0-4a9f-be74-aad3977bc57d",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "b4b4a0e0-1737-4bb6-9161-fad9aa36c1c9",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "CancelPrediction",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "4f34281c-c09a-4760-b985-20b7b11bbb19",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "b4b4a0e0-1737-4bb6-9161-fad9aa36c1c9",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "b4b4a0e0-1737-4bb6-9161-fad9aa36c1c9",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "b4b4a0e0-1737-4bb6-9161-fad9aa36c1c9"
                ]
            },
            {
                "id": "65ecc9f3-9937-4da5-8e11-d88c80fe120e",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 1 - Get OBS Scenes",
                "group": "MOD TOOLS - OBS Management",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "55f39ae4-901d-4bdb-8909-b8c57574b30f",
                        "id": "b8a0f449-95bc-437a-bf3a-ad6e37e1ace6",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!scenes",
                        "color": "#80FFFF",
                        "id": "c6b16e98-a720-41c1-8d9c-b52ee7328802",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "980ba788-61e3-4199-beb7-2d35cdb67300",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "6fadf710-365a-492d-8067-61c28a49ea1f",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "GetOBSScenes",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "418e828f-dac4-44aa-9790-7df9c660b195",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "6fadf710-365a-492d-8067-61c28a49ea1f",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "6fadf710-365a-492d-8067-61c28a49ea1f",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "6fadf710-365a-492d-8067-61c28a49ea1f"
                ]
            },
            {
                "id": "73cbd132-f967-4b14-a427-729c42859d04",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 2 - Change OBS Scene",
                "group": "MOD TOOLS - OBS Management",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "fc8a7a78-4ba3-4c28-a0ca-f4ca0266a5f5",
                        "id": "118db181-bef7-4574-a91c-dd83402ef7cb",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!scene",
                        "color": "#80FFFF",
                        "id": "b0836da8-e075-4cf8-b113-cce5ae229811",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "e52d7a24-575f-42e9-86e7-b65bde74a0e4",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "cf3b3db0-4de2-4a0a-839e-e92715bfe74d",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "SetObsScene",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "479932ca-1af3-4b8e-928a-c74232daf6be",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "cf3b3db0-4de2-4a0a-839e-e92715bfe74d",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "cf3b3db0-4de2-4a0a-839e-e92715bfe74d",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "cf3b3db0-4de2-4a0a-839e-e92715bfe74d"
                ]
            },
            {
                "id": "6d5d2583-e1bb-47c1-88f0-e97733592668",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 4 - Refresh All Browser Sources",
                "group": "MOD TOOLS - OBS Management",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "f901f12c-8ec4-4189-b11a-0878b0a1ee77",
                        "id": "baa4f43e-8dbb-45e7-82a4-a0ab9883ae1b",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!refreshBrowserSources",
                        "color": "#80FFFF",
                        "id": "4d360252-c5d7-4856-8d50-88ad3f605ee8",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "03574022-851f-41ae-8e97-083aba7c408c",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "54d550d6-d29f-4b4c-a4e4-471d9506c30f",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "RefreshAllBrowserSources",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "51038c1d-af14-4281-b428-2ae2aa300734",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "54d550d6-d29f-4b4c-a4e4-471d9506c30f",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "54d550d6-d29f-4b4c-a4e4-471d9506c30f",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "54d550d6-d29f-4b4c-a4e4-471d9506c30f"
                ]
            },
            {
                "id": "805f5bf5-3e35-46d6-b224-802ac759f386",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 3 - Refresh All Application Audio Capture Sources",
                "group": "MOD TOOLS - OBS Management",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "971a0663-6df3-4f75-8f7c-f16888085726",
                        "id": "9b4a9ab3-9aab-4517-a167-be7470adc5f1",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!refreshAudio",
                        "color": "#80FFFF",
                        "id": "6c098924-3baf-4893-8465-71c1b4459afd",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "16769963-2b16-4c3f-87fd-faa78043feb4",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "28b21e04-6cbf-4693-8b69-0faf9ba1a875",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "RefreshAllApplicationAudioCaptureSources",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "707a014a-9d01-4bb6-8ee7-fe458b51da2b",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "28b21e04-6cbf-4693-8b69-0faf9ba1a875",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "28b21e04-6cbf-4693-8b69-0faf9ba1a875",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "28b21e04-6cbf-4693-8b69-0faf9ba1a875"
                ]
            },
            {
                "id": "9f93f60b-a739-4062-8de2-c4a4e4fe0f20",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 5 - End Stream",
                "group": "MOD TOOLS - OBS Management",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "2ea7c976-9993-4762-b5fa-454791967d48",
                        "id": "1eb969f9-9666-4b30-bd43-f5a7954c2cdd",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!endStream",
                        "color": "#80FFFF",
                        "id": "a4481bd0-8a5f-4052-b5ee-f75eefee16ff",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "8536ab9b-6953-49bf-91b2-5347645c605d",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "bea3bf2a-a839-4cc0-81e1-280602e8429f",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "EndStream",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "b6a4ed83-7d46-491c-b3d2-ff0c6b6ce91d",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "bea3bf2a-a839-4cc0-81e1-280602e8429f",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "bea3bf2a-a839-4cc0-81e1-280602e8429f",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 2
                    }
                ],
                "collapsedGroups": [
                    "bea3bf2a-a839-4cc0-81e1-280602e8429f"
                ]
            },
            {
                "id": "0810c734-81d2-41bf-be4d-9b8a818c19c5",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 5 - Toggle Hate Raid Protection",
                "group": "MOD TOOLS - Bot & Hate Raid Protection",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "16a3ae79-c939-447e-b21a-2ce84b2744c6",
                        "id": "f8424a2f-6f6e-42cc-829c-fcb312e3abac",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!hateRaid",
                        "color": "#80FFFF",
                        "id": "0f172dbe-bd6c-4928-b8c6-fc3d09470d29",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "6e75f198-6deb-4da1-a8cb-229eb3d57644",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "230fe163-3b99-4dcf-99d7-7ab23452b8e6",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "ToggleHateRaidProtection",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "e37e6b81-7211-4b72-acc2-848459fa3c01",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "230fe163-3b99-4dcf-99d7-7ab23452b8e6",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "230fe163-3b99-4dcf-99d7-7ab23452b8e6",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "230fe163-3b99-4dcf-99d7-7ab23452b8e6"
                ]
            },
            {
                "id": "79d6f087-adb0-4e8f-a3cc-4254111af838",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 1 - Enable Rewards",
                "group": "MOD TOOLS - Channel Point Rewards",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "ec3d7f9e-ecfc-4aec-b05c-39287e5e249a",
                        "id": "ac22ee9a-b8b7-4c95-9767-6fcec170a62c",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!enableReward all",
                        "color": "#80FFFF",
                        "id": "1c1bbc18-f6ff-45bd-ae87-6a19813829fa",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "value": "!enableReward [Group Name]",
                        "color": "#80FFFF",
                        "id": "436647f3-e066-4b91-b618-fb9467684d4c",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    },
                    {
                        "value": "!enableReward [Reward Name]",
                        "color": "#80FFFF",
                        "id": "cf7797ac-71e8-459d-9d51-5afb7513ec68",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 2
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "068a598e-2ef9-495e-9309-b28a28b2b74e",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "ac7f23bb-bdac-42ab-80ed-914124145e01",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "EnableRewards",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "06e3f521-2e9f-4a07-a199-e5a44983e384",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "ac7f23bb-bdac-42ab-80ed-914124145e01",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "ac7f23bb-bdac-42ab-80ed-914124145e01",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 3
                    }
                ],
                "collapsedGroups": [
                    "ac7f23bb-bdac-42ab-80ed-914124145e01"
                ]
            },
            {
                "id": "3d394902-3756-4a40-87a2-aab8561e4bb8",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 2 - Disable Rewards",
                "group": "MOD TOOLS - Channel Point Rewards",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "4162e36d-bdd2-457a-a57b-3c8305b04f1a",
                        "id": "cee8967e-7940-4e55-82be-63bdb7038283",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!disableReward all",
                        "color": "#80FFFF",
                        "id": "a2f074ce-c493-45f0-b8bf-6400c6edfe2a",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "value": "!disableReward [Group Name]",
                        "color": "#80FFFF",
                        "id": "a1d49648-ce0b-47f8-b889-4663b48b0500",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    },
                    {
                        "value": "!disableReward [Reward Name]",
                        "color": "#80FFFF",
                        "id": "c4e81aca-a06b-4de6-8f25-1d3eeb5c483e",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 2
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "ff551b3f-b4a3-48ec-b75f-145d0b2d8990",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "02844367-9fc1-4963-a7bc-fd03b2162ae6",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "DisableRewards",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "5b520e4e-ed71-46eb-9334-81ae9d1d96fe",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "02844367-9fc1-4963-a7bc-fd03b2162ae6",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "02844367-9fc1-4963-a7bc-fd03b2162ae6",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 3
                    }
                ],
                "collapsedGroups": [
                    "02844367-9fc1-4963-a7bc-fd03b2162ae6"
                ]
            },
            {
                "id": "ae1ecac8-60c8-461a-9fee-31558de1f4de",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 3 - Pause Rewards",
                "group": "MOD TOOLS - Channel Point Rewards",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "e4e5ca3a-fff6-4d3d-8340-a0a24bacfe70",
                        "id": "75f6327a-5280-417f-9183-673a058b974d",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!pauseReward all",
                        "color": "#80FFFF",
                        "id": "3e97447f-1aca-4383-8ab3-07a96cdd7e1c",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "value": "!pauseReward [Group Name]",
                        "color": "#80FFFF",
                        "id": "fe2cd65e-dbad-4e82-ad3f-52f0d972292a",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    },
                    {
                        "value": "!pauseReward [Reward Name]",
                        "color": "#80FFFF",
                        "id": "331c52e7-7439-4e46-9b1c-24817a9f6f48",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 2
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "54da0b80-3ef2-4c2a-af55-c23c54d732c0",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "6093af35-4885-4dc1-a19c-47b2a275a543",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "PauseRewards",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "2989e3ac-d3ef-4820-bf01-2fc702358110",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "6093af35-4885-4dc1-a19c-47b2a275a543",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "6093af35-4885-4dc1-a19c-47b2a275a543",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 3
                    }
                ],
                "collapsedGroups": [
                    "6093af35-4885-4dc1-a19c-47b2a275a543"
                ]
            },
            {
                "id": "ac2a3a02-2df1-4df3-b265-7fc5c11366f3",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 4 - Unpause Rewards",
                "group": "MOD TOOLS - Channel Point Rewards",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "4683bd7a-eeec-4082-b7e1-52f309d4b178",
                        "id": "3687c7da-fa18-4d3b-ad33-6afb80f2f3e7",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!unpauseReward all",
                        "color": "#80FFFF",
                        "id": "013e305c-7e85-4cbb-906f-e679f4961c43",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "value": "!unpauseReward [Group Name]",
                        "color": "#80FFFF",
                        "id": "5902fd03-494b-439a-95ed-f7cbcb74cc3a",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    },
                    {
                        "value": "!unpauseReward [Reward Name]",
                        "color": "#80FFFF",
                        "id": "ed9f7198-f06b-49a8-9bf4-6560988a9b19",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 2
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "878cec25-0735-49c6-b000-9be2b2104021",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "e2feab0f-0ce0-4e88-912a-a835ed95ec07",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "UnpauseRewards",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "80c73e77-14a1-46be-b320-fffb2a88bf85",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "e2feab0f-0ce0-4e88-912a-a835ed95ec07",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "e2feab0f-0ce0-4e88-912a-a835ed95ec07",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 3
                    }
                ],
                "collapsedGroups": [
                    "e2feab0f-0ce0-4e88-912a-a835ed95ec07"
                ]
            },
            {
                "id": "180c7a65-b2ba-48b2-b5dd-6faad4101727",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 5 - Change Reward Title",
                "group": "MOD TOOLS - Channel Point Rewards",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "34ccffa5-1377-4683-94db-e839e8c3f29f",
                        "id": "5483d72a-8c60-41c0-9359-c357e1c415f6",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!rewardTitle [Reward Name] <New Reward Title>",
                        "color": "#80FFFF",
                        "id": "0d75d66e-4ac1-45e7-a19d-a1aea56a0bd0",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "value": "The title needs to be in angled brackets. Example:",
                        "color": "#80FFFF",
                        "id": "f1d3048c-20cf-4285-911f-4f3b6b11dde2",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    },
                    {
                        "value": "!rewardTitle Hydrate <DRINK!>",
                        "color": "#80FFFF",
                        "id": "7078ecf6-cef0-40c9-ab68-5c35c6f123a4",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 2
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "a05dcfc9-2d22-4793-9690-9a9d41a1e0ef",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "d9b292b7-a134-4b9e-bf5a-f3da46f8e9ce",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "ChangeRewardTitle",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "eb79cbdc-8a49-40a6-8452-ffa68b1c0c9b",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "d9b292b7-a134-4b9e-bf5a-f3da46f8e9ce",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "d9b292b7-a134-4b9e-bf5a-f3da46f8e9ce",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 3
                    }
                ],
                "collapsedGroups": [
                    "d9b292b7-a134-4b9e-bf5a-f3da46f8e9ce"
                ]
            },
            {
                "id": "3e08e5f3-122b-4d3a-9de9-266ae452daf1",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 6 - Change Reward Prompt",
                "group": "MOD TOOLS - Channel Point Rewards",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "24a54114-f936-45fa-9925-fe6cb19ed242",
                        "id": "9905f658-df1d-4cce-a890-53c27e3ec4f1",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!rewardPrompt [Reward Name] <New Reward Prompt>",
                        "color": "#80FFFF",
                        "id": "570d985f-f355-4299-8e0a-b5b367fe672e",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "value": "The prompt needs to be in angled brackets. Example:",
                        "color": "#80FFFF",
                        "id": "153081db-35cf-4630-b03c-0b99974350e9",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    },
                    {
                        "value": "!rewardPrompt Hydrate <Make me chug a glass of water.>",
                        "color": "#80FFFF",
                        "id": "97e9c90f-3d02-49cf-a0c3-ed44bdd0be20",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 2
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "c7f81b31-77b8-40d4-8747-67d195e0edb2",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "78e86795-e110-48c5-bc36-c603fbb17725",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "ChangeRewardPrompt",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "c39f7e97-b4c2-4d7b-b0d6-f53ea4bc60fc",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "78e86795-e110-48c5-bc36-c603fbb17725",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "78e86795-e110-48c5-bc36-c603fbb17725",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 3
                    }
                ],
                "collapsedGroups": [
                    "78e86795-e110-48c5-bc36-c603fbb17725"
                ]
            },
            {
                "id": "d0d38269-769b-442f-b965-4d0b744b0a34",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 7 - Change Reward Cost",
                "group": "MOD TOOLS - Channel Point Rewards",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "d5fa29e0-fe5b-47ac-af33-a8acc1bbf1ee",
                        "id": "19c1889a-fee7-4260-9d86-7d8d5010a496",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!rewardCost [Reward Name] <New Reward Cost>",
                        "color": "#80FFFF",
                        "id": "9890563e-cd38-46ee-a101-e0b1ea997bdc",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "value": "The cost needs to be in angled brackets. Example:",
                        "color": "#80FFFF",
                        "id": "c1d0dff5-dee8-469e-9bff-33ed21b0b044",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    },
                    {
                        "value": "!rewardCost Hydrate <69>",
                        "color": "#80FFFF",
                        "id": "57a9bad6-3b19-4839-9202-5656c20c33f6",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 2
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "b0454bd9-f4b6-4953-8c58-24ba50dc6f54",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "c289c531-9197-4a08-b765-b57f5aa6cc65",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "ChangeRewardCost",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "afa1a805-c9a7-45fa-bf4d-6377434bc15c",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "c289c531-9197-4a08-b765-b57f5aa6cc65",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "c289c531-9197-4a08-b765-b57f5aa6cc65",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 3
                    }
                ],
                "collapsedGroups": [
                    "c289c531-9197-4a08-b765-b57f5aa6cc65"
                ]
            },
            {
                "id": "c8f4333b-1d89-4793-8fe0-f284e6fb2aab",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 1 - Add Custom Command",
                "group": "MOD TOOLS - Custom Commands",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "391d7872-fc7f-4c84-81ac-ea66e061267a",
                        "id": "582a5308-28d6-4fad-b720-8f951ea46c5c",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!addCommand [!commandName] [Command Text]",
                        "color": "#80FFFF",
                        "id": "694f93f4-69d6-45a3-8310-8f77238e75ea",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "value": "Command names need to start with an exclamation mark. Examples:",
                        "color": "#80FFFF",
                        "id": "110d354c-45b3-41a4-afe0-80b258c0478d",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    },
                    {
                        "value": "!addCommand !bluesky Check out my Bluesky profile: https://bsky.app/profile/tawmae.xyz <GlobalCooldown:60>",
                        "color": "#80FFFF",
                        "id": "131bdc2b-7d78-45a5-bb63-f10b0c45e35b",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 2
                    },
                    {
                        "value": "!addCommand !death tawmae died %count% times already. <counterEditModsOnly:true>",
                        "color": "#80FFFF",
                        "id": "617ca1bd-729a-4986-a622-9a6374d9feda",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 3
                    },
                    {
                        "name": "Optional Settings",
                        "color": "#FFFF80",
                        "random": false,
                        "subActions": [
                            {
                                "value": "<GlobalCooldown:60>",
                                "color": "#FFFF80",
                                "id": "90918d48-0c6d-443d-9eba-223f37ef0544",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "3a17eec3-933d-47bd-89d2-6669d22d54da",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "value": "<UserCooldown:60>",
                                "color": "#FFFF80",
                                "id": "bf87bf07-9448-4ef7-8ced-0b49ef747d81",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "3a17eec3-933d-47bd-89d2-6669d22d54da",
                                "enabled": true,
                                "index": 1
                            },
                            {
                                "value": "<modOnly:true>",
                                "color": "#FFFF80",
                                "id": "88ffca7d-c8f1-4c25-8f74-e20d62fe6f0d",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "3a17eec3-933d-47bd-89d2-6669d22d54da",
                                "enabled": true,
                                "index": 2
                            },
                            {
                                "value": "<vipOnly:true>",
                                "color": "#FFFF80",
                                "id": "d4b4b461-49d8-4d00-ac4d-cee85b6be65a",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "3a17eec3-933d-47bd-89d2-6669d22d54da",
                                "enabled": true,
                                "index": 3
                            },
                            {
                                "value": "<subOnly:true>",
                                "color": "#FFFF80",
                                "id": "91a8d4fb-9f85-4d36-9ce0-01164f3a0b9c",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "3a17eec3-933d-47bd-89d2-6669d22d54da",
                                "enabled": true,
                                "index": 4
                            },
                            {
                                "value": "<counterEditModsOnly:true>",
                                "color": "#FFFF80",
                                "id": "e5930b72-b109-4a76-99e7-3bd4ad1d8699",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "3a17eec3-933d-47bd-89d2-6669d22d54da",
                                "enabled": true,
                                "index": 5
                            },
                            {
                                "value": "<counterEditVipsOnly:true>",
                                "color": "#FFFF80",
                                "id": "3807bf2a-d50c-4564-b8f4-5f3ae314d73d",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "3a17eec3-933d-47bd-89d2-6669d22d54da",
                                "enabled": true,
                                "index": 6
                            },
                            {
                                "value": "<counterEditSubsOnly:true>",
                                "color": "#FFFF80",
                                "id": "9b101b85-301c-43b7-9aab-fd41d91af802",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "3a17eec3-933d-47bd-89d2-6669d22d54da",
                                "enabled": true,
                                "index": 7
                            }
                        ],
                        "id": "3a17eec3-933d-47bd-89d2-6669d22d54da",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 4
                    },
                    {
                        "name": "Available Variables",
                        "color": "#80FF80",
                        "random": false,
                        "subActions": [
                            {
                                "value": "%targetUser%",
                                "color": "#80FF80",
                                "id": "53d8c24e-0bd1-477c-b80a-398bdf10d546",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "a28fb305-f174-46a8-87d0-da0c6d92636c",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "value": "%targetUser% is available when a command is used with an @. Example: !hug @tawmae",
                                "color": "#80FF80",
                                "id": "7b7bfb9a-2ccf-404b-a007-7551441376ae",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "a28fb305-f174-46a8-87d0-da0c6d92636c",
                                "enabled": true,
                                "index": 1
                            },
                            {
                                "value": "%count%",
                                "color": "#00FF40",
                                "id": "b2735097-a523-4e0e-b391-2f5ddc49ba64",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "a28fb305-f174-46a8-87d0-da0c6d92636c",
                                "enabled": true,
                                "index": 2
                            },
                            {
                                "value": "%count% is always available and can be changed by using '+', '-' or 'set' in a command input.",
                                "color": "#00FF40",
                                "id": "f658f6f0-045c-4def-ab00-3b99aa450a5c",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "a28fb305-f174-46a8-87d0-da0c6d92636c",
                                "enabled": true,
                                "index": 3
                            },
                            {
                                "value": "Examples: !death + // !death +2 // !death -1 // !death set 15",
                                "color": "#00FF40",
                                "id": "d42043f2-a361-49e2-885a-d7016ae4f9ac",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "a28fb305-f174-46a8-87d0-da0c6d92636c",
                                "enabled": true,
                                "index": 4
                            }
                        ],
                        "id": "a28fb305-f174-46a8-87d0-da0c6d92636c",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 5
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "9ae02a81-6e17-4cab-9496-7446821f3c82",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "ab914096-5c8f-4100-a6e7-cae23ae30324",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "AddCustomCommand",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "ae759309-c112-4e79-85f0-a3a534b6b3b7",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "ab914096-5c8f-4100-a6e7-cae23ae30324",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "ab914096-5c8f-4100-a6e7-cae23ae30324",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 6
                    }
                ],
                "collapsedGroups": [
                    "ab914096-5c8f-4100-a6e7-cae23ae30324"
                ]
            },
            {
                "id": "1d1927c9-105b-4e7e-be5a-3957f92562b6",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 2 - Edit Custom Command",
                "group": "MOD TOOLS - Custom Commands",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "0d7197ef-8606-4f22-878d-b83c6ef4bda6",
                        "id": "59ae8b92-7baa-4b15-b968-b5b7cff35d9b",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!editCommand [!commandName] [Command Text]",
                        "color": "#80FFFF",
                        "id": "fffc73c9-ac76-4346-b5e0-53262d92e0ae",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "value": "Examples:",
                        "color": "#80FFFF",
                        "id": "0b57f21e-e4cd-4867-accf-72dfd2f1aa40",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    },
                    {
                        "value": "!editCommand !bluesky Check out my Bluesky profile: https://bsky.app/profile/tawmae.xyz <GlobalCooldown:60>",
                        "color": "#80FFFF",
                        "id": "217876cb-e638-4ea9-9355-3c9a3418df04",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 2
                    },
                    {
                        "value": "!editCommand !death tawmae died %count% times already. <counterEditModsOnly:true>",
                        "color": "#80FFFF",
                        "id": "96ffa106-b80d-4745-bf35-3e22aa9f8eb6",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 3
                    },
                    {
                        "name": "Optional Settings",
                        "color": "#FFFF80",
                        "random": false,
                        "subActions": [
                            {
                                "value": "<GlobalCooldown:60>",
                                "color": "#FFFF80",
                                "id": "5eaa16c5-c02e-4580-8966-591141c86573",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "ac229ea2-9154-4481-8d34-72c6f48c1cc8",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "value": "<UserCooldown:60>",
                                "color": "#FFFF80",
                                "id": "a551404b-3238-4cc3-80a2-a08bafd2272c",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "ac229ea2-9154-4481-8d34-72c6f48c1cc8",
                                "enabled": true,
                                "index": 1
                            },
                            {
                                "value": "<modOnly:true>",
                                "color": "#FFFF80",
                                "id": "b7325198-375c-4330-ac0b-0075abc3c07e",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "ac229ea2-9154-4481-8d34-72c6f48c1cc8",
                                "enabled": true,
                                "index": 2
                            },
                            {
                                "value": "<vipOnly:true>",
                                "color": "#FFFF80",
                                "id": "f6e105a1-7e16-4ee9-ae54-24027a81d796",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "ac229ea2-9154-4481-8d34-72c6f48c1cc8",
                                "enabled": true,
                                "index": 3
                            },
                            {
                                "value": "<subOnly:true>",
                                "color": "#FFFF80",
                                "id": "874ff7b6-4072-4635-8091-93a5ca0b91cc",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "ac229ea2-9154-4481-8d34-72c6f48c1cc8",
                                "enabled": true,
                                "index": 4
                            },
                            {
                                "value": "<counterEditModsOnly:true>",
                                "color": "#FFFF80",
                                "id": "7a1f2bbf-cc39-43b2-8610-f781012a981d",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "ac229ea2-9154-4481-8d34-72c6f48c1cc8",
                                "enabled": true,
                                "index": 5
                            },
                            {
                                "value": "<counterEditVipsOnly:true>",
                                "color": "#FFFF80",
                                "id": "2a5eab9e-d312-44d4-8d64-ed64d37ca734",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "ac229ea2-9154-4481-8d34-72c6f48c1cc8",
                                "enabled": true,
                                "index": 6
                            },
                            {
                                "value": "<counterEditSubsOnly:true>",
                                "color": "#FFFF80",
                                "id": "d700223e-6d2f-4f9b-b692-f1ea97d21848",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "ac229ea2-9154-4481-8d34-72c6f48c1cc8",
                                "enabled": true,
                                "index": 7
                            }
                        ],
                        "id": "ac229ea2-9154-4481-8d34-72c6f48c1cc8",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 4
                    },
                    {
                        "name": "Available Variables",
                        "color": "#80FF80",
                        "random": false,
                        "subActions": [
                            {
                                "value": "%targetUser%",
                                "color": "#80FF80",
                                "id": "f37a4f13-896d-4515-85a0-50469d83e643",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "b36eb817-9a05-4bba-94f9-2f381e91922a",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "value": "%targetUser% is available when a command is used with an @. Example: !hug @tawmae",
                                "color": "#80FF80",
                                "id": "dec5dba7-de35-4e3c-8c5b-cfd1fa15eabe",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "b36eb817-9a05-4bba-94f9-2f381e91922a",
                                "enabled": true,
                                "index": 1
                            },
                            {
                                "value": "%count%",
                                "color": "#00FF40",
                                "id": "31355523-41d5-4bc4-97b0-1409d9d46c1b",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "b36eb817-9a05-4bba-94f9-2f381e91922a",
                                "enabled": true,
                                "index": 2
                            },
                            {
                                "value": "%count% is always available and can be changed by using '+', '-' or 'set' in a command input.",
                                "color": "#00FF40",
                                "id": "2482b675-ab77-4e94-ac60-767a1a24aa9e",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "b36eb817-9a05-4bba-94f9-2f381e91922a",
                                "enabled": true,
                                "index": 3
                            },
                            {
                                "value": "Examples: !death + // !death +2 // !death -1 // !death set 15",
                                "color": "#00FF40",
                                "id": "2bb692e3-6fce-4ccb-8ecb-2355da5b7b86",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "b36eb817-9a05-4bba-94f9-2f381e91922a",
                                "enabled": true,
                                "index": 4
                            }
                        ],
                        "id": "b36eb817-9a05-4bba-94f9-2f381e91922a",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 5
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "ff617e7e-8fc6-48cf-b479-209687f00c95",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "f4ff260e-0ff5-4bc3-bf2b-4d73bf7cb182",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "EditCustomCommand",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "1bb5ab23-0b08-49fc-979b-994285141ec3",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "f4ff260e-0ff5-4bc3-bf2b-4d73bf7cb182",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "f4ff260e-0ff5-4bc3-bf2b-4d73bf7cb182",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 6
                    }
                ],
                "collapsedGroups": [
                    "ac229ea2-9154-4481-8d34-72c6f48c1cc8",
                    "b36eb817-9a05-4bba-94f9-2f381e91922a",
                    "f4ff260e-0ff5-4bc3-bf2b-4d73bf7cb182"
                ]
            },
            {
                "id": "96ff13ca-2089-416a-934e-5a96d9041f74",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 3 - Remove Custom Command",
                "group": "MOD TOOLS - Custom Commands",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "f3212dda-792b-4f44-acb3-b59098bd1aed",
                        "id": "7e4dc72e-d6bf-48a0-af80-62e9c4172d26",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!removeCommand [!commandName]",
                        "color": "#80FFFF",
                        "id": "2b7a58c6-5ee0-4a7d-94f0-99b91cceaa56",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "82cefd71-48f4-482c-934c-ebeb51f43cbb",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "3e000810-4fb6-4e0f-aa0c-bdfba931e261",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "RemoveCustomCommand",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "a6e48afe-c9ea-4c79-9e23-d5ac981f0da8",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "3e000810-4fb6-4e0f-aa0c-bdfba931e261",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "3e000810-4fb6-4e0f-aa0c-bdfba931e261",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "3e000810-4fb6-4e0f-aa0c-bdfba931e261"
                ]
            },
            {
                "id": "96c790b5-3d52-45c7-91ff-8013d613ab68",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 4 - Get All Custom Commands",
                "group": "MOD TOOLS - Custom Commands",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "cccf8945-2962-4f24-b016-98d47e5d9875",
                        "id": "1825754b-a6aa-42e7-afdf-8fc954216b52",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!customCommands",
                        "color": "#80FFFF",
                        "id": "8ec70800-21ac-4c00-bf8c-63a6d57cc0c6",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "74ebe739-7eea-47ca-bbb2-fc611fdd2cca",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "332673c5-edf0-42c2-81b9-ca2e96e8ee83",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "GetAllCustomCommands",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "7e13e78b-ddf8-4182-9a27-5a13d7c8e72b",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "332673c5-edf0-42c2-81b9-ca2e96e8ee83",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "332673c5-edf0-42c2-81b9-ca2e96e8ee83",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "332673c5-edf0-42c2-81b9-ca2e96e8ee83"
                ]
            },
            {
                "id": "6f0ac0d7-603c-4764-b1f2-986065a43f0b",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": true,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] # - Custom Commands",
                "group": "MOD TOOLS - Custom Commands",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "731ba641-8dab-4695-89a9-55722fd1c733",
                        "id": "573afdc7-dde9-4e63-a3e6-4c39654dc3ce",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "26d43c3b-7e63-412f-956e-71562c7e2ea2",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "62cee892-20e3-47c7-a195-3159d76ec9b7",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "name": "MOD Tools Custom Commands",
                                "description": null,
                                "references": [
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\mscorlib.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.dll",
                                    ".\\dlls\\TawmaeUI.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Core.dll",
                                    ".\\Newtonsoft.Json.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Runtime.Serialization.dll",
                                    ".\\Microsoft.CodeAnalysis.dll",
                                    ".\\System.Collections.Immutable.dll",
                                    ".\\System.Reflection.Metadata.dll",
                                    ".\\System.Text.Encodings.Web.dll",
                                    ".\\dlls\\TawmaeUI.dll"
                                ],
                                "byteCode": "dXNpbmcgU3lzdGVtOw0KdXNpbmcgU3lzdGVtLkxpbnE7DQp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsNCnVzaW5nIFN5c3RlbS5UZXh0LlJlZ3VsYXJFeHByZXNzaW9uczsNCnVzaW5nIE5ld3RvbnNvZnQuSnNvbi5MaW5xOw0KdXNpbmcgTmV3dG9uc29mdC5Kc29uOw0KdXNpbmcgVGF3bWFlVUk7DQoNCnB1YmxpYyBjbGFzcyBDUEhJbmxpbmUNCnsNCiAgICBwdWJsaWMgYm9vbCBFeGVjdXRlKCkNCiAgICB7DQogICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlciIsIG91dCBzdHJpbmcgdXNlcik7DQogICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJJZCIsIG91dCBzdHJpbmcgdXNlcklkKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlck5hbWUiLCBvdXQgc3RyaW5nIHVzZXJOYW1lKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygicmF3SW5wdXQiLCBvdXQgc3RyaW5nIHJhd0lucHV0KTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygiY29tbWFuZCIsIG91dCBzdHJpbmcgY29tbWFuZCk7DQogICAgICAgIENQSC5UcnlHZXRBcmcoImlzTW9kZXJhdG9yIiwgb3V0IGJvb2wgaXNNb2RlcmF0b3IpOw0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJpc1ZpcCIsIG91dCBib29sIGlzVmlwKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygiaXNTdWJzY3JpYmVkIiwgb3V0IGJvb2wgaXNTdWJzY3JpYmVkKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBzdHJpbmcganNvbiA9IENQSC5HZXRHbG9iYWxWYXI8c3RyaW5nPigidGF3bWFlX01PRF9UT09MU19DdXN0b21fQ29tbWFuZHMiLCB0cnVlKSA/PyAiW10iOw0KICAgICAgICB2YXIgYXJyID0gSkFycmF5LlBhcnNlKGpzb24pOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHZhciBwYXJ0cyA9IChyYXdJbnB1dCA/PyAiIikuU3BsaXQobmV3W10geyAnICcgfSwgU3RyaW5nU3BsaXRPcHRpb25zLlJlbW92ZUVtcHR5RW50cmllcyk7DQogICAgICAgIHN0cmluZyBjbWROYW1lID0gcGFydHNbMF07DQogICAgICAgIHZhciBlbnRyeSA9IGFyci5DYXN0PEpPYmplY3Q+KCkuRmlyc3RPckRlZmF1bHQobyA9PiBzdHJpbmcuRXF1YWxzKG9bImNvbW1hbmROYW1lIl0/LlRvU3RyaW5nKCksIGNtZE5hbWUsIFN0cmluZ0NvbXBhcmlzb24uT3JkaW5hbElnbm9yZUNhc2UpKTsNCiAgICAgICAgaWYgKGVudHJ5ID09IG51bGwpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIGJvb2wgbW9kT25seSA9IGVudHJ5WyJtb2RPbmx5Il0/LlRvT2JqZWN0PGJvb2w+KCkgPz8gZmFsc2U7DQogICAgICAgIGJvb2wgdmlwT25seSA9IGVudHJ5WyJ2aXBPbmx5Il0/LlRvT2JqZWN0PGJvb2w+KCkgPz8gZmFsc2U7DQogICAgICAgIGJvb2wgc3ViT25seSA9IGVudHJ5WyJzdWJPbmx5Il0/LlRvT2JqZWN0PGJvb2w+KCkgPz8gZmFsc2U7DQogICAgICAgIGlmICghaXNNb2RlcmF0b3IgJiYgKChtb2RPbmx5ICYmICFpc01vZGVyYXRvcikgfHwgKHZpcE9ubHkgJiYgIWlzVmlwKSB8fCAoc3ViT25seSAmJiAhaXNTdWJzY3JpYmVkKSkpDQogICAgICAgIHsNCiAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VDdXN0b21Db21tYW5kc05vUGVybWlzc2lvbi5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIlY29tbWFuZE5hbWUlIiwgY21kTmFtZSkpOw0KICAgICAgICAgICAgUG9zdFRvTG9nKCQiUGVybWlzc2lvbiBkZW5pZWQgZm9yICd7Y21kTmFtZX0nIGFuZCB1c2VyICd7dXNlcn0nLiIpOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCg0KICAgICAgICBpbnQgZ2xvYmFsQ2QgPSBlbnRyeVsiY29tbWFuZEdsb2JhbENvb2xkb3duIl0/LlRvT2JqZWN0PGludD4oKSA/PyAwOw0KICAgICAgICBpbnQgdXNlckNkID0gZW50cnlbImNvbW1hbmRVc2VyQ29vbGRvd24iXT8uVG9PYmplY3Q8aW50PigpID8/IDA7DQogICAgICAgIHZhciBub3cgPSBEYXRlVGltZS5VdGNOb3c7DQogICAgICAgIGludCByZW1HbG9iYWwgPSAwLCByZW1Vc2VyID0gMDsNCiAgICAgICAgaWYgKCFpc01vZGVyYXRvcikNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKGdsb2JhbENkID4gMCAmJiBfZ2xvYmFsTGFzdFVzZS5UcnlHZXRWYWx1ZShjbWROYW1lLCBvdXQgdmFyIGxhc3RHKSkNCiAgICAgICAgICAgICAgICByZW1HbG9iYWwgPSBNYXRoLk1heCgwLCBnbG9iYWxDZCAtIChpbnQpKG5vdyAtIGxhc3RHKS5Ub3RhbFNlY29uZHMpOw0KICAgICAgICAgICAgaWYgKHVzZXJDZCA+IDApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKCFfdXNlckxhc3RVc2UuQ29udGFpbnNLZXkoY21kTmFtZSkpDQogICAgICAgICAgICAgICAgICAgIF91c2VyTGFzdFVzZVtjbWROYW1lXSA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgRGF0ZVRpbWU+KCk7DQogICAgICAgICAgICAgICAgdmFyIHVkID0gX3VzZXJMYXN0VXNlW2NtZE5hbWVdOw0KICAgICAgICAgICAgICAgIGlmICh1ZC5UcnlHZXRWYWx1ZSh1c2VySWQsIG91dCB2YXIgbGFzdFUpKQ0KICAgICAgICAgICAgICAgICAgICByZW1Vc2VyID0gTWF0aC5NYXgoMCwgdXNlckNkIC0gKGludCkobm93IC0gbGFzdFUpLlRvdGFsU2Vjb25kcyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoIWlzTW9kZXJhdG9yICYmIChyZW1HbG9iYWwgPiAwIHx8IHJlbVVzZXIgPiAwKSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKHJlbUdsb2JhbCA+PSByZW1Vc2VyKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VDdXN0b21Db21tYW5kc0dsb2JhbENvb2xkb3duLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVnbG9iYWxDb29sZG93biUiLCByZW1HbG9iYWwuVG9TdHJpbmcoKSkuUmVwbGFjZSgiJWNvbW1hbmROYW1lJSIsIGNtZE5hbWUpKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJHbG9iYWwgY29vbGRvd24gYWN0aXZlIGZvciAne2NtZE5hbWV9Jywge3JlbUdsb2JhbH1zIHJlbWFpbmluZy4iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBSZXBseVRvQ2hhdChtZXNzYWdlQ3VzdG9tQ29tbWFuZHNVc2VyQ29vbGRvd24uUmVwbGFjZSgiJXVzZXIlIiwgdXNlcikuUmVwbGFjZSgiJXVzZXJDb29sZG93biUiLCByZW1Vc2VyLlRvU3RyaW5nKCkpLlJlcGxhY2UoIiVjb21tYW5kTmFtZSUiLCBjbWROYW1lKSk7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiVXNlciBjb29sZG93biBhY3RpdmUgZm9yICd7Y21kTmFtZX0nIGFuZCB1c2VyICd7dXNlcn0nLCB7cmVtVXNlcn1zIHJlbWFpbmluZy4iKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIGJvb2wgaXNDb3VudGVyID0gZW50cnlbImlzQ291bnRlciJdPy5Ub09iamVjdDxib29sPigpID8/IGZhbHNlOw0KICAgICAgICBpbnQgY291bnQgPSBlbnRyeVsiY291bnQiXT8uVG9PYmplY3Q8aW50PigpID8/IDA7DQogICAgICAgIGJvb2wgZWRpdEFjdGlvbiA9IHBhcnRzLkxlbmd0aCA+IDEgJiYgaXNDb3VudGVyOw0KICAgICAgICBpZiAoZWRpdEFjdGlvbikNCiAgICAgICAgew0KICAgICAgICAgICAgYm9vbCBjRWRpdE1vZHMgPSBlbnRyeVsiY291bnRlckVkaXRNb2RzT25seSJdPy5Ub09iamVjdDxib29sPigpID8/IGZhbHNlOw0KICAgICAgICAgICAgYm9vbCBjRWRpdFZpcHMgPSBlbnRyeVsiY291bnRlckVkaXRWaXBzT25seSJdPy5Ub09iamVjdDxib29sPigpID8/IGZhbHNlOw0KICAgICAgICAgICAgYm9vbCBjRWRpdFN1YnMgPSBlbnRyeVsiY291bnRlckVkaXRTdWJzT25seSJdPy5Ub09iamVjdDxib29sPigpID8/IGZhbHNlOw0KICAgICAgICAgICAgYm9vbCByZXF1aXJlc0FueSA9IGNFZGl0TW9kcyB8fCBjRWRpdFZpcHMgfHwgY0VkaXRTdWJzOw0KICAgICAgICAgICAgYm9vbCBoYXNQZXJtID0gaXNNb2RlcmF0b3IgfHwgKGNFZGl0TW9kcyAmJiBpc01vZGVyYXRvcikgfHwgKGNFZGl0VmlwcyAmJiBpc1ZpcCkgfHwgKGNFZGl0U3VicyAmJiBpc1N1YnNjcmliZWQpOw0KICAgICAgICAgICAgaWYgKHJlcXVpcmVzQW55ICYmICFoYXNQZXJtKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KG1lc3NhZ2VDdXN0b21Db21tYW5kc0NvdW50ZXJFZGl0Tm9QZXJtaXNzaW9uLlJlcGxhY2UoIiV1c2VyJSIsIHVzZXIpLlJlcGxhY2UoIiVjb21tYW5kTmFtZSUiLCBjbWROYW1lKSk7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiQ291bnRlciBlZGl0IGRlbmllZCBmb3IgJ3tjbWROYW1lfScgYW5kIHVzZXIgJ3t1c2VyfScuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBzdHJpbmcgdGFyZ2V0VXNlciA9IG51bGw7DQogICAgICAgIGlmIChwYXJ0cy5MZW5ndGggPiAxKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgbWVudGlvbiA9IHBhcnRzLlNraXAoMSkuRmlyc3RPckRlZmF1bHQocCA9PiBwLlN0YXJ0c1dpdGgoIkAiKSk7DQogICAgICAgICAgICBpZiAobWVudGlvbiAhPSBudWxsKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRhcmdldFVzZXIgPSBtZW50aW9uLlN1YnN0cmluZygxKTsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJQYXJzZWQgdGFyZ2V0VXNlcjoge3RhcmdldFVzZXJ9Iik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBzdHJpbmcgcmVzcG9uc2U7DQogICAgICAgIGlmIChpc0NvdW50ZXIpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChwYXJ0cy5MZW5ndGggPT0gMSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJDb3VudGVyICd7Y21kTmFtZX0nIHJlYWQ6IHtjb3VudH0iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgYXJnID0gcGFydHNbMV07DQogICAgICAgICAgICAgICAgaWYgKGFyZy5TdGFydHNXaXRoKCIrIikpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpbnQgZGVsdGEgPSBhcmcgPT0gIisiID8gMSA6IGludC5QYXJzZShhcmcuU3Vic3RyaW5nKDEpKTsNCiAgICAgICAgICAgICAgICAgICAgY291bnQgKz0gZGVsdGE7DQogICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCA8IDApDQogICAgICAgICAgICAgICAgICAgICAgICBjb3VudCA9IDA7DQogICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkNvdW50ZXIgJ3tjbWROYW1lfSc6ICt7ZGVsdGF9IOKGkiB7Y291bnR9Iik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZy5TdGFydHNXaXRoKCItIikpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpbnQgZGVsdGEgPSBhcmcgPT0gIi0iID8gMSA6IGludC5QYXJzZShhcmcuU3Vic3RyaW5nKDEpKTsNCiAgICAgICAgICAgICAgICAgICAgY291bnQgLT0gZGVsdGE7DQogICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCA8IDApDQogICAgICAgICAgICAgICAgICAgICAgICBjb3VudCA9IDA7DQogICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkNvdW50ZXIgJ3tjbWROYW1lfSc6IC17ZGVsdGF9IOKGkiB7Y291bnR9Iik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZy5FcXVhbHMoInNldCIsIFN0cmluZ0NvbXBhcmlzb24uT3JkaW5hbElnbm9yZUNhc2UpICYmIHBhcnRzLkxlbmd0aCA+IDIpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpbnQgdmFsID0gaW50LlBhcnNlKHBhcnRzWzJdKTsNCiAgICAgICAgICAgICAgICAgICAgY291bnQgPSB2YWwgPCAwID8gMCA6IHZhbDsNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiQ291bnRlciAne2NtZE5hbWV9Jzogc2V0IOKGkiB7Y291bnR9Iik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIFJlcGx5VG9DaGF0KCQiQHt1c2VyfSwgaW52YWxpZCBjb3VudGVyIGZvcm1hdC4gRXhhbXBsZTogJ3tjbWROYW1lfSArMScgb3IgJ3tjbWROYW1lfSAtMScgb3IgJ3tjbWROYW1lfSBzZXQgNSciKTsNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiSW52YWxpZCBjb3VudGVyIGZvcm1hdCBmb3IgJ3tjbWROYW1lfSc6ICd7cGFydHNbMV19JyIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBlbnRyeVsiY291bnQiXSA9IGNvdW50Ow0KICAgICAgICAgICAgICAgIENQSC5TZXRHbG9iYWxWYXIoInRhd21hZV9NT0RfVE9PTFNfQ3VzdG9tX0NvbW1hbmRzIiwgYXJyLlRvU3RyaW5nKCksIHRydWUpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXNwb25zZSA9IGVudHJ5WyJjb21tYW5kVmFsdWUiXT8uVG9TdHJpbmcoKS5SZXBsYWNlKCIlY291bnQlIiwgY291bnQuVG9TdHJpbmcoKSkgPz8gIiI7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICByZXNwb25zZSA9IGVudHJ5WyJjb21tYW5kVmFsdWUiXT8uVG9TdHJpbmcoKSA/PyAiIjsNCiAgICAgICAgICAgIFBvc3RUb0xvZygkIkNvbW1hbmQgJ3tjbWROYW1lfScgcmVzcG9uc2U6IHtyZXNwb25zZX0iKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgX2dsb2JhbExhc3RVc2VbY21kTmFtZV0gPSBub3c7DQogICAgICAgIGlmICghX3VzZXJMYXN0VXNlLkNvbnRhaW5zS2V5KGNtZE5hbWUpKQ0KICAgICAgICAgICAgX3VzZXJMYXN0VXNlW2NtZE5hbWVdID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBEYXRlVGltZT4oKTsNCiAgICAgICAgX3VzZXJMYXN0VXNlW2NtZE5hbWVdW3VzZXJJZF0gPSBub3c7DQogICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eSh0YXJnZXRVc2VyKSkNCiAgICAgICAgICAgIHRhcmdldFVzZXIgPSAibm9ib2R5IPCfpJQiOw0KICAgICAgICBSZXBseVRvQ2hhdChyZXNwb25zZS5SZXBsYWNlKCIldXNlciUiLCB1c2VyKS5SZXBsYWNlKCIldGFyZ2V0VXNlciUiLCB0YXJnZXRVc2VyKSk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwcml2YXRlIHZvaWQgR2V0RXh0ZW5zaW9uSW5mbygpDQogICAgew0KICAgICAgICBpZiAoZXh0ZW5zaW9uTmFtZSA9PSBudWxsIHx8IGV4dGVuc2lvblZlcnNpb24gPT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgQ1BILkV4ZWN1dGVNZXRob2QoIk1PRCBUT09MUyBWZXJzaW9uIENoZWNrIiwgIkV4ZWN1dGUiKTsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoImV4dGVuc2lvbk5hbWUiLCBvdXQgZXh0ZW5zaW9uTmFtZSk7DQogICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJleHRlbnNpb25WZXJzaW9uIiwgb3V0IGV4dGVuc2lvblZlcnNpb24pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lkIFBvc3RUb0xvZyhzdHJpbmcgbG9nKQ0KICAgIHsNCiAgICAgICAgQ1BILkxvZ0luZm8oJCJbe2V4dGVuc2lvbk5hbWV9IHYue2V4dGVuc2lvblZlcnNpb259XSBbQ1VTVE9NIENPTU1BTkRTXSB7bG9nfSIpOw0KICAgIH0NCg0KICAgIHByaXZhdGUgdm9pZCBSZXBseVRvQ2hhdChzdHJpbmcgdGV4dCkNCiAgICB7DQogICAgICAgIGlmICh0ZXh0ICE9ICItIikNCiAgICAgICAgew0KICAgICAgICAgICAgaW50IG1heExlbmd0aCA9IDQ4MDsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoIm1zZ0lkIiwgb3V0IHN0cmluZyByZXBseUlkKTsNCiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdGV4dC5MZW5ndGg7IGkgKz0gbWF4TGVuZ3RoKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHN0cmluZyBwYXJ0ID0gdGV4dC5TdWJzdHJpbmcoaSwgTWF0aC5NaW4obWF4TGVuZ3RoLCB0ZXh0Lkxlbmd0aCAtIGkpKTsNCiAgICAgICAgICAgICAgICBDUEguU2VuZE1lc3NhZ2UocGFydCk7DQogICAgICAgICAgICAgICAgQ1BILldhaXQoMTUwKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIGV4dGVuc2lvbk5hbWUgPSBudWxsOw0KICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIGV4dGVuc2lvblZlcnNpb24gPSBudWxsOw0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwcml2YXRlIFRhd21hZSB1aTsNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlQ3VzdG9tQ29tbWFuZHNHbG9iYWxDb29sZG93biA9ICJAJXVzZXIlLCAnJWNvbW1hbmROYW1lJScgaXMgc3RpbGwgb24gY29vbGRvd24gZm9yICVnbG9iYWxDb29sZG93biUgc2Vjb25kcy4iOw0KICAgIHB1YmxpYyBzdHJpbmcgbWVzc2FnZUN1c3RvbUNvbW1hbmRzVXNlckNvb2xkb3duID0gIkAldXNlciUsICclY29tbWFuZE5hbWUlJyBpcyBzdGlsbCBvbiBjb29sZG93biBmb3IgJXVzZXJDb29sZG93biUgc2Vjb25kcyBmb3IgeW91LiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlQ3VzdG9tQ29tbWFuZHNOb1Blcm1pc3Npb24gPSAiQCV1c2VyJSwgeW91IGRvbid0IGhhdmUgcGVybWlzc2lvbiB0byB1c2UgJyVjb21tYW5kTmFtZSUnLiI7DQogICAgcHVibGljIHN0cmluZyBtZXNzYWdlQ3VzdG9tQ29tbWFuZHNDb3VudGVyRWRpdE5vUGVybWlzc2lvbiA9ICJAJXVzZXIlLCB5b3UgZG9uJ3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGVkaXQgdGhlIGNvdW50ZXIgZm9yICclY29tbWFuZE5hbWUlJy4iOw0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwcml2YXRlIHN0YXRpYyBEaWN0aW9uYXJ5PHN0cmluZywgRGF0ZVRpbWU+IF9nbG9iYWxMYXN0VXNlID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBEYXRlVGltZT4oKTsNCiAgICBwcml2YXRlIHN0YXRpYyBEaWN0aW9uYXJ5PHN0cmluZywgRGljdGlvbmFyeTxzdHJpbmcsIERhdGVUaW1lPj4gX3VzZXJMYXN0VXNlID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBEaWN0aW9uYXJ5PHN0cmluZywgRGF0ZVRpbWU+PigpOw0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwcml2YXRlIHZvaWQgRmV0Y2hTZXR0aW5ncygpDQogICAgew0KICAgICAgICB1aSA9IG5ldyBUYXdtYWUoQ1BILCBleHRlbnNpb25OYW1lLCBleHRlbnNpb25WZXJzaW9uLCBmYWxzZSk7DQogICAgICAgIG1lc3NhZ2VDdXN0b21Db21tYW5kc0dsb2JhbENvb2xkb3duID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlQ3VzdG9tQ29tbWFuZHNHbG9iYWxDb29sZG93biIpID8/IG1lc3NhZ2VDdXN0b21Db21tYW5kc0dsb2JhbENvb2xkb3duOw0KICAgICAgICBtZXNzYWdlQ3VzdG9tQ29tbWFuZHNVc2VyQ29vbGRvd24gPSB1aS5HZXRWYWx1ZTxzdHJpbmc/PihleHRlbnNpb25OYW1lLCAibW9kX3Rvb2xzX21lc3NhZ2VDdXN0b21Db21tYW5kc1VzZXJDb29sZG93biIpID8/IG1lc3NhZ2VDdXN0b21Db21tYW5kc1VzZXJDb29sZG93bjsNCiAgICAgICAgbWVzc2FnZUN1c3RvbUNvbW1hbmRzTm9QZXJtaXNzaW9uID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlQ3VzdG9tQ29tbWFuZHNOb1Blcm1pc3Npb24iKSA/PyBtZXNzYWdlQ3VzdG9tQ29tbWFuZHNOb1Blcm1pc3Npb247DQogICAgICAgIG1lc3NhZ2VDdXN0b21Db21tYW5kc0NvdW50ZXJFZGl0Tm9QZXJtaXNzaW9uID0gdWkuR2V0VmFsdWU8c3RyaW5nPz4oZXh0ZW5zaW9uTmFtZSwgIm1vZF90b29sc19tZXNzYWdlQ3VzdG9tQ29tbWFuZHNDb3VudGVyRWRpdE5vUGVybWlzc2lvbiIpID8/IG1lc3NhZ2VDdXN0b21Db21tYW5kc0NvdW50ZXJFZGl0Tm9QZXJtaXNzaW9uOw0KICAgIH0NCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCn0=",
                                "precompile": false,
                                "delayStart": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "f362870c-1ace-4369-be8d-609f071f6324",
                                "weight": 0.0,
                                "type": 99999,
                                "parentId": "62cee892-20e3-47c7-a195-3159d76ec9b7",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "62cee892-20e3-47c7-a195-3159d76ec9b7",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    }
                ],
                "collapsedGroups": []
            },
            {
                "id": "0bcf9f29-ec5f-4eda-8ad9-57bfc3422189",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 1 - Set Channel Title",
                "group": "MOD TOOLS - Channel Management",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "08d26e53-ad50-472c-8f1f-5bc75fe62367",
                        "id": "878557ce-aafb-4cf8-ab95-0a7d96dbc10e",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!setTitle [Title]",
                        "color": "#80FFFF",
                        "id": "defbb501-e399-459d-80c7-2b7d645070a0",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "0065e4ba-db3b-4048-bf79-e49fe3099c41",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "e96459a9-5565-4c31-b5dd-e9510333c0b2",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "SetChannelTitle",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "ccac95fb-ee05-4703-b035-bc79a0afba66",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "e96459a9-5565-4c31-b5dd-e9510333c0b2",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "e96459a9-5565-4c31-b5dd-e9510333c0b2",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "e96459a9-5565-4c31-b5dd-e9510333c0b2"
                ]
            },
            {
                "id": "9a0fc5d7-672b-4980-8f00-d2fe533bc7c8",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 3 - Add Channel Tag",
                "group": "MOD TOOLS - Channel Management",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "b0724a5b-a33b-488b-aaec-56ed2527b069",
                        "id": "1de07fc5-5d64-44a5-93f0-4fcb8a1bd230",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!addTag [Tag]",
                        "color": "#80FFFF",
                        "id": "5f945724-6b28-414f-8d3e-6d3e5446f27c",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "25e4bbd0-214e-4d38-9a1b-4aab4cc709da",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "2a00d0f3-2a14-41b4-b7db-a5f4c506ee6d",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "AddChannelTag",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "de8a201b-abc9-4451-9731-c1717c510ac3",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "2a00d0f3-2a14-41b4-b7db-a5f4c506ee6d",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "2a00d0f3-2a14-41b4-b7db-a5f4c506ee6d",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "2a00d0f3-2a14-41b4-b7db-a5f4c506ee6d"
                ]
            },
            {
                "id": "d24611d5-2ab3-4281-8589-ca2885a8d995",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 4 - Remove Channel Tag",
                "group": "MOD TOOLS - Channel Management",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "de05d21d-b99a-466d-b5f3-5be7314ca559",
                        "id": "e3440295-6a8b-4ba7-9266-5cfc8a57d43c",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!removeTag [Tag]",
                        "color": "#80FFFF",
                        "id": "6a2f6cb9-2f02-4143-8ffd-edc0dac56ccf",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "a573c2ba-0134-4bec-b7cd-66cbd6ef93a7",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "a04b5754-2fd7-42c6-bdb2-523238c7ffe1",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "RemoveChannelTag",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "3dbe9591-47c6-466e-9f67-bb8d35eac1ea",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "a04b5754-2fd7-42c6-bdb2-523238c7ffe1",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "a04b5754-2fd7-42c6-bdb2-523238c7ffe1",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "a04b5754-2fd7-42c6-bdb2-523238c7ffe1"
                ]
            },
            {
                "id": "1f310a5a-b8e0-4209-8308-62f382fdab54",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 1 - Translate Message",
                "group": "MOD TOOLS - Chat Management",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "5bb85303-384a-4465-8c97-a55a0bc0a208",
                        "id": "ac8b7929-3b8e-40ab-a0d4-8b14dcea1cf8",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!translate [Text]",
                        "color": "#80FFFF",
                        "id": "ab7c9089-1db9-4687-b492-ea4aa438ac6f",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "value": "You can also reply to a message and just type '!translate' to translate the entire message.",
                        "color": "#80FFFF",
                        "id": "aa919d43-1701-4637-9692-b03f67cf6b13",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "d2b20b2f-7e37-4d04-843c-96a0d19464e0",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "c8e98793-66e6-4fe8-83b2-38fb00c2e214",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "TranslateChatMessage",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "66e52bae-2ae8-4f45-895e-8a4cca7cf356",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "c8e98793-66e6-4fe8-83b2-38fb00c2e214",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "c8e98793-66e6-4fe8-83b2-38fb00c2e214",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 2
                    }
                ],
                "collapsedGroups": [
                    "c8e98793-66e6-4fe8-83b2-38fb00c2e214"
                ]
            },
            {
                "id": "0ddf6b2c-6217-46f2-8d77-a1875b2fe1d1",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 2 - Timeout User",
                "group": "MOD TOOLS - Chat Management",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "16055fd0-1395-4af8-bfa6-a501edbbe112",
                        "id": "91c49b2d-29eb-4ac8-a9d2-3213346332b0",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!timeout [Username] <Duration>",
                        "color": "#80FFFF",
                        "id": "ab2663a9-2ddc-4a1c-901d-9bdf280f0127",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "value": "The duration needs to be in angled brackets. In seconds by default, but accepts timecodes like '5min'",
                        "color": "#80FFFF",
                        "id": "38a96f91-c5c9-4044-acbc-e5a59560879a",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    },
                    {
                        "value": "!timeout [Username] <15min>",
                        "color": "#80FFFF",
                        "id": "e122f2d5-d2de-4340-9a18-3a4e80c8cfad",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 2
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "1e223090-66d8-40e1-ad08-a38497b7c3bf",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "9c150769-c54d-468f-9909-5d2d35928c7b",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "TimeoutUser",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "dc76b72e-a0a8-4a12-8f67-4eb981e78ba7",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "9c150769-c54d-468f-9909-5d2d35928c7b",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "9c150769-c54d-468f-9909-5d2d35928c7b",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 3
                    }
                ],
                "collapsedGroups": [
                    "9c150769-c54d-468f-9909-5d2d35928c7b"
                ]
            },
            {
                "id": "3e7edfca-d58b-4c1d-9d7b-63ddf791d9e5",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 3 - Ban User",
                "group": "MOD TOOLS - Chat Management",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "66b9879e-165f-43a9-bc0a-b22e00d74ab9",
                        "id": "d84fd130-f70a-4393-beb4-111df1fdba0f",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!ban [Username]",
                        "color": "#80FFFF",
                        "id": "c7d2a29c-66c1-49c3-8da4-73563edf9938",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "149d3392-ac75-4d53-9ba2-f537ecd34e6a",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "48628ff7-798b-421c-b149-2766990b23fa",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "BanUser",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "0d731a94-d958-495b-b510-feeecb9c83c0",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "48628ff7-798b-421c-b149-2766990b23fa",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "48628ff7-798b-421c-b149-2766990b23fa",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "48628ff7-798b-421c-b149-2766990b23fa"
                ]
            },
            {
                "id": "bb3b55cb-d191-48c4-919e-4c1ef6a509cf",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": true,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] [#] 3 - Localized Names Mapping",
                "group": "MOD TOOLS - # Settings",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "username": null,
                        "isUserId": false,
                        "id": "b705c7a5-1c64-44f1-92f1-31c090cf920b",
                        "type": 120,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "2e723bab-9e50-42b8-9df0-23048358f8a4",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "5f7f9dfb-3cf3-4511-b7a7-d272411b8e82",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "name": "[MOD TOOLS] Localized Names Mapping",
                                "description": null,
                                "references": [
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\mscorlib.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.dll",
                                    ".\\dlls\\TawmaeUI.dll"
                                ],
                                "byteCode": "dXNpbmcgU3lzdGVtOw0KdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7DQp1c2luZyBUYXdtYWVVSTsNCg0KcHVibGljIGNsYXNzIENQSElubGluZQ0Kew0KICAgIHB1YmxpYyBib29sIEV4ZWN1dGUoKQ0KICAgIHsNCiAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZiAoIVNoYXJlZENoYXRDaGVjaygpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VyIiwgb3V0IHN0cmluZyB1c2VyKTsNCiAgICAgICAgQ1BILlRyeUdldEFyZygidXNlck5hbWUiLCBvdXQgc3RyaW5nIHVzZXJOYW1lKTsNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB2YXIgbG9jYWxpemVkTmFtZXNNYXAgPSBDUEguR2V0R2xvYmFsVmFyPERpY3Rpb25hcnk8c3RyaW5nLCBzdHJpbmc+PigidGF3bWFlX01PRF9UT09MU19Mb2NhbGl6ZWRfTmFtZXNfTWFwIiwgdHJ1ZSkgPz8gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBzdHJpbmc+KCk7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgaWYgKHVzZXJOYW1lICE9IHVzZXIuVG9Mb3dlcigpKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoIWxvY2FsaXplZE5hbWVzTWFwLkNvbnRhaW5zS2V5KHVzZXIpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGxvY2FsaXplZE5hbWVzTWFwW3VzZXJdID0gdXNlck5hbWU7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiQWRkZWQgJ3t1c2VyfScgKCd7dXNlck5hbWV9JykgdG8gbG9jYWxpemVkIG5hbWUgbWFwLiIpOw0KICAgICAgICAgICAgICAgIENQSC5TZXRHbG9iYWxWYXIoInRhd21hZV9NT0RfVE9PTFNfTG9jYWxpemVkX05hbWVzX01hcCIsIGxvY2FsaXplZE5hbWVzTWFwLCB0cnVlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKGxvY2FsaXplZE5hbWVzTWFwW3VzZXJdICE9IHVzZXJOYW1lKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGxvY2FsaXplZE5hbWVzTWFwW3VzZXJdID0gdXNlck5hbWU7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiVXBkYXRlZCAne3VzZXJ9JyAoJ3t1c2VyTmFtZX0nKSB0byBsb2NhbGl6ZWQgbmFtZSBtYXAuIik7DQogICAgICAgICAgICAgICAgQ1BILlNldEdsb2JhbFZhcigidGF3bWFlX01PRF9UT09MU19Mb2NhbGl6ZWRfTmFtZXNfTWFwIiwgbG9jYWxpemVkTmFtZXNNYXAsIHRydWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBwcml2YXRlIHZvaWQgR2V0RXh0ZW5zaW9uSW5mbygpDQogICAgew0KICAgICAgICBpZiAoZXh0ZW5zaW9uTmFtZSA9PSBudWxsIHx8IGV4dGVuc2lvblZlcnNpb24gPT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgQ1BILkV4ZWN1dGVNZXRob2QoIk1PRCBUT09MUyBWZXJzaW9uIENoZWNrIiwgIkV4ZWN1dGUiKTsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoImV4dGVuc2lvbk5hbWUiLCBvdXQgZXh0ZW5zaW9uTmFtZSk7DQogICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJleHRlbnNpb25WZXJzaW9uIiwgb3V0IGV4dGVuc2lvblZlcnNpb24pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHJpdmF0ZSBib29sIFNoYXJlZENoYXRDaGVjaygpDQogICAgew0KICAgICAgICBpZiAoQ1BILlRyeUdldEFyZygiaXNJblNoYXJlZENoYXQiLCBvdXQgYm9vbCBpc0luU2hhcmVkQ2hhdCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoImlzRnJvbVNoYXJlZENoYXRHdWVzdCIsIG91dCBib29sIGlzRnJvbVNoYXJlZENoYXRHdWVzdCk7DQogICAgICAgICAgICBpZiAoaXNGcm9tU2hhcmVkQ2hhdEd1ZXN0ICYmIGlnbm9yZVNoYXJlZENoYXQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiQWN0aW9uIGhhcHBlbmVkIGluIHNoYXJlZCBndWVzdCBjaGF0IHdpdGggaWdub3Jpbmcgc2hhcmVkIGNoYXQgc2V0IHRvIFRydWUuIEFib3J0aW5nLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKGlzRnJvbVNoYXJlZENoYXRHdWVzdCAmJiAhaWdub3JlU2hhcmVkQ2hhdCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJBY3Rpb24gaGFwcGVuZWQgaW4gc2hhcmVkIGd1ZXN0IGNoYXQgd2l0aCBpZ25vcmluZyBzaGFyZWQgY2hhdCBzZXQgdG8gRmFsc2UuIENvbnRpbnVlaW5nLi4uIik7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBwcml2YXRlIHZvaWQgUG9zdFRvTG9nKHN0cmluZyBsb2cpDQogICAgew0KICAgICAgICBDUEguTG9nSW5mbygkIlt7ZXh0ZW5zaW9uTmFtZX0gdi57ZXh0ZW5zaW9uVmVyc2lvbn1dIFtMT0NBTElaRUQgTkFNRVMgTUFQUElOR10ge2xvZ30iKTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBleHRlbnNpb25OYW1lID0gbnVsbDsNCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBleHRlbnNpb25WZXJzaW9uID0gbnVsbDsNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBicm9hZGNhc3RlclVzZXIgPSBudWxsOw0KICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIGJyb2FkY2FzdGVyVXNlck5hbWUgPSBudWxsOw0KICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIGJyb2FkY2FzdGVyVXNlcklkID0gbnVsbDsNCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBib3RVc2VyID0gbnVsbDsNCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBib3RVc2VyTmFtZSA9IG51bGw7DQogICAgcHVibGljIHN0YXRpYyBzdHJpbmcgYm90VXNlcklkID0gbnVsbDsNCiAgICBwdWJsaWMgc3RhdGljIGJvb2wgaGFzQm90ID0gZmFsc2U7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHJpdmF0ZSBUYXdtYWVVSS5UYXdtYWUgdWk7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgaWdub3JlU2hhcmVkQ2hhdCA9IHRydWU7DQogICAgcHJpdmF0ZSB2b2lkIEZldGNoU2V0dGluZ3MoKQ0KICAgIHsNCiAgICAgICAgdWkgPSBuZXcgVGF3bWFlKENQSCwgZXh0ZW5zaW9uTmFtZSwgZXh0ZW5zaW9uVmVyc2lvbiwgZmFsc2UpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZ25vcmVTaGFyZWRDaGF0ID0gdWkuR2V0VmFsdWU8Ym9vbD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfaWdub3JlU2hhcmVkQ2hhdCIpID8/IGlnbm9yZVNoYXJlZENoYXQ7DQogICAgfQ0KfQ==",
                                "precompile": false,
                                "delayStart": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "34364043-5264-4031-88d8-b734a7d11ff8",
                                "weight": 0.0,
                                "type": 99999,
                                "parentId": "5f7f9dfb-3cf3-4511-b7a7-d272411b8e82",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "5f7f9dfb-3cf3-4511-b7a7-d272411b8e82",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    }
                ],
                "collapsedGroups": [
                    "5f7f9dfb-3cf3-4511-b7a7-d272411b8e82"
                ]
            },
            {
                "id": "4ff642f5-39d9-414d-a07a-f60241e42157",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 2 - Set Game",
                "group": "MOD TOOLS - Channel Management",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "a863491c-b49c-4291-ae7b-f4e17fe12264",
                        "id": "3016313b-9a6c-449f-8053-6113dff67938",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!setGame [Game]",
                        "color": "#80FFFF",
                        "id": "830fad9e-d86b-48f1-a85a-95ab44243e8a",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "706ad42e-10be-441a-b8f2-ce03872c34fd",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "2c85a548-31ed-4487-8030-34751db4de53",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "SetChannelGame",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "0e2f28a1-048f-463f-a20f-acd90d026441",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "2c85a548-31ed-4487-8030-34751db4de53",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "2c85a548-31ed-4487-8030-34751db4de53",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "2c85a548-31ed-4487-8030-34751db4de53"
                ]
            },
            {
                "id": "4ba3c55c-a68b-40fd-93a0-caa2d0510d6c",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": true,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] [#] 4 - New Chatters Monitoring",
                "group": "MOD TOOLS - # Settings",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "username": null,
                        "isUserId": false,
                        "id": "89fec824-b436-42ec-bce9-a131aebe18c5",
                        "type": 120,
                        "enabled": true,
                        "exclusions": []
                    },
                    {
                        "id": "f6ec6d40-72ea-400e-91d1-ebf8b6904242",
                        "type": 137,
                        "enabled": true,
                        "exclusions": []
                    },
                    {
                        "id": "bfefb8b5-7ed6-4d2a-ac3c-4b03a9ce049f",
                        "type": 191,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "deb748ee-12ff-47e4-b5ac-e49efeccd7fc",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "25d1f17e-8274-4ce1-99db-8852adacd1ec",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "name": "[MOD TOOLS] New Chatters Monitoring",
                                "description": null,
                                "references": [
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\mscorlib.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.dll",
                                    ".\\Newtonsoft.Json.dll",
                                    ".\\dlls\\TawmaeUI.dll"
                                ],
                                "byteCode": "dXNpbmcgU3lzdGVtOw0KdXNpbmcgTmV3dG9uc29mdC5Kc29uLkxpbnE7DQp1c2luZyBUYXdtYWVVSTsNCg0KcHVibGljIGNsYXNzIENQSElubGluZQ0Kew0KICAgIHB1YmxpYyBib29sIEV4ZWN1dGUoKQ0KICAgIHsNCiAgICAgICAgbG9jayAoX2xvY2spDQogICAgICAgIHsNCiAgICAgICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgRmV0Y2hTZXR0aW5ncygpOw0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIGlmICghU2hhcmVkQ2hhdENoZWNrKCkpDQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIEV2ZW50VHlwZSBldmVudHR5cGUgPSBDUEguR2V0RXZlbnRUeXBlKCk7DQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIHVzZXIpOw0KICAgICAgICAgICAgQ1BILlRyeUdldEFyZygidXNlck5hbWUiLCBvdXQgc3RyaW5nIHVzZXJOYW1lKTsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJJZCIsIG91dCBzdHJpbmcgdXNlcklkKTsNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgR2V0QnJvYWRjYXN0ZXJBbmRCb3QoKTsNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgaWYgKGV2ZW50dHlwZSA9PSBFdmVudFR5cGUuVHdpdGNoRmlyc3RXb3JkKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmICh1c2VySWQgPT0gYm90VXNlcklkIHx8IHVzZXJJZCA9PSBicm9hZGNhc3RlclVzZXJJZCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygiU2tpcHBpbmcsIGJlY2F1c2UgdXNlciBpcyBicm9hZGNhc3RlciBvciBib3QuIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJmaXJzdE1lc3NhZ2UiLCBvdXQgYm9vbCBmaXJzdE1lc3NhZ2UpOw0KICAgICAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgIGJvb2wgaGFzQmVlbkNoZWNrZWQgPSBDUEguR2V0VHdpdGNoVXNlclZhckJ5SWQ8Ym9vbD4odXNlcklkLCAidGF3bWFlX01PRF9UT09MU19OZXdfQ2hhdHRlcnNfTW9uaXRvcmluZ19oYXNCZWVuQ2hlY2tlZCIsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICBpZiAoaGFzQmVlbkNoZWNrZWQpDQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgICAgICB2YXIgdXNlckluZm8gPSBDUEguVHdpdGNoR2V0RXh0ZW5kZWRVc2VySW5mb0J5SWQodXNlcklkKTsNCiAgICAgICAgICAgICAgICBpbnQgYWNjb3VudEFnZURheXMgPSAoaW50KXVzZXJJbmZvLkFjY291bnRBZ2UgLyA4NjQwMDsNCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgICAgICB2YXIgbmV3Q2hhdHRlcnNKc29uID0gQ1BILkdldEdsb2JhbFZhcjxzdHJpbmc/PigidGF3bWFlX01PRF9UT09MU19OZXdfQ2hhdHRlcnNfTW9uaXRvcmluZyIsIGZhbHNlKSA/PyAie30iOw0KICAgICAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgIGlmIChuZXdDaGF0dGVyc0pzb24gPT0gInt9IikNCiAgICAgICAgICAgICAgICAgICAgQ1BILlNldEdsb2JhbFZhcigidGF3bWFlX01PRF9UT09MU19OZXdfQ2hhdHRlcnNfTW9uaXRvcmluZyIsICJ7fSIsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgICAgICB2YXIgbmV3Q2hhdHRlcnMgPSBKT2JqZWN0LlBhcnNlKG5ld0NoYXR0ZXJzSnNvbik7DQogICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICAgICAgaWYgKGZpcnN0TWVzc2FnZSB8fCBhY2NvdW50QWdlRGF5cyA8PSA5MCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhciBlbnRyeSA9IG5ldyBKT2JqZWN0DQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFsidXNlciJdID0gdXNlciwNCiAgICAgICAgICAgICAgICAgICAgICAgIFsidXNlck5hbWUiXSA9IHVzZXJOYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgWyJ1c2VySWQiXSA9IHVzZXJJZCwNCiAgICAgICAgICAgICAgICAgICAgICAgIFsiUHJvZmlsZUltYWdlVXJsIl0gPSB1c2VySW5mby5Qcm9maWxlSW1hZ2VVcmwsDQogICAgICAgICAgICAgICAgICAgICAgICBbIm5ld0NoYXR0ZXIiXSA9IGZpcnN0TWVzc2FnZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIFsiYWNjb3VudEFnZURheXMiXSA9IGFjY291bnRBZ2VEYXlzLA0KICAgICAgICAgICAgICAgICAgICAgICAgWyJpc0Jhbm5lZCJdID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgbmV3Q2hhdHRlcnNbdXNlcklkXSA9IGVudHJ5Ow0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgIENQSC5TZXRUd2l0Y2hVc2VyVmFyQnlJZCh1c2VySWQsICJ0YXdtYWVfTU9EX1RPT0xTX05ld19DaGF0dGVyc19Nb25pdG9yaW5nX2hhc0JlZW5DaGVja2VkIiwgdHJ1ZSwgZmFsc2UpOw0KICAgICAgICAgICAgICAgIENQSC5TZXRHbG9iYWxWYXIoInRhd21hZV9NT0RfVE9PTFNfTmV3X0NoYXR0ZXJzX01vbml0b3JpbmciLCBuZXdDaGF0dGVycy5Ub1N0cmluZygpLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiQWRkZWQge3VzZXJ9ICh7dXNlck5hbWV9KSB0byB0aGUgc3VzIGxpc3QuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChldmVudHR5cGUgPT0gRXZlbnRUeXBlLlR3aXRjaFVzZXJCYW5uZWQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIG1vbml0b3JpbmdKc29uID0gQ1BILkdldEdsb2JhbFZhcjxzdHJpbmc/PigidGF3bWFlX01PRF9UT09MU19OZXdfQ2hhdHRlcnNfTW9uaXRvcmluZyIsIGZhbHNlKSA/PyAie30iOw0KICAgICAgICAgICAgICAgIHZhciBtb25pdG9yaW5nID0gSk9iamVjdC5QYXJzZShtb25pdG9yaW5nSnNvbik7DQogICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICAgICAgaWYgKCFtb25pdG9yaW5nLlRyeUdldFZhbHVlKHVzZXJJZCwgb3V0IEpUb2tlbiBlbnRyeSkpDQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgICAgICBlbnRyeVsiaXNCYW5uZWQiXSA9IHRydWU7DQogICAgICAgICAgICAgICAgQ1BILlNldEdsb2JhbFZhcigidGF3bWFlX01PRF9UT09MU19OZXdfQ2hhdHRlcnNfTW9uaXRvcmluZyIsIG1vbml0b3JpbmcuVG9TdHJpbmcoKSwgZmFsc2UpOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkFkZGVkIHt1c2VyfSdzIGlzQmFubmVkIGZsYWcuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChldmVudHR5cGUgPT0gRXZlbnRUeXBlLlR3aXRjaFVzZXJVbmJhbm5lZCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgbW9uaXRvcmluZ0pzb24gPSBDUEguR2V0R2xvYmFsVmFyPHN0cmluZz8+KCJ0YXdtYWVfTU9EX1RPT0xTX05ld19DaGF0dGVyc19Nb25pdG9yaW5nIiwgZmFsc2UpID8/ICJ7fSI7DQogICAgICAgICAgICAgICAgdmFyIG1vbml0b3JpbmcgPSBKT2JqZWN0LlBhcnNlKG1vbml0b3JpbmdKc29uKTsNCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgICAgICBpZiAoIW1vbml0b3JpbmcuVHJ5R2V0VmFsdWUodXNlcklkLCBvdXQgSlRva2VuIGVudHJ5KSkNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgIGVudHJ5WyJpc0Jhbm5lZCJdID0gZmFsc2U7DQogICAgICAgICAgICAgICAgQ1BILlNldEdsb2JhbFZhcigidGF3bWFlX01PRF9UT09MU19OZXdfQ2hhdHRlcnNfTW9uaXRvcmluZyIsIG1vbml0b3JpbmcuVG9TdHJpbmcoKSwgZmFsc2UpOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIlJlbW92ZWQge3VzZXJ9J3MgaXNCYW5uZWQgZmxhZy4iKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgICAgICBDUEguVHdpdGNoVW5iYW5Vc2VyKHVzZXJOYW1lLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiVW5iYW5uZWQge3VzZXJ9IHZpYSBzdXMgZG9jay4iKTsNCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHByaXZhdGUgdm9pZCBHZXRCcm9hZGNhc3RlckFuZEJvdCgpDQogICAgew0KICAgICAgICBpZiAoYnJvYWRjYXN0ZXJVc2VyID09IG51bGwpDQogICAgICAgIHsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiRmV0Y2hpbmcgYnJvYWRjYXN0ZXIgYW5kIGJvdCBpbmZvLi4uIik7DQogICAgICAgICAgICB2YXIgYnJvYWRjYXN0ZXJJbmZvID0gQ1BILlR3aXRjaEdldEJyb2FkY2FzdGVyKCk7DQogICAgICAgICAgICBpZiAoYnJvYWRjYXN0ZXJJbmZvICE9IG51bGwpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgYnJvYWRjYXN0ZXJVc2VyID0gYnJvYWRjYXN0ZXJJbmZvLlVzZXJOYW1lOw0KICAgICAgICAgICAgICAgIGJyb2FkY2FzdGVyVXNlck5hbWUgPSBicm9hZGNhc3RlckluZm8uVXNlckxvZ2luOw0KICAgICAgICAgICAgICAgIGJyb2FkY2FzdGVyVXNlcklkID0gYnJvYWRjYXN0ZXJJbmZvLlVzZXJJZDsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJCcm9hZGNhc3RlciBmZXRjaGVkOiB7YnJvYWRjYXN0ZXJVc2VyfSAoe2Jyb2FkY2FzdGVyVXNlck5hbWV9KSIpOw0KICAgICAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgIHZhciBib3RJbmZvID0gQ1BILlR3aXRjaEdldEJvdCgpOw0KICAgICAgICAgICAgICAgIGlmIChib3RJbmZvICE9IG51bGwpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBib3RVc2VyID0gYm90SW5mby5Vc2VyTmFtZTsNCiAgICAgICAgICAgICAgICAgICAgYm90VXNlck5hbWUgPSBib3RJbmZvLlVzZXJMb2dpbjsNCiAgICAgICAgICAgICAgICAgICAgYm90VXNlcklkID0gYm90SW5mby5Vc2VySWQ7DQogICAgICAgICAgICAgICAgICAgIGhhc0JvdCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIFBvc3RUb0xvZygkIkJvdCBmZXRjaGVkOiB7Ym90VXNlcn0gKHtib3RVc2VyTmFtZX0pIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgUG9zdFRvTG9nKCJObyBib3QgY29ubmVjdGVkLiIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygiRmFpbGVkIHRvIGZldGNoIGJyb2FkY2FzdGVyLiIpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHJpdmF0ZSBib29sIFNoYXJlZENoYXRDaGVjaygpDQogICAgew0KICAgICAgICBpZiAoQ1BILlRyeUdldEFyZygiaXNJblNoYXJlZENoYXQiLCBvdXQgYm9vbCBpc0luU2hhcmVkQ2hhdCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoImlzRnJvbVNoYXJlZENoYXRHdWVzdCIsIG91dCBib29sIGlzRnJvbVNoYXJlZENoYXRHdWVzdCk7DQogICAgICAgICAgICBpZiAoaXNGcm9tU2hhcmVkQ2hhdEd1ZXN0ICYmIGlnbm9yZVNoYXJlZENoYXQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCQiQWN0aW9uIGhhcHBlbmVkIGluIHNoYXJlZCBndWVzdCBjaGF0IHdpdGggaWdub3Jpbmcgc2hhcmVkIGNoYXQgc2V0IHRvIFRydWUuIEFib3J0aW5nLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKGlzRnJvbVNoYXJlZENoYXRHdWVzdCAmJiAhaWdub3JlU2hhcmVkQ2hhdCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJBY3Rpb24gaGFwcGVuZWQgaW4gc2hhcmVkIGd1ZXN0IGNoYXQgd2l0aCBpZ25vcmluZyBzaGFyZWQgY2hhdCBzZXQgdG8gRmFsc2UuIENvbnRpbnVlaW5nLi4uIik7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBwcml2YXRlIHZvaWQgR2V0RXh0ZW5zaW9uSW5mbygpDQogICAgew0KICAgICAgICBpZiAoZXh0ZW5zaW9uTmFtZSA9PSBudWxsIHx8IGV4dGVuc2lvblZlcnNpb24gPT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgQ1BILkV4ZWN1dGVNZXRob2QoIk1PRCBUT09MUyBWZXJzaW9uIENoZWNrIiwgIkV4ZWN1dGUiKTsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoImV4dGVuc2lvbk5hbWUiLCBvdXQgZXh0ZW5zaW9uTmFtZSk7DQogICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJleHRlbnNpb25WZXJzaW9uIiwgb3V0IGV4dGVuc2lvblZlcnNpb24pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lkIFBvc3RUb0xvZyhzdHJpbmcgbG9nKQ0KICAgIHsNCiAgICAgICAgQ1BILkxvZ0luZm8oJCJbe2V4dGVuc2lvbk5hbWV9IHYue2V4dGVuc2lvblZlcnNpb259XSBbTkVXIENIQVRURVJTIFFVSUNLIEFDVElPTlNdIHtsb2d9Iik7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgb2JqZWN0IF9sb2NrID0gbmV3IG9iamVjdCAoKTsNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBleHRlbnNpb25OYW1lID0gbnVsbDsNCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBleHRlbnNpb25WZXJzaW9uID0gbnVsbDsNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBicm9hZGNhc3RlclVzZXIgPSBudWxsOw0KICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIGJyb2FkY2FzdGVyVXNlck5hbWUgPSBudWxsOw0KICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIGJyb2FkY2FzdGVyVXNlcklkID0gbnVsbDsNCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBib3RVc2VyID0gbnVsbDsNCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBib3RVc2VyTmFtZSA9IG51bGw7DQogICAgcHVibGljIHN0YXRpYyBzdHJpbmcgYm90VXNlcklkID0gbnVsbDsNCiAgICBwdWJsaWMgc3RhdGljIGJvb2wgaGFzQm90ID0gZmFsc2U7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHJpdmF0ZSBUYXdtYWVVSS5UYXdtYWUgdWk7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGJvb2wgaWdub3JlU2hhcmVkQ2hhdCA9IHRydWU7DQogICAgcHJpdmF0ZSB2b2lkIEZldGNoU2V0dGluZ3MoKQ0KICAgIHsNCiAgICAgICAgdWkgPSBuZXcgVGF3bWFlKENQSCwgZXh0ZW5zaW9uTmFtZSwgZXh0ZW5zaW9uVmVyc2lvbiwgZmFsc2UpOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICBpZ25vcmVTaGFyZWRDaGF0ID0gdWkuR2V0VmFsdWU8Ym9vbD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfaWdub3JlU2hhcmVkQ2hhdCIpID8/IGlnbm9yZVNoYXJlZENoYXQ7DQogICAgfQ0KfQ==",
                                "precompile": false,
                                "delayStart": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "eacd745d-2402-42b7-8f50-28bdffb912ba",
                                "weight": 0.0,
                                "type": 99999,
                                "parentId": "25d1f17e-8274-4ce1-99db-8852adacd1ec",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "25d1f17e-8274-4ce1-99db-8852adacd1ec",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    }
                ],
                "collapsedGroups": [
                    "5f7f9dfb-3cf3-4511-b7a7-d272411b8e82",
                    "25d1f17e-8274-4ce1-99db-8852adacd1ec"
                ]
            },
            {
                "id": "08b8ef02-5c62-47cb-b84e-aa2c214e3e49",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 8 - Shoutout",
                "group": "MOD TOOLS - Chat Management",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "0afb2611-d976-4359-9d40-136fe6629a64",
                        "id": "df5e7793-16ec-4aa7-8fbe-fac0cbd8a1c0",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!shoutout [Username]",
                        "color": "#80FFFF",
                        "id": "69abb00c-12cf-4130-a61f-25088771b644",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "7acfcbb3-8381-4c57-babe-22d503595194",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "f13d288a-d049-4fa5-8ab3-fc3463f033d7",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "ShoutoutUser",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "4379266a-d021-43ee-8979-01af19c3c6bf",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "f13d288a-d049-4fa5-8ab3-fc3463f033d7",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "f13d288a-d049-4fa5-8ab3-fc3463f033d7",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "f13d288a-d049-4fa5-8ab3-fc3463f033d7"
                ]
            },
            {
                "id": "628c64a8-265e-41d7-835c-33d986e6ced4",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 4 - Run Ad",
                "group": "MOD TOOLS - Chat Management",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "ebd478fb-0f0f-40c9-9291-4e738b1a0349",
                        "id": "16c8592f-b08f-4f61-b471-e7223b3e16d5",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!runAds [Duration]",
                        "color": "#80FFFF",
                        "id": "06b488dd-8c90-459e-b7e9-76945eb60951",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "value": "Duration in seconds, from 30 to 180.",
                        "color": "#80FFFF",
                        "id": "d5f854e0-4eae-47e0-8596-665c18394f2c",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "7f6761fb-6386-4bab-b296-c92fa21a168a",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "c60405b4-e2c1-404c-a1d3-1c635ab128c0",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "RunAds",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "2151f75a-4899-4dda-918f-f7458a9f3033",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "c60405b4-e2c1-404c-a1d3-1c635ab128c0",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "c60405b4-e2c1-404c-a1d3-1c635ab128c0",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 2
                    }
                ],
                "collapsedGroups": [
                    "c60405b4-e2c1-404c-a1d3-1c635ab128c0"
                ]
            },
            {
                "id": "124923b2-8acd-4364-bdfc-eb74ef36c1b9",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 5 - Get Pre-Roll Ad Free Time",
                "group": "MOD TOOLS - Chat Management",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "d79bcc12-791d-41fb-a9b8-8781bf19a850",
                        "id": "a2ed7fd0-b895-4e42-ae4b-39d7584e6fda",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!prerollTime",
                        "color": "#80FFFF",
                        "id": "23d69c3c-e1fc-4cee-9c67-486573879e84",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "26ed98be-99f0-494f-8a6f-5d4d59e7881a",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "48fea609-bcce-450d-8c6e-b82c5979a369",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "GetPrerollFreeTime",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "979094b6-b5f3-41b4-a978-d5b360bbacb1",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "48fea609-bcce-450d-8c6e-b82c5979a369",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "48fea609-bcce-450d-8c6e-b82c5979a369",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "48fea609-bcce-450d-8c6e-b82c5979a369"
                ]
            },
            {
                "id": "5c4cc60b-67d8-4ddd-b350-ad456354fd16",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 6 - Snooze Ad",
                "group": "MOD TOOLS - Chat Management",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "1cabe424-b9c9-48bf-81ae-39f8210b772f",
                        "id": "bb376a2c-ccdf-4002-8dc2-3d547b623561",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!snoozeAd",
                        "color": "#80FFFF",
                        "id": "961b81aa-dea3-4214-ae6b-1263bd14955f",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "d38e2e9d-09f4-489d-985e-956b21638746",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "7074177d-4a6f-44d0-a842-50125e262eeb",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "SnoozeAd",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "020977e6-e9fb-46aa-9317-4f9e0c627860",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "7074177d-4a6f-44d0-a842-50125e262eeb",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "7074177d-4a6f-44d0-a842-50125e262eeb",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "7074177d-4a6f-44d0-a842-50125e262eeb"
                ]
            },
            {
                "id": "dbd974a6-2be1-44b6-ab45-ce682e63b8cf",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 3 - Manually Remove Botted Followers",
                "group": "MOD TOOLS - Bot & Hate Raid Protection",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "4dfe89cf-8c45-4f1a-9741-64785b714a59",
                        "id": "8cbd3e80-d642-4349-a679-64697c43a247",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!removeBottedFollowers",
                        "color": "#80FFFF",
                        "id": "cb4460a5-1282-42e9-a44e-2d48539c4c32",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "80ac092e-19f1-47a4-952e-489028c18ad5",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "9bcdbb7a-b5c3-420b-8305-9cac8d648c12",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "ManuallyRemoveBottedFollowers",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "969a8083-b905-401e-9d26-f36b7e90b714",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "9bcdbb7a-b5c3-420b-8305-9cac8d648c12",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "9bcdbb7a-b5c3-420b-8305-9cac8d648c12",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "9bcdbb7a-b5c3-420b-8305-9cac8d648c12"
                ]
            },
            {
                "id": "bc753fb0-272b-4a82-86fe-faaa5eea5046",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 7 - Skip SpeakerBot TTS",
                "group": "MOD TOOLS - Chat Management",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "08b16f50-f9eb-461d-8bfb-16cc57953964",
                        "id": "86c1e986-a110-437d-a41b-4cf5300bc4a7",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!skipTTS",
                        "color": "#80FFFF",
                        "id": "1facce05-0f58-4786-b66e-b8aa1f91f215",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "e6f76a6e-5067-47e5-8024-dce13e419305",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "c9d1110e-a2a8-440e-8082-d170ad0b1a6c",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "SkipTTS",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "dc49c2d2-53d1-48b1-9afc-a6fd8a59c95d",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "c9d1110e-a2a8-440e-8082-d170ad0b1a6c",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "c9d1110e-a2a8-440e-8082-d170ad0b1a6c",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "c9d1110e-a2a8-440e-8082-d170ad0b1a6c"
                ]
            },
            {
                "id": "79194ded-cd74-47ff-ae50-ccac14a7337a",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 9 - Get All Mod Commands",
                "group": "MOD TOOLS - Chat Management",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "83c8d00b-672d-4105-a873-c221d6a71029",
                        "id": "7146db62-7efd-4663-90d4-9bef7d651ac7",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!modCommands",
                        "color": "#80FFFF",
                        "id": "60d10a92-572b-47b3-b98e-850ae5dc617b",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "cc2b4c6b-eec5-47de-ae42-add22bf1f9db",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "f829dfb1-e028-47ac-864c-a9b1680c1bc4",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "GetModCommands",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "eb6827b8-a412-4254-bdbc-97fd0eb5ecb4",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "f829dfb1-e028-47ac-864c-a9b1680c1bc4",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "f829dfb1-e028-47ac-864c-a9b1680c1bc4",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    }
                ],
                "collapsedGroups": [
                    "f13d288a-d049-4fa5-8ab3-fc3463f033d7",
                    "f829dfb1-e028-47ac-864c-a9b1680c1bc4"
                ]
            },
            {
                "id": "09b2ff47-c70c-468e-8882-af47d5100937",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 8 - Change Reward Cooldown",
                "group": "MOD TOOLS - Channel Point Rewards",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "40f3abf9-bf74-41a4-b76e-8ee6dfec27d4",
                        "id": "cc019c47-c3be-4cae-944c-ef46d44632a9",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!rewardCooldown [Reward Name] <Cooldown>",
                        "color": "#80FFFF",
                        "id": "fb64c589-1cb9-48c3-819e-460b1fabcea7",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "value": "The cooldown needs to be in angled brackets. Example:",
                        "color": "#80FFFF",
                        "id": "dad6d5cc-2aab-42ae-9c6d-21a35ec96564",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    },
                    {
                        "value": "!rewardCooldown Hydrate <120>",
                        "color": "#80FFFF",
                        "id": "8a2b8ea4-b878-4635-9278-a5fab7584da3",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 2
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "a14aa9cb-1e46-4f2d-aef7-84b83432b234",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "bb8f2750-c972-4575-97c6-5f8a56360195",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "ChangeRewardCooldown",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "ddb9f784-ff1f-43bc-b299-afa7b993eec8",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "bb8f2750-c972-4575-97c6-5f8a56360195",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "bb8f2750-c972-4575-97c6-5f8a56360195",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 3
                    }
                ],
                "collapsedGroups": [
                    "c289c531-9197-4a08-b765-b57f5aa6cc65",
                    "bb8f2750-c972-4575-97c6-5f8a56360195"
                ]
            },
            {
                "id": "cb3f21dc-cf5c-43ec-b064-253094e65d58",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 8 - Change Reward Max Per Stream",
                "group": "MOD TOOLS - Channel Point Rewards",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "186cd42a-6002-4e22-b4e8-e243de082bd1",
                        "id": "d2a1d7b3-59f0-4359-8495-dbc1745758ca",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!rewardMaxPerStream [Reward Name] <Max>",
                        "color": "#80FFFF",
                        "id": "42e6179d-9f57-4684-9a7f-cbd25bce4c87",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "value": "The max needs to be in angled brackets. Example:",
                        "color": "#80FFFF",
                        "id": "bc83f960-57df-428d-a649-6ab876f2dcc1",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    },
                    {
                        "value": "!rewardMaxPerStream Hydrate <10>",
                        "color": "#80FFFF",
                        "id": "f6affb52-caab-4e6f-b3ae-9f86293d8193",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 2
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "8f19e613-fd5c-48c4-b82b-0799d01fd656",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "6ca6419c-cd34-417f-a006-178f73fbc6c0",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "ChangeRewardMaxPerStream",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "5092f950-0f69-41fb-bae5-3eeadbd43a31",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "6ca6419c-cd34-417f-a006-178f73fbc6c0",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "6ca6419c-cd34-417f-a006-178f73fbc6c0",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 3
                    }
                ],
                "collapsedGroups": [
                    "c289c531-9197-4a08-b765-b57f5aa6cc65",
                    "bb8f2750-c972-4575-97c6-5f8a56360195",
                    "6ca6419c-cd34-417f-a006-178f73fbc6c0"
                ]
            },
            {
                "id": "bbf3db62-d84a-4d77-a47f-dd781b7164c4",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": false,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] 8 - Change Reward Max Per User Per Stream",
                "group": "MOD TOOLS - Channel Point Rewards",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "commandId": "a5ed4bf5-2700-46db-9f17-4e199402b27c",
                        "id": "44e86277-dcd5-4321-b58d-0109b5a7455d",
                        "type": 401,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "value": "!rewardMaxPerUserPerStream [Reward Name] <Max>",
                        "color": "#80FFFF",
                        "id": "c343fe31-0246-4695-adfb-88fdeb05fde6",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    },
                    {
                        "value": "The max needs to be in angled brackets. Example:",
                        "color": "#80FFFF",
                        "id": "731146ab-f29c-498a-b27d-22fd8081b3e8",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 1
                    },
                    {
                        "value": "!rewardMaxPerUserPerStream Hydrate <10>",
                        "color": "#80FFFF",
                        "id": "6fce9d15-a5e4-4742-aeda-7e7044c17ae4",
                        "weight": 0.0,
                        "type": 1009,
                        "parentId": null,
                        "enabled": true,
                        "index": 2
                    },
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "2df0f0c2-1788-42de-9c9a-5be4a99bca3a",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "dcc0dd5e-8fa6-44cc-bc99-1d030668994f",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "executeCodeId": "3734fcc4-c2f6-48ab-af0b-4b0d02671fad",
                                "method": "ChangeRewardMaxPerUserPerStream",
                                "runOnUiThread": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "5b1b14c5-6a63-4dbd-9c8a-89b3585023ea",
                                "weight": 0.0,
                                "type": 99998,
                                "parentId": "dcc0dd5e-8fa6-44cc-bc99-1d030668994f",
                                "enabled": true,
                                "index": 2
                            }
                        ],
                        "id": "dcc0dd5e-8fa6-44cc-bc99-1d030668994f",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 3
                    }
                ],
                "collapsedGroups": [
                    "c289c531-9197-4a08-b765-b57f5aa6cc65",
                    "bb8f2750-c972-4575-97c6-5f8a56360195",
                    "6ca6419c-cd34-417f-a006-178f73fbc6c0",
                    "dcc0dd5e-8fa6-44cc-bc99-1d030668994f"
                ]
            },
            {
                "id": "77b071e7-bba9-4d91-9373-a8485c973e77",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": true,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] [#] 5 - User Chat Log",
                "group": "MOD TOOLS - # Settings",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [
                    {
                        "id": "d9ab9f92-fb61-4c66-b53e-c286c3e91622",
                        "type": 133,
                        "enabled": true,
                        "exclusions": []
                    }
                ],
                "subActions": [
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "278146a2-15a3-4974-8c0d-1c5e37cf3ce5",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "5d4f28a0-d813-47d7-8448-dbda95968a3f",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "name": "[MOD TOOLS] User Chat Log",
                                "description": null,
                                "references": [
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\mscorlib.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.dll",
                                    ".\\Newtonsoft.Json.dll",
                                    ".\\dlls\\TawmaeUI.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Core.dll",
                                    ".\\LiteDB.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\netstandard.dll"
                                ],
                                "byteCode": "dXNpbmcgU3lzdGVtOw0KdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7DQp1c2luZyBTeXN0ZW0uSU87DQp1c2luZyBTeXN0ZW0uTGlucTsNCnVzaW5nIExpdGVEQjsNCnVzaW5nIFRhd21hZVVJOw0KDQpwdWJsaWMgY2xhc3MgQ1BISW5saW5lDQp7DQogICAgcHVibGljIGJvb2wgRXhlY3V0ZSgpDQogICAgew0KICAgICAgICBsb2NrIChfbG9jaykNCiAgICAgICAgew0KICAgICAgICAgICAgR2V0RXh0ZW5zaW9uSW5mbygpOw0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBGZXRjaFNldHRpbmdzKCk7DQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXIiLCBvdXQgc3RyaW5nIGRpc3BsYXlOYW1lKTsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoInVzZXJOYW1lIiwgb3V0IHN0cmluZyB1c2VyTmFtZSk7DQogICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJ1c2VySWQiLCBvdXQgc3RyaW5nIHVzZXJJZCk7DQogICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJtZXNzYWdlIiwgb3V0IHN0cmluZyBtZXNzYWdlKTsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoImNvbG9yIiwgb3V0IHN0cmluZyBjb2xvckhleCk7DQogICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJiYWRnZXMiLCBvdXQgTGlzdDxUd2l0Y2guQ29tbW9uLk1vZGVscy5CYWRnZT4gYmFkZ2VzKTsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoImVtb3RlcyIsIG91dCBMaXN0PFR3aXRjaC5Db21tb24uTW9kZWxzLkVtb3RlPiBlbW90ZXMpOw0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICB2YXIgbm93VXRjID0gRGF0ZVRpbWUuVXRjTm93Ow0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICB2YXIga2V5ID0gdXNlcklkOw0KICAgICAgICAgICAgdmFyIGJTaWcgPSBCYWRnZVNpZ25hdHVyZShiYWRnZXMpOw0KICAgICAgICAgICAgaWYgKCF1c2VyQ2FjaGUuVHJ5R2V0VmFsdWUoa2V5LCBvdXQgdmFyIGNhY2hlZCkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIGV4aXN0aW5nID0gdXNlcnMuRmluZE9uZSh4ID0+IHguVXNlcklkID09IHVzZXJJZCk7DQogICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nID09IG51bGwpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB2YXIgbWFwcGVkQmFkZ2VzID0gTWFwQmFkZ2VzKGJhZGdlcyk7DQogICAgICAgICAgICAgICAgICAgIHZhciBkb2MgPSBuZXcgVXNlckRvYw0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBJZCA9IE9iamVjdElkLk5ld09iamVjdElkKCksDQogICAgICAgICAgICAgICAgICAgICAgICBVc2VySWQgPSB1c2VySWQsDQogICAgICAgICAgICAgICAgICAgICAgICBVc2VyTmFtZSA9IHVzZXJOYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgRGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIENvbG9ySGV4ID0gY29sb3JIZXgsDQogICAgICAgICAgICAgICAgICAgICAgICBCYWRnZXMgPSBtYXBwZWRCYWRnZXMsDQogICAgICAgICAgICAgICAgICAgICAgICBGaXJzdFNlZW5VdGMgPSBub3dVdGMsDQogICAgICAgICAgICAgICAgICAgICAgICBMYXN0U2VlblV0YyA9IG5vd1V0Yw0KICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICB1c2Vycy5JbnNlcnQoZG9jKTsNCiAgICAgICAgICAgICAgICAgICAgY2FjaGVkID0gbmV3IFVzZXJNZXRhQ2FjaGUNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgVXNlck5hbWUgPSB1c2VyTmFtZSA/PyAiIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIERpc3BsYXlOYW1lID0gZGlzcGxheU5hbWUgPz8gIiIsDQogICAgICAgICAgICAgICAgICAgICAgICBDb2xvckhleCA9IGNvbG9ySGV4ID8/ICIiLA0KICAgICAgICAgICAgICAgICAgICAgICAgQmFkZ2VTaWcgPSBiU2lnDQogICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgIHVzZXJDYWNoZVtrZXldID0gY2FjaGVkOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBib29sIGNoYW5nZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFTdHJpbmdFcXVhbHMoZXhpc3RpbmcuVXNlck5hbWUsIHVzZXJOYW1lKSkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcuVXNlck5hbWUgPSB1c2VyTmFtZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFTdHJpbmdFcXVhbHMoZXhpc3RpbmcuRGlzcGxheU5hbWUsIGRpc3BsYXlOYW1lKSkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcuRGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFTdHJpbmdFcXVhbHMoZXhpc3RpbmcuQ29sb3JIZXgsIGNvbG9ySGV4KSkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcuQ29sb3JIZXggPSBjb2xvckhleDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcHBlZEJhZGdlcyA9IE1hcEJhZGdlcyhiYWRnZXMpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIUJhZGdlTGlzdHNFcXVhbChleGlzdGluZy5CYWRnZXMsIG1hcHBlZEJhZGdlcykpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLkJhZGdlcyA9IG1hcHBlZEJhZGdlczsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcuTGFzdFNlZW5VdGMgPSBub3dVdGM7DQogICAgICAgICAgICAgICAgICAgIHVzZXJzLlVwZGF0ZShleGlzdGluZyk7DQogICAgICAgICAgICAgICAgICAgIGNhY2hlZCA9IG5ldyBVc2VyTWV0YUNhY2hlDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFVzZXJOYW1lID0gZXhpc3RpbmcuVXNlck5hbWUgPz8gIiIsDQogICAgICAgICAgICAgICAgICAgICAgICBEaXNwbGF5TmFtZSA9IGV4aXN0aW5nLkRpc3BsYXlOYW1lID8/ICIiLA0KICAgICAgICAgICAgICAgICAgICAgICAgQ29sb3JIZXggPSBleGlzdGluZy5Db2xvckhleCA/PyAiIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIEJhZGdlU2lnID0gQmFkZ2VTaWduYXR1cmUoZXhpc3RpbmcuQmFkZ2VzKQ0KICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICB1c2VyQ2FjaGVba2V5XSA9IGNhY2hlZDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgYm9vbCBtZXRhQ2hhbmdlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGlmICghU3RyaW5nRXF1YWxzKGNhY2hlZC5Vc2VyTmFtZSwgdXNlck5hbWUpKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0YUNoYW5nZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBjYWNoZWQuVXNlck5hbWUgPSB1c2VyTmFtZSA/PyAiIjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoIVN0cmluZ0VxdWFscyhjYWNoZWQuRGlzcGxheU5hbWUsIGRpc3BsYXlOYW1lKSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIG1ldGFDaGFuZ2VkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgY2FjaGVkLkRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWUgPz8gIiI7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKCFTdHJpbmdFcXVhbHMoY2FjaGVkLkNvbG9ySGV4LCBjb2xvckhleCkpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBtZXRhQ2hhbmdlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGNhY2hlZC5Db2xvckhleCA9IGNvbG9ySGV4ID8/ICIiOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmICghU3RyaW5nRXF1YWxzKGNhY2hlZC5CYWRnZVNpZywgYlNpZykpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBtZXRhQ2hhbmdlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGNhY2hlZC5CYWRnZVNpZyA9IGJTaWc7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKG1ldGFDaGFuZ2VkKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGV4aXN0aW5nID0gdXNlcnMuRmluZE9uZSh4ID0+IHguVXNlcklkID09IHVzZXJJZCk7DQogICAgICAgICAgICAgICAgICAgIHZhciBtYXBwZWRCYWRnZXMgPSBNYXBCYWRnZXMoYmFkZ2VzKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nID09IG51bGwpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkb2MgPSBuZXcgVXNlckRvYw0KICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIElkID0gT2JqZWN0SWQuTmV3T2JqZWN0SWQoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBVc2VySWQgPSB1c2VySWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNlck5hbWUgPSB1c2VyTmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbG9ySGV4ID0gY29sb3JIZXgsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQmFkZ2VzID0gbWFwcGVkQmFkZ2VzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZpcnN0U2VlblV0YyA9IG5vd1V0YywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMYXN0U2VlblV0YyA9IG5vd1V0Yw0KICAgICAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJzLkluc2VydChkb2MpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcuVXNlck5hbWUgPSB1c2VyTmFtZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLkRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWU7DQogICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5Db2xvckhleCA9IGNvbG9ySGV4Ow0KICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcuQmFkZ2VzID0gbWFwcGVkQmFkZ2VzOw0KICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcuTGFzdFNlZW5VdGMgPSBub3dVdGM7DQogICAgICAgICAgICAgICAgICAgICAgICB1c2Vycy5VcGRhdGUoZXhpc3RpbmcpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhciBleGlzdGluZyA9IHVzZXJzLkZpbmRPbmUoeCA9PiB4LlVzZXJJZCA9PSB1c2VySWQpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmcgIT0gbnVsbCkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcuTGFzdFNlZW5VdGMgPSBub3dVdGM7DQogICAgICAgICAgICAgICAgICAgICAgICB1c2Vycy5VcGRhdGUoZXhpc3RpbmcpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoKCsrY2FjaGVDb3VudGVyICUgY2FjaGVUcmltSW50ZXJ2YWwpID09IDAgJiYgdXNlckNhY2hlLkNvdW50ID4gNDA5NikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB1c2VyQ2FjaGUuQ2xlYXIoKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UobWVzc2FnZSkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIG1hcHBlZEVtb3RlcyA9IE1hcEVtb3RlcyhlbW90ZXMpOw0KICAgICAgICAgICAgICAgIHZhciBkb2MgPSBuZXcgQ2hhdE1zZ0RvYw0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgSWQgPSBPYmplY3RJZC5OZXdPYmplY3RJZCgpLA0KICAgICAgICAgICAgICAgICAgICBVc2VySWQgPSB1c2VySWQsDQogICAgICAgICAgICAgICAgICAgIE1lc3NhZ2UgPSBtZXNzYWdlLA0KICAgICAgICAgICAgICAgICAgICBFbW90ZXMgPSBtYXBwZWRFbW90ZXMsDQogICAgICAgICAgICAgICAgICAgIFRpbWVzdGFtcFV0YyA9IG5vd1V0Yw0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgbWVzc2FnZXMuSW5zZXJ0KGRvYyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwcml2YXRlIHN0YXRpYyBzdHJpbmcgQmFkZ2VTaWduYXR1cmUoTGlzdDxUd2l0Y2guQ29tbW9uLk1vZGVscy5CYWRnZT4gYmFkZ2VzKQ0KICAgIHsNCiAgICAgICAgaWYgKGJhZGdlcyA9PSBudWxsIHx8IGJhZGdlcy5Db3VudCA9PSAwKQ0KICAgICAgICAgICAgcmV0dXJuICIiOw0KICAgICAgICB2YXIgcGFydHMgPSBuZXcgTGlzdDxzdHJpbmc+KGJhZGdlcy5Db3VudCk7DQogICAgICAgIGZvcmVhY2ggKHZhciBiIGluIGJhZGdlcykNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKGIgPT0gbnVsbCkNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIHBhcnRzLkFkZCgoYi5OYW1lID8/ICIiKSArICJ8IiArIChiLkltYWdlVXJsID8/ICIiKSArICJ8IiArIChiLlZlcnNpb24gIT0gbnVsbCA/IGIuVmVyc2lvbi5Ub1N0cmluZygpIDogIiIpKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHBhcnRzLlNvcnQoU3RyaW5nQ29tcGFyZXIuT3JkaW5hbCk7DQogICAgICAgIHJldHVybiBzdHJpbmcuSm9pbigiOyIsIHBhcnRzKTsNCiAgICB9DQoNCiAgICBwcml2YXRlIHN0YXRpYyBzdHJpbmcgQmFkZ2VTaWduYXR1cmUoTGlzdDxCYWRnZURvYz4gYmFkZ2VzKQ0KICAgIHsNCiAgICAgICAgaWYgKGJhZGdlcyA9PSBudWxsIHx8IGJhZGdlcy5Db3VudCA9PSAwKQ0KICAgICAgICAgICAgcmV0dXJuICIiOw0KICAgICAgICB2YXIgcGFydHMgPSBuZXcgTGlzdDxzdHJpbmc+KGJhZGdlcy5Db3VudCk7DQogICAgICAgIGZvcmVhY2ggKHZhciBiIGluIGJhZGdlcykNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKGIgPT0gbnVsbCkNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIHBhcnRzLkFkZCgoYi5OYW1lID8/ICIiKSArICJ8IiArIChiLkltYWdlVXJsID8/ICIiKSArICJ8IiArICgoYi5WZXJzaW9uID8/IC0xKS5Ub1N0cmluZygpKSk7DQogICAgICAgIH0NCg0KICAgICAgICBwYXJ0cy5Tb3J0KFN0cmluZ0NvbXBhcmVyLk9yZGluYWwpOw0KICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW4oIjsiLCBwYXJ0cyk7DQogICAgfQ0KDQogICAgcHJpdmF0ZSBzdGF0aWMgYm9vbCBTdHJpbmdFcXVhbHMoc3RyaW5nIGEsIHN0cmluZyBiKSA9PiBzdHJpbmcuRXF1YWxzKGEgPz8gIiIsIGIgPz8gIiIsIFN0cmluZ0NvbXBhcmlzb24uT3JkaW5hbCk7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHJpdmF0ZSBzdGF0aWMgTGlzdDxCYWRnZURvYz4gTWFwQmFkZ2VzKExpc3Q8VHdpdGNoLkNvbW1vbi5Nb2RlbHMuQmFkZ2U+IGJhZGdlcykNCiAgICB7DQogICAgICAgIGlmIChiYWRnZXMgPT0gbnVsbCB8fCBiYWRnZXMuQ291bnQgPT0gMCkNCiAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdDxCYWRnZURvYz4oMCk7DQogICAgICAgIHZhciBsaXN0ID0gbmV3IExpc3Q8QmFkZ2VEb2M+KGJhZGdlcy5Db3VudCk7DQogICAgICAgIGZvcmVhY2ggKHZhciBiIGluIGJhZGdlcykNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKGIgPT0gbnVsbCkNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIGxpc3QuQWRkKG5ldyBCYWRnZURvYyB7IE5hbWUgPSBiLk5hbWUsIEltYWdlVXJsID0gYi5JbWFnZVVybCwgVmVyc2lvbiA9IFRyeUludChiLlZlcnNpb24pIH0pOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGxpc3Q7DQogICAgfQ0KDQogICAgcHJpdmF0ZSBzdGF0aWMgTGlzdDxFbW90ZURvYz4gTWFwRW1vdGVzKExpc3Q8VHdpdGNoLkNvbW1vbi5Nb2RlbHMuRW1vdGU+IGVtb3RlcykNCiAgICB7DQogICAgICAgIGlmIChlbW90ZXMgPT0gbnVsbCB8fCBlbW90ZXMuQ291bnQgPT0gMCkNCiAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdDxFbW90ZURvYz4oMCk7DQogICAgICAgIHZhciBsaXN0ID0gbmV3IExpc3Q8RW1vdGVEb2M+KGVtb3Rlcy5Db3VudCk7DQogICAgICAgIGZvcmVhY2ggKHZhciBlIGluIGVtb3RlcykNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKGUgPT0gbnVsbCkNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIGxpc3QuQWRkKG5ldyBFbW90ZURvYyB7IE5hbWUgPSBlLk5hbWUsIFR5cGUgPSBlLlR5cGUsIFN0YXJ0SW5kZXggPSBlLlN0YXJ0SW5kZXgsIEVuZEluZGV4ID0gZS5FbmRJbmRleCwgSW1hZ2VVcmwgPSBlLkltYWdlVXJsIH0pOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGxpc3Q7DQogICAgfQ0KDQogICAgcHJpdmF0ZSBzdGF0aWMgaW50PyBUcnlJbnQob2JqZWN0IHZhbHVlKQ0KICAgIHsNCiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpDQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICh2YWx1ZSBpcyBpbnQgaSkNCiAgICAgICAgICAgICAgICByZXR1cm4gaTsNCiAgICAgICAgICAgIGlmICh2YWx1ZSBpcyBsb25nIGwpDQogICAgICAgICAgICAgICAgcmV0dXJuIGNoZWNrZWQoKGludClsKTsNCiAgICAgICAgICAgIGlmICh2YWx1ZSBpcyBzdHJpbmcgcyAmJiBpbnQuVHJ5UGFyc2Uocywgb3V0IHZhciBwKSkNCiAgICAgICAgICAgICAgICByZXR1cm4gcDsNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaA0KICAgICAgICB7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gbnVsbDsNCiAgICB9DQoNCiAgICBwcml2YXRlIHN0YXRpYyBib29sIEJhZGdlTGlzdHNFcXVhbChMaXN0PEJhZGdlRG9jPiBhLCBMaXN0PEJhZGdlRG9jPiBiKQ0KICAgIHsNCiAgICAgICAgaWYgKFJlZmVyZW5jZUVxdWFscyhhLCBiKSkNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICBpZiAoYSA9PSBudWxsIHx8IGIgPT0gbnVsbCB8fCBhLkNvdW50ICE9IGIuQ291bnQpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIHJldHVybiBhLk9yZGVyQnkoeCA9PiB4Lk5hbWUpLlRoZW5CeSh4ID0+IHguVmVyc2lvbiA/PyAtMSkuVGhlbkJ5KHggPT4geC5JbWFnZVVybCA/PyAiIikuU2VxdWVuY2VFcXVhbChiLk9yZGVyQnkoeCA9PiB4Lk5hbWUpLlRoZW5CeSh4ID0+IHguVmVyc2lvbiA/PyAtMSkuVGhlbkJ5KHggPT4geC5JbWFnZVVybCA/PyAiIiksIEJhZGdlRG9jQ29tcGFyZXIuSW5zdGFuY2UpOw0KICAgIH0NCg0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHByaXZhdGUgYm9vbCBTaGFyZWRDaGF0Q2hlY2soKQ0KICAgIHsNCiAgICAgICAgaWYgKENQSC5UcnlHZXRBcmcoImlzSW5TaGFyZWRDaGF0Iiwgb3V0IGJvb2wgaXNJblNoYXJlZENoYXQpKQ0KICAgICAgICB7DQogICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJpc0Zyb21TaGFyZWRDaGF0R3Vlc3QiLCBvdXQgYm9vbCBpc0Zyb21TaGFyZWRDaGF0R3Vlc3QpOw0KICAgICAgICAgICAgaWYgKGlzRnJvbVNoYXJlZENoYXRHdWVzdCAmJiBpZ25vcmVTaGFyZWRDaGF0KQ0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIHByaXZhdGUgdm9pZCBHZXRFeHRlbnNpb25JbmZvKCkNCiAgICB7DQogICAgICAgIGlmIChleHRlbnNpb25OYW1lID09IG51bGwgfHwgZXh0ZW5zaW9uVmVyc2lvbiA9PSBudWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICBDUEguRXhlY3V0ZU1ldGhvZCgiTU9EIFRPT0xTIFZlcnNpb24gQ2hlY2siLCAiRXhlY3V0ZSIpOw0KICAgICAgICAgICAgQ1BILlRyeUdldEFyZygiZXh0ZW5zaW9uTmFtZSIsIG91dCBleHRlbnNpb25OYW1lKTsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoImV4dGVuc2lvblZlcnNpb24iLCBvdXQgZXh0ZW5zaW9uVmVyc2lvbik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwcml2YXRlIHZvaWQgUG9zdFRvTG9nKHN0cmluZyBsb2cpDQogICAgew0KICAgICAgICBDUEguTG9nSW5mbygkIlt7ZXh0ZW5zaW9uTmFtZX0gdi57ZXh0ZW5zaW9uVmVyc2lvbn1dIHtsb2d9Iik7DQogICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lkIEZldGNoU2V0dGluZ3MoKQ0KICAgIHsNCiAgICAgICAgdWkgPSBuZXcgVGF3bWFlKENQSCwgZXh0ZW5zaW9uTmFtZSwgZXh0ZW5zaW9uVmVyc2lvbiwgZmFsc2UpOw0KICAgICAgICBpZ25vcmVTaGFyZWRDaGF0ID0gdWkuR2V0VmFsdWU8Ym9vbD8+KGV4dGVuc2lvbk5hbWUsICJtb2RfdG9vbHNfaWdub3JlU2hhcmVkQ2hhdCIpID8/IGlnbm9yZVNoYXJlZENoYXQ7DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgb2JqZWN0IF9sb2NrID0gbmV3IG9iamVjdCAoKTsNCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBleHRlbnNpb25OYW1lID0gbnVsbDsNCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBleHRlbnNpb25WZXJzaW9uID0gbnVsbDsNCiAgICBwcml2YXRlIFRhd21hZVVJLlRhd21hZSB1aTsNCiAgICBwdWJsaWMgYm9vbCBpZ25vcmVTaGFyZWRDaGF0ID0gdHJ1ZTsNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBzdHJpbmcgRGJGb2xkZXIgPSBQYXRoLkNvbWJpbmUoQXBwRG9tYWluLkN1cnJlbnREb21haW4uQmFzZURpcmVjdG9yeSwgInRhd21hZSAtIE1PRCBUT09MUyAtIFVzZXIgQ2hhdCBMb2ciKTsNCiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBzdHJpbmcgRGJQYXRoID0gUGF0aC5Db21iaW5lKERiRm9sZGVyLCAiY2hhdGxvZy5kYiIpOw0KICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IExpdGVEYXRhYmFzZSBkYiA9IEluaXREYigpOw0KICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IElMaXRlQ29sbGVjdGlvbjxVc2VyRG9jPiB1c2VycyA9IGRiLkdldENvbGxlY3Rpb248VXNlckRvYz4oInVzZXJzIik7DQogICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgSUxpdGVDb2xsZWN0aW9uPENoYXRNc2dEb2M+IG1lc3NhZ2VzID0gZGIuR2V0Q29sbGVjdGlvbjxDaGF0TXNnRG9jPigibWVzc2FnZXMiKTsNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBEaWN0aW9uYXJ5PHN0cmluZywgVXNlck1ldGFDYWNoZT4gdXNlckNhY2hlID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBVc2VyTWV0YUNhY2hlPig1MTIpOw0KICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IGludCBjYWNoZVRyaW1JbnRlcnZhbCA9IDEwMDA7DQogICAgcHJpdmF0ZSBzdGF0aWMgaW50IGNhY2hlQ291bnRlciA9IDA7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHJpdmF0ZSBzdGF0aWMgTGl0ZURhdGFiYXNlIEluaXREYigpDQogICAgew0KICAgICAgICBEaXJlY3RvcnkuQ3JlYXRlRGlyZWN0b3J5KERiRm9sZGVyKTsNCiAgICAgICAgdmFyIGRiID0gbmV3IExpdGVEYXRhYmFzZSgkIkZpbGVuYW1lPXtEYlBhdGh9O0Nvbm5lY3Rpb249U2hhcmVkIik7DQogICAgICAgIHZhciB1ID0gZGIuR2V0Q29sbGVjdGlvbjxVc2VyRG9jPigidXNlcnMiKTsNCiAgICAgICAgdmFyIG0gPSBkYi5HZXRDb2xsZWN0aW9uPENoYXRNc2dEb2M+KCJtZXNzYWdlcyIpOw0KICAgICAgICB1LkVuc3VyZUluZGV4KHggPT4geC5Vc2VySWQsIHRydWUpOw0KICAgICAgICB1LkVuc3VyZUluZGV4KHggPT4geC5Vc2VyTmFtZSk7DQogICAgICAgIHUuRW5zdXJlSW5kZXgoeCA9PiB4LkRpc3BsYXlOYW1lKTsNCiAgICAgICAgbS5FbnN1cmVJbmRleCh4ID0+IHguVXNlcklkKTsNCiAgICAgICAgbS5FbnN1cmVJbmRleCh4ID0+IHguVGltZXN0YW1wVXRjKTsNCiAgICAgICAgcmV0dXJuIGRiOw0KICAgIH0NCg0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHByaXZhdGUgY2xhc3MgVXNlck1ldGFDYWNoZQ0KICAgIHsNCiAgICAgICAgcHVibGljIHN0cmluZyBVc2VyTmFtZTsNCiAgICAgICAgcHVibGljIHN0cmluZyBEaXNwbGF5TmFtZTsNCiAgICAgICAgcHVibGljIHN0cmluZyBDb2xvckhleDsNCiAgICAgICAgcHVibGljIHN0cmluZyBCYWRnZVNpZzsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgY2xhc3MgVXNlckRvYw0KICAgIHsNCiAgICAgICAgcHVibGljIE9iamVjdElkIElkIHsgZ2V0OyBzZXQ7IH0NCiAgICAgICAgcHVibGljIHN0cmluZyBVc2VySWQgeyBnZXQ7IHNldDsgfQ0KICAgICAgICBwdWJsaWMgc3RyaW5nIFVzZXJOYW1lIHsgZ2V0OyBzZXQ7IH0NCiAgICAgICAgcHVibGljIHN0cmluZyBEaXNwbGF5TmFtZSB7IGdldDsgc2V0OyB9DQogICAgICAgIHB1YmxpYyBzdHJpbmcgQ29sb3JIZXggeyBnZXQ7IHNldDsgfQ0KICAgICAgICBwdWJsaWMgTGlzdDxCYWRnZURvYz4gQmFkZ2VzIHsgZ2V0OyBzZXQ7IH0NCiAgICAgICAgcHVibGljIERhdGVUaW1lIEZpcnN0U2VlblV0YyB7IGdldDsgc2V0OyB9DQogICAgICAgIHB1YmxpYyBEYXRlVGltZSBMYXN0U2VlblV0YyB7IGdldDsgc2V0OyB9DQogICAgfQ0KDQogICAgcHVibGljIGNsYXNzIEJhZGdlRG9jIDogSUVxdWF0YWJsZTxCYWRnZURvYz4NCiAgICB7DQogICAgICAgIHB1YmxpYyBzdHJpbmcgSW1hZ2VVcmwgeyBnZXQ7IHNldDsgfQ0KICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWUgeyBnZXQ7IHNldDsgfQ0KICAgICAgICBwdWJsaWMgaW50PyBWZXJzaW9uIHsgZ2V0OyBzZXQ7IH0NCg0KICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoQmFkZ2VEb2Mgb3RoZXIpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChvdGhlciA9PSBudWxsKQ0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuRXF1YWxzKEltYWdlVXJsID8/ICIiLCBvdGhlci5JbWFnZVVybCA/PyAiIiwgU3RyaW5nQ29tcGFyaXNvbi5PcmRpbmFsKSAmJiBzdHJpbmcuRXF1YWxzKE5hbWUgPz8gIiIsIG90aGVyLk5hbWUgPz8gIiIsIFN0cmluZ0NvbXBhcmlzb24uT3JkaW5hbCkgJiYgKFZlcnNpb24gPz8gLTEpID09IChvdGhlci5WZXJzaW9uID8/IC0xKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKSA9PiBFcXVhbHMob2JqIGFzIEJhZGdlRG9jKTsNCiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpDQogICAgICAgIHsNCiAgICAgICAgICAgIHVuY2hlY2tlZA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGludCBoYXNoID0gMTc7DQogICAgICAgICAgICAgICAgaGFzaCA9IGhhc2ggKiAyMyArIChJbWFnZVVybCA/PyAiIikuR2V0SGFzaENvZGUoKTsNCiAgICAgICAgICAgICAgICBoYXNoID0gaGFzaCAqIDIzICsgKE5hbWUgPz8gIiIpLkdldEhhc2hDb2RlKCk7DQogICAgICAgICAgICAgICAgaGFzaCA9IGhhc2ggKiAyMyArIChWZXJzaW9uID8/IC0xKS5HZXRIYXNoQ29kZSgpOw0KICAgICAgICAgICAgICAgIHJldHVybiBoYXNoOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHJpdmF0ZSBjbGFzcyBCYWRnZURvY0NvbXBhcmVyIDogSUVxdWFsaXR5Q29tcGFyZXI8QmFkZ2VEb2M+DQogICAgew0KICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEJhZGdlRG9jQ29tcGFyZXIgSW5zdGFuY2UgPSBuZXcgQmFkZ2VEb2NDb21wYXJlcigpOw0KICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoQmFkZ2VEb2MgeCwgQmFkZ2VEb2MgeSkgPT4geD8uRXF1YWxzKHkpID8/IHkgaXMgbnVsbDsNCiAgICAgICAgcHVibGljIGludCBHZXRIYXNoQ29kZShCYWRnZURvYyBvYmopID0+IG9iaj8uR2V0SGFzaENvZGUoKSA/PyAwOw0KICAgIH0NCg0KICAgIHB1YmxpYyBjbGFzcyBFbW90ZURvYw0KICAgIHsNCiAgICAgICAgcHVibGljIHN0cmluZyBOYW1lIHsgZ2V0OyBzZXQ7IH0NCiAgICAgICAgcHVibGljIHN0cmluZyBUeXBlIHsgZ2V0OyBzZXQ7IH0NCiAgICAgICAgcHVibGljIGludCBTdGFydEluZGV4IHsgZ2V0OyBzZXQ7IH0NCiAgICAgICAgcHVibGljIGludCBFbmRJbmRleCB7IGdldDsgc2V0OyB9DQogICAgICAgIHB1YmxpYyBzdHJpbmcgSW1hZ2VVcmwgeyBnZXQ7IHNldDsgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyBjbGFzcyBDaGF0TXNnRG9jDQogICAgew0KICAgICAgICBwdWJsaWMgT2JqZWN0SWQgSWQgeyBnZXQ7IHNldDsgfQ0KICAgICAgICBwdWJsaWMgc3RyaW5nIFVzZXJJZCB7IGdldDsgc2V0OyB9DQogICAgICAgIHB1YmxpYyBzdHJpbmcgTWVzc2FnZSB7IGdldDsgc2V0OyB9DQogICAgICAgIHB1YmxpYyBMaXN0PEVtb3RlRG9jPiBFbW90ZXMgeyBnZXQ7IHNldDsgfQ0KICAgICAgICBwdWJsaWMgRGF0ZVRpbWUgVGltZXN0YW1wVXRjIHsgZ2V0OyBzZXQ7IH0NCiAgICB9DQp9",
                                "precompile": false,
                                "delayStart": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "6d5264aa-a382-4d90-8e29-08885133fe17",
                                "weight": 0.0,
                                "type": 99999,
                                "parentId": "5d4f28a0-d813-47d7-8448-dbda95968a3f",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "5d4f28a0-d813-47d7-8448-dbda95968a3f",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    }
                ],
                "collapsedGroups": [
                    "5f7f9dfb-3cf3-4511-b7a7-d272411b8e82",
                    "25d1f17e-8274-4ce1-99db-8852adacd1ec"
                ]
            },
            {
                "id": "4e329098-fc09-449d-82c1-4f174aeab3d9",
                "queue": "00000000-0000-0000-0000-000000000000",
                "enabled": true,
                "excludeFromHistory": true,
                "excludeFromPending": false,
                "name": "[MOD TOOLS] [#] 6 - User Chat Log Listener",
                "group": "MOD TOOLS - # Settings",
                "alwaysRun": false,
                "randomAction": false,
                "concurrent": false,
                "triggers": [],
                "subActions": [
                    {
                        "name": "Code",
                        "color": null,
                        "random": false,
                        "subActions": [
                            {
                                "value": "+++ DO NOT EDIT ANYTHING UNLESS YOU KNOW WHAT YOU ARE DOING +++",
                                "color": "#FF0000",
                                "id": "df953772-0bb3-4902-8416-0fb3ca83aee5",
                                "weight": 0.0,
                                "type": 1009,
                                "parentId": "642f0613-f082-4690-80d5-20f50e2cb7bf",
                                "enabled": true,
                                "index": 0
                            },
                            {
                                "name": "[MOD TOOLS]  User Chat Log Listener",
                                "description": null,
                                "references": [
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\mscorlib.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Net.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Runtime.Serialization.dll",
                                    ".\\LiteDB.dll",
                                    ".\\System.Text.Encodings.Web.dll",
                                    ".\\System.Reflection.Metadata.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\netstandard.dll",
                                    "C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\System.Core.dll"
                                ],
                                "byteCode": "dXNpbmcgU3lzdGVtOw0KdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7DQp1c2luZyBTeXN0ZW0uSU87DQp1c2luZyBTeXN0ZW0uTmV0Ow0KdXNpbmcgU3lzdGVtLlRleHQ7DQp1c2luZyBTeXN0ZW0uVGhyZWFkaW5nOw0KdXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrczsNCnVzaW5nIExpdGVEQjsNCg0KcHVibGljIGNsYXNzIENQSElubGluZQ0Kew0KICAgIHB1YmxpYyBib29sIEV4ZWN1dGUoKQ0KICAgIHsNCiAgICAgICAgbG9jayAoX2xvY2spDQogICAgICAgIHsNCiAgICAgICAgICAgIEdldEV4dGVuc2lvbkluZm8oKTsNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgaWYgKFN5c3RlbS5UaHJlYWRpbmcuSW50ZXJsb2NrZWQuQ29tcGFyZUV4Y2hhbmdlKHJlZiBfcnVubmluZ0ZsYWcsIDEsIDApID09IDEpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUG9zdFRvTG9nKCJBbHJlYWR5IHJ1bm5pbmcsIHNraXBwaW5nLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBQb3N0VG9Mb2coIkluaXRpYXRpbmcuLi4iKTsNCiAgICAgICAgICAgIF9jdHMgPSBuZXcgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UoKTsNCiAgICAgICAgICAgIF8gPSBTdGFydEFzeW5jKF9jdHMuVG9rZW4pOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBEaXNwb3NlKCkNCiAgICB7DQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICBfY3RzLkNhbmNlbCgpOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoDQogICAgICAgIHsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKF9saXN0ZW5lciAhPSBudWxsKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgX2xpc3RlbmVyLlN0b3AoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2gNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBfbGlzdGVuZXIuQ2xvc2UoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2gNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgX2xpc3RlbmVyID0gbnVsbDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBjYXRjaA0KICAgICAgICB7DQogICAgICAgIH0NCg0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChfc2VydmVyVGFzayAhPSBudWxsKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgX3NlcnZlclRhc2suV2FpdCgxMDAwKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2gNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgX3NlcnZlclRhc2sgPSBudWxsOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGNhdGNoDQogICAgICAgIHsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKF9kYiAhPSBudWxsKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgX2RiLkRpc3Bvc2UoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2gNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgX2RiID0gbnVsbDsNCiAgICAgICAgICAgICAgICBfdXNlcnMgPSBudWxsOw0KICAgICAgICAgICAgICAgIF9tZXNzYWdlcyA9IG51bGw7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2gNCiAgICAgICAgew0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICBTeXN0ZW0uVGhyZWFkaW5nLkludGVybG9ja2VkLkV4Y2hhbmdlKHJlZiBfcnVubmluZ0ZsYWcsIDApOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoDQogICAgICAgIHsNCiAgICAgICAgfQ0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIH0NCg0KICAgIHByaXZhdGUgYXN5bmMgVGFzayBTdGFydEFzeW5jKENhbmNlbGxhdGlvblRva2VuIGN0KQ0KICAgIHsNCiAgICAgICAgQ1BILlNldEdsb2JhbFZhcigidGF3bWFlX01PRF9UT09MU19DaGF0TG9nX0xpc3RlbmVyU3RhdGUiLCB0cnVlLCBmYWxzZSk7DQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICBEaXJlY3RvcnkuQ3JlYXRlRGlyZWN0b3J5KERiRm9sZGVyKTsNCiAgICAgICAgICAgIFRvdWNoRGJTaWduYXR1cmUoKTsNCiAgICAgICAgICAgIF9kYiA9IE9wZW5SZWFkT25seVdpdGhSZXRyeShEYlBhdGgsIDEwLCAxNTAsIGN0KTsNCiAgICAgICAgICAgIF91c2VycyA9IF9kYi5HZXRDb2xsZWN0aW9uPFVzZXJEb2M+KCJ1c2VycyIpOw0KICAgICAgICAgICAgX21lc3NhZ2VzID0gX2RiLkdldENvbGxlY3Rpb248Q2hhdE1zZ0RvYz4oIm1lc3NhZ2VzIik7DQogICAgICAgICAgICBfbGFzdFJlbG9hZCA9IERhdGVUaW1lLlV0Y05vdzsNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgX3BvcnRJblVzZSA9IGF3YWl0IEJpbmRMaXN0ZW5lcldpdGhGYWxsYmFjayhuZXdbXSB7IDE4MDgxLCAxODA4MiwgMTgwODMsIDE4MDg0LCAxODA4NSwgMTgwODYsIDE4MDg3LCAxODA4OCwgMTgwODksIDE4MDkwIH0sIGN0KS5Db25maWd1cmVBd2FpdChmYWxzZSk7DQogICAgICAgICAgICBpZiAoX3BvcnRJblVzZSA9PSAwKQ0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbigiTm8gYXZhaWxhYmxlIHBvcnQgZm91bmQuIik7DQogICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgIFBvc3RUb0xvZygiQm91bmQgaHR0cDovLzEyNy4wLjAuMToiICsgX3BvcnRJblVzZSArICIvIik7DQogICAgICAgICAgICBfc2VydmVyVGFzayA9IFNlcnZlckxvb3BBc3luYyhjdCk7DQogICAgICAgICAgICBhd2FpdCBfc2VydmVyVGFzay5Db25maWd1cmVBd2FpdChmYWxzZSk7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKE9wZXJhdGlvbkNhbmNlbGVkRXhjZXB0aW9uKQ0KICAgICAgICB7DQogICAgICAgICAgICBQb3N0VG9Mb2coIkNhbmNlbGVkLiIpOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpDQogICAgICAgIHsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiRmF0YWwgZXJyb3I6ICIgKyBleC5NZXNzYWdlKTsNCiAgICAgICAgfQ0KICAgICAgICBmaW5hbGx5DQogICAgICAgIHsNCiAgICAgICAgICAgIERpc3Bvc2UoKTsNCiAgICAgICAgICAgIENQSC5VbnNldEdsb2JhbFZhcigidGF3bWFlX01PRF9UT09MU19DaGF0TG9nX0xpc3RlbmVyU3RhdGUiLCBmYWxzZSk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwcml2YXRlIExpdGVEYXRhYmFzZSBPcGVuUmVhZE9ubHlXaXRoUmV0cnkoc3RyaW5nIHBhdGgsIGludCByZXRyaWVzLCBpbnQgZGVsYXlNcywgQ2FuY2VsbGF0aW9uVG9rZW4gY3QpDQogICAgew0KICAgICAgICBFeGNlcHRpb24gbGFzdCA9IG51bGw7DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcmV0cmllczsgaSsrKQ0KICAgICAgICB7DQogICAgICAgICAgICBjdC5UaHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKCk7DQogICAgICAgICAgICB0cnkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExpdGVEYXRhYmFzZSgkIkZpbGVuYW1lPXtwYXRofTtDb25uZWN0aW9uPVNoYXJlZDtSZWFkT25seT10cnVlIik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGV4KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGxhc3QgPSBleDsNCiAgICAgICAgICAgICAgICBQb3N0VG9Mb2coJCJEQiBvcGVuIGZhaWxlZCAoe2kgKyAxfS97cmV0cmllc30pOiB7ZXguTWVzc2FnZX0iKTsNCiAgICAgICAgICAgICAgICB0cnkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIFRhc2suRGVsYXkoZGVsYXlNcywgY3QpLldhaXQoY3QpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjYXRjaA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oIkZhaWxlZCB0byBvcGVuIExpdGVEQiByZWFkLW9ubHk6ICIgKyAobGFzdD8uTWVzc2FnZSA/PyAidW5rbm93biIpKTsNCiAgICB9DQoNCiAgICBwcml2YXRlIHZvaWQgVG91Y2hEYlNpZ25hdHVyZSgpDQogICAgew0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGZpID0gbmV3IEZpbGVJbmZvKERiUGF0aCk7DQogICAgICAgICAgICBpZiAoZmkuRXhpc3RzKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIF9kYlN0YW1wID0gZmkuTGFzdFdyaXRlVGltZVV0YzsNCiAgICAgICAgICAgICAgICBfZGJTaXplID0gZmkuTGVuZ3RoOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGNhdGNoDQogICAgICAgIHsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHByaXZhdGUgYm9vbCBIYXNEYkNoYW5nZWQoKQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBmaSA9IG5ldyBGaWxlSW5mbyhEYlBhdGgpOw0KICAgICAgICAgICAgaWYgKCFmaS5FeGlzdHMpDQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgcmV0dXJuIGZpLkxhc3RXcml0ZVRpbWVVdGMgIT0gX2RiU3RhbXAgfHwgZmkuTGVuZ3RoICE9IF9kYlNpemU7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2gNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lkIE1heWJlUmVsb2FkRGIoYm9vbCBmb3JjZSkNCiAgICB7DQogICAgICAgIHZhciBub3cgPSBEYXRlVGltZS5VdGNOb3c7DQogICAgICAgIHZhciBkdWUgPSAobm93IC0gX2xhc3RSZWxvYWQpLlRvdGFsTWlsbGlzZWNvbmRzID49IF9yZWxvYWRJbnRlcnZhbE1zOw0KICAgICAgICBpZiAoIShmb3JjZSB8fCBIYXNEYkNoYW5nZWQoKSB8fCBkdWUpKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIF9kYj8uRGlzcG9zZSgpOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoDQogICAgICAgIHsNCiAgICAgICAgfQ0KDQogICAgICAgIF9kYiA9IG51bGw7DQogICAgICAgIF91c2VycyA9IG51bGw7DQogICAgICAgIF9tZXNzYWdlcyA9IG51bGw7DQogICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgX2RiID0gbmV3IExpdGVEYXRhYmFzZSgiRmlsZW5hbWU9IiArIERiUGF0aCArICI7UmVhZE9ubHk9dHJ1ZSIpOw0KICAgICAgICAgICAgX3VzZXJzID0gX2RiLkdldENvbGxlY3Rpb248VXNlckRvYz4oInVzZXJzIik7DQogICAgICAgICAgICBfbWVzc2FnZXMgPSBfZGIuR2V0Q29sbGVjdGlvbjxDaGF0TXNnRG9jPigibWVzc2FnZXMiKTsNCiAgICAgICAgICAgIFRvdWNoRGJTaWduYXR1cmUoKTsNCiAgICAgICAgICAgIF9sYXN0UmVsb2FkID0gbm93Ow0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpDQogICAgICAgIHsNCiAgICAgICAgICAgIFBvc3RUb0xvZygiREIgcmVsb2FkIGZhaWxlZDogIiArIGV4Lk1lc3NhZ2UpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHJpdmF0ZSBhc3luYyBUYXNrPGludD4gQmluZExpc3RlbmVyV2l0aEZhbGxiYWNrKGludFtdIHBvcnRzLCBDYW5jZWxsYXRpb25Ub2tlbiBjdCkNCiAgICB7DQogICAgICAgIGZvcmVhY2ggKHZhciBwIGluIHBvcnRzKQ0KICAgICAgICB7DQogICAgICAgICAgICBjdC5UaHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKCk7DQogICAgICAgICAgICB0cnkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgbCA9IG5ldyBIdHRwTGlzdGVuZXIoKTsNCiAgICAgICAgICAgICAgICBsLlByZWZpeGVzLkFkZCgiaHR0cDovLzEyNy4wLjAuMToiICsgcCArICIvIik7DQogICAgICAgICAgICAgICAgbC5TdGFydCgpOw0KICAgICAgICAgICAgICAgIF9saXN0ZW5lciA9IGw7DQogICAgICAgICAgICAgICAgcmV0dXJuIHA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGV4KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygiUG9ydCAiICsgcCArICIgZmFpbGVkOiAiICsgZXguTWVzc2FnZSk7DQogICAgICAgICAgICAgICAgYXdhaXQgVGFzay5EZWxheSgyMDAsIGN0KS5Db25maWd1cmVBd2FpdChmYWxzZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gMDsNCiAgICB9DQoNCiAgICBwcml2YXRlIGFzeW5jIFRhc2sgU2VydmVyTG9vcEFzeW5jKENhbmNlbGxhdGlvblRva2VuIGN0KQ0KICAgIHsNCiAgICAgICAgUG9zdFRvTG9nKCI9PT09PT09PT09PT09PT09PSBMSVNURU5FUiBMT09QIFNUQVJURUQgPT09PT09PT09PT09PT09PT0iKTsNCiAgICAgICAgd2hpbGUgKCFjdC5Jc0NhbmNlbGxhdGlvblJlcXVlc3RlZCkNCiAgICAgICAgew0KICAgICAgICAgICAgSHR0cExpc3RlbmVyQ29udGV4dCBjdHggPSBudWxsOw0KICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIGdldENvbnRleHRUYXNrID0gX2xpc3RlbmVyLkdldENvbnRleHRBc3luYygpOw0KICAgICAgICAgICAgICAgIHVzaW5nIChjdC5SZWdpc3RlcigoKSA9Pg0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIF9saXN0ZW5lci5TdG9wKCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgY2F0Y2gNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBjdHggPSBhd2FpdCBnZXRDb250ZXh0VGFzay5Db25maWd1cmVBd2FpdChmYWxzZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKE9iamVjdERpc3Bvc2VkRXhjZXB0aW9uKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKEh0dHBMaXN0ZW5lckV4Y2VwdGlvbiBleCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoY3QuSXNDYW5jZWxsYXRpb25SZXF1ZXN0ZWQpDQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygiSHR0cCBleGNlcHRpb246ICIgKyBleC5NZXNzYWdlKTsNCiAgICAgICAgICAgICAgICBhd2FpdCBUYXNrLkRlbGF5KDIwMCwgY3QpLkNvbmZpZ3VyZUF3YWl0KGZhbHNlKTsNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChjdC5Jc0NhbmNlbGxhdGlvblJlcXVlc3RlZCkNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgYXdhaXQgVGFzay5EZWxheSgyMDAsIGN0KS5Db25maWd1cmVBd2FpdChmYWxzZSk7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjYXRjaCAoT3BlcmF0aW9uQ2FuY2VsZWRFeGNlcHRpb24pDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGV4KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFBvc3RUb0xvZygiQWNjZXB0IGVycm9yOiAiICsgZXguTWVzc2FnZSk7DQogICAgICAgICAgICAgICAgYXdhaXQgVGFzay5EZWxheSgyMDAsIGN0KS5Db25maWd1cmVBd2FpdChmYWxzZSk7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChjdHggPT0gbnVsbCkNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIF8gPSBUYXNrLlJ1bigoKSA9PiBIYW5kbGVSZXF1ZXN0KGN0eCksIGN0KTsNCiAgICAgICAgfQ0KDQogICAgICAgIFBvc3RUb0xvZygiPT09PT09PT09PT09PT09PT0gTElTVEVORVIgTE9PUCBFTkRFRCA9PT09PT09PT09PT09PT09PSIpOw0KICAgIH0NCg0KICAgIHByaXZhdGUgdm9pZCBIYW5kbGVSZXF1ZXN0KEh0dHBMaXN0ZW5lckNvbnRleHQgY3R4KQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIE1heWJlUmVsb2FkRGIoZmFsc2UpOw0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICB2YXIgcmVxID0gY3R4LlJlcXVlc3Q7DQogICAgICAgICAgICB2YXIgcmVzID0gY3R4LlJlc3BvbnNlOw0KICAgICAgICAgICAgcmVzLkhlYWRlcnNbIkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbiJdID0gIioiOw0KICAgICAgICAgICAgcmVzLkhlYWRlcnNbIkNhY2hlLUNvbnRyb2wiXSA9ICJuby1zdG9yZSI7DQogICAgICAgICAgICBpZiAocmVxLkh0dHBNZXRob2QgPT0gIk9QVElPTlMiKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJlcy5BZGRIZWFkZXIoIkFjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMiLCAiR0VULCBPUFRJT05TIik7DQogICAgICAgICAgICAgICAgcmVzLkFkZEhlYWRlcigiQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycyIsICJDb250ZW50LVR5cGUiKTsNCiAgICAgICAgICAgICAgICByZXMuU3RhdHVzQ29kZSA9IDIwNDsNCiAgICAgICAgICAgICAgICByZXMuQ2xvc2UoKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgdmFyIHBhdGggPSByZXEuVXJsLkFic29sdXRlUGF0aDsNCiAgICAgICAgICAgIGlmIChwYXRoID09ICIvaGVhbHRoIikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBXcml0ZUpzb24ocmVzLCBuZXcgeyBvayA9IHRydWUsIHBvcnQgPSBfcG9ydEluVXNlLCBzdGFtcCA9IF9kYlN0YW1wLCBzaXplID0gX2RiU2l6ZSB9KTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgaWYgKHBhdGggPT0gIi91c2VycyIgJiYgcmVxLkh0dHBNZXRob2QgPT0gIkdFVCIpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgRW5zdXJlRGJPcGVuKCk7DQogICAgICAgICAgICAgICAgdmFyIGxpc3QgPSBuZXcgTGlzdDxVc2VyRG9jPig1MTIpOw0KICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB1IGluIF91c2Vycy5GaW5kQWxsKCkpDQogICAgICAgICAgICAgICAgICAgIGxpc3QuQWRkKHUpOw0KICAgICAgICAgICAgICAgIFdyaXRlSnNvbihyZXMsIGxpc3QpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBpZiAocGF0aCA9PSAiL21lc3NhZ2VzIiAmJiByZXEuSHR0cE1ldGhvZCA9PSAiR0VUIikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBFbnN1cmVEYk9wZW4oKTsNCiAgICAgICAgICAgICAgICB2YXIgcSA9IFBhcnNlUXVlcnkocmVxLlVybC5RdWVyeSk7DQogICAgICAgICAgICAgICAgc3RyaW5nIHVzZXJJZCA9IHEuVHJ5R2V0VmFsdWUoInVzZXJJZCIsIG91dCB2YXIgdikgPyB2IDogbnVsbDsNCiAgICAgICAgICAgICAgICBpbnQgbGltaXQgPSBDbGFtcChQYXJzZUludChxLCAibGltaXQiLCA1MDApLCAxLCA1MDAwMCk7DQogICAgICAgICAgICAgICAgaW50IHNpbmNlRGF5cyA9IE1hdGguTWF4KFBhcnNlSW50KHEsICJzaW5jZURheXMiLCAwKSwgMCk7DQogICAgICAgICAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KHVzZXJJZCkpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBXcml0ZUVycm9yKHJlcywgNDAwLCAiTWlzc2luZyB1c2VySWQiKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICAgICAgRGF0ZVRpbWU/IHNpbmNlID0gc2luY2VEYXlzID4gMCA/IChEYXRlVGltZT8gKURhdGVUaW1lLlV0Y05vdy5BZGREYXlzKC1zaW5jZURheXMpIDogbnVsbDsNCiAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IG5ldyBMaXN0PENoYXRNc2dEb2M+KE1hdGguTWluKGxpbWl0ICogMiwgNDA5NikpOw0KICAgICAgICAgICAgICAgIGlmIChzaW5jZS5IYXNWYWx1ZSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBtIGluIF9tZXNzYWdlcy5GaW5kKFF1ZXJ5LkFuZChRdWVyeS5FUSgiVXNlcklkIiwgdXNlcklkKSwgUXVlcnkuR1RFKCJUaW1lc3RhbXBVdGMiLCBzaW5jZS5WYWx1ZSkpKSkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5BZGQobSk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcC5Db3VudCA+IGxpbWl0ICogNCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLlNvcnQoKGEsIGIpID0+IERhdGVUaW1lLkNvbXBhcmUoYi5UaW1lc3RhbXBVdGMsIGEuVGltZXN0YW1wVXRjKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXAuQ291bnQgPiBsaW1pdCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcCA9IHRlbXAuR2V0UmFuZ2UoMCwgbGltaXQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBtIGluIF9tZXNzYWdlcy5GaW5kKFF1ZXJ5LkVRKCJVc2VySWQiLCB1c2VySWQpKSkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5BZGQobSk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcC5Db3VudCA+IGxpbWl0ICogNCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLlNvcnQoKGEsIGIpID0+IERhdGVUaW1lLkNvbXBhcmUoYi5UaW1lc3RhbXBVdGMsIGEuVGltZXN0YW1wVXRjKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXAuQ291bnQgPiBsaW1pdCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcCA9IHRlbXAuR2V0UmFuZ2UoMCwgbGltaXQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKHRlbXAuQ291bnQgPiAxKQ0KICAgICAgICAgICAgICAgICAgICB0ZW1wLlNvcnQoKGEsIGIpID0+IERhdGVUaW1lLkNvbXBhcmUoYi5UaW1lc3RhbXBVdGMsIGEuVGltZXN0YW1wVXRjKSk7DQogICAgICAgICAgICAgICAgaWYgKHRlbXAuQ291bnQgPiBsaW1pdCkNCiAgICAgICAgICAgICAgICAgICAgdGVtcCA9IHRlbXAuR2V0UmFuZ2UoMCwgbGltaXQpOw0KICAgICAgICAgICAgICAgIFdyaXRlSnNvbihyZXMsIHRlbXApOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICBXcml0ZUVycm9yKHJlcywgNDA0LCAiTm90IGZvdW5kIik7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKElPRXhjZXB0aW9uKQ0KICAgICAgICB7DQogICAgICAgICAgICB0cnkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBjdHguUmVzcG9uc2UuQWJvcnQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoDQogICAgICAgICAgICB7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBleCkNCiAgICAgICAgew0KICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgV3JpdGVFcnJvcihjdHguUmVzcG9uc2UsIDUwMCwgZXguTWVzc2FnZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjYXRjaA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lkIEVuc3VyZURiT3BlbigpDQogICAgew0KICAgICAgICBpZiAoX2RiICE9IG51bGwpDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIF9kYiA9IE9wZW5SZWFkT25seVdpdGhSZXRyeShEYlBhdGgsIDUsIDE1MCwgQ2FuY2VsbGF0aW9uVG9rZW4uTm9uZSk7DQogICAgICAgIF91c2VycyA9IF9kYi5HZXRDb2xsZWN0aW9uPFVzZXJEb2M+KCJ1c2VycyIpOw0KICAgICAgICBfbWVzc2FnZXMgPSBfZGIuR2V0Q29sbGVjdGlvbjxDaGF0TXNnRG9jPigibWVzc2FnZXMiKTsNCiAgICAgICAgVG91Y2hEYlNpZ25hdHVyZSgpOw0KICAgICAgICBfbGFzdFJlbG9hZCA9IERhdGVUaW1lLlV0Y05vdzsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwcml2YXRlIHN0YXRpYyBEaWN0aW9uYXJ5PHN0cmluZywgc3RyaW5nPiBQYXJzZVF1ZXJ5KHN0cmluZyBxdWVyeSkNCiAgICB7DQogICAgICAgIHZhciBkaWN0ID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBzdHJpbmc+KFN0cmluZ0NvbXBhcmVyLk9yZGluYWxJZ25vcmVDYXNlKTsNCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KHF1ZXJ5KSkNCiAgICAgICAgICAgIHJldHVybiBkaWN0Ow0KICAgICAgICBpbnQgaSA9IHF1ZXJ5LlN0YXJ0c1dpdGgoIj8iKSA/IDEgOiAwOw0KICAgICAgICB3aGlsZSAoaSA8IHF1ZXJ5Lkxlbmd0aCkNCiAgICAgICAgew0KICAgICAgICAgICAgaW50IGFtcCA9IHF1ZXJ5LkluZGV4T2YoJyYnLCBpKTsNCiAgICAgICAgICAgIGlmIChhbXAgPCAwKQ0KICAgICAgICAgICAgICAgIGFtcCA9IHF1ZXJ5Lkxlbmd0aDsNCiAgICAgICAgICAgIHN0cmluZyBwYWlyID0gcXVlcnkuU3Vic3RyaW5nKGksIGFtcCAtIGkpOw0KICAgICAgICAgICAgaW50IGVxID0gcGFpci5JbmRleE9mKCc9Jyk7DQogICAgICAgICAgICBzdHJpbmcga2V5LCB2YWw7DQogICAgICAgICAgICBpZiAoZXEgPj0gMCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBrZXkgPSBwYWlyLlN1YnN0cmluZygwLCBlcSk7DQogICAgICAgICAgICAgICAgdmFsID0gcGFpci5TdWJzdHJpbmcoZXEgKyAxKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBrZXkgPSBwYWlyOw0KICAgICAgICAgICAgICAgIHZhbCA9ICIiOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBrZXkgPSBVcmxEZWNvZGUoa2V5KTsNCiAgICAgICAgICAgIHZhbCA9IFVybERlY29kZSh2YWwpOw0KICAgICAgICAgICAgaWYgKCFkaWN0LkNvbnRhaW5zS2V5KGtleSkpDQogICAgICAgICAgICAgICAgZGljdFtrZXldID0gdmFsOw0KICAgICAgICAgICAgaSA9IGFtcCArIDE7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gZGljdDsNCiAgICB9DQoNCiAgICBwcml2YXRlIHN0YXRpYyBzdHJpbmcgVXJsRGVjb2RlKHN0cmluZyBzKQ0KICAgIHsNCiAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KHMpKQ0KICAgICAgICAgICAgcmV0dXJuICIiOw0KICAgICAgICBzID0gcy5SZXBsYWNlKCIrIiwgIiAiKTsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIHJldHVybiBVcmkuVW5lc2NhcGVEYXRhU3RyaW5nKHMpOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoDQogICAgICAgIHsNCiAgICAgICAgICAgIHJldHVybiBzOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBXcml0ZUpzb24oSHR0cExpc3RlbmVyUmVzcG9uc2UgcmVzLCBvYmplY3Qgb2JqKQ0KICAgIHsNCiAgICAgICAgdmFyIGpzb24gPSBOZXd0b25zb2Z0Lkpzb24uSnNvbkNvbnZlcnQuU2VyaWFsaXplT2JqZWN0KG9iaik7DQogICAgICAgIHZhciBieXRlcyA9IEVuY29kaW5nLlVURjguR2V0Qnl0ZXMoanNvbik7DQogICAgICAgIHJlcy5Db250ZW50VHlwZSA9ICJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04IjsNCiAgICAgICAgcmVzLlN0YXR1c0NvZGUgPSAyMDA7DQogICAgICAgIHJlcy5PdXRwdXRTdHJlYW0uV3JpdGUoYnl0ZXMsIDAsIGJ5dGVzLkxlbmd0aCk7DQogICAgICAgIHJlcy5DbG9zZSgpOw0KICAgIH0NCg0KICAgIHByaXZhdGUgc3RhdGljIHZvaWQgV3JpdGVFcnJvcihIdHRwTGlzdGVuZXJSZXNwb25zZSByZXMsIGludCBzdGF0dXMsIHN0cmluZyBtc2cpDQogICAgew0KICAgICAgICB2YXIganNvbiA9ICJ7XCJlcnJvclwiOlwiIiArIEVzY2FwZShtc2cpICsgIlwifSI7DQogICAgICAgIHZhciBieXRlcyA9IEVuY29kaW5nLlVURjguR2V0Qnl0ZXMoanNvbik7DQogICAgICAgIHJlcy5Db250ZW50VHlwZSA9ICJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04IjsNCiAgICAgICAgcmVzLlN0YXR1c0NvZGUgPSBzdGF0dXM7DQogICAgICAgIHJlcy5PdXRwdXRTdHJlYW0uV3JpdGUoYnl0ZXMsIDAsIGJ5dGVzLkxlbmd0aCk7DQogICAgICAgIHJlcy5DbG9zZSgpOw0KICAgIH0NCg0KICAgIHByaXZhdGUgc3RhdGljIHN0cmluZyBFc2NhcGUoc3RyaW5nIHMpID0+IHMgPT0gbnVsbCA/ICIiIDogcy5SZXBsYWNlKCJcXCIsICJcXFxcIikuUmVwbGFjZSgiXCIiLCAiXFxcIiIpOw0KICAgIHByaXZhdGUgc3RhdGljIGludCBQYXJzZUludChEaWN0aW9uYXJ5PHN0cmluZywgc3RyaW5nPiBxLCBzdHJpbmcga2V5LCBpbnQgZGVmVmFsKSA9PiBxLlRyeUdldFZhbHVlKGtleSwgb3V0IHZhciBzKSAmJiBpbnQuVHJ5UGFyc2Uocywgb3V0IHZhciB2KSA/IHYgOiBkZWZWYWw7DQogICAgcHJpdmF0ZSBzdGF0aWMgaW50IENsYW1wKGludCB2LCBpbnQgbWluLCBpbnQgbWF4KSA9PiB2IDwgbWluID8gbWluIDogKHYgPiBtYXggPyBtYXggOiB2KTsNCiAgICBwcml2YXRlIHZvaWQgR2V0RXh0ZW5zaW9uSW5mbygpDQogICAgew0KICAgICAgICBpZiAoZXh0ZW5zaW9uTmFtZSA9PSBudWxsIHx8IGV4dGVuc2lvblZlcnNpb24gPT0gbnVsbCkNCiAgICAgICAgew0KICAgICAgICAgICAgQ1BILkV4ZWN1dGVNZXRob2QoIk1PRCBUT09MUyBWZXJzaW9uIENoZWNrIiwgIkV4ZWN1dGUiKTsNCiAgICAgICAgICAgIENQSC5UcnlHZXRBcmcoImV4dGVuc2lvbk5hbWUiLCBvdXQgZXh0ZW5zaW9uTmFtZSk7DQogICAgICAgICAgICBDUEguVHJ5R2V0QXJnKCJleHRlbnNpb25WZXJzaW9uIiwgb3V0IGV4dGVuc2lvblZlcnNpb24pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lkIFBvc3RUb0xvZyhzdHJpbmcgbG9nKQ0KICAgIHsNCiAgICAgICAgQ1BILkxvZ0luZm8oJCJbe2V4dGVuc2lvbk5hbWV9IHYue2V4dGVuc2lvblZlcnNpb259XSBbQ0hBVExPRyBMSVNURU5FUl0ge2xvZ30iKTsNCiAgICB9DQoNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBleHRlbnNpb25OYW1lID0gbnVsbDsNCiAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBleHRlbnNpb25WZXJzaW9uID0gbnVsbDsNCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBvYmplY3QgX2xvY2sgPSBuZXcgb2JqZWN0ICgpOw0KICAgIHByaXZhdGUgc3RhdGljIGludCBfcnVubmluZ0ZsYWcgPSAwOw0KICAgIHByaXZhdGUgc3RhdGljIENhbmNlbGxhdGlvblRva2VuU291cmNlIF9jdHMgPSBuZXcgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UoKTsNCiAgICBwcml2YXRlIHN0YXRpYyBIdHRwTGlzdGVuZXIgX2xpc3RlbmVyOw0KICAgIHByaXZhdGUgc3RhdGljIFRhc2sgX3NlcnZlclRhc2s7DQogICAgcHJpdmF0ZSBzdGF0aWMgaW50IF9wb3J0SW5Vc2UgPSAwOw0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHByaXZhdGUgc3RhdGljIExpdGVEYXRhYmFzZSBfZGI7DQogICAgcHJpdmF0ZSBzdGF0aWMgSUxpdGVDb2xsZWN0aW9uPFVzZXJEb2M+IF91c2VyczsNCiAgICBwcml2YXRlIHN0YXRpYyBJTGl0ZUNvbGxlY3Rpb248Q2hhdE1zZ0RvYz4gX21lc3NhZ2VzOw0KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IHN0cmluZyBEYkZvbGRlciA9IFBhdGguQ29tYmluZShBcHBEb21haW4uQ3VycmVudERvbWFpbi5CYXNlRGlyZWN0b3J5LCAidGF3bWFlIC0gTU9EIFRPT0xTIC0gVXNlciBDaGF0IExvZyIpOw0KICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IHN0cmluZyBEYlBhdGggPSBQYXRoLkNvbWJpbmUoRGJGb2xkZXIsICJjaGF0bG9nLmRiIik7DQogICAgcHJpdmF0ZSBzdGF0aWMgRGF0ZVRpbWUgX2RiU3RhbXAgPSBEYXRlVGltZS5NaW5WYWx1ZTsNCiAgICBwcml2YXRlIHN0YXRpYyBsb25nIF9kYlNpemUgPSAtMTsNCiAgICBwcml2YXRlIHN0YXRpYyBEYXRlVGltZSBfbGFzdFJlbG9hZCA9IERhdGVUaW1lLk1pblZhbHVlOw0KICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IGludCBfcmVsb2FkSW50ZXJ2YWxNcyA9IDUwMDA7DQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgcHVibGljIGNsYXNzIFVzZXJEb2MNCiAgICB7DQogICAgICAgIHB1YmxpYyBPYmplY3RJZCBJZCB7IGdldDsgc2V0OyB9DQogICAgICAgIHB1YmxpYyBzdHJpbmcgVXNlcklkIHsgZ2V0OyBzZXQ7IH0NCiAgICAgICAgcHVibGljIHN0cmluZyBVc2VyTmFtZSB7IGdldDsgc2V0OyB9DQogICAgICAgIHB1YmxpYyBzdHJpbmcgRGlzcGxheU5hbWUgeyBnZXQ7IHNldDsgfQ0KICAgICAgICBwdWJsaWMgc3RyaW5nIENvbG9ySGV4IHsgZ2V0OyBzZXQ7IH0NCiAgICAgICAgcHVibGljIExpc3Q8QmFkZ2VEb2M+IEJhZGdlcyB7IGdldDsgc2V0OyB9DQogICAgICAgIHB1YmxpYyBEYXRlVGltZSBGaXJzdFNlZW5VdGMgeyBnZXQ7IHNldDsgfQ0KICAgICAgICBwdWJsaWMgRGF0ZVRpbWUgTGFzdFNlZW5VdGMgeyBnZXQ7IHNldDsgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyBjbGFzcyBCYWRnZURvYw0KICAgIHsNCiAgICAgICAgcHVibGljIHN0cmluZyBJbWFnZVVybCB7IGdldDsgc2V0OyB9DQogICAgICAgIHB1YmxpYyBzdHJpbmcgTmFtZSB7IGdldDsgc2V0OyB9DQogICAgICAgIHB1YmxpYyBpbnQ/IFZlcnNpb24geyBnZXQ7IHNldDsgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyBjbGFzcyBFbW90ZURvYw0KICAgIHsNCiAgICAgICAgcHVibGljIHN0cmluZyBOYW1lIHsgZ2V0OyBzZXQ7IH0NCiAgICAgICAgcHVibGljIHN0cmluZyBUeXBlIHsgZ2V0OyBzZXQ7IH0NCiAgICAgICAgcHVibGljIGludCBTdGFydEluZGV4IHsgZ2V0OyBzZXQ7IH0NCiAgICAgICAgcHVibGljIGludCBFbmRJbmRleCB7IGdldDsgc2V0OyB9DQogICAgICAgIHB1YmxpYyBzdHJpbmcgSW1hZ2VVcmwgeyBnZXQ7IHNldDsgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyBjbGFzcyBDaGF0TXNnRG9jDQogICAgew0KICAgICAgICBwdWJsaWMgT2JqZWN0SWQgSWQgeyBnZXQ7IHNldDsgfQ0KICAgICAgICBwdWJsaWMgc3RyaW5nIFVzZXJJZCB7IGdldDsgc2V0OyB9DQogICAgICAgIHB1YmxpYyBzdHJpbmcgTWVzc2FnZSB7IGdldDsgc2V0OyB9DQogICAgICAgIHB1YmxpYyBMaXN0PEVtb3RlRG9jPiBFbW90ZXMgeyBnZXQ7IHNldDsgfQ0KICAgICAgICBwdWJsaWMgRGF0ZVRpbWUgVGltZXN0YW1wVXRjIHsgZ2V0OyBzZXQ7IH0NCiAgICB9DQp9",
                                "precompile": false,
                                "delayStart": false,
                                "saveResultToVariable": false,
                                "saveToVariable": null,
                                "id": "670f7991-4dc4-42e3-9b74-5f3339509a21",
                                "weight": 0.0,
                                "type": 99999,
                                "parentId": "642f0613-f082-4690-80d5-20f50e2cb7bf",
                                "enabled": true,
                                "index": 1
                            }
                        ],
                        "id": "642f0613-f082-4690-80d5-20f50e2cb7bf",
                        "weight": 0.0,
                        "type": 99900,
                        "parentId": null,
                        "enabled": true,
                        "index": 0
                    }
                ],
                "collapsedGroups": []
            }
        ],
        "queues": [],
        "commands": [
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "d941d1fa-9880-4fff-9683-6090185af581",
                "name": "[MOD TOOLS] Enable Follow Attack Protection",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!enableFollowAttackProtection\r\n!FollowAttackProtectionOn",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "7221ec58-a109-4183-b25e-0ad257ed9765",
                "name": "[MOD TOOLS] Disable Follow Attack Protection",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!disableFollowAttackProtection\r\n!FollowAttackProtectionOff",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "ae7f9b19-7231-45e4-ab1d-4122f9a94a3e",
                "name": "[MOD TOOLS] Add URL To Whitelist",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!addUrl\r\n!urlAdd\r\n!addLink\r\n!linkAdd\r\n!whitelistUrl\r\n!whitelistLink",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "a2de7814-7a04-4943-89e1-55e742e118b1",
                "name": "[MOD TOOLS] Remove URL From Whitelist",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!removeUrl\r\n!removeLink\r\n!deleteUrl\r\n!deleteLink\r\n!delUrl\r\n!delLink",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [],
                "id": "ff744a11-2e56-40de-a889-c82c1beedf6b",
                "name": "[MOD TOOLS] Get Whitelisted URLs",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!whitelistedUrls\r\n!whitelistedLinks",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "c54fdd81-1722-4e5b-8d22-3f83c9133bde",
                "name": "[MOD TOOLS] Remove Latest Followers",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!removeLatestFollowers",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "62d18ad6-12e0-4af5-bf77-de8ceca223ed",
                "name": "[MOD TOOLS] Add Blacklisted Word",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!banWord\r\n!blacklistWord",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "f28744c1-53ca-4ef7-aae2-039294938d01",
                "name": "[MOD TOOLS] Remove Blacklist Word",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!unbanWord\r\n!removeBlacklistedWord",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "2de7c2c8-0624-4cc3-8a5e-344c2a9a724b",
                "name": "[MOD TOOLS] Toggle Caps Protection",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!toggleCapsProtection\r\n!capsProtection",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "1c97593f-c072-4899-9432-a6c75048180d",
                "name": "[MOD TOOLS] Toggle Emote Protection",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!toggleEmoteProtection\r\n!emoteProtection",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "f9fac1f9-95b9-414e-a4ab-7ce16c87399b",
                "name": "[MOD TOOLS] Toggle ASCII Protection",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!toggleAsciiProtection\r\n!asciiProtection\r\n!asciProtection\r\n!toggleAsciProtection",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "b1fa5754-50f3-43ed-9432-1b150a781421",
                "name": "[MOD TOOLS] Toggle Blacklisted Words Filter",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!toggleBlacklistedWordsFilter",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "9b310e87-1f60-4a39-8c03-8f1c2958bf3d",
                "name": "[MOD TOOLS] Toggle URL Filter",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!toggleUrlFilter\r\n!urlFilter",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "cc428224-b3ef-4d62-897f-9af1ef3faadb",
                "name": "[MOD TOOLS] Permit User To Post URLs",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!permit",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "490dc961-db21-46dc-b60c-2aa266b01219",
                "name": "[MOD TOOLS] Add User To URL Whitelist",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!urlAddUser",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "c16284b2-2c24-4c6c-a15b-caddbe9b1b56",
                "name": "[MOD TOOLS] Remove User From URL Whitelist",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!urlRemoveUser",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "16f567a8-f439-472e-b3a3-e153fb070b38",
                "name": "[MOD TOOLS] Create Poll",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!createPoll\r\n!pollCreate\r\n!poll",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "6a78bd24-cf74-41d5-bf76-7debacb2aec1",
                "name": "[MOD TOOLS] Create Prediction",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!createPrediction\r\n!prediction\r\n!predictionCreate",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "c749223e-5260-4047-bb84-1994fea473c0",
                "name": "[MOD TOOLS] End Poll",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!endPoll\r\n!pollEnd",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "bc1a2f37-b586-4d51-be5e-57ec9e5720cc",
                "name": "[MOD TOOLS] Lock Prediction",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!lock\r\n!lockPrediction\r\n!predictionLock",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "4ed063c2-6bb1-4ef7-911a-b36a55446aed",
                "name": "[MOD TOOLS] Resolve Prediction",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!resolvePrediction\r\n!predictionResolve\r\n!resolve",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "c5fd847a-2a8d-4c41-b5c8-55da2617797c",
                "name": "[MOD TOOLS] Cancel Prediction",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!cancelPrediction\r\n!predictionCancel",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "55f39ae4-901d-4bdb-8909-b8c57574b30f",
                "name": "[MOD TOOLS] Get OBS Scenes",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!scenes\r\n!getScenes\r\n!obsScenes",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "fc8a7a78-4ba3-4c28-a0ca-f4ca0266a5f5",
                "name": "[MOD TOOLS] Change Scene",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!scene\r\n!changeScene\r\n!setScene",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "f901f12c-8ec4-4189-b11a-0878b0a1ee77",
                "name": "[MOD TOOLS] Refresh Browser Sources",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!refreshBrowserSources\r\n!browserSourceRefresh",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "971a0663-6df3-4f75-8f7c-f16888085726",
                "name": "[MOD TOOLS] Refresh Audio Sources",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!refreshAudio\r\n!audioRefresh\r\n!refAudio\r\n!redAud\r\n!audioRef\r\n!audRef",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "2ea7c976-9993-4762-b5fa-454791967d48",
                "name": "[MOD TOOLS] End Stream",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!endStream\r\n!streamEnd",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "16a3ae79-c939-447e-b21a-2ce84b2744c6",
                "name": "[MOD TOOLS] Toggle Hate Raid Protection",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!hateRaid\r\n!hateRaidProtection",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "ec3d7f9e-ecfc-4aec-b05c-39287e5e249a",
                "name": "[MOD TOOLS] Enable Rewards",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!enableRewards\r\n!enableReward\r\n!rewardEnable\r\n!rewardsEnable",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "4162e36d-bdd2-457a-a57b-3c8305b04f1a",
                "name": "[MOD TOOLS] Disable Reward",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!rewardDisable\r\n!rewardsDisable\r\n!disableReward\r\n!disableRewards",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "e4e5ca3a-fff6-4d3d-8340-a0a24bacfe70",
                "name": "[MOD TOOLS] Pause Rewards",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!pauseRewards\r\n!pauseReward\r\n!rewardPause\r\n!rewardsPause",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "4683bd7a-eeec-4082-b7e1-52f309d4b178",
                "name": "[MOD TOOLS] Unpause Rewards",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!unpauseReward\r\n!unpauseRewards\r\n!rewardUnpause\r\n!rewardsUnpause",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "34ccffa5-1377-4683-94db-e839e8c3f29f",
                "name": "[MOD TOOLS] Change Reward Title",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!rewardTitle\r\n!changeRewardTitle\r\n!setRewardTitle\r\n!rewardName\r\n!changeRewardName\r\n!setRewardName",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "24a54114-f936-45fa-9925-fe6cb19ed242",
                "name": "[MOD TOOLS] Change Reward Prompt",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!rewardPrompt\r\n!changeRewardPrompt\r\n!setRewardPrompt\r\n!rewardDescription\r\n!setRewardDescription\r\n!changeRewardDescription",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "d5fa29e0-fe5b-47ac-af33-a8acc1bbf1ee",
                "name": "[MOD TOOLS] Change Reward Cost",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!rewardCost\r\n!changeRewardCost\r\n!setRewardCost\r\n!rewardPrice",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 21,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "391d7872-fc7f-4c84-81ac-ea66e061267a",
                "name": "[MOD TOOLS] Add Custom Command",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!addCom\r\n!addCommand\r\n!commandAdd\r\n!comAdd",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "0d7197ef-8606-4f22-878d-b83c6ef4bda6",
                "name": "[MOD TOOLS] Edit Custom Command",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!editCommand\r\n!editCom\r\n!comEdit\r\n!commandEdit",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "f3212dda-792b-4f44-acb3-b59098bd1aed",
                "name": "[MOD TOOLS] Remove Custom Command",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!removeCommand\r\n!removeCom\r\n!comRemove\r\n!commandRemove\r\n!deleteCom\r\n!delCom\r\n!comDel\r\n!deleteCommand",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [],
                "id": "cccf8945-2962-4f24-b016-98d47e5d9875",
                "name": "[MOD TOOLS] Get Custom Commands",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!customCommands",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [],
                "id": "731ba641-8dab-4695-89a9-55722fd1c733",
                "name": "[MOD TOOLS] Custom Commands (do not edit)",
                "enabled": false,
                "include": false,
                "mode": 1,
                "command": "^!",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "08d26e53-ad50-472c-8f1f-5bc75fe62367",
                "name": "[MOD TOOLS] Set Title",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!title\r\n!changeTitle\r\n!setTitle\r\n!channelTitle",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "b0724a5b-a33b-488b-aaec-56ed2527b069",
                "name": "[MOD TOOLS] Add Tag",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!addTag\r\n!tagAdd",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "de05d21d-b99a-466d-b5f3-5be7314ca559",
                "name": "[MOD TOOLS] Remove Tag",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!removeTag\r\n!tagRemove\r\n!deleteTag\r\n!tagDelete",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [],
                "id": "5bb85303-384a-4465-8c97-a55a0bc0a208",
                "name": "[MOD TOOLS] Translate Message",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!translate",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "16055fd0-1395-4af8-bfa6-a501edbbe112",
                "name": "[MOD TOOLS] Timeout User",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!timeout\r\n!to",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "66b9879e-165f-43a9-bc0a-b22e00d74ab9",
                "name": "[MOD TOOLS] Ban User",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!ban",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 7,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "a863491c-b49c-4291-ae7b-f4e17fe12264",
                "name": "[MOD TOOLS] Set Game",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!game\r\n!changeGame\r\n!setGame\r\n!gameSet\r\n!category\r\n!setCategory\r\n!changeCategory",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "0afb2611-d976-4359-9d40-136fe6629a64",
                "name": "[MOD TOOLS] Shoutout User",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!shoutout\r\n!so",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "ebd478fb-0f0f-40c9-9291-4e738b1a0349",
                "name": "[MOD TOOLS] Run Ads",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!runAds\r\n!adsRun\r\n!playAds",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "d79bcc12-791d-41fb-a9b8-8781bf19a850",
                "name": "[MOD TOOLS] Get Pre-Roll Ad Free Time",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!prerolls\r\n!prerollAds\r\n!prerollTime",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "1cabe424-b9c9-48bf-81ae-39f8210b772f",
                "name": "[MOD TOOLS] Snooze Ad",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!snooze\r\n!adSnooze\r\n!snoozeAd",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "4dfe89cf-8c45-4f1a-9741-64785b714a59",
                "name": "[MOD TOOLS] Manually Remove Botted Followers",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!removeBottedFollowers",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "08b16f50-f9eb-461d-8bfb-16cc57953964",
                "name": "[MOD TOOLS] Skip TTS",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!skipTTS\r\n!ttsStop\r\n!stopTTS\r\n!ttsStop",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "83c8d00b-672d-4105-a873-c221d6a71029",
                "name": "[MOD TOOLS] Get Al Mod Commands",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!modCommands",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "40f3abf9-bf74-41a4-b76e-8ee6dfec27d4",
                "name": "[MOD TOOLS] Change Reward Cooldown",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!rewardCooldown\r\n!cooldownReward",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    null,
                    "Moderators"
                ],
                "id": "186cd42a-6002-4e22-b4e8-e243de082bd1",
                "name": "[MOD TOOLS] Change Reward Max Per Stream",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!rewardMaxPerStream\r\n!rewardMax\r\n!rewardLimit\r\n!limitReward",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            },
            {
                "permittedUsers": [],
                "permittedGroups": [
                    "Moderators"
                ],
                "id": "a5ed4bf5-2700-46db-9f17-4e199402b27c",
                "name": "[MOD TOOLS] Change Reward Max Per User Per Stream",
                "enabled": false,
                "include": false,
                "mode": 0,
                "command": "!rewardMaxPerUserPerStream\r\n!rewardMaxUser\r\n!rewardLimitUser\r\n!maxUserReward",
                "regexExplicitCapture": false,
                "location": 0,
                "ignoreBotAccount": true,
                "ignoreInternal": true,
                "sources": 23,
                "persistCounter": false,
                "persistUserCounter": false,
                "caseSensitive": false,
                "globalCooldown": 0,
                "userCooldown": 0,
                "group": "MOD TOOLS",
                "grantType": 0
            }
        ],
        "websocketServers": [],
        "websocketClients": [],
        "timers": []
    },
    "version": 23,
    "exportedFrom": "1.0.0",
    "minimumVersion": "1.0.0-alpha.1"
}